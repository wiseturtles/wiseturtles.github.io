<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Wise Turtles</title><link href="http://blog.wiseturtles.com/" rel="alternate"></link><link href="http://blog.wiseturtles.com/feeds/asm.atom.xml" rel="self"></link><id>http://blog.wiseturtles.com/</id><updated>2016-06-17T20:00:00+08:00</updated><entry><title>Ubuntu+Vimé…ç½®æ±‡ç¼–ç¨‹åºå¼€å‘ç¯å¢ƒ</title><link href="http://blog.wiseturtles.com/posts/setup-asm-development-environment.html" rel="alternate"></link><published>2016-06-17T20:00:00+08:00</published><updated>2016-06-17T20:00:00+08:00</updated><author><name>ox0spy</name></author><id>tag:blog.wiseturtles.com,2016-06-17:posts/setup-asm-development-environment.html</id><summary type="html">&lt;p&gt;æœ¬æ–‡ä¸“é—¨ä»‹ç»Ubuntuç³»ç»Ÿä¸ŠåŸºäºVimé…ç½®æ±‡ç¼–ç¨‹åºå¼€å‘ç¯å¢ƒã€‚&lt;/p&gt;
&lt;h2&gt;Ubuntuç³»ç»Ÿé…ç½®&lt;/h2&gt;
&lt;p&gt;æ‰€æœ‰å¼€å‘éƒ½åœ¨Ubuntuä¸Šå®Œæˆï¼Œéœ€è¦ç”¨çš„è½¯ä»¶åŒ…ï¼šbinutils, gcc,&amp;nbsp;gdbç­‰è½¯ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;Ubuntuä¸Šå®‰è£…è½¯ä»¶å¾ˆæ–¹ä¾¿ï¼ŒæŒ‡ä»¤å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt-get install binutils gcc gdb libc6-i386 libc6-dev-i386
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Vimé…ç½®&lt;/h2&gt;
&lt;p&gt;ä¸ªäººæ¯”è¾ƒå–œæ¬¢&lt;a href="https://github.com/wklken/k-vim"&gt;k-vim&lt;/a&gt;ï¼Œæ ¹æ®é¡¹ç›®çš„å®‰è£…æ–‡æ¡£å®‰è£…å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;æ±‡ç¼–æºä»£ç çš„åŸºæœ¬ç»“æ„ç±»ä¼¼ï¼Œæ¯æ¬¡éƒ½å†™ä¸€é &lt;code&gt;.section .data&lt;/code&gt; ä¹‹ç±»çš„å¾ˆéº»çƒ¦ï¼Œé€šè¿‡ä¸‹é¢è¡¥ä¸ï¼Œæ–°å»ºæ±‡ç¼–æºæ–‡ä»¶æ—¶ï¼Œè‡ªåŠ¨åŠ è½½æ¨¡æ¿ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gh"&gt;diff --git a/vimrc b/vimrc&lt;/span&gt;
&lt;span class="gh"&gt;index e073d53..596bcc1 100644&lt;/span&gt;
&lt;span class="gd"&gt;--- a/vimrc&lt;/span&gt;
&lt;span class="gi"&gt;+++ b/vimrc&lt;/span&gt;
&lt;span class="gu"&gt;@@ -580,7 +580,7 @@ autocmd FileType c,cpp,java,go,php,javascript,puppet,python,rust,twig,xml,yml,pe&lt;/span&gt;


&amp;quot; å®šä¹‰å‡½æ•°AutoSetFileHeadï¼Œè‡ªåŠ¨æ’å…¥æ–‡ä»¶å¤´
&lt;span class="gd"&gt;-autocmd BufNewFile *.sh,*.py exec &amp;quot;:call AutoSetFileHead()&amp;quot;&lt;/span&gt;
&lt;span class="gi"&gt;+autocmd BufNewFile *.sh,*.py,*.s exec &amp;quot;:call AutoSetFileHead()&amp;quot;&lt;/span&gt;
function! AutoSetFileHead()
    &amp;quot;å¦‚æœæ–‡ä»¶ç±»å‹ä¸º.shæ–‡ä»¶
    if &amp;amp;filetype == &amp;#39;sh&amp;#39;
&lt;span class="gu"&gt;@@ -593,9 +593,23 @@ function! AutoSetFileHead()&lt;/span&gt;
        call append(1, &amp;quot;\# encoding: utf-8&amp;quot;)
    endif

&lt;span class="gd"&gt;-    normal G&lt;/span&gt;
&lt;span class="gd"&gt;-    normal o&lt;/span&gt;
&lt;span class="gd"&gt;-    normal o&lt;/span&gt;
&lt;span class="gi"&gt;+    &amp;quot;å¦‚æœæ–‡ä»¶ç±»å‹ä¸ºasm&lt;/span&gt;
&lt;span class="gi"&gt;+    if &amp;amp;filetype == &amp;#39;asm&amp;#39;&lt;/span&gt;
&lt;span class="gi"&gt;+        call setline(1, &amp;quot;.section .data&amp;quot;)&lt;/span&gt;
&lt;span class="gi"&gt;+        call append(1, &amp;quot;.section .text&amp;quot;)&lt;/span&gt;
&lt;span class="gi"&gt;+        call append(2, &amp;quot;.globl _start&amp;quot;)&lt;/span&gt;
&lt;span class="gi"&gt;+        call append(3, &amp;quot;_start:&amp;quot;)&lt;/span&gt;
&lt;span class="gi"&gt;+    endif&lt;/span&gt;
&lt;span class="gi"&gt;+&lt;/span&gt;
&lt;span class="gi"&gt;+    if &amp;amp;filetype == &amp;#39;asm&amp;#39;&lt;/span&gt;
&lt;span class="gi"&gt;+        normal G&lt;/span&gt;
&lt;span class="gi"&gt;+        normal o&lt;/span&gt;
&lt;span class="gi"&gt;+    else&lt;/span&gt;
&lt;span class="gi"&gt;+        normal G&lt;/span&gt;
&lt;span class="gi"&gt;+        normal o&lt;/span&gt;
&lt;span class="gi"&gt;+        normal o&lt;/span&gt;
&lt;span class="gi"&gt;+    endif&lt;/span&gt;
&lt;span class="gi"&gt;+&lt;/span&gt;
endfunc
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;åœ¨Ubuntu&amp;nbsp;64ä½ç³»ç»Ÿä¸Šç¼–è¯‘ã€è¿è¡Œ32ä½æ±‡ç¼–&lt;/h2&gt;
&lt;p&gt;ä¹‹å‰æåˆ°è¿‡æˆ‘å­¦ä¹ çš„å‚è€ƒä¹¦ç±è®²çš„æ˜¯32ä½&lt;span class="caps"&gt;AT&lt;/span&gt;&amp;amp;Tæ±‡ç¼–ï¼Œè€Œæˆ‘çš„ç³»ç»Ÿæ˜¯64ä½ï¼Œæ‰€ä»¥ï¼Œè¿™é‡Œä»‹ç»åœ¨64ä½Ubuntuä¸Šç¼–è¯‘ã€è¿è¡Œ32ä½æ±‡ç¼–ç¨‹åºéœ€è¦åšé‚£äº›é…ç½®ã€‚&lt;/p&gt;
&lt;h3&gt;64ä½Ubuntuç¼–è¯‘ã€é“¾æ¥32ä½æ±‡ç¼–ç¨‹åº&lt;/h3&gt;
&lt;p&gt;åœ¨ &lt;code&gt;~/.bashrc&lt;/code&gt; ä¸­æ·»åŠ ä¸‹é¢çš„è¡Œï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# asm i386
alias as=&amp;#39;as --32 -gstabs&amp;#39;
alias ld=&amp;#39;ld -m elf_i386&amp;#39;
alias gcc=&amp;#39;gcc -m32&amp;#39;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ¯æ¬¡è¾“å…¥æŒ‡ä»¤ç¼–è¯‘ã€è¿è¡Œã€æŸ¥çœ‹è¿”å›å€¼ä¹Ÿå¾ˆéº»çƒ¦ï¼Œå¯ä»¥å†™ä¸ªè„šæœ¬è‡ªåŠ¨å®Œæˆè¿™äº›å·¥ä½œï¼Œå‚è€ƒï¼š&lt;a href="http://blog.wiseturtles.com/posts/Compile-Link-and-Run-ASM-Program.html"&gt;ç¼–è¯‘ã€é“¾æ¥ã€è¿è¡Œæ±‡ç¼–ç¨‹åº&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ³¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸Šé¢é“¾æ¥ä¸­æåˆ°çš„é‚£å¨è„šæœ¬åŸºæœ¬å¯ä»¥ç”¨ &lt;code&gt;gcc -m32 -o myhello myhello.s&lt;/code&gt; ä»£æ›¿ğŸ˜‚&lt;/li&gt;
&lt;li&gt;å¦‚æœç”¨ä¸Šé¢çš„gccæŒ‡ä»¤ç¼–è¯‘æ±‡ç¼–ä»£ç ï¼Œåªèƒ½åœ¨æ±‡ç¼–ä»£ç ä¸­ä½¿ç”¨&lt;code&gt;.globl main&lt;/code&gt;ï¼›è€Œä¸èƒ½ä½¿ç”¨asé»˜è®¤çš„&lt;code&gt;.globl _start&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Vim&lt;/h3&gt;
&lt;h4&gt;asmåœ¨Vimä¸­çš„è¯­æ³•æ£€æŸ¥&lt;/h4&gt;
&lt;p&gt;&lt;a href="https://github.com/wklken/k-vim"&gt;k-vim&lt;/a&gt;ä½¿ç”¨&lt;code&gt;syntastic&lt;/code&gt;åšè¯­æ³•æ£€æŸ¥ï¼Œ&lt;code&gt;syntastic&lt;/code&gt;å¯¹asmæºç é»˜è®¤æ£€æŸ¥ä¼šä½¿ç”¨&lt;code&gt;as&lt;/code&gt;ç¼–è¯‘æºç ï¼Œå¦‚æœä¸æŒ‡å®š&lt;code&gt;as --32&lt;/code&gt;æœ‰äº›32ä½å¤„ç†å™¨ç‰¹æœ‰çš„æŒ‡ä»¤ä¼šå¼•èµ·æŠ¥é”™ã€‚&lt;/p&gt;
&lt;p&gt;ç°è±¡å°±æ˜¯æ¯æ¬¡åœ¨Vimä¸­&lt;code&gt;:w&lt;/code&gt;ä¿å­˜æ—¶ï¼Œå¯èƒ½ä¼šæŠ¥ï¼š&lt;code&gt;Error: invalid instruction suffix for 'push'&lt;/code&gt; æˆ– &lt;code&gt;Error: 'jcxz' is not supported in 64-bit mode&lt;/code&gt; ä¹‹ç±»çš„é”™è¯¯ã€‚&lt;/p&gt;
&lt;p&gt;å¯ä»¥åœ¨vimé…ç½®ä¸­æŒ‡å®š&lt;code&gt;g:syntastic_asm_compiler_options&lt;/code&gt;å‚æ•°ï¼Œé¿å…é”™è¯¯ï¼Œè¡¥ä¸å¦‚ä¸‹:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gh"&gt;diff --git a/vimrc.bundles b/vimrc.bundles&lt;/span&gt;
&lt;span class="gh"&gt;index c7428e8..7a4555d 100644&lt;/span&gt;
&lt;span class="gd"&gt;--- a/vimrc.bundles&lt;/span&gt;
&lt;span class="gi"&gt;+++ b/vimrc.bundles&lt;/span&gt;
&lt;span class="gu"&gt;@@ -299,6 +299,9 @@ call plug#end()&lt;/span&gt;
    &amp;quot; let g:syntastic_javascript_checkers = [&amp;#39;jsl&amp;#39;, &amp;#39;jshint&amp;#39;]
    &amp;quot; let g:syntastic_html_checkers=[&amp;#39;tidy&amp;#39;, &amp;#39;jshint&amp;#39;]

&lt;span class="gi"&gt;+    &amp;quot; FIXME: if asm, åœ¨64ä½ç³»ç»Ÿä¸Šå†™32ä½æ±‡ç¼–æ‰éœ€è¦&lt;/span&gt;
&lt;span class="gi"&gt;+    let g:syntastic_asm_compiler_options = &amp;quot;--32&amp;quot;&lt;/span&gt;
&lt;span class="gi"&gt;+&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ³¨ï¼šå‚è€ƒsyntasticæ–‡æ¡£ - &lt;a href="https://github.com/scrooloose/syntastic/wiki/ASM:---gcc"&gt;&lt;span class="caps"&gt;ASM&lt;/span&gt;:&amp;nbsp;gcc&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;64ä½Ubuntué€šè¿‡gccç”ŸæˆCä»£ç å¯¹åº”çš„32ä½æ±‡ç¼–ä»£ç &lt;/h3&gt;
&lt;p&gt;ç›´æ¥é€šè¿‡gccç”ŸæˆCä»£ç å¯¹åº”çš„æ±‡ç¼–ä»£ç åªéœ€&lt;code&gt;gcc -S&lt;/code&gt;ï¼Œä½†ç”Ÿæˆ32ä½æ±‡ç¼–ä»£ç å°±éœ€è¦ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ gcc -m32 -S hello.c
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ³¨ï¼šéœ€è¦å®‰è£…&lt;code&gt;libc6-dev-i386&lt;/code&gt;ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚&lt;/p&gt;</summary><category term="asm"></category><category term="Linux"></category><category term="Vim"></category></entry><entry><title>ç¼–è¯‘ã€é“¾æ¥ã€è¿è¡Œæ±‡ç¼–ç¨‹åº</title><link href="http://blog.wiseturtles.com/posts/Compile-Link-and-Run-ASM-Program.html" rel="alternate"></link><published>2016-06-17T00:09:00+08:00</published><updated>2016-06-17T00:09:00+08:00</updated><author><name>ox0spy</name></author><id>tag:blog.wiseturtles.com,2016-06-17:posts/Compile-Link-and-Run-ASM-Program.html</id><summary type="html">&lt;p&gt;å­¦ä¹ æ±‡ç¼–è¿‡ç¨‹ä¸­æ¯æ¬¡è¾“å…¥as,&amp;nbsp;ldçš„ä¸€å †å‘½ä»¤è¡Œå‚æ•°ç¼–è¯‘ã€é“¾æ¥ç¨‹åºå®åœ¨å¾ˆéº»çƒ¦ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ï¼Œå†™ä¸ªå°è„šæœ¬å®Œæˆæ±‡ç¼–ç¨‹åºçš„ç¼–è¯‘ã€é“¾æ¥åŠè¿è¡Œã€‚&lt;/p&gt;
&lt;h2&gt;è„šæœ¬ä»‹ç»&lt;/h2&gt;
&lt;p&gt;è„šæœ¬å†…å®¹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="ch"&gt;#!/bin/bash -e&lt;/span&gt;

&lt;span class="k"&gt;function&lt;/span&gt; usage&lt;span class="o"&gt;()&lt;/span&gt;
&lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;usage: &lt;/span&gt;&lt;span class="nv"&gt;$0&lt;/span&gt;&lt;span class="s2"&gt; &amp;lt;asm-file-path&amp;gt;, the &amp;lt;asm-file-path&amp;gt; must end by &amp;#39;.s&amp;#39;&amp;quot;&lt;/span&gt;
    &lt;span class="nb"&gt;exit&lt;/span&gt; 0
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="nb"&gt;test&lt;/span&gt; &lt;span class="nv"&gt;$#&lt;/span&gt; -ne &lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; usage

&lt;span class="k"&gt;if&lt;/span&gt; ! &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$1&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; grep -Eq &lt;span class="s1"&gt;&amp;#39;\.s$&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
    usage
&lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; ! -f &lt;span class="nv"&gt;$1&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
    &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;can not access the asm source code: &amp;lt;&lt;/span&gt;&lt;span class="nv"&gt;$1&lt;/span&gt;&lt;span class="s2"&gt;&amp;gt;&amp;quot;&lt;/span&gt;
    usage
&lt;span class="k"&gt;fi&lt;/span&gt;

&lt;span class="nv"&gt;src&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$1&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;dir&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;dirname &lt;span class="nv"&gt;$src&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;basename&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;basename -s &lt;span class="s1"&gt;&amp;#39;.s&amp;#39;&lt;/span&gt; &lt;span class="nv"&gt;$src&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;obj&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$dir&lt;/span&gt;&lt;span class="s2"&gt;/&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;basename&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;.o&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$dir&lt;/span&gt;&lt;span class="s2"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;$basename&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;as_opts&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;--32 -gstabs&amp;quot;&lt;/span&gt;  &lt;span class="c1"&gt;# -gstabs: ä½¿ç”¨è¯¥å‚æ•°å¯ä»¥é€šè¿‡gdbè°ƒè¯•ä»£ç &lt;/span&gt;
&lt;span class="nv"&gt;ld_opts&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;-m elf_i386&amp;quot;&lt;/span&gt;

&lt;span class="c1"&gt;# check if .global label is not the default &amp;quot;_start&amp;quot;; if not &amp;quot;_start&amp;quot;, then using &amp;quot;-e label&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;global_label&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;grep -Eo &lt;span class="s1"&gt;&amp;#39;\.globl\s+\w+&amp;#39;&lt;/span&gt; &lt;span class="nv"&gt;$src&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; awk &lt;span class="s1"&gt;&amp;#39;{print $NF}&amp;#39;&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; x&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$global_label&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; !&lt;span class="o"&gt;=&lt;/span&gt; x&lt;span class="s2"&gt;&amp;quot;_start&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
    &lt;span class="nv"&gt;ld_opts&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$ld_opts&lt;/span&gt;&lt;span class="s2"&gt; -e &lt;/span&gt;&lt;span class="nv"&gt;$global_label&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="k"&gt;fi&lt;/span&gt;

&lt;span class="c1"&gt;# if asm source code invoke C stdlib, then link C stdlib&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt; grep -qE &lt;span class="s1"&gt;&amp;#39;\s+call\s+\w+&amp;#39;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$src&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
    &lt;span class="nv"&gt;ld_opts&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$ld_opts&lt;/span&gt;&lt;span class="s2"&gt; -lc -dynamic-linker /lib32/ld-linux.so.2&amp;quot;&lt;/span&gt;
&lt;span class="k"&gt;fi&lt;/span&gt;

&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;as &lt;/span&gt;&lt;span class="nv"&gt;$as_opts&lt;/span&gt;&lt;span class="s2"&gt; -o &lt;/span&gt;&lt;span class="nv"&gt;$obj&lt;/span&gt;&lt;span class="s2"&gt; &lt;/span&gt;&lt;span class="nv"&gt;$src&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
as &lt;span class="nv"&gt;$as_opts&lt;/span&gt; -o &lt;span class="nv"&gt;$obj&lt;/span&gt; &lt;span class="nv"&gt;$src&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;ld &lt;/span&gt;&lt;span class="nv"&gt;$ld_opts&lt;/span&gt;&lt;span class="s2"&gt; -o &lt;/span&gt;&lt;span class="nv"&gt;$bin&lt;/span&gt;&lt;span class="s2"&gt; &lt;/span&gt;&lt;span class="nv"&gt;$obj&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
ld &lt;span class="nv"&gt;$ld_opts&lt;/span&gt; -o &lt;span class="nv"&gt;$bin&lt;/span&gt; &lt;span class="nv"&gt;$obj&lt;/span&gt;

&lt;span class="c1"&gt;# `set +e` å‘½ä»¤æ‰§è¡Œè¿”å›å€¼ä¸ä¸ºé›¶ä¹Ÿä¸é€€å‡ºç¨‹åº&lt;/span&gt;
&lt;span class="nb"&gt;set&lt;/span&gt; +e
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;run &lt;/span&gt;&lt;span class="nv"&gt;$bin&lt;/span&gt;&lt;span class="s2"&gt; ...&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;$bin&lt;/span&gt;
&lt;span class="c1"&gt;# æ˜¾ç¤ºæ‰§è¡Œæ±‡ç¼–ç¨‹åºçš„è¿”å›å€¼&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;return value: &lt;/span&gt;&lt;span class="nv"&gt;$?&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="c1"&gt;# `set -e` é‡æ–°å¼€å¯å‘½ä»¤æ‰§è¡Œè¿”å›å€¼ä¸ä¸ºé›¶å°±é€€å‡ºç¨‹åº&lt;/span&gt;
&lt;span class="nb"&gt;set&lt;/span&gt; -e
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;æ³¨ï¼šä¸Šç¯‡æ–‡ç« å·²ç»è®²è¿‡å­¦ä¹ èµ„æ–™æ˜¯&lt;span class="caps"&gt;AT&lt;/span&gt;&amp;amp;T 32ä½æ±‡ç¼–ï¼Œè€Œä¸ªäººç”µè„‘æ˜¯64ä½ç³»ç»Ÿï¼Œæ‰€ä»¥ï¼ŒæŒ‡å®šäº† &lt;code&gt;as --32&lt;/code&gt; å’Œ &lt;code&gt;ld -m elf_i386&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h2&gt;å¦‚ä½•ä½¿ç”¨å‘¢?&lt;/h2&gt;
&lt;p&gt;å°†è„šæœ¬æ”¾å…¥ &lt;code&gt;~/bin/&lt;/code&gt; ç›®å½•å†…ï¼Œå¹¶è®¾ç½®å¯æ‰§è¡Œæƒé™ &lt;code&gt;chmod +x ~/bin/asm-run.sh&lt;/code&gt;ï¼Œç„¶åå°† &lt;code&gt;$HOME/bin&lt;/code&gt; åŠ å…¥ &lt;code&gt;$PATH&lt;/code&gt; ç¯å¢ƒå˜é‡ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;export PATH=$HOME/bin:$PATH&amp;#39;&lt;/span&gt; &amp;gt;&amp;gt; ~/.bashrc &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="nb"&gt;source&lt;/span&gt; ~/.bashrc
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿™æ ·å°±å¯ä»¥åœ¨ä»»æ„ç›®å½•ä¸­ç›´æ¥é€šè¿‡ &lt;code&gt;asm-run.sh&lt;/code&gt; è¿è¡Œè„šæœ¬äº†ã€‚&lt;/p&gt;
&lt;p&gt;å‡å¦‚ç°åœ¨æœ‰&lt;code&gt;myhello.s&lt;/code&gt;çš„æ±‡ç¼–æºç ï¼Œé€šè¿‡è¯¥è„šæœ¬ç¼–è¯‘è¿è¡Œçš„æ–¹æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ asm-run.sh myhello.s
as --32 -o ./myhello.o myhello.s
ld -m elf_i386 -e main -lc -dynamic-linker /lib32/ld-linux.so.2 -o ./myhello ./myhello.o
run ./myhello ...
Hello World
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ç»ˆäºä¸ç”¨ä¸€éä¸€éçš„è¾“å…¥æŒ‡ä»¤ç¼–è¯‘ã€é“¾æ¥ã€è¿è¡Œæ±‡ç¼–ç¨‹åºäº†ã€‚&lt;/p&gt;</summary><category term="asm"></category><category term="Linux"></category></entry><entry><title>åœ¨64ä½æœºå™¨ä¸Šç¼–å†™ã€è¿è¡Œ32ä½æ±‡ç¼–ä»£ç </title><link href="http://blog.wiseturtles.com/posts/Write-32bit-asm-program-and-run-on-64bit-machine.html" rel="alternate"></link><published>2016-06-16T12:37:00+08:00</published><updated>2016-06-16T12:37:00+08:00</updated><author><name>ox0spy</name></author><id>tag:blog.wiseturtles.com,2016-06-16:posts/Write-32bit-asm-program-and-run-on-64bit-machine.html</id><summary type="html">&lt;p&gt;æˆ‘æŒ‰ç…§ &lt;code&gt;&amp;lt;&amp;lt;professional assembly language&amp;gt;&amp;gt;&lt;/code&gt;ï¼ˆä¸­æ–‡åä¸ºï¼šç¼–è¯‘è¯­è¨€ç¨‹åºè®¾è®¡) å­¦ä¹ æ±‡ç¼–ï¼Œä½†ä½¿ç”¨pushlåœ¨æˆ‘çš„Ubuntu 64bitä¸ŠæŠ¥é”™&lt;code&gt;Error: invalid instruction suffix for 'push'&lt;/code&gt;ã€‚
Googleä¸€åœˆå‘ç°éœ€è¦åœ¨ä»£ç å¤´éƒ¨åŠ ä¸Š&lt;code&gt;.code32&lt;/code&gt;ï¼Œå¹¶ä¸”ldæ—¶éœ€è¦é¢å¤–æŒ‡å®šäº›å‚æ•°ã€‚&lt;/p&gt;
&lt;h2&gt;å®‰è£…libc6-i386&lt;/h2&gt;
&lt;p&gt;ldé“¾æ¥æ—¶ä¼šç”¨åˆ°libc-i386ï¼Œæ‰€ä»¥ï¼Œå…ˆå®‰è£…å¹¶åšä¸ªè½¯é“¾æ¥ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt-get install libc6-i386
$ sudo ln -s /lib32/libc-2.19.so /lib32/libc.so
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ³¨ï¼šä¸åšè½¯é“¾æ¥å¯èƒ½ä¼šå¯¼è‡´&lt;code&gt;ld -lc&lt;/code&gt;æŠ¥é”™ï¼š&lt;code&gt;ld: cannot find -lc&lt;/code&gt;&lt;/p&gt;
&lt;h2&gt;åœ¨64ä½æœºå™¨ä¸Šç¼–è¯‘ã€é“¾æ¥ã€è¿è¡Œ32ä½æ±‡ç¼–ä»£ç &lt;/h2&gt;
&lt;p&gt;æºä»£ç å¦‚ä¸‹ï¼Œä»£ç ä¸­è°ƒç”¨printfè¾“å‡º&lt;code&gt;Hello World\n&lt;/code&gt;ï¼Œç„¶åè°ƒç”¨exit(0)é€€å‡ºã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat myhello.s
&lt;span class="c1"&gt;#myhello.s Just output &amp;quot;Hello World\n&amp;quot;&lt;/span&gt;
.code32
.section .data
msg:
    .asciz &lt;span class="s2"&gt;&amp;quot;Hello World\n&amp;quot;&lt;/span&gt;
.section .text
.globl main
main:
    pushl &lt;span class="nv"&gt;$msg&lt;/span&gt;
    call &lt;span class="nb"&gt;printf&lt;/span&gt;
    addl &lt;span class="nv"&gt;$4&lt;/span&gt;, %esp
    pushl &lt;span class="nv"&gt;$0&lt;/span&gt;
    call &lt;span class="nb"&gt;exit&lt;/span&gt;

$ as --32 -o myhello.o myhello.s
$ ld -e main -m elf_i386 -L/lib32 -lc -dynamic-linker /lib32/ld-linux.so.2 -o myhello myhello.o
$ ./myhello
Hello World
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ³¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;as --32&lt;/code&gt; æŒ‡å®šç”Ÿæˆ32ä½objectæ–‡ä»¶&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ld -e main&lt;/code&gt; å› ä¸ºç¨‹åºä¸­ç”¨äº†&lt;code&gt;.globl main&lt;/code&gt; è€Œé &lt;code&gt;.globl _start&lt;/code&gt;ï¼Œæ‰€ä»¥ï¼Œç”¨å®ƒæŒ‡å®šæ±‡ç¼–å…¥å£&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ld -m elf_i386&lt;/code&gt; æŒ‡å®šç”Ÿæˆelf&amp;nbsp;i386&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-L/lib32 -lc&lt;/code&gt;æŒ‡å®šä»&lt;code&gt;/lib32&lt;/code&gt;ç›®å½•ä¸‹æ‰¾&lt;code&gt;libc.so&lt;/code&gt;ï¼›å¯ä»¥ç®€å†™ä¸º&lt;code&gt;-lc&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-dynamic-linker /lib32/ld-linux.so.2&lt;/code&gt; æŒ‡å®šæ“ä½œç³»ç»Ÿç”¨æ¥åŠ¨æ€åœ°æŸ¥æ‰¾å’ŒåŠ è½½åº“æ–‡ä»¶çš„ç¨‹åº&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;è®¾ç½®bash&amp;nbsp;alias&lt;/h2&gt;
&lt;p&gt;æ¯æ¬¡éƒ½éœ€è¦è¾“å…¥&lt;code&gt;as --32&lt;/code&gt;å’Œ&lt;code&gt;ld -m elf_i386&lt;/code&gt;å¾ˆéº»çƒ¦ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡bash&amp;nbsp;aliasç®€åŒ–è¾“å…¥ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ tail -2 ~/.bashrc
&lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;as&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;as --32&amp;#39;&lt;/span&gt;
&lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;ld&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;ld -m elf_i386&amp;#39;&lt;/span&gt;
$ &lt;span class="nb"&gt;source&lt;/span&gt; ~/.bashrc
$ as -o myhello.o myhello.s
$ ld -e main -lc -dynamic-linker /lib32/ld-linux.so.2 -o myhello myhello.o
$ ./myhello
Hello World
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿™æ ·å°±æ–¹ä¾¿å¤šäº†ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æ ¹æ®ä¸ªäººå–œå¥½æŠŠå…¶å®ƒå‚æ•°ä¸€èµ·åŠ å…¥aliasä¸­ã€‚&lt;/p&gt;</summary><category term="asm"></category><category term="Linux"></category></entry><entry><title>Write Your First ASMÂ Program</title><link href="http://blog.wiseturtles.com/posts/Write-Your-First-ASM-Program.html" rel="alternate"></link><published>2016-06-15T22:09:00+08:00</published><updated>2016-06-15T22:09:00+08:00</updated><author><name>ox0spy</name></author><id>tag:blog.wiseturtles.com,2016-06-15:posts/Write-Your-First-ASM-Program.html</id><summary type="html">&lt;p&gt;ç”¨æ±‡ç¼–å†™ä¸ªHello&amp;nbsp;Worldï¼ŒåŒæ—¶çœ‹çœ‹å¦‚ä½•ä¸€æ­¥ä¸€æ­¥å°†cç¨‹åºç¼–è¯‘æˆå¯æ‰§è¡Œæ–‡ä»¶ã€‚&lt;/p&gt;
&lt;h2&gt;å¼€å‘ç¯å¢ƒå‡†å¤‡&lt;/h2&gt;
&lt;p&gt;æ‰€æœ‰å¼€å‘éƒ½åœ¨Ubuntuä¸Šå®Œæˆï¼Œéœ€è¦ç”¨çš„è½¯ä»¶åŒ…ï¼šbinutils, gcc,&amp;nbsp;gdbã€‚&lt;/p&gt;
&lt;p&gt;Ubuntuä¸Šå®‰è£…è½¯ä»¶å¾ˆæ–¹ä¾¿ï¼ŒæŒ‡ä»¤å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt-get install binutils gcc gdb
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;asm Hello&amp;nbsp;World&lt;/h2&gt;
&lt;p&gt;ç”¨asmå†™ä¸ªHello Worldï¼Œ&lt;code&gt;.data&lt;/code&gt;æ•°æ®æ®µä¸­å®šä¹‰msgå˜é‡ä¸º &lt;code&gt;"Hello World\n"&lt;/code&gt;ï¼Œ&lt;code&gt;.text&lt;/code&gt;æŒ‡ä»¤æ®µä»&lt;code&gt;_start&lt;/code&gt;å¼€å§‹ï¼Œå¦åˆ™éœ€è¦ldæ—¶æŒ‡å®š&lt;code&gt;-e label&lt;/code&gt;ã€‚&amp;nbsp;ç¨‹åºè°ƒç”¨äº†printfè¾“å‡ºmsgï¼Œç„¶åè°ƒç”¨exit(0)é€€å‡ºã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat hello.s
&lt;span class="c1"&gt;#hello.s Just a Hello World in asm.&lt;/span&gt;
.section .data
msg:
    .ascii &lt;span class="s2"&gt;&amp;quot;Hello World\n&amp;quot;&lt;/span&gt;
.section .text
.globl _start
_start:
    movl &lt;span class="nv"&gt;$4&lt;/span&gt;, %eax
    movl &lt;span class="nv"&gt;$1&lt;/span&gt;, %ebx
    movl &lt;span class="nv"&gt;$msg&lt;/span&gt;, %ecx
    movl &lt;span class="nv"&gt;$12&lt;/span&gt;, %edx
    int &lt;span class="nv"&gt;$0&lt;/span&gt;x80
    movl &lt;span class="nv"&gt;$1&lt;/span&gt;, %eax
    movl &lt;span class="nv"&gt;$0&lt;/span&gt;, %ebx
    int &lt;span class="nv"&gt;$0&lt;/span&gt;x80
$ as -o hello.o hello.s
$ ld -o hello hello.o
$ ./hello
Hello World
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;å¦‚ä½•ä¸€æ­¥ä¸€æ­¥ç¼–è¯‘ã€é“¾æ¥cç¨‹åº&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat helloc.c
&lt;span class="c1"&gt;#include &amp;lt;stdio.h&amp;gt;&lt;/span&gt;
&lt;span class="c1"&gt;#include &amp;lt;stdlib.h&amp;gt;&lt;/span&gt;

int main&lt;span class="o"&gt;()&lt;/span&gt;
&lt;span class="o"&gt;{&lt;/span&gt;
    printf&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Hello World\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    exit&lt;span class="o"&gt;(&lt;/span&gt;0&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

$ gcc -S helloc.c
$ as -o helloc.o helloc.s
$ ld -e main -lc -dynamic-linker /lib64/ld-linux-x86-64.so.2 -o helloc helloc.o
$ ./helloc
Hello World
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¯´æ˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;gcc -Sç”Ÿæˆcä»£ç å¯¹åº”çš„æ±‡ç¼–ä»£ç ï¼Œä½†æ˜¯æ±‡ç¼–ä»£ç ä¸­çš„&lt;code&gt;.globl label&lt;/code&gt;ä¸ºmain&lt;/li&gt;
&lt;li&gt;å› ä¸ºæ±‡ç¼–ä»£ç çš„&lt;code&gt;.globl label&lt;/code&gt;æ˜¯&lt;code&gt;main&lt;/code&gt;ï¼Œæ‰€ä»¥å¿…é¡»ä½¿ç”¨&lt;code&gt;-e&lt;/code&gt;å‚æ•°æŒ‡å®šlabelä¸º&lt;code&gt;main&lt;/code&gt;ï¼›é»˜è®¤æ˜¯&lt;code&gt;_start&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;å› ä¸ºæ±‡ç¼–ä»£ç ç›´æ¥ä½¿ç”¨äº†cçš„åº“å‡½æ•°printfã€exitï¼Œæ‰€ä»¥å¿…é¡»æŒ‡å®š-lcé“¾æ¥cæ ‡å‡†åº“&lt;/li&gt;
&lt;li&gt;-lcåŠ¨æ€é“¾æ¥cæ ‡å‡†åº“ï¼Œæ‰€ä»¥ï¼Œå¿…é¡»æŒ‡å®šè¿è¡Œæ—¶åŠ è½½åŠ¨æ€åº“çš„ç¨‹åºï¼Œå³ï¼š&lt;code&gt;-dynamic-linker /lib64/ld-linux-x86-64.so.2&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;asm Hello World&amp;nbsp;(æ”¹è¿›ç‰ˆ)&lt;/h2&gt;
&lt;p&gt;æ—¢ç„¶æ±‡ç¼–ä»£ç ä¸­å¯ä»¥ç›´æ¥è°ƒç”¨cçš„æ ‡å‡†åº“å‡½æ•°ï¼Œé‚£å°±çœ‹çœ‹æ€ä¹ˆæ”¹è¿›ä¹‹å‰çš„hello.sã€‚
ä¸‹é¢ä»£ç è°ƒç”¨cåº“ä¸­çš„putså’Œexitå‡½æ•°ã€‚
å¯ä»¥ç”¨gccç¼–è¯‘ã€é“¾æ¥æ±‡ç¼–ä»£ç ï¼Œè€Œgccé»˜è®¤åªè®¤&lt;code&gt;.globl main&lt;/code&gt;è€Œä¸æ˜¯&lt;code&gt;.globl _start&lt;/code&gt;ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬ä¸‹é¢ç”¨&lt;code&gt;.globl main&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat new_hello.s
&lt;span class="c1"&gt;#new_hello.s Just a &amp;quot;Hello World&amp;quot;&lt;/span&gt;
.section .data
msg:
    .string &lt;span class="s2"&gt;&amp;quot;Hello World&amp;quot;&lt;/span&gt;
.section .text
.global main
main:
    movl &lt;span class="nv"&gt;$msg&lt;/span&gt;, %edi
    call puts
    movl &lt;span class="nv"&gt;$0&lt;/span&gt;, %edi
    call &lt;span class="nb"&gt;exit&lt;/span&gt;
$ as -o new_hello.o new_hello.s
$ ld -e main -lc -dynamic-linker /lib64/ld-linux-x86-64.so.2 -o new_hello new_hello.o
$ ./new_hello
Hello World

$ gcc -o new_hello new_hello.s  &lt;span class="c1"&gt;# å½“ç„¶å¯ä»¥ç›´æ¥ç”¨è¿™æ¡æŒ‡ä»¤ç¼–è¯‘ã€é“¾æ¥ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æœ¬æ–‡ç®€å•ä»‹ç»äº†å¦‚ä½•ç”¨æ±‡ç¼–å†™&lt;code&gt;Hello World&lt;/code&gt;ï¼Œå¹¶å°è¯•æ‰‹åŠ¨ç¼–è¯‘ã€é“¾æ¥cç¨‹åºï¼Œæœ€å¥½ä»‹ç»äº†åœ¨æ±‡ç¼–ä¸­å¦‚ä½•è°ƒç”¨cåº“å‡½æ•°ã€‚&lt;/p&gt;</summary><category term="asm"></category><category term="Linux"></category></entry></feed>