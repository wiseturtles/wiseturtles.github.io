<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Wise Turtles</title><link href="http://blog.wiseturtles.com/" rel="alternate"></link><link href="http://blog.wiseturtles.com/feeds/ubuntu.atom.xml" rel="self"></link><id>http://blog.wiseturtles.com/</id><updated>2014-12-30T00:00:00+08:00</updated><entry><title>WIFI Hotspot Setup On Ubuntu 12.04</title><link href="http://blog.wiseturtles.com/posts/wifi-hotspot-setup-on-ubuntu.html" rel="alternate"></link><updated>2014-12-30T00:00:00+08:00</updated><author><name>Zhang Wanming</name></author><id>tag:blog.wiseturtles.com,2014-12-30:posts/wifi-hotspot-setup-on-ubuntu.html</id><summary type="html">&lt;p&gt;hotspot配置参考：http://thenewbieblog.wordpress.com/2012/05/01/wifi-hotspot-setup-on-ubuntu/
Android利用Fiddler抓包：http://www.trinea.cn/android/android-network-sniffer/&amp;nbsp;Android利用tcpdump抓包：http://www.trinea.cn/android/tcpdump_wireshark/&lt;/p&gt;
&lt;p&gt;为了Ubuntu笔记本方便对Android手机上的Apps做抓包, 本文介绍两种方法，方法二更容易配置。
有线、无线同时可以工作时，用下面方法将无线网卡作为hotspot，通过有线连接外网。
如果想直接通过无线网卡上外网，需要先停掉hostapd 或&amp;nbsp;ap-hotspot，并重启网络。&lt;/p&gt;
&lt;p&gt;重启网络:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;sudo service network-manager restart
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;方法一&lt;/h1&gt;
&lt;h2&gt;查看无线网卡硬件信息&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;sudo lspci &lt;span class="p"&gt;|&lt;/span&gt; grep -i network
03:00.0 Network controller: Intel Corporation Wireless &lt;span class="m"&gt;7260&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;rev 6b&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;查看无线网卡驱动信息&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;lsmod
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;查看无线网卡设备名称&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;iwconfig
wlan0     IEEE 802.11bgn  Mode:Master  Tx-Power&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;16&lt;/span&gt; dBm   
          Retry  long limit:7   RTS thr:off   Fragment thr:off
          Power Management:on
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;安装需要的软件&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;sudo apt-get install dhcp3-server hostapd
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;修改/etc/hostapd/hostapd.conf&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;cat /etc/hostapd/hostapd.conf
&lt;span class="nv"&gt;interface&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;wlan0
&lt;span class="nv"&gt;driver&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;nl80211
&lt;span class="nv"&gt;ssid&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;your_hotspot_name
&lt;span class="nv"&gt;channel&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;1
&lt;span class="nv"&gt;hw_mode&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;g
&lt;span class="nv"&gt;auth_algs&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;1
&lt;span class="nv"&gt;wpa&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;3
&lt;span class="nv"&gt;wpa_passphrase&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;your-password
&lt;span class="nv"&gt;wpa_key_mgmt&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;WPA-PSK
&lt;span class="nv"&gt;wpa_pairwise&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;TKIP CCMP
&lt;span class="nv"&gt;rsn_pairwise&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;CCMP
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;修改/etc/default/isc-dhcp-server&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;grep INTERFACES /etc/default/isc-dhcp-server
&lt;span class="nv"&gt;INTERFACES&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;wlan0&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;修改/etc/dhcp/dhcpd.conf&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;配置文件: /etc/dhcp/dhcpd.conf
Make sure the follow lines are Commented out &lt;span class="o"&gt;(&lt;/span&gt; put a &lt;span class="nb"&gt;hash&lt;/span&gt; “#”  sign at the beginning of the line &lt;span class="o"&gt;)&lt;/span&gt; the following lines:
&lt;span class="c"&gt;# option definitions common to all supported networks…&lt;/span&gt;
&lt;span class="c"&gt;#option domain-name “example.org”;&lt;/span&gt;
&lt;span class="c"&gt;#option domain-name-servers ns1.example.org, ns2.example.org;&lt;/span&gt;
&lt;span class="c"&gt;#default-lease-time 600;&lt;/span&gt;
&lt;span class="c"&gt;#max-lease-time 7200;&lt;/span&gt;

Add the following lines to the file &lt;span class="o"&gt;(&lt;/span&gt;copy and paste&lt;span class="o"&gt;)&lt;/span&gt;
subnet 10.10.0.0 netmask 255.255.255.0 &lt;span class="o"&gt;{&lt;/span&gt;
        range 10.10.0.2 10.10.0.16&lt;span class="p"&gt;;&lt;/span&gt;
        option domain-name-servers 8.8.4.4, 208.67.222.222&lt;span class="p"&gt;;&lt;/span&gt;
        option routers 10.10.0.1&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="o"&gt;(&lt;/span&gt;Note: the only other line in this whole config file that is uncommented is :

ddns-update-style none&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;修改/etc/default/hostapd&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;grep -E &lt;span class="s1"&gt;&amp;#39;RUN_DAEMON|DAEMON_CONF|DAEMON_OPTS&amp;#39;&lt;/span&gt; /etc/default/hostapd &lt;span class="p"&gt;|&lt;/span&gt; grep -Ev &lt;span class="s1"&gt;&amp;#39;^#&amp;#39;&lt;/span&gt;
&lt;span class="nv"&gt;RUN_DAEMON&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;yes&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;DAEMON_CONF&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/etc/hostapd/hostapd.conf&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;DAEMON_OPTS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;-dd&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;修改/etc/network/interfaces&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;cat /etc/network/interfaces
auto lo
iface lo inet loopback
auto wlan0
iface wlan0 inet static
    address 10.10.0.1
    netmask 255.255.255.0
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;修改/etc/sysctl.conf&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;grep net.ipv4.ip_forward /etc/sysctl.conf 
net.ipv4.ip_forward&lt;span class="o"&gt;=&lt;/span&gt;1
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;修改/etc/rc.local&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;编辑 /etc/rc.local, 在 &lt;span class="s2"&gt;&amp;quot;exit 0&amp;quot;&lt;/span&gt; 前添加下一行
iptables -t nat -A POSTROUTING -s 10.10.0.0/16 -o ppp0 -j MASQUERADE
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;重启电脑&lt;/h2&gt;
&lt;p&gt;重启电脑，手机测试是否可以连接.&lt;/p&gt;
&lt;h1&gt;方法二&lt;/h1&gt;
&lt;p&gt;用ap-hotspot更容易搭建。&lt;/p&gt;
&lt;h2&gt;ap-hotspot安装、配置&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;sudo add-apt-repository ppa:nilarimogard/webupd8
&lt;span class="nv"&gt;$ &lt;/span&gt;sudo apt-get install ap-hotspot
&lt;span class="nv"&gt;$ &lt;/span&gt;sudo ap-hotspot configure &lt;span class="c"&gt;# configure&lt;/span&gt;
&lt;span class="nv"&gt;$ &lt;/span&gt;sudo ap-hotspot start &lt;span class="c"&gt;# start&lt;/span&gt;
&lt;span class="nv"&gt;$ &lt;/span&gt;sudo ap-hotspot stop &lt;span class="c"&gt;# stop&lt;/span&gt;
&lt;span class="nv"&gt;$ &lt;/span&gt;sudo ap-hotspot restart &lt;span class="c"&gt;# restart&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</summary><category term="Ubuntu"></category></entry><entry><title>Upgrade Ubuntu from 10.04 to 12.04</title><link href="http://blog.wiseturtles.com/posts/upgrade-ubuntu-from-10.04-to-12.04.html" rel="alternate"></link><updated>2014-12-04T00:00:00+08:00</updated><author><name>Zhang Wanming</name></author><id>tag:blog.wiseturtles.com,2014-12-04:posts/upgrade-ubuntu-from-10.04-to-12.04.html</id><summary type="html">&lt;p&gt;公司开发人员电脑都安装的是Ubuntu 10.04，现在越来越不好用，而且，很多同事发现编译最新的Firefox &lt;span class="caps"&gt;OS&lt;/span&gt;都有问题，所以，我尝试升级并把碰到的问题记录下来。&lt;/p&gt;
&lt;h1&gt;升级&lt;/h1&gt;
&lt;h2&gt;修改源&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;cat /etc/apt/sources.list
deb http://172.26.32.18/ubuntu/ lucid main restricted universe multiverse
deb http://172.26.32.18/ubuntu/ lucid-security main restricted universe multiverse
deb http://172.26.32.18/ubuntu/ lucid-updates main restricted universe multiverse
deb http://172.26.32.18/ubuntu/ lucid-proposed main restricted universe multiverse
deb http://172.26.32.18/ubuntu/ lucid-backports main restricted universe multiverse

&lt;span class="c"&gt;# aliyun&lt;/span&gt;
deb http://mirrors.aliyun.com/ubuntu/ lucid main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ lucid-security main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ lucid-updates main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ lucid-proposed main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ lucid-backports main restricted universe multiverse
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;开始升级&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;sudo &lt;span class="k"&gt;do&lt;/span&gt;-release-upgrade
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;nis无法启动，导致升级过程中配置nis包失败&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;grep redhat /etc/hosts
172.26.32.12    &lt;span class="nb"&gt;cd&lt;/span&gt;-redhat-001.TCTCD

&lt;span class="nv"&gt;$ &lt;/span&gt;tail -1 /etc/yp.conf 
ypserver &lt;span class="nb"&gt;cd&lt;/span&gt;-redhat-001.TCTCD

&lt;span class="nv"&gt;$ &lt;/span&gt;cat /etc/defaultdomain 
TCTCD

&lt;span class="nv"&gt;$ &lt;/span&gt;grep NIS /etc/default/nis &lt;span class="p"&gt;|&lt;/span&gt; grep -Ev &lt;span class="s1"&gt;&amp;#39;#&amp;#39;&lt;/span&gt;
&lt;span class="nv"&gt;NISSERVER&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;false&lt;/span&gt;
&lt;span class="nv"&gt;NISCLIENT&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;
&lt;span class="nv"&gt;NISMASTER&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;

&lt;span class="nv"&gt;$ &lt;/span&gt;cat /etc/auto.master
/home /etc/auto.home

&lt;span class="nv"&gt;$ &lt;/span&gt;cat /etc/auto.home 
xcsu &lt;span class="nb"&gt;cd&lt;/span&gt;-redhat-001.TCTCD:/home/xcsu

&lt;span class="nv"&gt;$ &lt;/span&gt;/usr/lib/yp/ypinit -s &lt;span class="nb"&gt;cd&lt;/span&gt;-redhat-001.TCTCD

&lt;span class="nv"&gt;$ &lt;/span&gt;sudo service portmap restart
&lt;span class="nv"&gt;$ &lt;/span&gt;sudo service nis restart
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;启动后登录时发现只能用administrator和guest登录&lt;/h1&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;cat /etc/lightdm/lightdm.conf 
&lt;span class="o"&gt;[&lt;/span&gt;SeatDefaults&lt;span class="o"&gt;]&lt;/span&gt;
user-session&lt;span class="o"&gt;=&lt;/span&gt;ubuntu
greeter-session&lt;span class="o"&gt;=&lt;/span&gt;unity-greeter
allow-guest&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;false&lt;/span&gt;
greeter-show-manual-login&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;重启电脑，就可以用其它用户登录了&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;sudo reboot
&lt;/pre&gt;&lt;/div&gt;</summary><category term="Ubuntu"></category><category term="Nis"></category></entry></feed>