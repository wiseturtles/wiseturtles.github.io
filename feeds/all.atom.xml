<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Wise Turtles</title><link href="http://blog.wiseturtles.com/" rel="alternate"></link><link href="http://blog.wiseturtles.com/feeds/all.atom.xml" rel="self"></link><id>http://blog.wiseturtles.com/</id><updated>2016-08-10T20:40:00+08:00</updated><entry><title>SaltStackä»‹ç»</title><link href="http://blog.wiseturtles.com/posts/get-started-saltstack.html" rel="alternate"></link><published>2016-08-10T20:40:00+08:00</published><author><name>ox0spy</name></author><id>tag:blog.wiseturtles.com,2016-08-10:posts/get-started-saltstack.html</id><summary type="html">&lt;p&gt;æœ¬æ–‡åªä»‹ç»äº†SaltStackåœ¨CentOSä¸Šçš„å®‰è£…ï¼Œå…¶å®ƒå…¶å®ƒæœ‰ç±»ä¼¼çš„åŒ…ç®¡ç†å·¥å…·å¯ä»¥å®‰è£….&lt;/p&gt;
&lt;h2&gt;CentOSä¸Šå®‰è£…salt-masterå’Œsalt-minion&lt;/h2&gt;
&lt;h3&gt;å®‰è£…salt-master&lt;/h3&gt;
&lt;p&gt;åœ¨centosä¸Šå®‰è£…salt-master:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="n"&gt;sudo&lt;/span&gt; &lt;span class="n"&gt;rpm&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;https&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="n"&gt;repo&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;saltstack&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;yum&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;redhat&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;x86_64&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;latest&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;SALTSTACK&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;GPG&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;KEY&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pub&lt;/span&gt;
&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="n"&gt;sudo&lt;/span&gt; &lt;span class="n"&gt;bash&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;cat - &amp;gt; /etc/yum.repos.d/saltstack.repo &amp;lt;&amp;lt;&amp;quot;EOF&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;[saltstack-repo]
name=SaltStack repo for &lt;span class="caps"&gt;RHEL&lt;/span&gt;/CentOS $releasever
baseurl=https://repo.saltstack.com/yum/redhat/$releasever/$basearch/latest
enabled=1
gpgcheck=1
gpgkey=https://repo.saltstack.com/yum/redhat/$releasever/$basearch/latest/&lt;span class="caps"&gt;SALTSTACK&lt;/span&gt;-&lt;span class="caps"&gt;GPG&lt;/span&gt;-&lt;span class="caps"&gt;KEY&lt;/span&gt;.pub
&lt;span class="caps"&gt;EOF&lt;/span&gt;&amp;#8217;
    $ sudo yum clean expire-cache
    $ sudo yum install -y salt-master
    $ sudo systemctl enable salt-master.service
    $ sudo systemctl restart&amp;nbsp;salt-master.service&lt;/p&gt;
&lt;h3&gt;å®‰è£…salt-minion&lt;/h3&gt;
&lt;p&gt;åœ¨centosä¸Šå®‰è£…salt-minion:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="n"&gt;sudo&lt;/span&gt; &lt;span class="n"&gt;rpm&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;https&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="n"&gt;repo&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;saltstack&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;yum&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;redhat&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;x86_64&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;latest&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;SALTSTACK&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;GPG&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;KEY&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pub&lt;/span&gt;
&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="n"&gt;sudo&lt;/span&gt; &lt;span class="n"&gt;bash&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;cat - &amp;gt; /etc/yum.repos.d/saltstack.repo &amp;lt;&amp;lt;&amp;quot;EOF&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;[saltstack-repo]
name=SaltStack repo for &lt;span class="caps"&gt;RHEL&lt;/span&gt;/CentOS $releasever
baseurl=https://repo.saltstack.com/yum/redhat/$releasever/$basearch/latest
enabled=1
gpgcheck=1
gpgkey=https://repo.saltstack.com/yum/redhat/$releasever/$basearch/latest/&lt;span class="caps"&gt;SALTSTACK&lt;/span&gt;-&lt;span class="caps"&gt;GPG&lt;/span&gt;-&lt;span class="caps"&gt;KEY&lt;/span&gt;.pub
&lt;span class="caps"&gt;EOF&lt;/span&gt;&amp;#8217;
    $ sudo yum clean expire-cache
    $ sudo yum install -y salt-minion
    $ sudo bash -c &amp;#8220;echo &amp;#8216;master: $SALT_MASTER&amp;#8217; &amp;gt;&amp;gt; /etc/salt/minion&amp;#8221; # $SALT_MASTER æ›¿æ¢ä¸ºsalt masterä¸»æœºçš„&lt;span class="caps"&gt;IP&lt;/span&gt;
    $ sudo systemctl enable salt-minion.service
    $ sudo systemctl restart&amp;nbsp;salt-minion.service&lt;/p&gt;
&lt;p&gt;æ³¨: å¦‚æœsalt-masterä½¿ç”¨é»˜è®¤é…ç½®ï¼Œè¯·ç¡®ä¿salt-masterçš„4505,&amp;nbsp;4506ç«¯å£å¯ä»¥è¢«salt-minionè®¿é—®.&lt;/p&gt;
&lt;h3&gt;ç®€å•æµ‹è¯•&lt;/h3&gt;
&lt;p&gt;salt-minionè®¾ç½®è¿‡master &lt;span class="caps"&gt;IP&lt;/span&gt;å¹¶é‡å¯salt-minionåï¼Œåº”è¯¥åœ¨salt-masterä¸Šå¯ä»¥é€šè¿‡ä¸‹é¢å‘½ä»¤çœ‹åˆ°minion:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[root@master ~]$ salt-key -L  # åˆ—å‡ºæ‰€æœ‰minion
[root@master ~]$ salt-key -A  # æ¥å—æ‰€æœ‰minionï¼Œä¹Ÿå¯ä»¥é€šè¿‡ -a æ¥å—æŒ‡å®šminion
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ¥å—minionåï¼Œå°±å¯ä»¥åœ¨salt-masterä¸Šå‘å¸ƒå‘½ä»¤åˆ°minionäº†ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;root&lt;span class="o"&gt;@&lt;/span&gt;master &lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;$&lt;/span&gt; salt &lt;span class="s"&gt;&amp;#39;*&amp;#39;&lt;/span&gt; test.ping  &lt;span class="c1"&gt;# ç®€å•æµ‹è¯•master &amp;lt;-&amp;gt; minionæ˜¯å¦è¿é€š&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;é€‰æ‹©ä¸»æœº&lt;/h2&gt;
&lt;p&gt;ç»å¸¸ä¼šçœ‹åˆ° &lt;code&gt;salt '*' test.ping&lt;/code&gt; è¿™é‡Œçš„ &lt;code&gt;'*'&lt;/code&gt; æ„æ€æ˜¯ä½œç”¨äºæ‰€æœ‰ä¸»æœºã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢ä»‹ç» salt&amp;nbsp;æ”¯æŒçš„åŒ¹é…æ–¹å¼ã€‚&lt;/p&gt;
&lt;h3&gt;globbing&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[root@master ~]$ salt &amp;#39;ubuntu*&amp;#39; disk.usage
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;grains&amp;nbsp;system&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[root@master ~]$ salt -G &amp;#39;os:CentOS&amp;#39; cmd.run &amp;#39;id&amp;#39;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;regular&amp;nbsp;expression&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[root@master ~]$ salt -E &amp;#39;centos[0-9]&amp;#39; test.ping
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;æ˜ç¡®æŒ‡å®šä¸€ä¸ªåˆ—è¡¨&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[root@master ~]$ salt -L &amp;#39;centos1,centos2&amp;#39; test.ping
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;multiple target types can be combined in one&amp;nbsp;command&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="p"&gt;@&lt;/span&gt;&lt;span class="n"&gt;master&lt;/span&gt; &lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="n"&gt;salt&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;C&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="p"&gt;@&lt;/span&gt;&lt;span class="nl"&gt;os&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;CentOS&lt;/span&gt; &lt;span class="n"&gt;and&lt;/span&gt; &lt;span class="n"&gt;centos&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;or&lt;/span&gt; &lt;span class="n"&gt;S&lt;/span&gt;&lt;span class="mf"&gt;@192.168.50&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt; &lt;span class="n"&gt;test&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ping&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ³¨: å‚è€ƒ - &lt;a href="https://docs.saltstack.com/en/getstarted/fundamentals/targeting.html"&gt;https://docs.saltstack.com/en/getstarted/fundamentals/targeting.html&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;æ‰§è¡Œå‘½ä»¤&lt;/h2&gt;
&lt;h3&gt;æ‰§è¡Œå•ä¸ªå‘½ä»¤ï¼Œæ¯”å¦‚ï¼šåœ¨minionä¸Šæ‰§è¡Œ&lt;code&gt;id&lt;/code&gt;å‘½ä»¤å¹¶è¾“å‡º:&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[root@master ~]$ salt &amp;#39;*&amp;#39; cmd.run &amp;#39;id&amp;#39;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;æ‰§è¡Œè„šæœ¬ï¼š&lt;/h3&gt;
&lt;p&gt;é¦–å…ˆè¦å¼€å¯&lt;code&gt;/etc/salt/master&lt;/code&gt;çš„å¦‚ä¸‹è®¾ç½®:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;file_roots&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
  &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
    &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="sr"&gt;/srv/s&lt;/span&gt;&lt;span class="n"&gt;alt&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¦‚æœsalt-masteræ²¡æœ‰&lt;code&gt;/srv/salt/scripts&lt;/code&gt;ç›®å½•è¯·è‡ªå·±åˆ›å»ºï¼Œç„¶åå†™ä¸ªç®€å•è„šæœ¬:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[root@master ~]$ cat /srv/salt/scripts/get_ip.sh
#!/bin/bash

ifconfig | grep &amp;#39;inet &amp;#39; | grep -Ev &amp;#39;127.0.0.1&amp;#39; | awk &amp;#39;{print $2}&amp;#39;

[root@master ~]$ salt &amp;#39;*&amp;#39; cmd.script &amp;#39;salt://scripts/get_ip.sh&amp;#39;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Tips&lt;/h2&gt;
&lt;h3&gt;ä»¥æŒ‡å®šç”¨æˆ·è¿è¡Œsalt-masterï¼Œé¿å…æ¯æ¬¡è¾“å…¥saltæŒ‡ä»¤éƒ½éœ€è¦åŠ &amp;nbsp;sudoï¼›æ¯”å¦‚ä»¥centosç”¨æˆ·è¿è¡Œsalt-master&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[centos@master ~]$ sudo chown -R centos /etc/salt /var/log/salt /var/cache/salt /var/run/salt
[centos@master ~]$ sudo mkdir -p /srv/salt
[centos@master ~]$ sudo chown -R centos /srv/salt
åœ¨ /etc/salt/master ä¸­è®¾ç½® user: centos
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ³¨: ç†è®ºä¸Šsalt-minionä¹Ÿå¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼è¿è¡Œä»¥æŒ‡å®šç”¨æˆ·è¿è¡Œï¼Œä½†æˆ‘æµ‹è¯•ä¼šæŠ¥é”™ &amp;#8220;Minion did not return. [No&amp;nbsp;response]&amp;#8221;&lt;/p&gt;
&lt;h3&gt;åˆ é™¤ä¸å­˜åœ¨çš„salt&amp;nbsp;minion&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[root@master ~]$ salt-run manage.down removekeys=True
&lt;/pre&gt;&lt;/div&gt;</summary><category term="CentOS"></category><category term="SaltStack"></category></entry><entry><title>Too many filesÂ open</title><link href="http://blog.wiseturtles.com/posts/Too-many-files-open.html" rel="alternate"></link><published>2016-07-27T18:06:00+08:00</published><author><name>ox0spy</name></author><id>tag:blog.wiseturtles.com,2016-07-27:posts/Too-many-files-open.html</id><summary type="html">&lt;h2&gt;Linux&lt;/h2&gt;
&lt;p&gt;å°†ä¸‹é¢çš„è¡ŒåŠ å…¥ &lt;code&gt;/etc/security/limits.conf&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;*               soft    nofile             8192
*               hard    nofile             8192
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å°†ä¸‹é¢çš„è¡ŒåŠ å…¥ &lt;code&gt;/etc/sysctl.conf&lt;/code&gt; ï¼Œæé«˜kernelæ€§èƒ½ï¼Œå¯ä»¥ä¸æ·»åŠ ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;net.ipv4.tcp_tw_reuse = 1
net.ipv4.tcp_tw_recycle = 1
net.ipv4.ip_local_port_range = 1024 65000
fs.file-max = 65000
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿è¡Œ &lt;code&gt;sudo sysctl -p&lt;/code&gt; å°†å¯¹ &lt;code&gt;/etc/sysctl.conf&lt;/code&gt; çš„ä¿®æ”¹ç”Ÿæ•ˆã€‚&lt;/p&gt;
&lt;h2&gt;Mac&lt;/h2&gt;
&lt;p&gt;æŸ¥çœ‹max&amp;nbsp;files:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo launchctl limit
    cpu         unlimited      unlimited
    filesize    unlimited      unlimited
    data        unlimited      unlimited
    stack       &lt;span class="m"&gt;8388608&lt;/span&gt;        67104768
    core        &lt;span class="m"&gt;0&lt;/span&gt;              unlimited
    rss         unlimited      unlimited
    memlock     unlimited      unlimited
    maxproc     &lt;span class="m"&gt;709&lt;/span&gt;            1064
    maxfiles    &lt;span class="m"&gt;256&lt;/span&gt;            unlimited
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä¿®æ”¹max&amp;nbsp;fileåˆ°8192:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo launchctl limit maxfiles &lt;span class="m"&gt;8192&lt;/span&gt; unlimited
$ sudo launchctl limit
    cpu         unlimited      unlimited
    filesize    unlimited      unlimited
    data        unlimited      unlimited
    stack       &lt;span class="m"&gt;8388608&lt;/span&gt;        67104768
    core        &lt;span class="m"&gt;0&lt;/span&gt;              unlimited
    rss         unlimited      unlimited
    memlock     unlimited      unlimited
    maxproc     &lt;span class="m"&gt;709&lt;/span&gt;            1064
    maxfiles    &lt;span class="m"&gt;8192&lt;/span&gt;           10240

&lt;span class="c1"&gt;# æ³¨ï¼š&lt;/span&gt;
$ sudo launchctl limit maxfiles unlimited  &lt;span class="c1"&gt;# ä¹Ÿå¯ä»¥ç›´æ¥è®¾ç½®ä¸ºunlimited&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</summary><category term="Mac"></category><category term="Linux"></category></entry><entry><title>Ubuntu+Vimé…ç½®æ±‡ç¼–ç¨‹åºå¼€å‘ç¯å¢ƒ</title><link href="http://blog.wiseturtles.com/posts/setup-asm-development-environment.html" rel="alternate"></link><published>2016-06-17T20:00:00+08:00</published><author><name>ox0spy</name></author><id>tag:blog.wiseturtles.com,2016-06-17:posts/setup-asm-development-environment.html</id><summary type="html">&lt;p&gt;æœ¬æ–‡ä¸“é—¨ä»‹ç»Ubuntuç³»ç»Ÿä¸ŠåŸºäºVimé…ç½®æ±‡ç¼–ç¨‹åºå¼€å‘ç¯å¢ƒã€‚&lt;/p&gt;
&lt;h2&gt;Ubuntuç³»ç»Ÿé…ç½®&lt;/h2&gt;
&lt;p&gt;æ‰€æœ‰å¼€å‘éƒ½åœ¨Ubuntuä¸Šå®Œæˆï¼Œéœ€è¦ç”¨çš„è½¯ä»¶åŒ…ï¼šbinutils, gcc,&amp;nbsp;gdbç­‰è½¯ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;Ubuntuä¸Šå®‰è£…è½¯ä»¶å¾ˆæ–¹ä¾¿ï¼ŒæŒ‡ä»¤å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt-get install binutils gcc gdb libc6-i386 libc6-dev-i386
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Vimé…ç½®&lt;/h2&gt;
&lt;p&gt;ä¸ªäººæ¯”è¾ƒå–œæ¬¢&lt;a href="https://github.com/wklken/k-vim"&gt;k-vim&lt;/a&gt;ï¼Œæ ¹æ®é¡¹ç›®çš„å®‰è£…æ–‡æ¡£å®‰è£…å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;æ±‡ç¼–æºä»£ç çš„åŸºæœ¬ç»“æ„ç±»ä¼¼ï¼Œæ¯æ¬¡éƒ½å†™ä¸€é &lt;code&gt;.section .data&lt;/code&gt; ä¹‹ç±»çš„å¾ˆéº»çƒ¦ï¼Œé€šè¿‡ä¸‹é¢è¡¥ä¸ï¼Œæ–°å»ºæ±‡ç¼–æºæ–‡ä»¶æ—¶ï¼Œè‡ªåŠ¨åŠ è½½æ¨¡æ¿ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gh"&gt;diff --git a/vimrc b/vimrc&lt;/span&gt;
&lt;span class="gh"&gt;index e073d53..596bcc1 100644&lt;/span&gt;
&lt;span class="gd"&gt;--- a/vimrc&lt;/span&gt;
&lt;span class="gi"&gt;+++ b/vimrc&lt;/span&gt;
&lt;span class="gu"&gt;@@ -580,7 +580,7 @@ autocmd FileType c,cpp,java,go,php,javascript,puppet,python,rust,twig,xml,yml,pe&lt;/span&gt;


&amp;quot; å®šä¹‰å‡½æ•°AutoSetFileHeadï¼Œè‡ªåŠ¨æ’å…¥æ–‡ä»¶å¤´
&lt;span class="gd"&gt;-autocmd BufNewFile *.sh,*.py exec &amp;quot;:call AutoSetFileHead()&amp;quot;&lt;/span&gt;
&lt;span class="gi"&gt;+autocmd BufNewFile *.sh,*.py,*.s exec &amp;quot;:call AutoSetFileHead()&amp;quot;&lt;/span&gt;
function! AutoSetFileHead()
    &amp;quot;å¦‚æœæ–‡ä»¶ç±»å‹ä¸º.shæ–‡ä»¶
    if &amp;amp;filetype == &amp;#39;sh&amp;#39;
&lt;span class="gu"&gt;@@ -593,9 +593,23 @@ function! AutoSetFileHead()&lt;/span&gt;
        call append(1, &amp;quot;\# encoding: utf-8&amp;quot;)
    endif

&lt;span class="gd"&gt;-    normal G&lt;/span&gt;
&lt;span class="gd"&gt;-    normal o&lt;/span&gt;
&lt;span class="gd"&gt;-    normal o&lt;/span&gt;
&lt;span class="gi"&gt;+    &amp;quot;å¦‚æœæ–‡ä»¶ç±»å‹ä¸ºasm&lt;/span&gt;
&lt;span class="gi"&gt;+    if &amp;amp;filetype == &amp;#39;asm&amp;#39;&lt;/span&gt;
&lt;span class="gi"&gt;+        call setline(1, &amp;quot;.section .data&amp;quot;)&lt;/span&gt;
&lt;span class="gi"&gt;+        call append(1, &amp;quot;.section .text&amp;quot;)&lt;/span&gt;
&lt;span class="gi"&gt;+        call append(2, &amp;quot;.globl _start&amp;quot;)&lt;/span&gt;
&lt;span class="gi"&gt;+        call append(3, &amp;quot;_start:&amp;quot;)&lt;/span&gt;
&lt;span class="gi"&gt;+    endif&lt;/span&gt;
&lt;span class="gi"&gt;+&lt;/span&gt;
&lt;span class="gi"&gt;+    if &amp;amp;filetype == &amp;#39;asm&amp;#39;&lt;/span&gt;
&lt;span class="gi"&gt;+        normal G&lt;/span&gt;
&lt;span class="gi"&gt;+        normal o&lt;/span&gt;
&lt;span class="gi"&gt;+    else&lt;/span&gt;
&lt;span class="gi"&gt;+        normal G&lt;/span&gt;
&lt;span class="gi"&gt;+        normal o&lt;/span&gt;
&lt;span class="gi"&gt;+        normal o&lt;/span&gt;
&lt;span class="gi"&gt;+    endif&lt;/span&gt;
&lt;span class="gi"&gt;+&lt;/span&gt;
endfunc
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;åœ¨Ubuntu&amp;nbsp;64ä½ç³»ç»Ÿä¸Šç¼–è¯‘ã€è¿è¡Œ32ä½æ±‡ç¼–&lt;/h2&gt;
&lt;p&gt;ä¹‹å‰æåˆ°è¿‡æˆ‘å­¦ä¹ çš„å‚è€ƒä¹¦ç±è®²çš„æ˜¯32ä½&lt;span class="caps"&gt;AT&lt;/span&gt;&amp;amp;Tæ±‡ç¼–ï¼Œè€Œæˆ‘çš„ç³»ç»Ÿæ˜¯64ä½ï¼Œæ‰€ä»¥ï¼Œè¿™é‡Œä»‹ç»åœ¨64ä½Ubuntuä¸Šç¼–è¯‘ã€è¿è¡Œ32ä½æ±‡ç¼–ç¨‹åºéœ€è¦åšé‚£äº›é…ç½®ã€‚&lt;/p&gt;
&lt;h3&gt;64ä½Ubuntuç¼–è¯‘ã€é“¾æ¥32ä½æ±‡ç¼–ç¨‹åº&lt;/h3&gt;
&lt;p&gt;åœ¨ &lt;code&gt;~/.bashrc&lt;/code&gt; ä¸­æ·»åŠ ä¸‹é¢çš„è¡Œï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# asm i386
alias as=&amp;#39;as --32 -gstabs&amp;#39;
alias ld=&amp;#39;ld -m elf_i386&amp;#39;
alias gcc=&amp;#39;gcc -m32&amp;#39;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ¯æ¬¡è¾“å…¥æŒ‡ä»¤ç¼–è¯‘ã€è¿è¡Œã€æŸ¥çœ‹è¿”å›å€¼ä¹Ÿå¾ˆéº»çƒ¦ï¼Œå¯ä»¥å†™ä¸ªè„šæœ¬è‡ªåŠ¨å®Œæˆè¿™äº›å·¥ä½œï¼Œå‚è€ƒï¼š&lt;a href="http://blog.wiseturtles.com/posts/Compile-Link-and-Run-ASM-Program.html"&gt;ç¼–è¯‘ã€é“¾æ¥ã€è¿è¡Œæ±‡ç¼–ç¨‹åº&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ³¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸Šé¢é“¾æ¥ä¸­æåˆ°çš„é‚£å¨è„šæœ¬åŸºæœ¬å¯ä»¥ç”¨ &lt;code&gt;gcc -m32 -o myhello myhello.s&lt;/code&gt; ä»£æ›¿ğŸ˜‚&lt;/li&gt;
&lt;li&gt;å¦‚æœç”¨ä¸Šé¢çš„gccæŒ‡ä»¤ç¼–è¯‘æ±‡ç¼–ä»£ç ï¼Œåªèƒ½åœ¨æ±‡ç¼–ä»£ç ä¸­ä½¿ç”¨&lt;code&gt;.globl main&lt;/code&gt;ï¼›è€Œä¸èƒ½ä½¿ç”¨asé»˜è®¤çš„&lt;code&gt;.globl _start&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Vim&lt;/h3&gt;
&lt;h4&gt;asmåœ¨Vimä¸­çš„è¯­æ³•æ£€æŸ¥&lt;/h4&gt;
&lt;p&gt;&lt;a href="https://github.com/wklken/k-vim"&gt;k-vim&lt;/a&gt;ä½¿ç”¨&lt;code&gt;syntastic&lt;/code&gt;åšè¯­æ³•æ£€æŸ¥ï¼Œ&lt;code&gt;syntastic&lt;/code&gt;å¯¹asmæºç é»˜è®¤æ£€æŸ¥ä¼šä½¿ç”¨&lt;code&gt;as&lt;/code&gt;ç¼–è¯‘æºç ï¼Œå¦‚æœä¸æŒ‡å®š&lt;code&gt;as --32&lt;/code&gt;æœ‰äº›32ä½å¤„ç†å™¨ç‰¹æœ‰çš„æŒ‡ä»¤ä¼šå¼•èµ·æŠ¥é”™ã€‚&lt;/p&gt;
&lt;p&gt;ç°è±¡å°±æ˜¯æ¯æ¬¡åœ¨Vimä¸­&lt;code&gt;:w&lt;/code&gt;ä¿å­˜æ—¶ï¼Œå¯èƒ½ä¼šæŠ¥ï¼š&lt;code&gt;Error: invalid instruction suffix for 'push'&lt;/code&gt; æˆ– &lt;code&gt;Error: 'jcxz' is not supported in 64-bit mode&lt;/code&gt; ä¹‹ç±»çš„é”™è¯¯ã€‚&lt;/p&gt;
&lt;p&gt;å¯ä»¥åœ¨vimé…ç½®ä¸­æŒ‡å®š&lt;code&gt;g:syntastic_asm_compiler_options&lt;/code&gt;å‚æ•°ï¼Œé¿å…é”™è¯¯ï¼Œè¡¥ä¸å¦‚ä¸‹:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gh"&gt;diff --git a/vimrc.bundles b/vimrc.bundles&lt;/span&gt;
&lt;span class="gh"&gt;index c7428e8..7a4555d 100644&lt;/span&gt;
&lt;span class="gd"&gt;--- a/vimrc.bundles&lt;/span&gt;
&lt;span class="gi"&gt;+++ b/vimrc.bundles&lt;/span&gt;
&lt;span class="gu"&gt;@@ -299,6 +299,9 @@ call plug#end()&lt;/span&gt;
    &amp;quot; let g:syntastic_javascript_checkers = [&amp;#39;jsl&amp;#39;, &amp;#39;jshint&amp;#39;]
    &amp;quot; let g:syntastic_html_checkers=[&amp;#39;tidy&amp;#39;, &amp;#39;jshint&amp;#39;]

&lt;span class="gi"&gt;+    &amp;quot; FIXME: if asm, åœ¨64ä½ç³»ç»Ÿä¸Šå†™32ä½æ±‡ç¼–æ‰éœ€è¦&lt;/span&gt;
&lt;span class="gi"&gt;+    let g:syntastic_asm_compiler_options = &amp;quot;--32&amp;quot;&lt;/span&gt;
&lt;span class="gi"&gt;+&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ³¨ï¼šå‚è€ƒsyntasticæ–‡æ¡£ - &lt;a href="https://github.com/scrooloose/syntastic/wiki/ASM:---gcc"&gt;&lt;span class="caps"&gt;ASM&lt;/span&gt;:&amp;nbsp;gcc&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;64ä½Ubuntué€šè¿‡gccç”ŸæˆCä»£ç å¯¹åº”çš„32ä½æ±‡ç¼–ä»£ç &lt;/h3&gt;
&lt;p&gt;ç›´æ¥é€šè¿‡gccç”ŸæˆCä»£ç å¯¹åº”çš„æ±‡ç¼–ä»£ç åªéœ€&lt;code&gt;gcc -S&lt;/code&gt;ï¼Œä½†ç”Ÿæˆ32ä½æ±‡ç¼–ä»£ç å°±éœ€è¦ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ gcc -m32 -S hello.c
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ³¨ï¼šéœ€è¦å®‰è£…&lt;code&gt;libc6-dev-i386&lt;/code&gt;ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚&lt;/p&gt;</summary><category term="asm"></category><category term="Linux"></category><category term="Vim"></category></entry><entry><title>ç¼–è¯‘ã€é“¾æ¥ã€è¿è¡Œæ±‡ç¼–ç¨‹åº</title><link href="http://blog.wiseturtles.com/posts/Compile-Link-and-Run-ASM-Program.html" rel="alternate"></link><published>2016-06-17T00:09:00+08:00</published><author><name>ox0spy</name></author><id>tag:blog.wiseturtles.com,2016-06-17:posts/Compile-Link-and-Run-ASM-Program.html</id><summary type="html">&lt;p&gt;å­¦ä¹ æ±‡ç¼–è¿‡ç¨‹ä¸­æ¯æ¬¡è¾“å…¥as,&amp;nbsp;ldçš„ä¸€å †å‘½ä»¤è¡Œå‚æ•°ç¼–è¯‘ã€é“¾æ¥ç¨‹åºå®åœ¨å¾ˆéº»çƒ¦ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ï¼Œå†™ä¸ªå°è„šæœ¬å®Œæˆæ±‡ç¼–ç¨‹åºçš„ç¼–è¯‘ã€é“¾æ¥åŠè¿è¡Œã€‚&lt;/p&gt;
&lt;h2&gt;è„šæœ¬ä»‹ç»&lt;/h2&gt;
&lt;p&gt;è„šæœ¬å†…å®¹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="ch"&gt;#!/bin/bash -e&lt;/span&gt;

&lt;span class="k"&gt;function&lt;/span&gt; usage&lt;span class="o"&gt;()&lt;/span&gt;
&lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;usage: &lt;/span&gt;&lt;span class="nv"&gt;$0&lt;/span&gt;&lt;span class="s2"&gt; &amp;lt;asm-file-path&amp;gt;, the &amp;lt;asm-file-path&amp;gt; must end by &amp;#39;.s&amp;#39;&amp;quot;&lt;/span&gt;
    &lt;span class="nb"&gt;exit&lt;/span&gt; 0
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="nb"&gt;test&lt;/span&gt; &lt;span class="nv"&gt;$#&lt;/span&gt; -ne &lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; usage

&lt;span class="k"&gt;if&lt;/span&gt; ! &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$1&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; grep -Eq &lt;span class="s1"&gt;&amp;#39;\.s$&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
    usage
&lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; ! -f &lt;span class="nv"&gt;$1&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
    &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;can not access the asm source code: &amp;lt;&lt;/span&gt;&lt;span class="nv"&gt;$1&lt;/span&gt;&lt;span class="s2"&gt;&amp;gt;&amp;quot;&lt;/span&gt;
    usage
&lt;span class="k"&gt;fi&lt;/span&gt;

&lt;span class="nv"&gt;src&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$1&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;dir&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;dirname &lt;span class="nv"&gt;$src&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;basename&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;basename -s &lt;span class="s1"&gt;&amp;#39;.s&amp;#39;&lt;/span&gt; &lt;span class="nv"&gt;$src&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;obj&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$dir&lt;/span&gt;&lt;span class="s2"&gt;/&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;basename&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;.o&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$dir&lt;/span&gt;&lt;span class="s2"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;$basename&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;as_opts&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;--32 -gstabs&amp;quot;&lt;/span&gt;  &lt;span class="c1"&gt;# -gstabs: ä½¿ç”¨è¯¥å‚æ•°å¯ä»¥é€šè¿‡gdbè°ƒè¯•ä»£ç &lt;/span&gt;
&lt;span class="nv"&gt;ld_opts&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;-m elf_i386&amp;quot;&lt;/span&gt;

&lt;span class="c1"&gt;# check if .global label is not the default &amp;quot;_start&amp;quot;; if not &amp;quot;_start&amp;quot;, then using &amp;quot;-e label&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;global_label&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;grep -Eo &lt;span class="s1"&gt;&amp;#39;\.globl\s+\w+&amp;#39;&lt;/span&gt; &lt;span class="nv"&gt;$src&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; awk &lt;span class="s1"&gt;&amp;#39;{print $NF}&amp;#39;&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; x&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$global_label&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; !&lt;span class="o"&gt;=&lt;/span&gt; x&lt;span class="s2"&gt;&amp;quot;_start&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
    &lt;span class="nv"&gt;ld_opts&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$ld_opts&lt;/span&gt;&lt;span class="s2"&gt; -e &lt;/span&gt;&lt;span class="nv"&gt;$global_label&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="k"&gt;fi&lt;/span&gt;

&lt;span class="c1"&gt;# if asm source code invoke C stdlib, then link C stdlib&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt; grep -qE &lt;span class="s1"&gt;&amp;#39;\s+call\s+\w+&amp;#39;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$src&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
    &lt;span class="nv"&gt;ld_opts&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$ld_opts&lt;/span&gt;&lt;span class="s2"&gt; -lc -dynamic-linker /lib32/ld-linux.so.2&amp;quot;&lt;/span&gt;
&lt;span class="k"&gt;fi&lt;/span&gt;

&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;as &lt;/span&gt;&lt;span class="nv"&gt;$as_opts&lt;/span&gt;&lt;span class="s2"&gt; -o &lt;/span&gt;&lt;span class="nv"&gt;$obj&lt;/span&gt;&lt;span class="s2"&gt; &lt;/span&gt;&lt;span class="nv"&gt;$src&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
as &lt;span class="nv"&gt;$as_opts&lt;/span&gt; -o &lt;span class="nv"&gt;$obj&lt;/span&gt; &lt;span class="nv"&gt;$src&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;ld &lt;/span&gt;&lt;span class="nv"&gt;$ld_opts&lt;/span&gt;&lt;span class="s2"&gt; -o &lt;/span&gt;&lt;span class="nv"&gt;$bin&lt;/span&gt;&lt;span class="s2"&gt; &lt;/span&gt;&lt;span class="nv"&gt;$obj&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
ld &lt;span class="nv"&gt;$ld_opts&lt;/span&gt; -o &lt;span class="nv"&gt;$bin&lt;/span&gt; &lt;span class="nv"&gt;$obj&lt;/span&gt;

&lt;span class="c1"&gt;# `set +e` å‘½ä»¤æ‰§è¡Œè¿”å›å€¼ä¸ä¸ºé›¶ä¹Ÿä¸é€€å‡ºç¨‹åº&lt;/span&gt;
&lt;span class="nb"&gt;set&lt;/span&gt; +e
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;run &lt;/span&gt;&lt;span class="nv"&gt;$bin&lt;/span&gt;&lt;span class="s2"&gt; ...&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;$bin&lt;/span&gt;
&lt;span class="c1"&gt;# æ˜¾ç¤ºæ‰§è¡Œæ±‡ç¼–ç¨‹åºçš„è¿”å›å€¼&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;return value: &lt;/span&gt;&lt;span class="nv"&gt;$?&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="c1"&gt;# `set -e` é‡æ–°å¼€å¯å‘½ä»¤æ‰§è¡Œè¿”å›å€¼ä¸ä¸ºé›¶å°±é€€å‡ºç¨‹åº&lt;/span&gt;
&lt;span class="nb"&gt;set&lt;/span&gt; -e
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;æ³¨ï¼šä¸Šç¯‡æ–‡ç« å·²ç»è®²è¿‡å­¦ä¹ èµ„æ–™æ˜¯&lt;span class="caps"&gt;AT&lt;/span&gt;&amp;amp;T 32ä½æ±‡ç¼–ï¼Œè€Œä¸ªäººç”µè„‘æ˜¯64ä½ç³»ç»Ÿï¼Œæ‰€ä»¥ï¼ŒæŒ‡å®šäº† &lt;code&gt;as --32&lt;/code&gt; å’Œ &lt;code&gt;ld -m elf_i386&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h2&gt;å¦‚ä½•ä½¿ç”¨å‘¢?&lt;/h2&gt;
&lt;p&gt;å°†è„šæœ¬æ”¾å…¥ &lt;code&gt;~/bin/&lt;/code&gt; ç›®å½•å†…ï¼Œå¹¶è®¾ç½®å¯æ‰§è¡Œæƒé™ &lt;code&gt;chmod +x ~/bin/asm-run.sh&lt;/code&gt;ï¼Œç„¶åå°† &lt;code&gt;$HOME/bin&lt;/code&gt; åŠ å…¥ &lt;code&gt;$PATH&lt;/code&gt; ç¯å¢ƒå˜é‡ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;export PATH=$HOME/bin:$PATH&amp;#39;&lt;/span&gt; &amp;gt;&amp;gt; ~/.bashrc &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="nb"&gt;source&lt;/span&gt; ~/.bashrc
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿™æ ·å°±å¯ä»¥åœ¨ä»»æ„ç›®å½•ä¸­ç›´æ¥é€šè¿‡ &lt;code&gt;asm-run.sh&lt;/code&gt; è¿è¡Œè„šæœ¬äº†ã€‚&lt;/p&gt;
&lt;p&gt;å‡å¦‚ç°åœ¨æœ‰&lt;code&gt;myhello.s&lt;/code&gt;çš„æ±‡ç¼–æºç ï¼Œé€šè¿‡è¯¥è„šæœ¬ç¼–è¯‘è¿è¡Œçš„æ–¹æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ asm-run.sh myhello.s
as --32 -o ./myhello.o myhello.s
ld -m elf_i386 -e main -lc -dynamic-linker /lib32/ld-linux.so.2 -o ./myhello ./myhello.o
run ./myhello ...
Hello World
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ç»ˆäºä¸ç”¨ä¸€éä¸€éçš„è¾“å…¥æŒ‡ä»¤ç¼–è¯‘ã€é“¾æ¥ã€è¿è¡Œæ±‡ç¼–ç¨‹åºäº†ã€‚&lt;/p&gt;</summary><category term="asm"></category><category term="Linux"></category></entry><entry><title>åœ¨64ä½æœºå™¨ä¸Šç¼–å†™ã€è¿è¡Œ32ä½æ±‡ç¼–ä»£ç </title><link href="http://blog.wiseturtles.com/posts/Write-32bit-asm-program-and-run-on-64bit-machine.html" rel="alternate"></link><published>2016-06-16T12:37:00+08:00</published><author><name>ox0spy</name></author><id>tag:blog.wiseturtles.com,2016-06-16:posts/Write-32bit-asm-program-and-run-on-64bit-machine.html</id><summary type="html">&lt;p&gt;æˆ‘æŒ‰ç…§ &lt;code&gt;&amp;lt;&amp;lt;professional assembly language&amp;gt;&amp;gt;&lt;/code&gt;ï¼ˆä¸­æ–‡åä¸ºï¼šç¼–è¯‘è¯­è¨€ç¨‹åºè®¾è®¡) å­¦ä¹ æ±‡ç¼–ï¼Œä½†ä½¿ç”¨pushlåœ¨æˆ‘çš„Ubuntu 64bitä¸ŠæŠ¥é”™&lt;code&gt;Error: invalid instruction suffix for 'push'&lt;/code&gt;ã€‚
Googleä¸€åœˆå‘ç°éœ€è¦åœ¨ä»£ç å¤´éƒ¨åŠ ä¸Š&lt;code&gt;.code32&lt;/code&gt;ï¼Œå¹¶ä¸”ldæ—¶éœ€è¦é¢å¤–æŒ‡å®šäº›å‚æ•°ã€‚&lt;/p&gt;
&lt;h2&gt;å®‰è£…libc6-i386&lt;/h2&gt;
&lt;p&gt;ldé“¾æ¥æ—¶ä¼šç”¨åˆ°libc-i386ï¼Œæ‰€ä»¥ï¼Œå…ˆå®‰è£…å¹¶åšä¸ªè½¯é“¾æ¥ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt-get install libc6-i386
$ sudo ln -s /lib32/libc-2.19.so /lib32/libc.so
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ³¨ï¼šä¸åšè½¯é“¾æ¥å¯èƒ½ä¼šå¯¼è‡´&lt;code&gt;ld -lc&lt;/code&gt;æŠ¥é”™ï¼š&lt;code&gt;ld: cannot find -lc&lt;/code&gt;&lt;/p&gt;
&lt;h2&gt;åœ¨64ä½æœºå™¨ä¸Šç¼–è¯‘ã€é“¾æ¥ã€è¿è¡Œ32ä½æ±‡ç¼–ä»£ç &lt;/h2&gt;
&lt;p&gt;æºä»£ç å¦‚ä¸‹ï¼Œä»£ç ä¸­è°ƒç”¨printfè¾“å‡º&lt;code&gt;Hello World\n&lt;/code&gt;ï¼Œç„¶åè°ƒç”¨exit(0)é€€å‡ºã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat myhello.s
&lt;span class="c1"&gt;#myhello.s Just output &amp;quot;Hello World\n&amp;quot;&lt;/span&gt;
.code32
.section .data
msg:
    .asciz &lt;span class="s2"&gt;&amp;quot;Hello World\n&amp;quot;&lt;/span&gt;
.section .text
.globl main
main:
    pushl &lt;span class="nv"&gt;$msg&lt;/span&gt;
    call &lt;span class="nb"&gt;printf&lt;/span&gt;
    addl &lt;span class="nv"&gt;$4&lt;/span&gt;, %esp
    pushl &lt;span class="nv"&gt;$0&lt;/span&gt;
    call &lt;span class="nb"&gt;exit&lt;/span&gt;

$ as --32 -o myhello.o myhello.s
$ ld -e main -m elf_i386 -L/lib32 -lc -dynamic-linker /lib32/ld-linux.so.2 -o myhello myhello.o
$ ./myhello
Hello World
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ³¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;as --32&lt;/code&gt; æŒ‡å®šç”Ÿæˆ32ä½objectæ–‡ä»¶&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ld -e main&lt;/code&gt; å› ä¸ºç¨‹åºä¸­ç”¨äº†&lt;code&gt;.globl main&lt;/code&gt; è€Œé &lt;code&gt;.globl _start&lt;/code&gt;ï¼Œæ‰€ä»¥ï¼Œç”¨å®ƒæŒ‡å®šæ±‡ç¼–å…¥å£&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ld -m elf_i386&lt;/code&gt; æŒ‡å®šç”Ÿæˆelf&amp;nbsp;i386&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-L/lib32 -lc&lt;/code&gt;æŒ‡å®šä»&lt;code&gt;/lib32&lt;/code&gt;ç›®å½•ä¸‹æ‰¾&lt;code&gt;libc.so&lt;/code&gt;ï¼›å¯ä»¥ç®€å†™ä¸º&lt;code&gt;-lc&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-dynamic-linker /lib32/ld-linux.so.2&lt;/code&gt; æŒ‡å®šæ“ä½œç³»ç»Ÿç”¨æ¥åŠ¨æ€åœ°æŸ¥æ‰¾å’ŒåŠ è½½åº“æ–‡ä»¶çš„ç¨‹åº&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;è®¾ç½®bash&amp;nbsp;alias&lt;/h2&gt;
&lt;p&gt;æ¯æ¬¡éƒ½éœ€è¦è¾“å…¥&lt;code&gt;as --32&lt;/code&gt;å’Œ&lt;code&gt;ld -m elf_i386&lt;/code&gt;å¾ˆéº»çƒ¦ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡bash&amp;nbsp;aliasç®€åŒ–è¾“å…¥ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ tail -2 ~/.bashrc
&lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;as&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;as --32&amp;#39;&lt;/span&gt;
&lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;ld&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;ld -m elf_i386&amp;#39;&lt;/span&gt;
$ &lt;span class="nb"&gt;source&lt;/span&gt; ~/.bashrc
$ as -o myhello.o myhello.s
$ ld -e main -lc -dynamic-linker /lib32/ld-linux.so.2 -o myhello myhello.o
$ ./myhello
Hello World
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿™æ ·å°±æ–¹ä¾¿å¤šäº†ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æ ¹æ®ä¸ªäººå–œå¥½æŠŠå…¶å®ƒå‚æ•°ä¸€èµ·åŠ å…¥aliasä¸­ã€‚&lt;/p&gt;</summary><category term="asm"></category><category term="Linux"></category></entry><entry><title>Write Your First ASMÂ Program</title><link href="http://blog.wiseturtles.com/posts/Write-Your-First-ASM-Program.html" rel="alternate"></link><published>2016-06-15T22:09:00+08:00</published><author><name>ox0spy</name></author><id>tag:blog.wiseturtles.com,2016-06-15:posts/Write-Your-First-ASM-Program.html</id><summary type="html">&lt;p&gt;ç”¨æ±‡ç¼–å†™ä¸ªHello&amp;nbsp;Worldï¼ŒåŒæ—¶çœ‹çœ‹å¦‚ä½•ä¸€æ­¥ä¸€æ­¥å°†cç¨‹åºç¼–è¯‘æˆå¯æ‰§è¡Œæ–‡ä»¶ã€‚&lt;/p&gt;
&lt;h2&gt;å¼€å‘ç¯å¢ƒå‡†å¤‡&lt;/h2&gt;
&lt;p&gt;æ‰€æœ‰å¼€å‘éƒ½åœ¨Ubuntuä¸Šå®Œæˆï¼Œéœ€è¦ç”¨çš„è½¯ä»¶åŒ…ï¼šbinutils, gcc,&amp;nbsp;gdbã€‚&lt;/p&gt;
&lt;p&gt;Ubuntuä¸Šå®‰è£…è½¯ä»¶å¾ˆæ–¹ä¾¿ï¼ŒæŒ‡ä»¤å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt-get install binutils gcc gdb
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;asm Hello&amp;nbsp;World&lt;/h2&gt;
&lt;p&gt;ç”¨asmå†™ä¸ªHello Worldï¼Œ&lt;code&gt;.data&lt;/code&gt;æ•°æ®æ®µä¸­å®šä¹‰msgå˜é‡ä¸º &lt;code&gt;"Hello World\n"&lt;/code&gt;ï¼Œ&lt;code&gt;.text&lt;/code&gt;æŒ‡ä»¤æ®µä»&lt;code&gt;_start&lt;/code&gt;å¼€å§‹ï¼Œå¦åˆ™éœ€è¦ldæ—¶æŒ‡å®š&lt;code&gt;-e label&lt;/code&gt;ã€‚&amp;nbsp;ç¨‹åºè°ƒç”¨äº†printfè¾“å‡ºmsgï¼Œç„¶åè°ƒç”¨exit(0)é€€å‡ºã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat hello.s
&lt;span class="c1"&gt;#hello.s Just a Hello World in asm.&lt;/span&gt;
.section .data
msg:
    .ascii &lt;span class="s2"&gt;&amp;quot;Hello World\n&amp;quot;&lt;/span&gt;
.section .text
.globl _start
_start:
    movl &lt;span class="nv"&gt;$4&lt;/span&gt;, %eax
    movl &lt;span class="nv"&gt;$1&lt;/span&gt;, %ebx
    movl &lt;span class="nv"&gt;$msg&lt;/span&gt;, %ecx
    movl &lt;span class="nv"&gt;$12&lt;/span&gt;, %edx
    int &lt;span class="nv"&gt;$0&lt;/span&gt;x80
    movl &lt;span class="nv"&gt;$1&lt;/span&gt;, %eax
    movl &lt;span class="nv"&gt;$0&lt;/span&gt;, %ebx
    int &lt;span class="nv"&gt;$0&lt;/span&gt;x80
$ as -o hello.o hello.s
$ ld -o hello hello.o
$ ./hello
Hello World
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;å¦‚ä½•ä¸€æ­¥ä¸€æ­¥ç¼–è¯‘ã€é“¾æ¥cç¨‹åº&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat helloc.c
&lt;span class="c1"&gt;#include &amp;lt;stdio.h&amp;gt;&lt;/span&gt;
&lt;span class="c1"&gt;#include &amp;lt;stdlib.h&amp;gt;&lt;/span&gt;

int main&lt;span class="o"&gt;()&lt;/span&gt;
&lt;span class="o"&gt;{&lt;/span&gt;
    printf&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Hello World\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    exit&lt;span class="o"&gt;(&lt;/span&gt;0&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

$ gcc -S helloc.c
$ as -o helloc.o helloc.s
$ ld -e main -lc -dynamic-linker /lib64/ld-linux-x86-64.so.2 -o helloc helloc.o
$ ./helloc
Hello World
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¯´æ˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;gcc -Sç”Ÿæˆcä»£ç å¯¹åº”çš„æ±‡ç¼–ä»£ç ï¼Œä½†æ˜¯æ±‡ç¼–ä»£ç ä¸­çš„&lt;code&gt;.globl label&lt;/code&gt;ä¸ºmain&lt;/li&gt;
&lt;li&gt;å› ä¸ºæ±‡ç¼–ä»£ç çš„&lt;code&gt;.globl label&lt;/code&gt;æ˜¯&lt;code&gt;main&lt;/code&gt;ï¼Œæ‰€ä»¥å¿…é¡»ä½¿ç”¨&lt;code&gt;-e&lt;/code&gt;å‚æ•°æŒ‡å®šlabelä¸º&lt;code&gt;main&lt;/code&gt;ï¼›é»˜è®¤æ˜¯&lt;code&gt;_start&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;å› ä¸ºæ±‡ç¼–ä»£ç ç›´æ¥ä½¿ç”¨äº†cçš„åº“å‡½æ•°printfã€exitï¼Œæ‰€ä»¥å¿…é¡»æŒ‡å®š-lcé“¾æ¥cæ ‡å‡†åº“&lt;/li&gt;
&lt;li&gt;-lcåŠ¨æ€é“¾æ¥cæ ‡å‡†åº“ï¼Œæ‰€ä»¥ï¼Œå¿…é¡»æŒ‡å®šè¿è¡Œæ—¶åŠ è½½åŠ¨æ€åº“çš„ç¨‹åºï¼Œå³ï¼š&lt;code&gt;-dynamic-linker /lib64/ld-linux-x86-64.so.2&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;asm Hello World&amp;nbsp;(æ”¹è¿›ç‰ˆ)&lt;/h2&gt;
&lt;p&gt;æ—¢ç„¶æ±‡ç¼–ä»£ç ä¸­å¯ä»¥ç›´æ¥è°ƒç”¨cçš„æ ‡å‡†åº“å‡½æ•°ï¼Œé‚£å°±çœ‹çœ‹æ€ä¹ˆæ”¹è¿›ä¹‹å‰çš„hello.sã€‚
ä¸‹é¢ä»£ç è°ƒç”¨cåº“ä¸­çš„putså’Œexitå‡½æ•°ã€‚
å¯ä»¥ç”¨gccç¼–è¯‘ã€é“¾æ¥æ±‡ç¼–ä»£ç ï¼Œè€Œgccé»˜è®¤åªè®¤&lt;code&gt;.globl main&lt;/code&gt;è€Œä¸æ˜¯&lt;code&gt;.globl _start&lt;/code&gt;ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬ä¸‹é¢ç”¨&lt;code&gt;.globl main&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat new_hello.s
&lt;span class="c1"&gt;#new_hello.s Just a &amp;quot;Hello World&amp;quot;&lt;/span&gt;
.section .data
msg:
    .string &lt;span class="s2"&gt;&amp;quot;Hello World&amp;quot;&lt;/span&gt;
.section .text
.global main
main:
    movl &lt;span class="nv"&gt;$msg&lt;/span&gt;, %edi
    call puts
    movl &lt;span class="nv"&gt;$0&lt;/span&gt;, %edi
    call &lt;span class="nb"&gt;exit&lt;/span&gt;
$ as -o new_hello.o new_hello.s
$ ld -e main -lc -dynamic-linker /lib64/ld-linux-x86-64.so.2 -o new_hello new_hello.o
$ ./new_hello
Hello World

$ gcc -o new_hello new_hello.s  &lt;span class="c1"&gt;# å½“ç„¶å¯ä»¥ç›´æ¥ç”¨è¿™æ¡æŒ‡ä»¤ç¼–è¯‘ã€é“¾æ¥ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æœ¬æ–‡ç®€å•ä»‹ç»äº†å¦‚ä½•ç”¨æ±‡ç¼–å†™&lt;code&gt;Hello World&lt;/code&gt;ï¼Œå¹¶å°è¯•æ‰‹åŠ¨ç¼–è¯‘ã€é“¾æ¥cç¨‹åºï¼Œæœ€å¥½ä»‹ç»äº†åœ¨æ±‡ç¼–ä¸­å¦‚ä½•è°ƒç”¨cåº“å‡½æ•°ã€‚&lt;/p&gt;</summary><category term="asm"></category><category term="Linux"></category></entry><entry><title>Ubuntu/Debianè‡ªåŠ¨å®‰è£…å®‰å…¨æ›´æ–°</title><link href="http://blog.wiseturtles.com/posts/ubuntu-debian-automatic-security-updates.html" rel="alternate"></link><published>2016-05-06T12:38:00+08:00</published><author><name>ox0spy</name></author><id>tag:blog.wiseturtles.com,2016-05-06:posts/ubuntu-debian-automatic-security-updates.html</id><summary type="html">&lt;p&gt;æœ‰å°Ubuntuæœºå™¨ï¼Œä»…ä»…ä¸ºäº†ç§‘å­¦ä¸Šç½‘ï¼Œä½†ï¼Œè¿™å¹´å¤´æ¼æ´è¿™ä¹ˆå¤šï¼Œä¸‡ä¸€å“ªå¤©æˆè‚‰é¸¡äº†å‘¢ã€‚ã€‚ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ç®€å•è®°å½•ä¸‹Ubuntuç³»ç»Ÿé…ç½®è‡ªå·±å®‰è£…ç³»ç»Ÿå®‰å…¨è¡¥ä¸ã€‚(Debianç³»ç»Ÿåº”è¯¥ä¹Ÿé€‚ç”¨)&lt;/p&gt;
&lt;h2&gt;å®‰è£…unattended-upgradesè‡ªåŠ¨æ›´æ–°å®‰å…¨è¡¥ä¸&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt-get install unattended-upgrades
$ sudo dpkg-reconfigure unattended-upgrades  &lt;span class="c1"&gt;# é€‰Yesï¼Œè‡ªåŠ¨ä¸‹è½½å®‰è£…&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ ¹æ®è‡ªå·±æƒ…å†µä¿®æ”¹é…ç½®æ–‡ä»¶ - &lt;code&gt;/etc/apt/apt.conf.d/50unattended-upgrades&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å¯ä»¥è®¾ç½®é‚®ä»¶é€šçŸ¥ã€‚&lt;/p&gt;
&lt;h2&gt;å¦‚æœåªæƒ³æ”¶åˆ°é‚®ä»¶é€šçŸ¥ï¼Œå¯ä»¥å®‰è£…apticron&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ apt-get install apticron
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä¿®æ”¹é…ç½®æ–‡ä»¶ - &lt;code&gt;/etc/apticron/apticron.conf&lt;/code&gt;&lt;/p&gt;
&lt;h2&gt;è®¢é˜…ç›¸å…³é‚®ä»¶åˆ—è¡¨ï¼Œäº†è§£æœ€æ–°å®‰å…¨ä¿¡æ¯&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;[Ubuntu Security Notices]&lt;a href="http://www.ubuntu.com/usn/"&gt;http://www.ubuntu.com/usn/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;[Debian Security Information]&lt;a href="https://www.debian.org/security/index.en.html"&gt;https://www.debian.org/security/index.en.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å‚è€ƒé“¾æ¥:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://help.ubuntu.com/community/AutomaticSecurityUpdates"&gt;https://help.ubuntu.com/community/AutomaticSecurityUpdates&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://spin.atomicobject.com/2014/08/04/debian-ubuntu-security-updates/"&gt;https://spin.atomicobject.com/2014/08/04/debian-ubuntu-security-updates/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary><category term="Ubunu"></category><category term="Debian"></category></entry><entry><title>MySQLè‡ªåŠ¨å¤‡ä»½ï¼Œå¹¶åŒæ­¥åˆ°AmazonS3</title><link href="http://blog.wiseturtles.com/posts/MySQL-backup-to-Amazon-S3.html" rel="alternate"></link><published>2016-04-05T11:39:00+08:00</published><author><name>ox0spy</name></author><id>tag:blog.wiseturtles.com,2016-04-05:posts/MySQL-backup-to-Amazon-S3.html</id><summary type="html">&lt;p&gt;MySQLè‡ªåŠ¨å¤‡ä»½ï¼Œå¹¶å°†æœ¬åœ°å¤‡ä»½åŒæ­¥åˆ°Amazon&amp;nbsp;S3ï¼Œç„¶åé…ç½®é‚®ä»¶é€šçŸ¥ã€‚&lt;/p&gt;
&lt;p&gt;æ³¨: ç³»ç»Ÿä¸ºUbuntu&amp;nbsp;14.04ï¼ŒDebianç³»ç»Ÿä¹Ÿç±»ä¼¼ã€‚&lt;/p&gt;
&lt;h2&gt;å®‰è£…automysqlbackup&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt-get install automysqlbackup
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;é…ç½®automysqlbackup&lt;/h2&gt;
&lt;h3&gt;å‚æ•°ä»‹ç»&lt;/h3&gt;
&lt;p&gt;é…ç½®æ–‡ä»¶è·¯å¾„: &lt;code&gt;/etc/default/automysqlbackup&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ä¸»è¦å‚æ•°:
&lt;span class="caps"&gt;USERNAME&lt;/span&gt; - æ•°æ®åº“ç™»é™†ç”¨æˆ·å
&lt;span class="caps"&gt;PASSWORD&lt;/span&gt; - æ•°æ®åº“ç™»é™†å¯†ç 
&lt;span class="caps"&gt;DBHOST&lt;/span&gt; - æ•°æ®åº“ä¸»æœºåæˆ–&lt;span class="caps"&gt;IP&lt;/span&gt;åœ°å€
&lt;span class="caps"&gt;DBNAMES&lt;/span&gt; - éœ€è¦å¤‡ä»½çš„MySQLæ•°æ®åº“
&lt;span class="caps"&gt;BACKUPDIR&lt;/span&gt; - å¤‡ä»½æ–‡ä»¶å­˜æ”¾è·¯å¾„
&lt;span class="caps"&gt;SOCKET&lt;/span&gt; - MySQLæœåŠ¡çš„æœ¬åœ°unix socketè·¯å¾„
&lt;span class="caps"&gt;MAILCONTENT&lt;/span&gt; - å‘é€é‚®ä»¶å†…å®¹ï¼Œå¯ä»¥ä¸º: log, files, stdout, quiet
&lt;span class="caps"&gt;MAXATTSIZE&lt;/span&gt; - æœ€å¤§å…è®¸çš„é‚®ä»¶å†…å®¹å¤§å°
&lt;span class="caps"&gt;MAILADDR&lt;/span&gt; - æ¥æ”¶é€šçŸ¥çš„é‚®ç®±åœ°å€
&lt;span class="caps"&gt;PREBACKUP&lt;/span&gt; - å¤‡ä»½å‰è¿è¡Œçš„è„šæœ¬
&lt;span class="caps"&gt;POSTBACKUP&lt;/span&gt; -&amp;nbsp;å¤‡ä»½åè¿è¡Œçš„è„šæœ¬&lt;/p&gt;
&lt;p&gt;å…¶å®ƒå‚æ•°å‚è€ƒ &lt;code&gt;/etc/default/automysqlbackup&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ä¿®æ”¹&lt;code&gt;DBNAMES&lt;/code&gt;, &lt;code&gt;BACKUPDIR&lt;/code&gt;ï¼ŒæŒ‡å®šéœ€è¦å¤‡ä»½çš„æ•°æ®åº“åç§°å’Œå¤‡ä»½æ–‡ä»¶å­˜æ”¾è·¯å¾„ã€‚&lt;/p&gt;
&lt;h3&gt;å‘é€é‚®ä»¶é€šçŸ¥&lt;/h3&gt;
&lt;p&gt;ä¿®æ”¹&lt;code&gt;MAILCONTENT&lt;/code&gt;, &lt;code&gt;MAILADDR&lt;/code&gt;æŒ‡å®šå‘é€ä»€ä¹ˆå†…å®¹åˆ°æŒ‡å®šé‚®ç®±ã€‚&lt;/p&gt;
&lt;p&gt;æ³¨:&amp;nbsp;å…ˆç¡®ä¿é€šè¿‡postfixåœ¨å‘½ä»¤è¡Œå¯ä»¥å‘é€é‚®ä»¶åˆ°ä½ çš„é‚®ç®±.&lt;/p&gt;
&lt;h3&gt;å¤‡ä»½åˆ°Amazon&amp;nbsp;S3&lt;/h3&gt;
&lt;p&gt;å®‰è£…s3cmdï¼Œä½¿ç”¨s3cmdåŒæ­¥å¤‡ä»½æ–‡ä»¶åˆ°Amazon&amp;nbsp;S3ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo pip install s3cmd
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä¿®æ”¹&lt;code&gt;POSTBACKUP&lt;/code&gt;ï¼Œå¤‡ä»½å®ŒæˆååŒæ­¥å¤‡ä»½æ–‡ä»¶åˆ°Amazon&amp;nbsp;S3ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;POSTBACKUP=/etc/automysqlbackup/mysql-backup-post
$ cat /etc/automysqlbackup/mysql-backup-post
#!/bin/bash

sudo /usr/local/bin/s3cmd -c /home/user/.s3cfg -r sync local-automysqlbackup-path s3://your-backup-bucket/
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ³¨: å¤‡ä»½å‰é…ç½®s3cmdï¼Œç¡®ä¿å®ƒæœ‰æƒé™æ“ä½œä½ çš„S3&amp;nbsp;bucket&lt;/p&gt;</summary><category term="mysql"></category><category term="backup"></category><category term="S3"></category></entry><entry><title>Gerritå¤‡ä»½</title><link href="http://blog.wiseturtles.com/posts/Gerrit-backup.html" rel="alternate"></link><published>2016-03-11T18:52:00+08:00</published><author><name>ox0spy</name></author><id>tag:blog.wiseturtles.com,2016-03-11:posts/Gerrit-backup.html</id><summary type="html">&lt;p&gt;å°†Gerritå®æ—¶åŒæ­¥åˆ°å…¶å®ƒç³»ç»Ÿå®ŒæˆGerrit git reposå¤‡ä»½ã€‚é€šå¸¸ç”¨è¿™ç§æ–¹å¼å®ŒæˆGerrit&amp;nbsp;Mirrorã€‚&lt;/p&gt;
&lt;h2&gt;é€šè¿‡Gerrit replication&amp;nbsp;pluginå®ŒæˆGerritåŒæ­¥&lt;/h2&gt;
&lt;h3&gt;å®‰è£…buck&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ubuntu@gerrit$ sudo apt-get install ant
ubuntu@gerrit$ &lt;span class="nb"&gt;cd&lt;/span&gt; ~/download
ubuntu@gerrit$ git clone https://github.com/facebook/buck.git
ubuntu@gerrit$ &lt;span class="nb"&gt;cd&lt;/span&gt; buck
ubuntu@gerrit$ ant  &lt;span class="c1"&gt;# ç¼–è¯‘å®Œæˆå buck å¯æ‰§è¡Œæ–‡ä»¶å°±åœ¨å½“å‰çš„binç›®å½•&lt;/span&gt;
ubuntu@gerrit$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;export PATH=$HOME/download/buck/bin:$PATH&amp;#39;&lt;/span&gt; &amp;gt;&amp;gt; ~/.bashrc
ubuntu@gerrit$ &lt;span class="nb"&gt;source&lt;/span&gt; ~/.bashrc
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;ç¼–è¯‘replication&amp;nbsp;plugin&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ubuntu@gerrit$ git clone https://gerrit.googlesource.com/gerrit
ubuntu@gerrit$ git checkout -b v2.11.4-tag v2.11.4  &lt;span class="c1"&gt;# æˆ‘gerritç‰ˆæœ¬æ˜¯2.11.4&lt;/span&gt;
ubuntu@gerrit$ git submodule update --init --recursive
ubuntu@gerrit$ buck build plugins/replication:replication
ubuntu@gerrit$ cp buck-out/gen/plugins/replication/replication.jar /tmp
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;å®‰è£…replication&amp;nbsp;plugin&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ubuntu@gerrit$ ssh -p &lt;span class="m"&gt;29418&lt;/span&gt; localhost gerrit plugin install -n replication.jar - &amp;lt;/tmp/replication.jar
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;é…ç½®replication&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ubuntu@gerrit$ cat etc/replication.config
&lt;span class="o"&gt;[&lt;/span&gt;remote &lt;span class="s2"&gt;&amp;quot;gerrit-backup&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;
    &lt;span class="nv"&gt;url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; ubuntu@10.x.x.x:/data/gerrit-backup/git/&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;name&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;.git
    &lt;span class="nv"&gt;push&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; +refs/heads/*:refs/heads/*
    &lt;span class="nv"&gt;push&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; +refs/tags/*:refs/tags/*
    &lt;span class="nv"&gt;timeout&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 30
    &lt;span class="nv"&gt;threads&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 3
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;åŒæ­¥ä¸€ä»½ä»£ç åˆ°backup&amp;nbsp;gerrit&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ubuntu@gerrit-backup $ sudo mkdir -p /data/gerrit-backup
ubuntu@gerrit-backup $ sudo chown -R ubuntu /data
ubuntu@gerrit-backup $ &lt;span class="nb"&gt;exit&lt;/span&gt;  &lt;span class="c1"&gt;# é€€å‡ºgerrit-backup&lt;/span&gt;

ubuntu@gerrit$ &lt;span class="nb"&gt;cd&lt;/span&gt; ~/apps/gerrit/review_site  &lt;span class="c1"&gt;# ç™»é™†gerrit,å¹¶è¿›å…¥Gerritç›®å½•&lt;/span&gt;
ubuntu@gerrit$ tar cf - git &lt;span class="p"&gt;|&lt;/span&gt; ssh gerrit-backup &lt;span class="s2"&gt;&amp;quot;cd /data/gerrit-backup &amp;amp;&amp;amp; tar xf -&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;å¼€å§‹åŒæ­¥&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ubuntu@gerrit$ ssh -p &lt;span class="m"&gt;29418&lt;/span&gt; localhost gerrit plugin reload replication  &lt;span class="c1"&gt;# reload&lt;/span&gt;
ubuntu@gerrit$ ssh -p &lt;span class="m"&gt;29418&lt;/span&gt; localhost replication start --wait --all  &lt;span class="c1"&gt;# start replication&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Gerrit&amp;nbsp;MySQLå¤‡ä»½&lt;/h2&gt;
&lt;p&gt;é€šè¿‡automysqlbackupå¤‡ä»½MySQLæ•°æ®åˆ°æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ubuntu@gerrit$ sudo apt-get install automysqlbackup
ubuntu@gerrit$ sudo automysqlbackup  &lt;span class="c1"&gt;# è¿è¡Œautomysqlbackupæµ‹è¯•æ˜¯å¦å¯ä»¥å¤‡ä»½ï¼Œå¯èƒ½éœ€è¦ä¿®æ”¹ /etc/default/automysqlbackup å’Œ /etc/mysql* é…ç½®æ–‡ä»¶&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¦‚æœéœ€è¦å¯ä»¥å°†MySQLæ•°æ®å®šæœŸåŒæ­¥åˆ°Amazon&amp;nbsp;S3ç­‰ç³»ç»Ÿå­˜å‚¨.&lt;/p&gt;
&lt;h2&gt;å‚è€ƒæ–‡æ¡£:&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://gerrit.googlesource.com/gerrit/+/v2.0.2/Documentation/config-replication.txt"&gt;config-replication.txt&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary><category term="Gerrit"></category><category term="replication"></category><category term="MySQL"></category></entry><entry><title>Mac System Intregrity Protection - Operation notÂ permitted</title><link href="http://blog.wiseturtles.com/posts/Mac-System-Intregrity-Protection.html" rel="alternate"></link><published>2016-02-16T14:36:00+08:00</published><author><name>ox0spy</name></author><id>tag:blog.wiseturtles.com,2016-02-16:posts/Mac-System-Intregrity-Protection.html</id><summary type="html">&lt;p&gt;è²Œä¼¼åˆšæ‹¿åˆ°ç”µè„‘æ˜¯è‡ªå·±æ‰‹åŠ¨ç¼–è¯‘å®‰è£…äº†vim 7.3ï¼Œåæ¥éƒ½æ˜¯brew install&amp;nbsp;vimæœ€æ–°ç‰ˆæœ¬ã€‚&lt;/p&gt;
&lt;p&gt;ä»Šå¤©vimå‡ºäº†ç‚¹é—®é¢˜ï¼Œå‘ç°ç³»ç»Ÿä¸Šè¿˜æœ‰ä¸ªvim 7.3ï¼Œå‡†å¤‡åˆ é™¤æ—¶å°±æŠ¥&lt;code&gt;Operation not permitted&lt;/code&gt;&lt;/p&gt;
&lt;h2&gt;é—®é¢˜æè¿°&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo rm -rf /usr/share/vim/
rm: /usr/share/vim: Operation not permitted
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä¹ æƒ¯Linuxæˆ‘å°±è§‰å¾—æœ‰æ²¡æœ‰æé”™ï¼Œæˆ‘æ˜¯rootå‘€ï¼Œä»€ä¹ˆæ–‡ä»¶ä¸èƒ½åˆ é™¤å‘¢ã€‚ã€‚ã€‚&lt;/p&gt;
&lt;p&gt;Googleä¸‹æ‰çŸ¥é“Appleä¸ºäº†é˜²æ­¢æ¶æ„è½¯ä»¶ç ´åç³»ç»Ÿå¼€å¯äº†&lt;a href="https://support.apple.com/en-us/HT204899"&gt;System Intregrity Protection&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h2&gt;è§£å†³&lt;/h2&gt;
&lt;p&gt;æŸ¥çœ‹æ–‡ä»¶flag:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ls -lO /usr/share/vim
-rwxr-xr-x  &lt;span class="m"&gt;8&lt;/span&gt; root  wheel  restricted - Aug  &lt;span class="m"&gt;2&lt;/span&gt; 22:36 /usr/share/vim
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å‚è€ƒ: &lt;a href="http://stackoverflow.com/questions/30768087/restricted-folder-files-in-os-x-el-capitan"&gt;http://stackoverflow.com/questions/30768087/restricted-folder-files-in-os-x-el-capitan&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;reboot&lt;/li&gt;
&lt;li&gt;as soon as you hear the &amp;#8220;Mac sound&amp;#8221; on the grey screen, press Cmd+R to enter Recovery&amp;nbsp;mode&lt;/li&gt;
&lt;li&gt;Open&amp;nbsp;Utilities-&amp;gt;Terminal&lt;/li&gt;
&lt;li&gt;Run the command csrutil&amp;nbsp;disable&lt;/li&gt;
&lt;li&gt;Reboot, you&amp;#8217;ll land in the normal &lt;span class="caps"&gt;OS&lt;/span&gt; with &lt;span class="caps"&gt;SIP&lt;/span&gt;&amp;nbsp;disabled&lt;/li&gt;
&lt;li&gt;do all the changes you&amp;#8217;d like to&amp;nbsp;do&lt;/li&gt;
&lt;li&gt;Reboot&amp;nbsp;again&lt;/li&gt;
&lt;li&gt;as soon as you hear the &amp;#8220;Mac sound&amp;#8221; on the grey screen, press Cmd+R to enter Recovery&amp;nbsp;mode&lt;/li&gt;
&lt;li&gt;Enable &lt;span class="caps"&gt;SIP&lt;/span&gt; with csrutil&amp;nbsp;enable&lt;/li&gt;
&lt;li&gt;Reboot&amp;nbsp;again&lt;/li&gt;
&lt;li&gt;done&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æµç¨‹å¦‚ä¸‹:&lt;/p&gt;
&lt;p&gt;é‡å¯ -&amp;gt; Command+Rï¼Œè¿›å…¥æ¢å¤æ¨¡å¼ -&amp;gt; åœ¨ç»ˆç«¯é€šè¿‡&lt;code&gt;csrutil disable&lt;/code&gt;ç¦æ‰&lt;span class="caps"&gt;SIP&lt;/span&gt; -&amp;gt; é‡å¯ -&amp;gt; åˆ é™¤æ–‡ä»¶ -&amp;gt; å†é€šè¿‡Command+Rï¼Œè¿›å…¥æ¢å¤æ¨¡å¼ -&amp;gt; é€šè¿‡ &lt;code&gt;csrutil enable&lt;/code&gt; å¯ç”¨&lt;span class="caps"&gt;SIP&lt;/span&gt; -&amp;gt;&amp;nbsp;å†æ¬¡é‡å¯&lt;/p&gt;
&lt;p&gt;æŸ¥çœ‹&lt;span class="caps"&gt;SIP&lt;/span&gt;çŠ¶æ€:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ csrutil status
System Integrity Protection status: enabled.
&lt;/pre&gt;&lt;/div&gt;</summary><category term="Mac"></category><category term="SIP"></category></entry><entry><title>Mavené€šè¿‡pluginåœ¨Tomcatã€Jettyä¸­è¿è¡Œé¡¹ç›®</title><link href="http://blog.wiseturtles.com/posts/maven-plugin-tomcat-jetty-run.html" rel="alternate"></link><published>2016-02-09T16:00:00+08:00</published><author><name>ox0spy</name></author><id>tag:blog.wiseturtles.com,2016-02-09:posts/maven-plugin-tomcat-jetty-run.html</id><summary type="html">&lt;p&gt;è®°å½•ä¸‹å¦‚ä½•åœ¨pom.xmlä¸­é…ç½®æ’ä»¶ï¼Œé€šè¿‡tomcatã€Jettyè¿è¡Œé¡¹ç›®.&lt;/p&gt;
&lt;h2&gt;é…ç½®pom.xml&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;build&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;plugins&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.tomcat.maven&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;tomcat6-maven-plugin&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;2.2&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;/plugin&amp;gt;&lt;/span&gt;

        &lt;span class="nt"&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.tomcat.maven&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;tomcat7-maven-plugin&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;2.2&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;/plugin&amp;gt;&lt;/span&gt;

        &lt;span class="nt"&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.mortbay.jetty&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;jetty-maven-plugin&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;/plugin&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/plugins&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/build&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;æµ‹è¯•&lt;/h2&gt;
&lt;h3&gt;Maven Tomcat&amp;nbsp;plugin&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ mvn tomcat:run
$ mvn tomcat7:run
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Maven Jetty&amp;nbsp;plugin&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ mvn jetty:run
&lt;/pre&gt;&lt;/div&gt;</summary><category term="Java"></category><category term="Maven"></category><category term="Tomcat"></category><category term="Jetty"></category></entry><entry><title>Mac Python ValueError: unknown locale: UTF-8</title><link href="http://blog.wiseturtles.com/posts/mac-python-ValueError-unknown-locale-utf-8.html" rel="alternate"></link><published>2015-12-13T08:39:00+08:00</published><author><name>ox0spy</name></author><id>tag:blog.wiseturtles.com,2015-12-13:posts/mac-python-ValueError-unknown-locale-utf-8.html</id><summary type="html">&lt;p&gt;Mac brewæ›´æ–°è½¯ä»¶æŠ¥locale utf-8&amp;nbsp;unknownã€‚&lt;/p&gt;
&lt;h2&gt;é—®é¢˜æè¿°&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;brew update &amp;amp;&amp;amp; brew upgrade&lt;/code&gt;ï¼Œæ›´æ–° mpv æ—¶æŠ¥é”™: &lt;code&gt;ValueError: unknown locale: UTF-8&lt;/code&gt;&lt;/p&gt;
&lt;h4&gt;ç¡®å®šå½“å‰locale&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ locale
&lt;span class="nv"&gt;LANG&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;
&lt;span class="nv"&gt;LC_COLLATE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;C&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;LC_CTYPE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;UTF-8&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;LC_MESSAGES&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;C&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;LC_MONETARY&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;C&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;LC_NUMERIC&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;C&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;LC_TIME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;C&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;LC_ALL&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;Pythonè·å–å½“å‰locale&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ python -c &lt;span class="s1"&gt;&amp;#39;import locale; print(locale.getdefaultlocale());&amp;#39;&lt;/span&gt;
Traceback &lt;span class="o"&gt;(&lt;/span&gt;most recent call last&lt;span class="o"&gt;)&lt;/span&gt;:
File &lt;span class="s2"&gt;&amp;quot;&amp;lt;string&amp;gt;&amp;quot;&lt;/span&gt;, line 1, in &amp;lt;module&amp;gt;
File &lt;span class="s2"&gt;&amp;quot;/usr/local/Cellar/python/2.7.11/Frameworks/Python.framework/Versions/2.7/lib/python2.7/locale.py&amp;quot;&lt;/span&gt;, line 543, in getdefaultlocale &lt;span class="k"&gt;return&lt;/span&gt; _parse_localename&lt;span class="o"&gt;(&lt;/span&gt;localename&lt;span class="o"&gt;)&lt;/span&gt;
File &lt;span class="s2"&gt;&amp;quot;/usr/local/Cellar/python/2.7.11/Frameworks/Python.framework/Versions/2.7/lib/python2.7/locale.py&amp;quot;&lt;/span&gt;, line 475, in _parse_localename raise ValueError, &lt;span class="s1"&gt;&amp;#39;unknown locale: %s&amp;#39;&lt;/span&gt; % localename
ValueError: unknown locale: UTF-8
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;è§£å†³&lt;/h4&gt;
&lt;p&gt;è®¾ç½®localeä¸ºen_US.&lt;span class="caps"&gt;UTF&lt;/span&gt;-8ï¼Œæˆ‘ä½¿ç”¨çš„zshï¼Œæ‰€ä»¥åœ¨&lt;code&gt;~/.zshrc&lt;/code&gt;ä¸­æ·»åŠ localeè®¾ç½®ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;LANG&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;en_US.UTF-8
&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;LC_CTYPE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;en_US.UTF-8
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å†é€šè¿‡Pythonè·å–å½“å‰localeï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ python -c &lt;span class="s1"&gt;&amp;#39;import locale; print(locale.getdefaultlocale());&amp;#39;&lt;/span&gt;
&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;en_US&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;UTF-8&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;brew upgrade&lt;/code&gt;ä¹Ÿæ­£å¸¸å·¥ä½œäº†ã€‚&lt;/p&gt;</summary><category term="Python"></category><category term="Shell"></category><category term="Mac"></category></entry><entry><title>top</title><link href="http://blog.wiseturtles.com/posts/linux-top.html" rel="alternate"></link><published>2015-11-23T14:21:00+08:00</published><author><name>crazygit</name></author><id>tag:blog.wiseturtles.com,2015-11-23:posts/linux-top.html</id><summary type="html">&lt;h2&gt;ç®€ä»‹&lt;/h2&gt;
&lt;p&gt;topå‘½ä»¤çš„å…·ä½“å°±ä¸è§£é‡Šäº†ï¼Œè®°å½•ä¸€äº›å®ç”¨çš„å‘½ä»¤&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# redisç”¨æˆ·æ­¤æ—¶æ‰€ä½¿ç”¨çš„å†…å­˜æ€»æ•°&lt;/span&gt;
&lt;span class="c1"&gt;# è¿™é‡Œçš„å†…å­˜ä½¿ç”¨&lt;/span&gt;
top -bn1 -u redis &lt;span class="p"&gt;|&lt;/span&gt;  awk &lt;span class="s1"&gt;&amp;#39;{mem += $10} END {print mem}&amp;#39;&lt;/span&gt;

&lt;span class="c1"&gt;# æŸ¥çœ‹æœåŠ¡å™¨æ‰€æœ‰è¿›ç¨‹çš„å†…å®¹ä½¿ç”¨æ€»æ•°&lt;/span&gt;
&lt;span class="c1"&gt;# ç»“æœå¯èƒ½å¤§äº100%ï¼Œååº”å‡ºç›®å‰æœºå™¨å†…å®¹å¯ç”¨è¾ƒå°‘, å…·ä½“è§£é‡Šå¯ä»¥å‚è€ƒ&lt;/span&gt;
&lt;span class="c1"&gt;# http://serverfault.com/questions/471757/sum-of-memory-of-few-processes-in-top-is-greater-than-100&lt;/span&gt;
$ top -bn1 &lt;span class="p"&gt;|&lt;/span&gt;  awk &lt;span class="s1"&gt;&amp;#39;{mem += $10} END {print mem}&amp;#39;&lt;/span&gt;
135.6
&lt;/pre&gt;&lt;/div&gt;</summary><category term="linux"></category><category term="command"></category><category term="top"></category></entry><entry><title>Jenkinsè‡ªåŠ¨æ„å»ºiOSåº”ç”¨</title><link href="http://blog.wiseturtles.com/posts/Jenkins-auto-build-iOS-apps.html" rel="alternate"></link><published>2015-11-11T15:42:00+08:00</published><author><name>ox0spy</name></author><id>tag:blog.wiseturtles.com,2015-11-11:posts/Jenkins-auto-build-iOS-apps.html</id><summary type="html">&lt;p&gt;æœ€è¿‘æŠ˜è…¾ç”¨Jenkinsè‡ªåŠ¨æ„å»ºiOSåº”ç”¨ã€‚&lt;/p&gt;
&lt;h2&gt;ç¼–è¯‘ç¯å¢ƒ&lt;/h2&gt;
&lt;p&gt;ä¸ºäº†æ„å»ºiOSåº”ç”¨ï¼Œå¿…é¡»æ‰¾å°Macç”µè„‘åšslaveã€‚
å®‰è£…å¾ˆç®€å•ï¼Œè²Œä¼¼brew install&amp;nbsp;jenkinså°±å¯ä»¥äº†ï¼Œç„¶åï¼ŒJenkinsé¡µé¢ä¸Šå°†å®ƒåŠ å…¥ä½œä¸ºslaveã€‚&lt;/p&gt;
&lt;h2&gt;å¼€å‘è€…è¯ä¹¦&lt;/h2&gt;
&lt;p&gt;ä¸ºäº†å¯ä»¥ç¼–è¯‘ã€æ‰“åŒ…ï¼Œéœ€è¦åˆ¶ä½œå¼€å‘è€…è¯ä¹¦ï¼Œå¹¶å¯¼å‡ºä¸º.p12, .cer, .mobileprovision&amp;nbsp;ç”Ÿæˆè¿‡ç¨‹è‡ªå·±Googleå§ã€‚&lt;/p&gt;
&lt;h2&gt;ç¼–è¯‘ã€æ‰“åŒ…å‘½ä»¤&lt;/h2&gt;
&lt;p&gt;åŒæ„Xcodeå’ŒApple &lt;span class="caps"&gt;SDK&lt;/span&gt;åè®®:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo xcodebuild -license
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æˆ‘ç”¨Facebookå¼€æºçš„xctoolç¼–è¯‘iOSåº”ç”¨ï¼Œå®‰è£…xctoolã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ brew install xctool
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æˆ‘æ²¡æœ‰ä½¿ç”¨Jenkinsçš„Xcodeæ’ä»¶ï¼Œç›´æ¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤ç¼–è¯‘:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ xctool -workspace &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;WORKSPACE&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt; -scheme &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;SCHEME&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt; archive -archivePath &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;ARCHIVEPATH&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;/&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;IPA_NAME&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
$ xcrun -sdk iphoneos PackageApplication -v &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;PROJECT_BUILDDIR&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;/*.app -o &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;ARCHIVEPATH&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;/&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;IPA_NAME&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;.ipa&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ç”ŸæˆdSYM:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="o"&gt;(&lt;/span&gt; &lt;span class="nb"&gt;cd&lt;/span&gt; &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;DSYM_INPUT_PATH&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt; &lt;span class="p"&gt;;&lt;/span&gt; zip -r -X &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;DSYM_ZIP_OUTPUT_PATH&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt; *.dSYM &lt;span class="o"&gt;)&lt;/span&gt;  &lt;span class="c1"&gt;# zipping dSYM for testflight upload&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;ç¢°åˆ°çš„é—®é¢˜&lt;/h2&gt;
&lt;h3&gt;User interaction is not&amp;nbsp;allowed&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ security unlock-keychain -p &amp;lt;your-passwd&amp;gt; /Users/wlw/Library/Keychains/login.keychain
$ security show-keychain-info ~/Library/Keychains/login.keychain
$ set-keychain-settings -t &lt;span class="m"&gt;3600&lt;/span&gt; -l ~/Library/Keychains/login.keychain
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¼€å§‹åœ¨å‘½ä»¤è¡Œè¿è¡Œå®Œè¿˜æ˜¯ä¸€ç›´æŠ¥è¿™ä¸ªé”™è¯¯ï¼Œåæ¥ï¼Œå°†unlock-keychainå‘½ä»¤æ”¾åœ¨ç¼–è¯‘å‘½ä»¤å‰å°±å¥½äº†ã€‚&lt;/p&gt;
&lt;p&gt;è®°å¾—ç¼–è¯‘å‰å…ˆè¿è¡Œ:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ security unlock-keychain -p &amp;lt;your-passwd&amp;gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$HOME&lt;/span&gt;&lt;span class="s2"&gt;/Library/Keychains/login.keychain&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;å‚è€ƒæ–‡ç« &lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.egeek.me/2013/02/23/jenkins-and-xcode-user-interaction-is-not-allowed/"&gt;http://www.egeek.me/2013/02/23/jenkins-and-xcode-user-interaction-is-not-allowed/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary><category term="Jenkins"></category><category term="Mac"></category><category term="iOS"></category></entry><entry><title>Linuxè¿œç¨‹æ–‡ä»¶æ‹·è´</title><link href="http://blog.wiseturtles.com/posts/copy-remote-host-file.html" rel="alternate"></link><published>2015-11-11T10:12:00+08:00</published><author><name>ox0spy</name></author><id>tag:blog.wiseturtles.com,2015-11-11:posts/copy-remote-host-file.html</id><summary type="html">&lt;p&gt;æˆ‘ä»¬ç»å¸¸ä¼šç¢°åˆ°ä»ä¸€ä¸ªä¸»æœºä¸Šæ‹·è´æ–‡ä»¶åˆ°å…¶ä»–ä¸»æœºï¼Œæœ¬æ–‡æ±‡æ€»ä¸‹å¸¸ç”¨æ–¹æ³•ã€‚&lt;/p&gt;
&lt;h2&gt;ssh&lt;/h2&gt;
&lt;p&gt;æåˆ°è¿œç¨‹æ–‡ä»¶æ‹·è´ï¼Œå¤§å®¶è‚¯å®šé¦–å…ˆæƒ³åˆ°çš„æ˜¯sshã€‚(å•¥? ä½ æƒ³åˆ°çš„æ˜¯ftp??&amp;nbsp;æ­å»ºä¸ªftpå¥½éº»çƒ¦&amp;#8230;)&lt;/p&gt;
&lt;p&gt;é¿å…è¾“å…¥ç”¨æˆ·å¯†ç ï¼Œå¯ä»¥å…ˆè¿è¡Œ:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ssh-copy-id &amp;lt;user@remote-host&amp;gt;  &lt;span class="c1"&gt;# è¾“å…¥å¯†ç ï¼Œå®ƒä¼šå°†ä½ çš„key(~/.ssh/id_rsa.pub)æ·»åŠ åˆ°remote-host:~user/.ssh/authorized_keys&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;é€šè¿‡scpåšæ–‡ä»¶æ‹·è´:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ scp &lt;span class="o"&gt;[&lt;/span&gt;-r&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;-P port&lt;span class="o"&gt;]&lt;/span&gt; &amp;lt;your-local-file&amp;gt; &lt;span class="o"&gt;[]&lt;/span&gt;&amp;lt;user&amp;gt;@&lt;span class="o"&gt;]&lt;/span&gt;&amp;lt;remote-host&amp;gt;:&amp;lt;remote-file-path&amp;gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¦‚æœç½‘ç»œæ¯”è¾ƒæ…¢å¯ä»¥å…ˆå‹ç¼©å†æ‹·è´:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ssh user@remote-host &lt;span class="s2"&gt;&amp;quot;tar zcf - /file/path/to/copy&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; tar zxf - -C /file/path/to/receive  &lt;span class="c1"&gt;# ä»remote-hostæ‹·è´æ–‡ä»¶å›æ¥&lt;/span&gt;
$ tar zcf - /file/path/to/copy &lt;span class="p"&gt;|&lt;/span&gt; ssh user@remote-host &lt;span class="s2"&gt;&amp;quot;tar zxf - -C /file/path/to/receive&amp;quot;&lt;/span&gt;  &lt;span class="c1"&gt;# å°†æœ¬åœ°æ–‡ä»¶æ‹·è´åˆ°remote-host&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;&lt;span class="caps"&gt;HTTP&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;ä¹Ÿå¯ä»¥é€šè¿‡&lt;span class="caps"&gt;HTTP&lt;/span&gt;åè®®æ‹·è´ï¼Œå¦‚æœæœ¬åœ°æ­£å¥½æœ‰nginx/apacheï¼Œln -s åˆ›å»ºä¸ªè½¯é“¾æ¥åˆ°å¤–éƒ¨å¯ä»¥è®¿é—®çš„è·¯å¾„ï¼Œä»å…¶å®ƒæœºå™¨å¯ä»¥é€šè¿‡wgetä¸‹è½½ã€‚
ä½†ï¼Œä¸æ˜¯æ‰€æœ‰æœºå™¨éƒ½è£…äº†nginx/apacheï¼Œå¯ä»¥é€šè¿‡Pythonè‡ªå¸¦æ¨¡å—å¿«é€Ÿå¯åŠ¨ä¸€ä¸ª&lt;span class="caps"&gt;HTTP&lt;/span&gt; Simple&amp;nbsp;Serverã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ python -mSimpleHTTPServer  &lt;span class="c1"&gt;# é»˜è®¤ç›‘å¬8000ç«¯å£ï¼Œä½ å½“ç„¶å¯ä»¥è‡ªå·±æŒ‡å®šç«¯å£&lt;/span&gt;
$ python -mSimpleHTTPServer &lt;span class="m"&gt;8888&lt;/span&gt;  &lt;span class="c1"&gt;# æŒ‡å®šç›‘å¬ç«¯å£ä¸º8888&lt;/span&gt;
$ wget listen-ip:port/&amp;lt;file/path&amp;gt; &lt;span class="c1"&gt;# ä»å…¶å®ƒä¸»æœºæ‹·è´æ–‡ä»¶&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ—¢ç„¶å·²ç»æœ‰äº†&lt;span class="caps"&gt;HTTP&lt;/span&gt;&amp;nbsp;Serverï¼Œä½ å½“ç„¶å¯ä»¥é€šè¿‡æµè§ˆå™¨è®¿é—®äº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;span class="caps"&gt;HTTP&lt;/span&gt;å®Œå…¨å¯ä»¥æ”¯æŒæ–­ç‚¹ç»­ä¼ ï¼Œwget -c&amp;nbsp;å°±å¯ä»¥ã€‚&lt;/p&gt;
&lt;h2&gt;rsync&lt;/h2&gt;
&lt;p&gt;å¤§å®¶å¯èƒ½éƒ½ä½“ä¼šè¿‡scpä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œç½‘ç»œã€ä¸»æœºå¼‚å¸¸å¯¼è‡´å¿…é¡»é‡æ–°ä¼ ï¼Œå°æ–‡ä»¶ã€ç½‘ç»œå¿«è¿˜å¥½ï¼Œä¸ç„¶çœŸçš„æƒ³æ‰“äººã€‚&amp;nbsp;ä½ ä¸€å®šæƒ³å¦‚æœå¯ä»¥æ–­ç‚¹ç»­ä¼ å°±å¥½äº†ï¼Œrsyncå¯ä»¥å®Œæˆä½ çš„å¿ƒæ„¿ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ rsync -P --rsh&lt;span class="o"&gt;=&lt;/span&gt;ssh --progress &amp;lt;your-local-file&amp;gt; user@remote-host:&amp;lt;receive-file-path&amp;gt;
$ rsync -P -v -e ssh &amp;lt;local-file&amp;gt; user@remote-host:receive-file-path  &lt;span class="c1"&gt;# æœ¬åœ°åŒæ­¥æ–‡ä»¶åˆ°remote-host&lt;/span&gt;
$ rsync -P -v -e ssh user@remote-host:receive-file-path &amp;lt;local-file-path&amp;gt;  &lt;span class="c1"&gt;# remote-hostæ–‡ä»¶åŒæ­¥åˆ°æœ¬åœ°&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;rsyncåŠŸèƒ½å¼ºå¤§ï¼Œä»¥åå†è¡¥å……ã€‚&lt;/p&gt;
&lt;h2&gt;zsync&lt;/h2&gt;
&lt;p&gt;å…ˆå®‰è£…åçœ‹æ–‡æ¡£å§ï¼ŒåŸºäº&lt;span class="caps"&gt;HTTP&lt;/span&gt;çš„rsyncï¼Œä½¿ç”¨æœ‰ä¸€å®šé™åˆ¶ï¼Œå¿…é¡»æœåŠ¡ç«¯æœ‰ .zsync&amp;nbsp;æ‰è¡Œã€‚ä¼˜ç‚¹æ˜¯é€Ÿåº¦éå¸¸å¿«ã€‚&lt;/p&gt;</summary><category term="Linux"></category><category term="ssh"></category><category term="sync"></category><category term="python"></category><category term="tar"></category></entry><entry><title>PythonÂ Geventå®‰è£…æŠ¥é”™</title><link href="http://blog.wiseturtles.com/posts/gevent-install-error.html" rel="alternate"></link><published>2015-10-31T20:46:00+08:00</published><author><name>ox0spy</name></author><id>tag:blog.wiseturtles.com,2015-10-31:posts/gevent-install-error.html</id><summary type="html">&lt;p&gt;Macä¸Špipå®‰è£…geventæŠ¥é”™ä¿¡æ¯å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;libev/ev.c:1029:42: error: &amp;#39;_Noreturn&amp;#39; keyword must precede function declarator
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è§£å†³ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nv"&gt;CFLAGS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;-std=c99&amp;#39;&lt;/span&gt; pip install gevent
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿™é‡Œæœ‰è®¨è®ºï¼šhttps://github.com/NixOS/nixpkgs/issues/8569&lt;/p&gt;</summary><category term="python"></category><category term="pip"></category><category term="gevent"></category></entry><entry><title>scrapydå’Œscrapyd-clientä½¿ç”¨æ•™ç¨‹</title><link href="http://blog.wiseturtles.com/posts/scrapyd.html" rel="alternate"></link><published>2015-10-29T17:42:00+08:00</published><author><name>crazygit</name></author><id>tag:blog.wiseturtles.com,2015-10-29:posts/scrapyd.html</id><summary type="html">&lt;p&gt;scrapydæ˜¯ä¸€ä¸ªç”¨äºéƒ¨ç½²å’Œè¿è¡Œscrapyçˆ¬è™«çš„ç¨‹åºï¼Œå®ƒå…è®¸ä½ é€šè¿‡&lt;span class="caps"&gt;JSON&lt;/span&gt; &lt;span class="caps"&gt;API&lt;/span&gt;æ¥éƒ¨ç½²çˆ¬è™«é¡¹ç›®å’Œæ§åˆ¶çˆ¬è™«è¿è¡Œ&lt;/p&gt;
&lt;h2&gt;æ¦‚è§ˆ&lt;/h2&gt;
&lt;h3&gt;é¡¹ç›®å’Œç‰ˆæœ¬&lt;/h3&gt;
&lt;p&gt;scrapydå¯ä»¥ç®¡ç†å¤šä¸ªé¡¹ç›®ï¼Œå¹¶ä¸”æ¯ä¸ªé¡¹ç›®å…è®¸æœ‰å¤šä¸ªç‰ˆæœ¬ï¼Œä½†æ˜¯åªæœ‰æœ€æ–°çš„ç‰ˆæœ¬ä¼šè¢«ç”¨æ¥è¿è¡Œçˆ¬è™«.&lt;/p&gt;
&lt;p&gt;æœ€æ–¹ä¾¿çš„ç‰ˆæœ¬ç®¡ç†å°±æ˜¯åˆ©ç”¨&lt;span class="caps"&gt;VCS&lt;/span&gt;å·¥å…·æ¥è®°å½•ä½ çš„çˆ¬è™«ä»£ç ï¼Œç‰ˆæœ¬æ¯”è¾ƒä¸æ˜¯ç®€å•çš„é€šè¿‡å­—æ¯æ’åºï¼Œè€Œæ˜¯é€šè¿‡æ™ºèƒ½çš„ç®—æ³•ï¼Œå’Œ&lt;a href="https://docs.python.org/2/library/distutils.html"&gt;distutils&lt;/a&gt;ä¸€æ ·ï¼Œä¾‹å¦‚:&amp;nbsp;r10æ¯”rï¼™æ›´å¤§.&lt;/p&gt;
&lt;h3&gt;å·¥ä½œåŸç†&lt;/h3&gt;
&lt;p&gt;scrapydæ˜¯ä¸€ä¸ªå®ˆæŠ¤è¿›ç¨‹ï¼Œç›‘å¬çˆ¬è™«çš„è¿è¡Œå’Œè¯·æ±‚ï¼Œç„¶åå¯åŠ¨è¿›ç¨‹æ¥æ‰§è¡Œå®ƒä»¬&lt;/p&gt;
&lt;h3&gt;å¯åŠ¨æœåŠ¡&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# æ³¨æ„ï¼Œå¯åŠ¨scrapydçš„ç›®å½•ä¼šä¿å­˜æ•´ä¸ªscrapydè¿è¡ŒæœŸé—´ç”Ÿæˆçš„log, itemæ–‡ä»¶ï¼Œæ‰€ä»¥è¯·é€‰æ‹©åˆé€‚çš„ä½ç½®è¿è¡Œè¯¥å‘½ä»¤&lt;/span&gt;
$ scrapyd
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;è°ƒåº¦çˆ¬è™«è¿è¡Œ&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ curl http://localhost:6800/schedule.json -d &lt;span class="nv"&gt;project&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;myproject -d &lt;span class="nv"&gt;spider&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;spider2
&lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;status&amp;quot;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;, &lt;span class="s2"&gt;&amp;quot;jobid&amp;quot;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;quot;26d1b1a6d6f111e0be5c001e648c57f8&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;webæ¥å£&lt;/h3&gt;
&lt;p&gt;&lt;a href="http://localhost:6800/"&gt;http://localhost:6800/&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;å®‰è£…&lt;/h2&gt;
&lt;h3&gt;éœ€æ±‚&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Python&amp;nbsp;2.6+&lt;/li&gt;
&lt;li&gt;Twisted&amp;nbsp;8.0+&lt;/li&gt;
&lt;li&gt;Scrapy&amp;nbsp;0.17+&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;å®‰è£…&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ pip install scrapyd
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æˆ–&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt-get install scrapyd
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;é¡¹ç›®éƒ¨ç½²&lt;/h2&gt;
&lt;p&gt;ç›´æ¥ä½¿ç”¨&lt;a href="https://github.com/scrapy/scrapyd-client"&gt;scrapyd-client&lt;/a&gt;æä¾›çš„&lt;code&gt;scrapyd-deploy&lt;/code&gt;å·¥å…·.&lt;/p&gt;
&lt;h3&gt;å®‰è£…scrapyd-client&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ pip install scrapyd-client
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;scrapyd-clientå·¥ä½œåŸç†&lt;/h3&gt;
&lt;p&gt;æ‰“åŒ…é¡¹ç›®ï¼Œç„¶åè°ƒç”¨&lt;code&gt;scrapyd&lt;/code&gt;çš„&lt;a href="https://scrapyd.readthedocs.org/en/latest/api.html#addversion-json"&gt;&lt;code&gt;addversion.json&lt;/code&gt;&lt;/a&gt;æ¥å£éƒ¨ç½²é¡¹ç›®&lt;/p&gt;
&lt;h3&gt;é…ç½®æœåŠ¡å™¨ä¿¡æ¯&lt;/h3&gt;
&lt;p&gt;ä¸ºäº†æ–¹ä¾¿å™è¿°ï¼Œæ•´ä¸ªéƒ¨ç½²æµç¨‹ä»¥éƒ¨ç½²&lt;a href="https://github.com/crazygit/scrapy_demo/tree/master/douban_movie"&gt;è±†ç“£ç”µå½±&lt;/a&gt;çˆ¬è™«ä¸ºä¾‹ã€‚
é…ç½®æœåŠ¡å™¨å’Œé¡¹ç›®ä¿¡æ¯, éœ€è¦ç¼–è¾‘&lt;code&gt;scrapy.cfg&lt;/code&gt;æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;[deploy:server-douban]&lt;/span&gt;
&lt;span class="na"&gt;url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;http://localhost:6800/&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å…¶ä¸­&lt;code&gt;server-douban&lt;/code&gt;ä¸ºæœåŠ¡å™¨åç§°, &lt;code&gt;url&lt;/code&gt;ä¸ºæœåŠ¡å™¨åœ°å€ï¼Œå³è¿è¡Œäº†&lt;code&gt;scrapyd&lt;/code&gt;å‘½ä»¤çš„æœåŠ¡å™¨ã€‚&lt;/p&gt;
&lt;p&gt;æ£€æŸ¥é…ç½®,&amp;nbsp;åˆ—å‡ºå½“å‰å¯ç”¨çš„æœåŠ¡å™¨&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ scrapyd-deploy -l
server-douban        http://localhost:6800/
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;åˆ—å‡ºæœåŠ¡å™¨ä¸Šæ‰€æœ‰çš„é¡¹ç›®, éœ€è¦ç¡®ä¿æœåŠ¡å™¨ä¸Šçš„&lt;code&gt;scrapyd&lt;/code&gt;å‘½ä»¤æ­£åœ¨æ‰§è¡Œï¼Œå¦åˆ™ä¼šæŠ¥è¿æ¥å¤±è´¥.é¦–æ¬¡è¿è¡Œçš„è¯ï¼Œå¯ä»¥çœ‹åˆ°åªæœ‰ä¸€ä¸ª&lt;code&gt;default&lt;/code&gt;é¡¹ç›®&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ scrapyd-deploy -L server-douban
default
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ‰“å¼€&lt;a href="http://localhost:6800/"&gt;http://localhost:6800/&lt;/a&gt;, å¯ä»¥çœ‹åˆ°&lt;code&gt;Available projects: default&lt;/code&gt;&lt;/p&gt;
&lt;h3&gt;éƒ¨ç½²é¡¹ç›®&lt;/h3&gt;
&lt;p&gt;åœ¨çˆ¬è™«é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤, å…¶ä¸­&lt;code&gt;target&lt;/code&gt;ä¸ºä¸Šä¸€æ­¥é…ç½®çš„æœåŠ¡å™¨åç§°ï¼Œ&lt;code&gt;project&lt;/code&gt;ä¸ºé¡¹ç›®åç§°ï¼Œå¯ä»¥æ ¹æ®å®é™…æƒ…å†µè‡ªå·±æŒ‡å®šã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;scrapyd-deploy &amp;lt;target&amp;gt; -p &amp;lt;project&amp;gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ scrapyd-deploy server-douban -p douban-movies
Packing version 1446102534
Deploying to project &lt;span class="s2"&gt;&amp;quot;douban-movies&amp;quot;&lt;/span&gt; in http://localhost:6800/addversion.json
Server response &lt;span class="o"&gt;(&lt;/span&gt;200&lt;span class="o"&gt;)&lt;/span&gt;:
&lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;status&amp;quot;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;, &lt;span class="s2"&gt;&amp;quot;project&amp;quot;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;quot;douban-movies&amp;quot;&lt;/span&gt;, &lt;span class="s2"&gt;&amp;quot;version&amp;quot;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;quot;1446102534&amp;quot;&lt;/span&gt;, &lt;span class="s2"&gt;&amp;quot;spiders&amp;quot;&lt;/span&gt;: 1, &lt;span class="s2"&gt;&amp;quot;node_name&amp;quot;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;quot;sky&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;éƒ¨ç½²æ“ä½œä¼šæ‰“åŒ…ä½ çš„å½“å‰é¡¹ç›®ï¼Œå¦‚æœå½“å‰é¡¹ç›®ä¸‹æœ‰&lt;code&gt;setup.py&lt;/code&gt;æ–‡ä»¶ï¼Œå°±ä¼šä½¿ç”¨å®ƒï¼Œæ²¡æœ‰çš„ä¼šå°±ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªã€‚(å¦‚æœåæœŸé¡¹ç›®éœ€è¦æ‰“åŒ…çš„è¯ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦ä¿®æ”¹é‡Œé¢çš„ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥æš‚æ—¶ä¸ç®¡å®ƒ).&amp;nbsp;ä»è¿”å›çš„ç»“æœé‡Œé¢ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°éƒ¨ç½²çš„çŠ¶æ€ï¼Œé¡¹ç›®åç§°ï¼Œç‰ˆæœ¬å·å’Œçˆ¬è™«ä¸ªæ•°ï¼Œä»¥åŠå½“å‰çš„ä¸»æœºåç§°.&lt;/p&gt;
&lt;p&gt;æ£€æŸ¥éƒ¨ç½²ç»“æœ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ scrapyd-deploy -L server-douban
default
douban-movies
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æˆ–å†æ¬¡æ‰“å¼€&lt;a href="http://localhost:6800/"&gt;http://localhost:6800/&lt;/a&gt;, ä¹Ÿå¯ä»¥çœ‹åˆ°&lt;code&gt;Available projects: default, douban-movies&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠé¡¹ç›®ä¿¡æ¯å†™å…¥åˆ°é…ç½®æ–‡ä»¶ä¸­ï¼Œéƒ¨ç½²æ—¶å°±ä¸ç”¨æŒ‡å®šé¡¹ç›®ä¿¡æ¯ï¼Œç¼–è¾‘&lt;code&gt;scrapy.cfg&lt;/code&gt;æ–‡ä»¶ï¼Œæ·»åŠ é¡¹ç›®ä¿¡æ¯&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;[deploy:server-douban]&lt;/span&gt;
&lt;span class="na"&gt;url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;http://localhost:6800/&lt;/span&gt;
&lt;span class="na"&gt;project&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;douban-movies&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä¸‹æ¬¡éƒ¨ç½²å¯ä»¥ç›´æ¥æ‰§è¡Œ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ scrapyd-deploy
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¦‚æœé…ç½®äº†å¤šä¸ªæœåŠ¡å™¨çš„è¯ï¼Œå¯ä»¥å°†é¡¹ç›®ç›´æ¥éƒ¨ç½²åˆ°å¤šå°æœåŠ¡å™¨&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ scrapyd-deploy -a -p &amp;lt;project&amp;gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;æŒ‡å®šç‰ˆæœ¬å·&lt;/h3&gt;
&lt;p&gt;é»˜è®¤æƒ…å†µä¸‹, &lt;code&gt;scrapyd-deploy&lt;/code&gt;ä½¿ç”¨å½“å‰çš„æ—¶é—´æˆ³ä½œä¸ºç‰ˆæœ¬å·ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨&lt;code&gt;--version&lt;/code&gt;æ¥æŒ‡å®šç‰ˆæœ¬å·&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;scrapyd-deploy &amp;lt;target&amp;gt; -p &amp;lt;project&amp;gt; --version &amp;lt;version&amp;gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ç‰ˆæœ¬å·çš„æ ¼å¼å¿…é¡»æ»¡è¶³&lt;a href="http://epydoc.sourceforge.net/stdlib/distutils.version.LooseVersion-class.html"&gt;LooseVersion&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å¦‚ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# è®¾ç½®ç‰ˆæœ¬å·ä¸º0.1&lt;/span&gt;
$ scrapyd-deploy server-douban -p douban-movies --version 0.1
Packing version 0.1
Deploying to project &lt;span class="s2"&gt;&amp;quot;douban-movies&amp;quot;&lt;/span&gt; in http://localhost:6800/addversion.json
Server response &lt;span class="o"&gt;(&lt;/span&gt;200&lt;span class="o"&gt;)&lt;/span&gt;:
&lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;status&amp;quot;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;, &lt;span class="s2"&gt;&amp;quot;project&amp;quot;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;quot;douban-movies&amp;quot;&lt;/span&gt;, &lt;span class="s2"&gt;&amp;quot;version&amp;quot;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;quot;0.1&amp;quot;&lt;/span&gt;, &lt;span class="s2"&gt;&amp;quot;spiders&amp;quot;&lt;/span&gt;: 1, &lt;span class="s2"&gt;&amp;quot;node_name&amp;quot;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;quot;sky&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¦‚æœä½¿ç”¨äº†&lt;code&gt;Mercurial&lt;/code&gt;æˆ–&lt;code&gt;Git&lt;/code&gt;ç®¡ç†ä»£ç ï¼Œã€€å¯ä»¥ä½¿ç”¨&lt;code&gt;HG&lt;/code&gt;å’Œ&lt;code&gt;GIT&lt;/code&gt;ä½œä¸ºversionçš„å‚æ•°ï¼Œä¹Ÿå¯ä»¥å°†å®ƒå†™å…¥&lt;code&gt;scrapy.cfg&lt;/code&gt;æ–‡ä»¶ï¼Œé‚£ä¹ˆå°±ä¼šä½¿ç”¨å½“å‰çš„reversionä½œä¸ºç‰ˆæœ¬å·ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;[deploy:target]&lt;/span&gt;
&lt;span class="err"&gt;...&lt;/span&gt;
&lt;span class="na"&gt;version&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;GIT&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat scrapy.cfg
...
&lt;span class="o"&gt;[&lt;/span&gt;deploy:server-douban&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="nv"&gt;url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; http://localhost:6800/
&lt;span class="nv"&gt;project&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; douban-movies
&lt;span class="nv"&gt;version&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; GIT

&lt;span class="c1"&gt;# å½“å‰ç‰ˆæœ¬å·ä¸ºr7-master&lt;/span&gt;
$ scrapyd-deploy server-douban -p douban-movies 
fatal: No names found, cannot describe anything.
Packing version r7-master
Deploying to project &lt;span class="s2"&gt;&amp;quot;douban-movies&amp;quot;&lt;/span&gt; in http://localhost:6800/addversion.json
Server response &lt;span class="o"&gt;(&lt;/span&gt;200&lt;span class="o"&gt;)&lt;/span&gt;:
&lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;status&amp;quot;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;, &lt;span class="s2"&gt;&amp;quot;project&amp;quot;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;quot;douban-movies&amp;quot;&lt;/span&gt;, &lt;span class="s2"&gt;&amp;quot;version&amp;quot;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;quot;r7-master&amp;quot;&lt;/span&gt;, &lt;span class="s2"&gt;&amp;quot;spiders&amp;quot;&lt;/span&gt;: 1, &lt;span class="s2"&gt;&amp;quot;node_name&amp;quot;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;quot;sky&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å…³äºä»&lt;span class="caps"&gt;GIT&lt;/span&gt;è·å–ç‰ˆæœ¬å·çš„æ–¹å¼ï¼Œå¯ä»¥å‚çœ‹&lt;code&gt;scrapyd-client&lt;/code&gt;æºç éƒ¨åˆ†&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;  &lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="n"&gt;version&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;GIT&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Popen&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;git&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;describe&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;stdout&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;PIPE&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;communicate&lt;/span&gt;&lt;span class="p"&gt;()[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;strip&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;wait&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Popen&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;git&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;rev-list&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;--count&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;HEAD&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;stdout&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;PIPE&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;r&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;communicate&lt;/span&gt;&lt;span class="p"&gt;()[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;strip&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

        &lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Popen&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;git&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;rev-parse&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;--abbrev-ref&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;HEAD&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;stdout&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;PIPE&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;communicate&lt;/span&gt;&lt;span class="p"&gt;()[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;strip&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s1"&gt;-&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;æœåŠ¡å™¨æ·»åŠ è®¤è¯ä¿¡æ¯&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨scrapydå‰é¢åŠ ä¸€å±‚åå‘ä»£ç†æ¥å®ç°ç”¨æˆ·è®¤è¯ã€‚ä»¥nginxä¸ºä¾‹,&amp;nbsp;é…ç½®nginx&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;server&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
       &lt;span class="n"&gt;listen&lt;/span&gt; &lt;span class="m"&gt;6801&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
       &lt;span class="n"&gt;location&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="err"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;proxy_pass&lt;/span&gt;            &lt;span class="n"&gt;http&lt;/span&gt;&lt;span class="o"&gt;://&lt;/span&gt;&lt;span class="m"&gt;127&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="m"&gt;6800&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="n"&gt;auth_basic&lt;/span&gt;            &lt;span class="s2"&gt;&amp;quot;Restricted&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="n"&gt;auth_basic_user_file&lt;/span&gt;  &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nginx&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;htpasswd&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;htpasswd&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="err"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;/etc/nginx/htpasswd/user.htpasswd&lt;/code&gt;é‡Œè®¾ç½®çš„ç”¨æˆ·åå’Œå¯†ç éƒ½æ˜¯&lt;code&gt;test&lt;/code&gt;
ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ ç”¨æˆ·ä¿¡æ¯ä¿¡æ¯&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;...
[deploy:server-douban]
url = http://localhost:6801/
project = douban-movies
version = GIT
username = test
password = test
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ³¨æ„ä¸Šé¢çš„&lt;code&gt;url&lt;/code&gt;å·²ç»ä¿®æ”¹ä¸ºäº†nginxç›‘å¬çš„ç«¯å£ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æé†’&lt;/strong&gt;: è®°å¾—ä¿®æ”¹æœåŠ¡å™¨ä¸Šscrapydçš„é…ç½®&lt;code&gt;bind_address&lt;/code&gt;å­—æ®µä¸º&lt;code&gt;127.0.0.1&lt;/code&gt;ï¼Œä»¥å…å¯ä»¥ä»å¤–é¢ç»•è¿‡nginx, ç›´æ¥è®¿é—®6800ç«¯å£ã€‚&amp;nbsp;å…³äºé…ç½®å¯ä»¥å‚çœ‹æœ¬æ–‡åé¢çš„é…ç½®æ–‡ä»¶è®¾ç½®.&lt;/p&gt;
&lt;h2&gt;&lt;span class="caps"&gt;API&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;scrapydçš„webç•Œé¢æ¯”è¾ƒç®€å•ï¼Œä¸»è¦ç”¨äºç›‘æ§ï¼Œæ‰€æœ‰çš„è°ƒåº¦å·¥ä½œå…¨éƒ¨ä¾é æ¥å£å®ç°.
å…·ä½“å¯ä»¥å‚è€ƒ&lt;a href="http://scrapyd.readthedocs.org/en/stable/api.html"&gt;å®˜æ–¹æ–‡æ¡£&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å¸¸ç”¨æ¥å£:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;è°ƒåº¦çˆ¬è™«&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ curl http://localhost:6800/schedule.json -d &lt;span class="nv"&gt;project&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;myproject -d &lt;span class="nv"&gt;spider&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;somespider
&lt;span class="c1"&gt;# å¸¦ä¸Šå‚æ•°&lt;/span&gt;
$ curl http://localhost:6800/schedule.json -d &lt;span class="nv"&gt;project&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;myproject -d &lt;span class="nv"&gt;spider&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;somespider -d &lt;span class="nv"&gt;setting&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;DOWNLOAD_DELAY&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt; -d &lt;span class="nv"&gt;arg1&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;val1
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å–æ¶ˆ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ curl http://localhost:6800/cancel.json -d &lt;span class="nv"&gt;project&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;myproject -d &lt;span class="nv"&gt;job&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;6487ec79947edab326d6db28a2d86511e8247444
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åˆ—å‡ºé¡¹ç›®&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ curl http://localhost:6800/listprojects.json
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åˆ—å‡ºç‰ˆæœ¬&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ curl http://localhost:6800/listversions.json?project&lt;span class="o"&gt;=&lt;/span&gt;myproject
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åˆ—å‡ºçˆ¬è™«&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ curl http://localhost:6800/listspiders.json?project&lt;span class="o"&gt;=&lt;/span&gt;myproject
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åˆ—å‡ºjob&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ curl http://localhost:6800/listjobs.json?project&lt;span class="o"&gt;=&lt;/span&gt;myproject
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åˆ é™¤ç‰ˆæœ¬&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ curl http://localhost:6800/delversion.json -d &lt;span class="nv"&gt;project&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;myproject -d &lt;span class="nv"&gt;version&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;r99
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åˆ é™¤é¡¹ç›®&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ curl http://localhost:6800/delproject.json -d &lt;span class="nv"&gt;project&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;myproject
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;é…ç½®æ–‡ä»¶&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;scrapyd&lt;/code&gt;å¯åŠ¨çš„æ—¶å€™ä¼šè‡ªåŠ¨æœç´¢é…ç½®æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶çš„åŠ è½½é¡ºåºä¸º&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;/etc/scrapyd/scrapyd.conf&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;/etc/scrapyd/conf.d/*&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;scrapyd.conf&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;~/.scrapyd.conf&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æœ€ååŠ è½½çš„ä¼šè¦†ç›–å‰é¢çš„è®¾ç½®&lt;/p&gt;
&lt;p&gt;é»˜è®¤é…ç½®æ–‡ä»¶å¦‚ä¸‹,&amp;nbsp;å¯ä»¥æ ¹æ®éœ€è¦ä¿®æ”¹&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;[scrapyd]&lt;/span&gt;
&lt;span class="na"&gt;eggs_dir&lt;/span&gt;    &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;eggs&lt;/span&gt;
&lt;span class="na"&gt;logs_dir&lt;/span&gt;    &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;logs&lt;/span&gt;
&lt;span class="na"&gt;items_dir&lt;/span&gt;   &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;items&lt;/span&gt;
&lt;span class="na"&gt;jobs_to_keep&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;5&lt;/span&gt;
&lt;span class="na"&gt;dbs_dir&lt;/span&gt;     &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;dbs&lt;/span&gt;
&lt;span class="na"&gt;max_proc&lt;/span&gt;    &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;0&lt;/span&gt;
&lt;span class="na"&gt;max_proc_per_cpu&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;4&lt;/span&gt;
&lt;span class="na"&gt;finished_to_keep&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;100&lt;/span&gt;
&lt;span class="na"&gt;poll_interval&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;5&lt;/span&gt;
&lt;span class="na"&gt;http_port&lt;/span&gt;   &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;6800&lt;/span&gt;
&lt;span class="na"&gt;debug&lt;/span&gt;       &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;off&lt;/span&gt;
&lt;span class="na"&gt;runner&lt;/span&gt;      &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;scrapyd.runner&lt;/span&gt;
&lt;span class="na"&gt;application&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;scrapyd.app.application&lt;/span&gt;
&lt;span class="na"&gt;launcher&lt;/span&gt;    &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;scrapyd.launcher.Launcher&lt;/span&gt;

&lt;span class="k"&gt;[services]&lt;/span&gt;
&lt;span class="na"&gt;schedule.json&lt;/span&gt;     &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;scrapyd.webservice.Schedule&lt;/span&gt;
&lt;span class="na"&gt;cancel.json&lt;/span&gt;       &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;scrapyd.webservice.Cancel&lt;/span&gt;
&lt;span class="na"&gt;addversion.json&lt;/span&gt;   &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;scrapyd.webservice.AddVersion&lt;/span&gt;
&lt;span class="na"&gt;listprojects.json&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;scrapyd.webservice.ListProjects&lt;/span&gt;
&lt;span class="na"&gt;listversions.json&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;scrapyd.webservice.ListVersions&lt;/span&gt;
&lt;span class="na"&gt;listspiders.json&lt;/span&gt;  &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;scrapyd.webservice.ListSpiders&lt;/span&gt;
&lt;span class="na"&gt;delproject.json&lt;/span&gt;   &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;scrapyd.webservice.DeleteProject&lt;/span&gt;
&lt;span class="na"&gt;delversion.json&lt;/span&gt;   &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;scrapyd.webservice.DeleteVersion&lt;/span&gt;
&lt;span class="na"&gt;listjobs.json&lt;/span&gt;     &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;scrapyd.webservice.ListJobs&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å…³äºé…ç½®çš„å„ä¸ªå‚æ•°å…·ä½“å«ä¹‰ï¼Œå¯ä»¥å‚è€ƒ&lt;a href="http://scrapyd.readthedocs.org/en/stable/config.html"&gt;å®˜æ–¹æ–‡æ¡£&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;æ›´æ–°&lt;/h2&gt;
&lt;p&gt;ä¸Šé¢çš„å¯¹äº&lt;code&gt;scrapyd&lt;/code&gt;é»˜è®¤é¡¹ç›®(å³æ˜¯å¯åŠ¨&lt;code&gt;scrapyd&lt;/code&gt;å‘½ä»¤åçœ‹åˆ°çš„&lt;code&gt;default&lt;/code&gt;é¡¹ç›®.)çš„ç†è§£æœ‰äº›é”™è¯¯ï¼Œåªæœ‰åœ¨scrapyé¡¹ç›®é‡Œå¯åŠ¨&lt;code&gt;scrapyd&lt;/code&gt;å‘½ä»¤
æ—¶æ‰æœ‰é»˜è®¤é¡¹ç›®ï¼Œé»˜è®¤é¡¹ç›®å°±æ˜¯å½“å‰çš„&lt;code&gt;scrapy&lt;/code&gt;é¡¹ç›®ï¼Œå¦‚æœåœ¨éscrapyé¡¹ç›®ä¸‹æ‰§è¡Œ&lt;code&gt;scrapyd&lt;/code&gt;, æ˜¯çœ‹ä¸åˆ°&lt;code&gt;default&lt;/code&gt;çš„ï¼Œã€€
åœ¨çˆ¬è™«é‡Œé¡¹ç›®é‡Œç›´æ¥ä½¿ç”¨&lt;code&gt;scrapyd&lt;/code&gt;å‘½ä»¤çš„å¥½å¤„æ˜¯: ç›´æ¥é€šè°ƒåº¦çˆ¬è™«è¿è¡Œ, æ¯”è¾ƒé€‚ç”¨äºå½“å‰çˆ¬è™«é¡¹ç›®ä»£ç ç»“æ„ä¸è§„èŒƒï¼Œæ²¡æ³•&lt;code&gt;Eggifying&lt;/code&gt;çš„æƒ…å†µï¼Œå› ä¸ºåœ¨ä½¿ç”¨&lt;code&gt;scrapyd-client&lt;/code&gt;éƒ¨ç½²çˆ¬è™«çš„å‰æå°±æ˜¯çˆ¬è™«é¡¹ç›®å¿…é¡»æ»¡è¶³ä¸‹é¢çš„æ¡ä»¶:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Deploying your project to a Scrapyd server typically involves two&amp;nbsp;steps:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Eggifying your project. You&amp;#8217;ll need to install setuptools for this. See Egg Caveats&amp;nbsp;below.&lt;/li&gt;
&lt;li&gt;Uploading the egg to the Scrapyd server through the addversion.json&amp;nbsp;endpoint.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h2&gt;å°ç»“&lt;/h2&gt;
&lt;p&gt;å…³äºscrapydï¼Œä¸ªäººæ„Ÿè§‰æ¯”è¾ƒé€‚åˆå•æœºéƒ¨ç½²çˆ¬è™«å’Œè°ƒåº¦ä½¿ç”¨ï¼Œåˆ†å¸ƒå¼çš„çˆ¬è™«è°ƒåº¦å¯èƒ½ä¸å¤ªåˆé€‚ï¼Œéœ€è¦æ¯å°æœºå™¨ä¸Šéƒ½å¯åŠ¨è¿™æ ·ä¸€ä¸ªæœåŠ¡ï¼Œæ—¥å¿—ä¹Ÿæ²¡æœ‰åŠæ³•é›†ä¸­ï¼Œç”¨jenkinsæ¥åšå¯èƒ½æ›´åˆé€‚.&lt;/p&gt;</summary><category term="scrapyd"></category><category term="scrapy"></category><category term="scrapyd-client"></category></entry><entry><title>Androidå‘½ä»¤è¡Œå·¥å…·</title><link href="http://blog.wiseturtles.com/posts/Android-command-line-tools.html" rel="alternate"></link><published>2015-10-27T19:52:00+08:00</published><author><name>ox0spy</name></author><id>tag:blog.wiseturtles.com,2015-10-27:posts/Android-command-line-tools.html</id><summary type="html">&lt;h2&gt;Androidå‘½ä»¤è¡Œå·¥å…·&lt;/h2&gt;
&lt;h3&gt;android&lt;/h3&gt;
&lt;p&gt;ä¸‹é¢ä»‹ç»å‘½ä»¤è¡Œä¸‹ä½¿ç”¨androidè„šæœ¬ã€‚&lt;/p&gt;
&lt;p&gt;åœºæ™¯ï¼šå‘½ä»¤è¡Œä¸‹å®‰è£…android build toolsã€sdkã€&lt;span class="caps"&gt;API&lt;/span&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è·å–æ‰€æœ‰å¯ç”¨çš„åŒ…:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ android list sdk -a -u
$ android list sdk -a -u --proxy-host proxy-host --proxy-port proxy-port  &lt;span class="c1"&gt;# è®¾ç½®ä»£ç†&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å®‰è£…æŒ‡å®šçš„åŒ…ï¼š(num1,&amp;nbsp;num2æ˜¯ä¸Šé¢å‘½ä»¤è¿”å›çš„åºå·)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ android update sdk -u -a -t &amp;lt;num1,num2&amp;gt;
&lt;/pre&gt;&lt;/div&gt;</summary><category term="Android"></category></entry><entry><title>PythonÂ Pypiæº</title><link href="http://blog.wiseturtles.com/posts/config-python-pip.html" rel="alternate"></link><published>2015-10-15T21:52:00+08:00</published><author><name>ox0spy</name></author><id>tag:blog.wiseturtles.com,2015-10-15:posts/config-python-pip.html</id><summary type="html">&lt;h2&gt;pipå®‰è£…&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ wget https://bootstrap.pypa.io/get-pip.py
$ sudo python get-pip.py
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æˆ–è€…ï¼Œç›´æ¥ä½¿ç”¨å‘è¡Œç‰ˆçš„åŒ…ç®¡ç†å®‰è£…:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt-get install python-pip  &lt;span class="c1"&gt;# Debian/Ubuntu&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;pipé…ç½®&lt;/h2&gt;
&lt;p&gt;å®˜æ–¹æºæ¯”è¾ƒæ…¢ï¼Œä¸Šé¢æ˜¯ä¸€äº›å›½å†…æºã€‚&lt;/p&gt;
&lt;h3&gt;å›½å†…pypiæº&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;https://pypi.mirrors.ustc.edu.cn/simple/&lt;/li&gt;
&lt;li&gt;http://mirrors.aliyun.com/pypi/simple/&lt;/li&gt;
&lt;li&gt;http://pypi.v2ex.com/simple&lt;/li&gt;
&lt;li&gt;http://pypi.douban.com/&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;ä¿®æ”¹pipé»˜è®¤æº&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat .pip/pip.conf
&lt;span class="o"&gt;[&lt;/span&gt;global&lt;span class="o"&gt;]&lt;/span&gt;
trusted-host &lt;span class="o"&gt;=&lt;/span&gt; mirrors.aliyun.com
index-url &lt;span class="o"&gt;=&lt;/span&gt; http://mirrors.aliyun.com/pypi/simple/
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¦‚æœä½¿ç”¨é˜¿é‡Œäº‘ä¸»æœºï¼Œè¯·ç”¨ä¸‹é¢çš„åœ°å€:
index-url =&amp;nbsp;http://mirrors.aliyuncs.com/pypi/simple/&lt;/p&gt;
&lt;p&gt;ä¸åŠ trusted-hostä¼šæŠ¥ä¸‹é¢çš„è­¦å‘Š:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The repository located at mirrors.aliyun.com is not a trusted or secure host and is being ignored. If this repository is available via &lt;span class="caps"&gt;HTTPS&lt;/span&gt; it is recommended to use &lt;span class="caps"&gt;HTTPS&lt;/span&gt; instead, otherwise you may silence this warning and allow it anyways with &amp;#8216;&amp;#8212;trusted-host&amp;nbsp;mirrors.aliyun.com&amp;#8217;.&lt;/p&gt;
&lt;/blockquote&gt;</summary><category term="python"></category><category term="pip"></category><category term="pypi"></category></entry><entry><title>Nginxé…ç½®SSLè¯ä¹¦</title><link href="http://blog.wiseturtles.com/posts/nginx-config-ssl-certificate.html" rel="alternate"></link><published>2015-10-10T13:27:00+08:00</published><author><name>ox0spy</name></author><id>tag:blog.wiseturtles.com,2015-10-10:posts/nginx-config-ssl-certificate.html</id><summary type="html">&lt;p&gt;æœ¬æ–‡å‚è€ƒ:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.cocoachina.com/ios/20150703/12392.html"&gt;http://www.cocoachina.com/ios/20150703/12392.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://hack0nair.me/2014-08-14-nginx-with-ssl-of-wosign/"&gt;https://hack0nair.me/2014-08-14-nginx-with-ssl-of-wosign/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://note.sdo.com/u/634668972018478681/n/Z1NG3C6A959F29DD2FA2D543B8C9B30B551810C3"&gt;http://note.sdo.com/u/634668972018478681/n/&lt;span class="caps"&gt;Z1NG3C6A959F29DD2FA2D543B8C9B30B551810C3&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://op.baidu.com/2015/04/https-s01a01/"&gt;http://op.baidu.com/2015/04/https-s01a01/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://oncenote.com/2014/10/21/Security-1-HTTPS/"&gt;http://oncenote.com/2014/10/21/Security-1-&lt;span class="caps"&gt;HTTPS&lt;/span&gt;/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://oncenote.com/2015/09/16/Security-2-HTTPS2/"&gt;http://oncenote.com/2015/09/16/Security-2-&lt;span class="caps"&gt;HTTPS2&lt;/span&gt;/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.vobe.io/114"&gt;https://www.vobe.io/114&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;Nginxé…ç½®&lt;span class="caps"&gt;SSL&lt;/span&gt;è¯ä¹¦, å¯ç”¨&lt;span class="caps"&gt;HTTPS&lt;/span&gt;&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;iOS9æŠŠæ‰€æœ‰çš„httpè¯·æ±‚éƒ½æ”¹ä¸ºhttpsäº†ï¼šiOS9ç³»ç»Ÿå‘é€çš„ç½‘ç»œè¯·æ±‚å°†ç»Ÿä¸€ä½¿ç”¨&lt;span class="caps"&gt;TLS&lt;/span&gt; 1.2 &lt;span class="caps"&gt;SSL&lt;/span&gt;ã€‚
é‡‡ç”¨&lt;span class="caps"&gt;TLS&lt;/span&gt; 1.2 åè®®ï¼Œç›®çš„æ˜¯ å¼ºåˆ¶å¢å¼ºæ•°æ®è®¿é—®å®‰å…¨ï¼Œè€Œä¸” ç³»ç»Ÿ Foundation æ¡†æ¶ä¸‹çš„ç›¸å…³ç½‘ç»œè¯·æ±‚ï¼Œ
å°†ä¸å†é»˜è®¤ä½¿ç”¨ Http ç­‰ä¸å®‰å…¨çš„ç½‘ç»œåè®®ï¼Œè€Œé»˜è®¤é‡‡ç”¨ &lt;span class="caps"&gt;TLS&lt;/span&gt; 1.2ã€‚æœåŠ¡å™¨å› æ­¤éœ€è¦æ›´æ–°ï¼Œä»¥è§£æç›¸å…³æ•°æ®ã€‚
å¦‚ä¸æ›´æ–°ï¼Œå¯é€šè¿‡åœ¨ Info.plist&amp;nbsp;ä¸­å£°æ˜ï¼Œå€’é€€å›ä¸å®‰å…¨çš„ç½‘ç»œè¯·æ±‚ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¸ºäº†å®¢æˆ·ç«¯æ¥å£æ›´åŠ å®‰å…¨ï¼Œç”³è¯·å…è´¹&lt;span class="caps"&gt;SSL&lt;/span&gt;è¯ä¹¦ï¼Œå¯ç”¨&lt;span class="caps"&gt;HTTPS&lt;/span&gt;ã€‚&lt;/p&gt;
&lt;h2&gt;ç”³è¯·è¯ä¹¦&lt;/h2&gt;
&lt;p&gt;ä»Wosignç”³è¯·å…è´¹è¯ä¹¦ï¼Œ&lt;a href="https://www.wosign.com/DVSSL/DV_KuaiSSL_Free.htm"&gt;åœ°å€&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;é…ç½®Nginx&lt;/h2&gt;
&lt;p&gt;è¯ä¹¦ç”³è¯·åˆ°ä¼šæç¤ºä¸‹è½½ä¸€ä¸ªzipæ–‡ä»¶ï¼Œè§£å‹ç¼©åæœ‰ &lt;code&gt;for Nginx.zip&lt;/code&gt;ï¼Œè§£å‹ç¼©&lt;code&gt;for Nginx.zip&lt;/code&gt;å¾—åˆ° &lt;code&gt;*.crt&lt;/code&gt; å’Œ &lt;code&gt;*.key&lt;/code&gt;ã€‚
å°†&lt;code&gt;.crt&lt;/code&gt; å’Œ &lt;code&gt;.key&lt;/code&gt; æ–‡ä»¶æ”¾å…¥Nginxä¸»æœºçš„ /etc/ssl&amp;nbsp;ç›®å½•ã€‚&lt;/p&gt;
&lt;p&gt;ç”Ÿæˆdhparam.pem:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;cd&lt;/span&gt; /etc/ssl/certs
$ openssl dhparam -out dhparam.pem 4096
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;åŒæ—¶ï¼Œå¯ç”¨äº†spdyï¼Œå‚è€ƒ: &lt;a href="https://www.vobe.io/114"&gt;https://www.vobe.io/114&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Nginxé…ç½®æ–‡ä»¶(&lt;code&gt;/etc/nginx/sites-avaiable/default&lt;/code&gt;)å¦‚ä¸‹:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nn"&gt;#server&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;   &lt;span class="n"&gt;listen&lt;/span&gt; &lt;span class="m"&gt;80&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;   &lt;span class="n"&gt;server_name&lt;/span&gt; &lt;span class="n"&gt;your&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;domain&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;   &lt;span class="n"&gt;add_header&lt;/span&gt; &lt;span class="n"&gt;Strict&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Transport&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Security&lt;/span&gt; &lt;span class="n"&gt;max&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;age&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;15768000&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;   &lt;span class="n"&gt;return&lt;/span&gt; &lt;span class="m"&gt;301&lt;/span&gt; &lt;span class="n"&gt;https&lt;/span&gt;&lt;span class="o"&gt;://&lt;/span&gt;&lt;span class="n"&gt;your&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;domain&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;request_uri&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="nt"&gt;server&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;listen&lt;/span&gt; &lt;span class="m"&gt;80&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;å¦‚æœå¸Œæœ›&lt;/span&gt;&lt;span class="n"&gt;http&lt;/span&gt;&lt;span class="err"&gt;ç›´æ¥è·³è½¬åˆ°&lt;/span&gt;&lt;span class="n"&gt;https&lt;/span&gt;&lt;span class="err"&gt;ï¼Œåˆ é™¤è¯¥è¡Œï¼Œå¹¶å»æ‰ä¸Šé¢çš„æ³¨é‡Š&lt;/span&gt;
    &lt;span class="n"&gt;listen&lt;/span&gt; &lt;span class="m"&gt;443&lt;/span&gt; &lt;span class="n"&gt;ssl&lt;/span&gt; &lt;span class="n"&gt;spdy&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;spdy_headers_comp&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;server_name&lt;/span&gt; &lt;span class="n"&gt;your&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;domain&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="n"&gt;ssl&lt;/span&gt; &lt;span class="n"&gt;on&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;ssl_certificate&lt;/span&gt;      &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;ssl&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;your&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;domain&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;crt&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;ssl_certificate_key&lt;/span&gt;  &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;ssl&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;your&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;domain&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="n"&gt;ssl_protocols&lt;/span&gt; &lt;span class="n"&gt;TLSv1&lt;/span&gt; &lt;span class="n"&gt;TLSv1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="n"&gt;TLSv1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="n"&gt;ssl_ciphers&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;AES256+EECDH:AES256+EDH:!aNULL&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="m"&gt;#ssl&lt;/span&gt;&lt;span class="n"&gt;_ciphers&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-SHA384:ECDHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA:ECDHE-RSA-AES128-SHA:DHE-RSA-AES256-SHA256:DHE-RSA-AES128-SHA256:DHE-RSA-AES256-SHA:DHE-RSA-AES128-SHA:ECDHE-RSA-DES-CBC3-SHA:EDH-RSA-DES-CBC3-SHA:AES256-GCM-SHA384:AES128-GCM-SHA256:AES256-SHA256:AES128-SHA256:AES256-SHA:AES128-SHA:DES-CBC3-SHA:HIGH:!aNULL:!eNULL:!EXPORT:!DES:!MD5:!PSK:!RC4&amp;quot;&lt;/span&gt;

    &lt;span class="n"&gt;ssl_prefer_server_ciphers&lt;/span&gt;  &lt;span class="n"&gt;on&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;ssl_dhparam&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;ssl&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;certs&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dhparam&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pem&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="n"&gt;ssl_session_cache&lt;/span&gt;    &lt;span class="n"&gt;shared&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;SSL&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="m"&gt;20&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;ssl_session_timeout&lt;/span&gt;  &lt;span class="m"&gt;60&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="n"&gt;ssl_stapling&lt;/span&gt; &lt;span class="n"&gt;on&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;ssl_stapling_verify&lt;/span&gt; &lt;span class="n"&gt;on&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="m"&gt;#ssl&lt;/span&gt;&lt;span class="n"&gt;_trusted_certificate&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nginx&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;cert&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;trustchain&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;crt&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="m"&gt;#resolv&lt;/span&gt;&lt;span class="n"&gt;er&lt;/span&gt; &lt;span class="m"&gt;8&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;8&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;4&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;4&lt;/span&gt; &lt;span class="m"&gt;8&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;8&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;8&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;8&lt;/span&gt; &lt;span class="n"&gt;valid&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;300s&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="m"&gt;#resolv&lt;/span&gt;&lt;span class="n"&gt;er_timeout&lt;/span&gt; &lt;span class="m"&gt;10s&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="n"&gt;add_header&lt;/span&gt; &lt;span class="n"&gt;Strict&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Transport&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Security&lt;/span&gt; &lt;span class="n"&gt;max&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;age&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;15768000&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="n"&gt;add_header&lt;/span&gt; &lt;span class="n"&gt;X&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Frame&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Options&lt;/span&gt; &lt;span class="n"&gt;DENY&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;add_header&lt;/span&gt; &lt;span class="n"&gt;X&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Content&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Type&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Options&lt;/span&gt; &lt;span class="n"&gt;nosniff&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="n"&gt;add_header&lt;/span&gt; &lt;span class="n"&gt;Alternate&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Protocol&lt;/span&gt; &lt;span class="m"&gt;443&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;npn&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;spdy&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="n"&gt;proxy_set_header&lt;/span&gt;   &lt;span class="n"&gt;Host&lt;/span&gt;                 &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;http_host&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;proxy_set_header&lt;/span&gt;   &lt;span class="n"&gt;X&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Forwarded&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Proto&lt;/span&gt;    &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;scheme&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;proxy_set_header&lt;/span&gt;   &lt;span class="n"&gt;X&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Forwarded&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;For&lt;/span&gt;      &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;remote_addr&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;proxy_redirect&lt;/span&gt;     &lt;span class="n"&gt;off&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="n"&gt;location&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;your&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;service&lt;/span&gt; &lt;span class="err"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;proxy_pass&lt;/span&gt;         &lt;span class="n"&gt;http&lt;/span&gt;&lt;span class="o"&gt;://&lt;/span&gt;&lt;span class="n"&gt;localhost&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="m"&gt;8888&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="err"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;æµ‹è¯•&lt;span class="caps"&gt;HTTPS&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;curlæµ‹è¯•æœåŠ¡å™¨ä¸Šçš„httpsæ¥å£:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ curl https://your-domain/your-services
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æµ‹è¯•&lt;span class="caps"&gt;HTTPS&lt;/span&gt;é…ç½®çš„æ˜¯å¦å®‰å…¨ï¼š&lt;a href="https://www.ssllabs.com/ssltest/"&gt;https://www.ssllabs.com/ssltest/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ³¨ï¼šå¦‚æœå®‰å…¨è¯„åˆ†æ¯”è¾ƒä½ï¼Œè¯·è®¤çœŸé˜…è¯»&lt;a href="http://note.sdo.com/u/634668972018478681/n/Z1NG3C6A959F29DD2FA2D543B8C9B30B551810C3"&gt;Strong &lt;span class="caps"&gt;SSL&lt;/span&gt; Security on&amp;nbsp;nginx&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;æµ‹è¯•&lt;span class="caps"&gt;SPDY&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;æ£€æµ‹é…ç½®çš„&lt;span class="caps"&gt;SPDY&lt;/span&gt;ï¼š&lt;a href="https://spdycheck.org/"&gt;https://spdycheck.org/&lt;/a&gt;&lt;/p&gt;</summary><category term="nginx"></category><category term="ssl"></category><category term="https"></category></entry><entry><title>Gradleä»£ç†è®¾ç½®</title><link href="http://blog.wiseturtles.com/posts/set-gradle-proxy.html" rel="alternate"></link><published>2015-09-29T14:45:00+08:00</published><author><name>ox0spy</name></author><id>tag:blog.wiseturtles.com,2015-09-29:posts/set-gradle-proxy.html</id><summary type="html">&lt;p&gt;Androidä½¿ç”¨Gradleåšæ„å»ºå·¥å…·ï¼Œç¼–è¯‘apkæ—¶å¯èƒ½éœ€è¦ä»ç½‘ä¸Šä¸‹è½½ä¸€äº›ä¾èµ–åŒ…ï¼Œå›½å†…ç½‘ç»œæƒ…å†µå¤§å®¶éƒ½æ‡‚å¾—ã€‚&lt;/p&gt;
&lt;h2&gt;Gradleä»£ç†è®¾ç½®&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat ~/.gradle/gradle.properties
systemProp.http.proxyHost&lt;span class="o"&gt;=&lt;/span&gt;your-proxy
systemProp.http.proxyPort&lt;span class="o"&gt;=&lt;/span&gt;proxy-port
&lt;span class="c1"&gt;#systemProp.http.proxyUser=userid&lt;/span&gt;
&lt;span class="c1"&gt;#systemProp.http.proxyPassword=password&lt;/span&gt;
&lt;span class="c1"&gt;#systemProp.http.nonProxyHosts=*.nonproxyrepos.com|localhost&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</summary><category term="gradle"></category></entry><entry><title>iptablesé…ç½®</title><link href="http://blog.wiseturtles.com/posts/iptables-on-debian-centos.html" rel="alternate"></link><published>2015-09-23T16:40:00+08:00</published><author><name>ox0spy</name></author><id>tag:blog.wiseturtles.com,2015-09-23:posts/iptables-on-debian-centos.html</id><summary type="html">&lt;p&gt;æœ€è¿‘ä½¿ç”¨é˜¿é‡Œäº‘&lt;span class="caps"&gt;ECS&lt;/span&gt;ï¼Œå‘ç°æ—¢ç„¶æ²¡æœ‰æä¾›å®‰å…¨ç»„ï¼Œèƒ½è®©å°ç™½ç”¨æˆ·æ–¹ä¾¿çš„é…ç½®ä¸‹å…è®¸å¤–ç½‘è®¿é—®çš„ç«¯å£ã€‚&amp;nbsp;é»˜è®¤æ‰€æœ‰ç»‘å®šåˆ°å¤–ç½‘ipæˆ–å››ä¸ªé›¶çš„ç«¯å£ï¼Œå¤–ç½‘éƒ½å¯ä»¥è®¿é—®ï¼Œç„¶åï¼Œçœ‹çœ‹iptablesæ–‡æ¡£ï¼Œè‡ªå·±æ¥é…ä¸‹å’¯ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href="http://sentry.readthedocs.org/en/stable/index.html#"&gt;å®˜æ–¹å®‰è£…æ–‡æ¡£&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;å®‰è£…iptables&lt;/h2&gt;
&lt;h3&gt;Debian&lt;/h3&gt;
&lt;p&gt;å®‰è£…:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt-get install iptables
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Debianç³»ç»Ÿä¸­ä¸éœ€è¦å¯åŠ¨iptablesã€‚&lt;/p&gt;
&lt;h3&gt;CentOS&lt;/h3&gt;
&lt;p&gt;å®‰è£…:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo yum install iptables -y
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¯åŠ¨:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo service iptables start
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;é…ç½®iptables&lt;/h3&gt;
&lt;p&gt;é…ç½®æŒ‡ä»¤Debianã€CentOSéƒ½ä¸€æ ·ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸¤æ®µæŠ„çš„&lt;a href="http://blog.kkyun.com/?p=50"&gt;kkyun&amp;nbsp;blog&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ¸…é™¤é˜²ç«å¢™è§„åˆ™:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;```
#é¦–å…ˆåœ¨æ¸…é™¤å‰è¦å°†policy INPUTæ”¹æˆACCEPT,è¡¨ç¤ºæ¥å—ä¸€åˆ‡è¯·æ±‚ã€‚
#è¿™ä¸ªä¸€å®šè¦å…ˆåšï¼Œä¸ç„¶æ¸…ç©ºåå¯èƒ½ä¼šæ‚²å‰§
$ sudo iptables -P INPUT ACCEPT

#æ¸…ç©ºé»˜è®¤æ‰€æœ‰è§„åˆ™
$ sudo iptables -F

#æ¸…ç©ºè‡ªå®šä¹‰çš„æ‰€æœ‰è§„åˆ™
$ sudo iptables -X

#è®¡æ•°å™¨ç½®0
$ sudo iptables -Z
```
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¸¸ç”¨é…ç½®:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;```
# å…è®¸æ¥è‡ªäºloæ¥å£çš„æ•°æ®åŒ…
# å¦‚æœæ²¡æœ‰æ­¤è§„åˆ™ï¼Œä½ å°†ä¸èƒ½é€šè¿‡127.0.0.1è®¿é—®æœ¬åœ°æœåŠ¡ï¼Œä¾‹å¦‚ping 127.0.0.1
$ sudo iptables -A INPUT -i lo -j ACCEPT

# sshç«¯å£22
$ sudo iptables -A INPUT -p tcp --dport 22 -j ACCEPT

# FTPç«¯å£21
$ sudo iptables -A INPUT -p tcp --dport 21 -j ACCEPT

# webæœåŠ¡ç«¯å£80
$ sudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT

# tomcat
$ sudo iptables -A INPUT -p tcp --dport xxxx -j ACCEPT

# mysql
$ sudo iptables -A INPUT -p tcp --dport xxxx -j ACCEPT

#å…è®¸icmpåŒ…é€šè¿‡,ä¹Ÿå°±æ˜¯å…è®¸ping
$ sudo iptables -A INPUT -p icmp -m icmp --icmp-type 8 -j ACCEPT

#å…è®¸æ‰€æœ‰å¯¹å¤–è¯·æ±‚çš„è¿”å›åŒ…
#æœ¬æœºå¯¹å¤–è¯·æ±‚ç›¸å½“äºOUTPUT,å¯¹äºè¿”å›æ•°æ®åŒ…å¿…é¡»æ¥æ”¶å•Šï¼Œè¿™ç›¸å½“äºINPUTäº†
$ sudo iptables -A INPUT -m state --state ESTABLISHED -j ACCEPT

#å¦‚æœè¦æ·»åŠ å†…ç½‘ipä¿¡ä»»ï¼ˆæ¥å—å…¶æ‰€æœ‰TCPè¯·æ±‚ï¼‰
$ sudo iptables -A INPUT -p tcp -s 45.96.174.68 -j ACCEPT

#è¿‡æ»¤æ‰€æœ‰éä»¥ä¸Šè§„åˆ™çš„è¯·æ±‚
$ sudo iptables -P INPUT DROP

#è¦å°åœä¸€ä¸ªIPï¼Œä½¿ç”¨ä¸‹é¢è¿™æ¡å‘½ä»¤ï¼š
$ sudo iptables -I INPUT -s ***.***.***.*** -j DROP

#è¦è§£å°ä¸€ä¸ªIPï¼Œä½¿ç”¨ä¸‹é¢è¿™æ¡å‘½ä»¤:
$ sudo iptables -D INPUT -s ***.***.***.*** -j DROP
```
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;ä¿å­˜iptablesé…ç½®&lt;/h3&gt;
&lt;p&gt;iptablesé…ç½®å¥½åœ¨å½“å‰ç¯å¢ƒç”Ÿæ•ˆï¼Œä½†ï¼Œé‡å¯ç³»ç»Ÿå°±ä¸å†å¯ç”¨ã€‚&amp;nbsp;æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦å°†iptablesé…ç½®ä¿¡æ¯ä¿å­˜ä¸‹æ¥ï¼Œå¹¶åœ¨ä¸‹æ¬¡ç³»ç»Ÿå¼€æœºæ—¶è‡ªåŠ¨åŠ è½½ã€‚&lt;/p&gt;
&lt;h4&gt;Debian&lt;/h4&gt;
&lt;p&gt;é‡å¯æ—¶è‡ªåŠ¨åŠ è½½iptablesé…ç½®ä¿¡æ¯:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt-get install iptables-persistent
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;CentOS&lt;/h4&gt;
&lt;p&gt;ä¿å­˜iptablesé…ç½®ä¿¡æ¯:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo service iptables save
iptables: Saving firewall rules to /etc/sysconfig/iptables:&lt;span class="o"&gt;[&lt;/span&gt;  OK  &lt;span class="o"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;é‡å¯è‡ªåŠ¨è¿è¡Œiptables:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo chkconfig iptables on
&lt;/pre&gt;&lt;/div&gt;</summary><category term="iptables"></category></entry><entry><title>DebianÂ 8.2ä¸Šå®‰è£…Sentry</title><link href="http://blog.wiseturtles.com/posts/setup-sentry-on-debian-8.2.html" rel="alternate"></link><published>2015-09-22T15:55:00+08:00</published><author><name>ox0spy</name></author><id>tag:blog.wiseturtles.com,2015-09-22:posts/setup-sentry-on-debian-8.2.html</id><summary type="html">&lt;p&gt;Sentryæ˜¯ä¸€ä¸ªå¾ˆå¥½ç”¨çš„é”™è¯¯ã€å¼‚å¸¸æ”¶é›†å¹³å°ï¼Œæ”¯æŒPython, Node.js, &lt;span class="caps"&gt;PHP&lt;/span&gt;, Ruby, Java,&amp;nbsp;Goä»¥åŠAndroidã€iOSã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href="http://sentry.readthedocs.org/en/stable/index.html#"&gt;å®˜æ–¹å®‰è£…æ–‡æ¡£&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;ç³»ç»Ÿç¯å¢ƒ&lt;/h2&gt;
&lt;p&gt;æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ lsb_release -a
No LSB modules are available.
Distributor ID: Debian
Description:    Debian GNU/Linux 8.2 &lt;span class="o"&gt;(&lt;/span&gt;jessie&lt;span class="o"&gt;)&lt;/span&gt;
Release:    8.2
Codename:   jessie
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;å‡†å¤‡æ•°æ®åº“ç¯å¢ƒ&lt;/h2&gt;
&lt;p&gt;virtualenvçš„å®‰è£…ã€é…ç½®å°±ä¸å†ä»‹ç»äº†ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt-get install postgresql libpq-dev
$ mkvirtualenv sentry
&lt;span class="o"&gt;(&lt;/span&gt;sentry&lt;span class="o"&gt;)&lt;/span&gt;$ pip install psycopg2
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;åœ¨PostgreSQLä¸­ä¸ºsentryåˆ›å»ºæ•°æ®åº“ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo -u postgre createuser --superuser sentry
$ sudo -u sentry psql
&lt;span class="nv"&gt;postgres&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="c1"&gt;# \password sentry&lt;/span&gt;
Enter new password:
Enter it again:
&lt;span class="nv"&gt;postgres&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="c1"&gt;# \q&lt;/span&gt;
$ sudo -u sentry createdb -E utf8 sentry
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;å®‰è£…sentry&lt;/h2&gt;
&lt;p&gt;æ•°æ®åº“ä½¿ç”¨çš„æ˜¯PostgreSQLï¼Œä½¿ç”¨å…¬å¸é‚®ä»¶æœåŠ¡å™¨å‘é€é‚®ä»¶ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ workon sentry
&lt;span class="o"&gt;(&lt;/span&gt;sentry&lt;span class="o"&gt;)&lt;/span&gt;$ pip install sentry
&lt;span class="o"&gt;(&lt;/span&gt;sentry&lt;span class="o"&gt;)&lt;/span&gt;$ sentry init /tmp/settings.py
&lt;span class="o"&gt;(&lt;/span&gt;sentry&lt;span class="o"&gt;)&lt;/span&gt;$ sudo mv /tmp/settings.py /etc/sentry/sentry.conf.py
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;/etc/sentry/sentry.conf.pyä¸­çš„æ•°æ®åº“é…ç½®å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;DATABASES&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;default&amp;#39;&lt;/span&gt;: &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="c1"&gt;# You can swap out the engine for MySQL easily by changing this value&lt;/span&gt;
        &lt;span class="c1"&gt;# to ``django.db.backends.mysql`` or to PostgreSQL with&lt;/span&gt;
        &lt;span class="c1"&gt;# ``sentry.db.postgres``&lt;/span&gt;

        &lt;span class="c1"&gt;# If you change this, you&amp;#39;ll also need to install the appropriate python&lt;/span&gt;
        &lt;span class="c1"&gt;# package: psycopg2 (Postgres) or mysql-python&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;ENGINE&amp;#39;&lt;/span&gt;: &lt;span class="s1"&gt;&amp;#39;django.db.backends.postgresql_psycopg2&amp;#39;&lt;/span&gt;,

        &lt;span class="s1"&gt;&amp;#39;NAME&amp;#39;&lt;/span&gt;: &lt;span class="s1"&gt;&amp;#39;sentry&amp;#39;&lt;/span&gt;,
        &lt;span class="s1"&gt;&amp;#39;USER&amp;#39;&lt;/span&gt;: &lt;span class="s1"&gt;&amp;#39;sentry&amp;#39;&lt;/span&gt;,
        &lt;span class="s1"&gt;&amp;#39;PASSWORD&amp;#39;&lt;/span&gt;: &lt;span class="s1"&gt;&amp;#39;xxxx&amp;#39;&lt;/span&gt;,
        &lt;span class="s1"&gt;&amp;#39;HOST&amp;#39;&lt;/span&gt;: &lt;span class="s1"&gt;&amp;#39;localhost&amp;#39;&lt;/span&gt;,
        &lt;span class="s1"&gt;&amp;#39;PORT&amp;#39;&lt;/span&gt;: &lt;span class="s1"&gt;&amp;#39;5432&amp;#39;&lt;/span&gt;,
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;/etc/sentry/sentry.conf.pyä¸­çš„WebæœåŠ¡é…ç½®å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# You MUST configure the absolute URI root for Sentry:&lt;/span&gt;
&lt;span class="nv"&gt;SENTRY_URL_PREFIX&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;http://your-ip&amp;#39;&lt;/span&gt;  &lt;span class="c1"&gt;# No trailing slash!&lt;/span&gt;

&lt;span class="nv"&gt;SENTRY_WEB_HOST&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;localhost&amp;#39;&lt;/span&gt;
&lt;span class="nv"&gt;SENTRY_WEB_PORT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 9000
&lt;span class="nv"&gt;SENTRY_WEB_OPTIONS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;workers&amp;#39;&lt;/span&gt;: 4,  &lt;span class="c1"&gt;# the number of gunicorn workers&lt;/span&gt;
    &lt;span class="c1"&gt;# &amp;#39;secure_scheme_headers&amp;#39;: {&amp;#39;X-FORWARDED-PROTO&amp;#39;: &amp;#39;https&amp;#39;},&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;/etc/sentry/sentry.conf.pyä¸­çš„é‚®ä»¶é…ç½®æ ¹æ®ä¸ªäººæƒ…å†µä¿®æ”¹ã€‚&lt;/p&gt;
&lt;p&gt;ä¿®æ”¹å®Œé…ç½®è¿è¡Œå¦‚ä¸‹å‘½ä»¤:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;sentry&lt;span class="o"&gt;)&lt;/span&gt;$ sentry --config&lt;span class="o"&gt;=&lt;/span&gt;/etc/sentry/sentry.conf.py upgrade
&lt;span class="o"&gt;(&lt;/span&gt;sentry&lt;span class="o"&gt;)&lt;/span&gt;$ sentry --config&lt;span class="o"&gt;=&lt;/span&gt;/etc/sentry/sentry.conf.py repair
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;åˆ›å»ºsentryè¶…çº§ç”¨æˆ·:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;sentry&lt;span class="o"&gt;)&lt;/span&gt;$ sentry --config&lt;span class="o"&gt;=&lt;/span&gt;/etc/sentry/sentry.conf.py createsuperuser
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¯åŠ¨WebæœåŠ¡å‘½ä»¤å¦‚ä¸‹:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;sentry&lt;span class="o"&gt;)&lt;/span&gt;$ sentry --config&lt;span class="o"&gt;=&lt;/span&gt;/etc/sentry/sentry.conf.py start
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¯åŠ¨åå°±å¯ä»¥è®¿é—® http://your-ip:9000&amp;nbsp;äº†ï¼Œç”¨åˆšæ‰åˆ›å»ºçš„è¶…çº§ç”¨æˆ·ç™»å½•ã€‚&lt;/p&gt;
&lt;p&gt;å¯åŠ¨sentry&amp;nbsp;worker:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;sentry&lt;span class="o"&gt;)&lt;/span&gt;$ sentry --config&lt;span class="o"&gt;=&lt;/span&gt;/etc/sentry/sentry.conf.py celery worker -B -l WARNING
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;æ­£å¼ç¯å¢ƒè¿è¡Œsentry&lt;/h2&gt;
&lt;h3&gt;supervisorç®¡ç†sentry,&amp;nbsp;sentry_worker&lt;/h3&gt;
&lt;p&gt;é€šè¿‡supervisorç®¡ç†sentry,&amp;nbsp;sentry_workerï¼›å¹¶ç”¨nginxåšåå‘ä»£ç†ã€‚&lt;/p&gt;
&lt;p&gt;supervisorçš„å®‰è£…ä¹Ÿä¸å†ä»‹ç»ã€‚&lt;/p&gt;
&lt;p&gt;supervisorç®¡ç†sentry:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat /etc/supervisor/conf.d/sentry.conf
&lt;span class="o"&gt;[&lt;/span&gt;program:sentry&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="c1"&gt;#directory=/var/www/.virtualenvs/sentry/bin/&lt;/span&gt;
&lt;span class="nv"&gt;environment&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;VIRTUAL_ENV_PATH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/var/www/.virtualenvs/sentry/bin/&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;command&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/var/www/.virtualenvs/sentry/bin/sentry --config&lt;span class="o"&gt;=&lt;/span&gt;/etc/sentry/sentry.conf.py start
&lt;span class="nv"&gt;user&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;develop
&lt;span class="nv"&gt;stdout_logfile&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/data/log/supervisor/sentry.stdout
&lt;span class="nv"&gt;stderr_logfile&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/data/log/supervisor/sentry.stderr
&lt;span class="nv"&gt;autostart&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;
&lt;span class="nv"&gt;autorestart&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;
&lt;span class="nv"&gt;killasgroup&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;supervisorç®¡ç†sentry_worker:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat /etc/supervisor/conf.d/sentry_worker.conf
&lt;span class="o"&gt;[&lt;/span&gt;program:sentry_worker&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="c1"&gt;#directory=/var/www/.virtualenvs/sentry/bin/&lt;/span&gt;
&lt;span class="nv"&gt;environment&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;VIRTUAL_ENV_PATH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/var/www/.virtualenvs/sentry/bin/&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;command&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/var/www/.virtualenvs/sentry/bin/sentry --config&lt;span class="o"&gt;=&lt;/span&gt;/etc/sentry/sentry.conf.py celery worker -B -l WARNING
&lt;span class="nv"&gt;user&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;develop
&lt;span class="nv"&gt;stdout_logfile&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/data/log/supervisor/sentry_worker.stdout
&lt;span class="nv"&gt;stderr_logfile&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/data/log/supervisor/sentry_worker.stderr
&lt;span class="nv"&gt;autostart&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;
&lt;span class="nv"&gt;autorestart&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;
&lt;span class="nv"&gt;killasgroup&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¯åŠ¨sentry,&amp;nbsp;sentry_worker:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo service supervisor restart
$ sudo supervisorctl  &lt;span class="c1"&gt;# æŸ¥çœ‹sentry, sentry_workerè¿è¡Œæƒ…å†µ&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;é…ç½®Nginx&lt;/h3&gt;
&lt;p&gt;/etc/nginx/sites-available/defaultçš„serveré…ç½®ä¸­å¢åŠ å¦‚ä¸‹å†…å®¹:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;```&lt;/span&gt;
&lt;span class="nt"&gt;proxy_set_header&lt;/span&gt;   &lt;span class="nt"&gt;Host&lt;/span&gt;                 &lt;span class="o"&gt;$&lt;/span&gt;&lt;span class="nt"&gt;http_host&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="nt"&gt;proxy_set_header&lt;/span&gt;   &lt;span class="nt"&gt;X-Real-IP&lt;/span&gt;            &lt;span class="o"&gt;$&lt;/span&gt;&lt;span class="nt"&gt;remote_addr&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="nt"&gt;proxy_set_header&lt;/span&gt;   &lt;span class="nt"&gt;X-Forwarded-For&lt;/span&gt;      &lt;span class="o"&gt;$&lt;/span&gt;&lt;span class="nt"&gt;proxy_add_x_forwarded_for&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="nt"&gt;proxy_set_header&lt;/span&gt;   &lt;span class="nt"&gt;X-Forwarded-Proto&lt;/span&gt;    &lt;span class="o"&gt;$&lt;/span&gt;&lt;span class="nt"&gt;scheme&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="nt"&gt;proxy_redirect&lt;/span&gt;     &lt;span class="nt"&gt;off&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="nt"&gt;location&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;proxy_pass&lt;/span&gt;         &lt;span class="n"&gt;http&lt;/span&gt;&lt;span class="o"&gt;://&lt;/span&gt;&lt;span class="n"&gt;localhost&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="m"&gt;9000&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="nt"&gt;location&lt;/span&gt; &lt;span class="o"&gt;~*&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;api&lt;/span&gt;&lt;span class="o"&gt;/(?&lt;/span&gt;&lt;span class="nt"&gt;P&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;projectid&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="nt"&gt;d&lt;/span&gt;&lt;span class="o"&gt;+/)?&lt;/span&gt;&lt;span class="nt"&gt;store&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;proxy_pass&lt;/span&gt;        &lt;span class="n"&gt;http&lt;/span&gt;&lt;span class="o"&gt;://&lt;/span&gt;&lt;span class="m"&gt;127&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="m"&gt;9000&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="err"&gt;```&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;é‡å¯nginxï¼Œå¹¶é€šè¿‡http://your-ip&amp;nbsp;è®¿é—®ã€‚&lt;/p&gt;
&lt;h2&gt;æµ‹è¯•&lt;/h2&gt;
&lt;p&gt;å¼€å§‹æˆ‘ä»¬å°±æåˆ°è¿‡sentryæ”¯æŒç›®å‰æ‰€æœ‰ä¸»æµè¯­è¨€ï¼Œ
å‚è€ƒ&lt;a href="https://docs.getsentry.com/hosted/clients/python/"&gt;è¿™é‡Œ&lt;/a&gt;&amp;nbsp;å¯ä»¥æ£€æŸ¥æ˜¯å¦èƒ½å°†é”™è¯¯ã€å¼‚å¸¸å‘ç”Ÿåˆ°è‡ªå·±æ­å»ºçš„sentryã€‚&lt;/p&gt;</summary><category term="sentry"></category></entry><entry><title>Redisé›†ç¾¤æ­å»º</title><link href="http://blog.wiseturtles.com/posts/install-redis-cluster.html" rel="alternate"></link><published>2015-09-18T23:48:00+08:00</published><author><name>crazygit</name></author><id>tag:blog.wiseturtles.com,2015-09-18:posts/install-redis-cluster.html</id><summary type="html">&lt;h2&gt;Redisé›†ç¾¤æ­å»º&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# ä¸‹è½½&lt;/span&gt;
$ wget http://download.redis.io/releases/redis-3.0.4.tar.gz
$ tar -zxvf redis-3.0.4.tar.gz
$ &lt;span class="nb"&gt;cd&lt;/span&gt; redis-3.0.4

&lt;span class="c1"&gt;# ç¼–è¯‘&lt;/span&gt;
$ make

&lt;span class="c1"&gt;# æ£€æŸ¥ä¾èµ–ï¼Œ å¦‚æœæœ‰é”™è¯¯å°±ä¿®å¤&lt;/span&gt;
&lt;span class="c1"&gt;# å¦‚æœé‡åˆ°é”™è¯¯â€œTest replication partial resync: ok psyncâ€, å¯ä»¥å¿½ç•¥æˆ–å†é‡å¤æ‰§&lt;/span&gt;
&lt;span class="c1"&gt;# è¡Œå‡ æ¬¡make testå°±å¯ä»¥é€šè¿‡äº†&lt;/span&gt;
$ make &lt;span class="nb"&gt;test&lt;/span&gt;

&lt;span class="c1"&gt;# å®‰è£…&lt;/span&gt;
$ sudo make install

&lt;span class="c1"&gt;# æ·»åŠ å¼€æœºå¯åŠ¨, ä¼šæœ‰ä¸€äº›äº¤äº’æé—®ï¼ŒæŒ‰éœ€é€‰æ‹©å³å¯&lt;/span&gt;
$ sudo utils/install_server.sh
Welcome to the redis service installer
This script will &lt;span class="nb"&gt;help&lt;/span&gt; you easily &lt;span class="nb"&gt;set&lt;/span&gt; up a running redis server

Please &lt;span class="k"&gt;select&lt;/span&gt; the redis port &lt;span class="k"&gt;for&lt;/span&gt; this instance: &lt;span class="o"&gt;[&lt;/span&gt;6379&lt;span class="o"&gt;]&lt;/span&gt; 
Selecting default: &lt;span class="m"&gt;6379&lt;/span&gt; 
Please &lt;span class="k"&gt;select&lt;/span&gt; the redis config file name &lt;span class="o"&gt;[&lt;/span&gt;/etc/redis/6379.conf&lt;span class="o"&gt;]&lt;/span&gt; 
Selected default - /etc/redis/6379.conf
Please &lt;span class="k"&gt;select&lt;/span&gt; the redis log file name &lt;span class="o"&gt;[&lt;/span&gt;/var/log/redis_6379.log&lt;span class="o"&gt;]&lt;/span&gt; 
Selected default - /var/log/redis_6379.log
Please &lt;span class="k"&gt;select&lt;/span&gt; the data directory &lt;span class="k"&gt;for&lt;/span&gt; this instance &lt;span class="o"&gt;[&lt;/span&gt;/var/lib/redis/6379&lt;span class="o"&gt;]&lt;/span&gt; 
Selected default - /var/lib/redis/6379
Please &lt;span class="k"&gt;select&lt;/span&gt; the redis executable path &lt;span class="o"&gt;[&lt;/span&gt;/usr/local/bin/redis-server&lt;span class="o"&gt;]&lt;/span&gt; 
Selected config:
Port           : &lt;span class="m"&gt;6379&lt;/span&gt; 
Config file    : /etc/redis/6379.conf
Log file       : /var/log/redis_6379.log
Data dir       : /var/lib/redis/6379
Executable     : /usr/local/bin/redis-server
Cli Executable : /usr/local/bin/redis-cli
Is this ok? Then press ENTER to go on or Ctrl-C to abort.
Copied /tmp/6379.conf &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; /etc/init.d/redis_6379
Installing service...
 Adding system startup &lt;span class="k"&gt;for&lt;/span&gt; /etc/init.d/redis_6379 ...
   /etc/rc0.d/K20redis_6379 -&amp;gt; ../init.d/redis_6379
   /etc/rc1.d/K20redis_6379 -&amp;gt; ../init.d/redis_6379
   /etc/rc6.d/K20redis_6379 -&amp;gt; ../init.d/redis_6379
   /etc/rc2.d/S20redis_6379 -&amp;gt; ../init.d/redis_6379
   /etc/rc3.d/S20redis_6379 -&amp;gt; ../init.d/redis_6379
   /etc/rc4.d/S20redis_6379 -&amp;gt; ../init.d/redis_6379
   /etc/rc5.d/S20redis_6379 -&amp;gt; ../init.d/redis_6379
Success!
Starting Redis server...
Installation successful!


&lt;span class="c1"&gt;# å› ä¸ºè¦æ­å»ºå•æœºé›†ç¾¤ï¼Œé‡å¤æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤ï¼ŒåŒæ—¶è®¾ç½®6380, 6381&lt;/span&gt;
&lt;span class="c1"&gt;# å®Œæˆåï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹æ–‡ä»¶&lt;/span&gt;
$ ls /etc/init.d/redis_*
/etc/init.d/redis_6379  /etc/init.d/redis_6380  /etc/init.d/redis_6381
$ ls /etc/redis/
6379.conf  6380.conf  6381.conf


&lt;span class="c1"&gt;# å¼€å¯é›†ç¾¤&lt;/span&gt;
$ sudo sed -i &lt;span class="s1"&gt;&amp;#39;s/# cluster-enabled yes/cluster-enabled yes/&amp;#39;&lt;/span&gt; /etc/redis/*.conf

&lt;span class="c1"&gt;# åŒæ—¶å»æ‰/etc/redis/*.conf æ–‡ä»¶çš„`cluster-config-file` çš„æ³¨é‡Šï¼Œå¹¶åˆ†åˆ«è®¾ç½®ä¸º&lt;/span&gt;
&lt;span class="c1"&gt;# cluster-config-file /etc/redis/nodes-6379.conf&lt;/span&gt;
&lt;span class="c1"&gt;# cluster-config-file /etc/redis/nodes-6380.conf&lt;/span&gt;
&lt;span class="c1"&gt;# cluster-config-file /etc/redis/nodes-6381.conf&lt;/span&gt;

&lt;span class="c1"&gt;# é‡å¯redisæœåŠ¡&lt;/span&gt;
$ ps -ef &lt;span class="p"&gt;|&lt;/span&gt;grep redis
root     &lt;span class="m"&gt;31033&lt;/span&gt;     &lt;span class="m"&gt;1&lt;/span&gt;  &lt;span class="m"&gt;0&lt;/span&gt; 00:18 ?        00:00:00 /usr/local/bin/redis-server *:6379 &lt;span class="o"&gt;[&lt;/span&gt;cluster&lt;span class="o"&gt;]&lt;/span&gt;    
root     &lt;span class="m"&gt;31072&lt;/span&gt;     &lt;span class="m"&gt;1&lt;/span&gt;  &lt;span class="m"&gt;0&lt;/span&gt; 00:18 ?        00:00:00 /usr/local/bin/redis-server *:6380 &lt;span class="o"&gt;[&lt;/span&gt;cluster&lt;span class="o"&gt;]&lt;/span&gt;    
root     &lt;span class="m"&gt;31111&lt;/span&gt;     &lt;span class="m"&gt;1&lt;/span&gt;  &lt;span class="m"&gt;0&lt;/span&gt; 00:18 ?        00:00:00 /usr/local/bin/redis-server *:6381 &lt;span class="o"&gt;[&lt;/span&gt;cluster&lt;span class="o"&gt;]&lt;/span&gt;    

&lt;span class="c1"&gt;# å®‰è£…redis clientéœ€è¦çš„ä¾èµ–&lt;/span&gt;
$ sudo apt-get install ruby
$ sudo gem install redis

&lt;span class="c1"&gt;# æŸ¥çœ‹å¯ç”¨çš„å‘½ä»¤&lt;/span&gt;
$ src/redis-trib.rb &lt;span class="nb"&gt;help&lt;/span&gt; 
Usage: redis-trib &amp;lt;command&amp;gt; &amp;lt;options&amp;gt; &amp;lt;arguments ...&amp;gt;

  create          host1:port1 ... hostN:portN
                  --replicas &amp;lt;arg&amp;gt;
  check           host:port
  fix             host:port
  reshard         host:port
                  --from &amp;lt;arg&amp;gt;
                  --to &amp;lt;arg&amp;gt;
                  --slots &amp;lt;arg&amp;gt;
                  --yes
  add-node        new_host:new_port existing_host:existing_port
                  --slave
                  --master-id &amp;lt;arg&amp;gt;
  del-node        host:port node_id
  set-timeout     host:port milliseconds
  call            host:port &lt;span class="nb"&gt;command&lt;/span&gt; arg arg .. arg
  import          host:port
                  --from &amp;lt;arg&amp;gt;
  &lt;span class="nb"&gt;help&lt;/span&gt;            &lt;span class="o"&gt;(&lt;/span&gt;show this &lt;span class="nb"&gt;help&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;

For check, fix, reshard, del-node, set-timeout you can specify the host and port of any working node in the cluster.


&lt;span class="c1"&gt;# åˆ›å»ºé›†ç¾¤&lt;/span&gt;
$ sudo src/redis-trib.rb create 127.0.0.1:6379 127.0.0.1:6380 127.0.0.1:6381
&amp;gt;&amp;gt;&amp;gt; Creating cluster
Connecting to node 127.0.0.1:6379: OK
Connecting to node 127.0.0.1:6380: OK
Connecting to node 127.0.0.1:6381: OK
&amp;gt;&amp;gt;&amp;gt; Performing &lt;span class="nb"&gt;hash&lt;/span&gt; slots allocation on &lt;span class="m"&gt;3&lt;/span&gt; nodes...
Using &lt;span class="m"&gt;3&lt;/span&gt; masters:
127.0.0.1:6379
127.0.0.1:6380
127.0.0.1:6381
M: 50eee84811854ce707bb25ce05f1688eafa46c8d 127.0.0.1:6379
   slots:0-5460 &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;5461&lt;/span&gt; slots&lt;span class="o"&gt;)&lt;/span&gt; master
M: 3cdc94999a66c325dd91ca4af70fa9a9fe1bc623 127.0.0.1:6380
   slots:5461-10922 &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;5462&lt;/span&gt; slots&lt;span class="o"&gt;)&lt;/span&gt; master
M: 059fd2e13499b22aedfa0f0ad3707fe7534d96db 127.0.0.1:6381
   slots:10923-16383 &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;5461&lt;/span&gt; slots&lt;span class="o"&gt;)&lt;/span&gt; master
Can I &lt;span class="nb"&gt;set&lt;/span&gt; the above configuration? &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;type&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;yes&amp;#39;&lt;/span&gt; to accept&lt;span class="o"&gt;)&lt;/span&gt;: yes
&amp;gt;&amp;gt;&amp;gt; Nodes configuration updated
&amp;gt;&amp;gt;&amp;gt; Assign a different config epoch to each node
&amp;gt;&amp;gt;&amp;gt; Sending CLUSTER MEET messages to join the cluster
Waiting &lt;span class="k"&gt;for&lt;/span&gt; the cluster to join.
&amp;gt;&amp;gt;&amp;gt; Performing Cluster Check &lt;span class="o"&gt;(&lt;/span&gt;using node 127.0.0.1:6379&lt;span class="o"&gt;)&lt;/span&gt;
M: 50eee84811854ce707bb25ce05f1688eafa46c8d 127.0.0.1:6379
   slots:0-5460 &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;5461&lt;/span&gt; slots&lt;span class="o"&gt;)&lt;/span&gt; master
M: 3cdc94999a66c325dd91ca4af70fa9a9fe1bc623 127.0.0.1:6380
   slots:5461-10922 &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;5462&lt;/span&gt; slots&lt;span class="o"&gt;)&lt;/span&gt; master
M: 059fd2e13499b22aedfa0f0ad3707fe7534d96db 127.0.0.1:6381
   slots:10923-16383 &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;5461&lt;/span&gt; slots&lt;span class="o"&gt;)&lt;/span&gt; master
&lt;span class="o"&gt;[&lt;/span&gt;OK&lt;span class="o"&gt;]&lt;/span&gt; All nodes agree about slots configuration.
&amp;gt;&amp;gt;&amp;gt; Check &lt;span class="k"&gt;for&lt;/span&gt; open slots...
&amp;gt;&amp;gt;&amp;gt; Check slots coverage...
&lt;span class="o"&gt;[&lt;/span&gt;OK&lt;span class="o"&gt;]&lt;/span&gt; All &lt;span class="m"&gt;16384&lt;/span&gt; slots covered.

&lt;span class="c1"&gt;# ä¹Ÿå¯ä»¥è®¾ç½®ä¸»ä», ä½†æ˜¯éœ€è¦æ³¨æ„ï¼Œå¦‚æœè®¾ç½®äº†replicasï¼Œåˆ™éœ€è¦æ›´å¤šçš„ç»“ç‚¹&lt;/span&gt;
&lt;span class="c1"&gt;# --replicas 1 éœ€è¦6ä¸ªç»“ç‚¹&lt;/span&gt;
&lt;span class="c1"&gt;# --replicas 2 éœ€è¦12ä¸ªç»“ç‚¹&lt;/span&gt;
$ sudo src/redis-trib.rb create --replicas &lt;span class="m"&gt;1&lt;/span&gt; 127.0.0.1:6379 127.0.0.1:6380 127.0.0.1:6381 ip:port....


&lt;span class="c1"&gt;# æ£€æŸ¥é›†ç¾¤çŠ¶æ€&lt;/span&gt;
$ sudo src/redis-trib.rb check 127.0.0.1:6379
Connecting to node 127.0.0.1:6379: OK
Connecting to node 127.0.0.1:6380: OK
Connecting to node 127.0.0.1:6381: OK
&amp;gt;&amp;gt;&amp;gt; Performing Cluster Check &lt;span class="o"&gt;(&lt;/span&gt;using node 127.0.0.1:6379&lt;span class="o"&gt;)&lt;/span&gt;
M: 50eee84811854ce707bb25ce05f1688eafa46c8d 127.0.0.1:6379
   slots:0-5460 &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;5461&lt;/span&gt; slots&lt;span class="o"&gt;)&lt;/span&gt; master
   &lt;span class="m"&gt;0&lt;/span&gt; additional replica&lt;span class="o"&gt;(&lt;/span&gt;s&lt;span class="o"&gt;)&lt;/span&gt;
M: 3cdc94999a66c325dd91ca4af70fa9a9fe1bc623 127.0.0.1:6380
   slots:5461-10922 &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;5462&lt;/span&gt; slots&lt;span class="o"&gt;)&lt;/span&gt; master
   &lt;span class="m"&gt;0&lt;/span&gt; additional replica&lt;span class="o"&gt;(&lt;/span&gt;s&lt;span class="o"&gt;)&lt;/span&gt;
M: 059fd2e13499b22aedfa0f0ad3707fe7534d96db 127.0.0.1:6381
   slots:10923-16383 &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;5461&lt;/span&gt; slots&lt;span class="o"&gt;)&lt;/span&gt; master
   &lt;span class="m"&gt;0&lt;/span&gt; additional replica&lt;span class="o"&gt;(&lt;/span&gt;s&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;OK&lt;span class="o"&gt;]&lt;/span&gt; All nodes agree about slots configuration.
&amp;gt;&amp;gt;&amp;gt; Check &lt;span class="k"&gt;for&lt;/span&gt; open slots...
&amp;gt;&amp;gt;&amp;gt; Check slots coverage...
&lt;span class="o"&gt;[&lt;/span&gt;OK&lt;span class="o"&gt;]&lt;/span&gt; All &lt;span class="m"&gt;16384&lt;/span&gt; slots covered.

&lt;span class="c1"&gt;# ä½¿ç”¨äº†é›†ç¾¤ä¹‹åï¼Œä¸èƒ½åƒä»¥å‰ä¸€æ ·ä½¿ç”¨å‘½ä»¤è¡Œå®¢æˆ·ç«¯äº†, éœ€è¦åŠ å‚æ•°`-c`&lt;/span&gt;
$ redis-cli
127.0.0.1:6379&amp;gt; ping
PONG
127.0.0.1:6379&amp;gt; &lt;span class="nb"&gt;set&lt;/span&gt; a b
&lt;span class="o"&gt;(&lt;/span&gt;error&lt;span class="o"&gt;)&lt;/span&gt; MOVED &lt;span class="m"&gt;15495&lt;/span&gt; 127.0.0.1:6381   &lt;span class="c1"&gt;# è®¾ç½®å¤±è´¥&lt;/span&gt;

$ redis-cli -c
127.0.0.1:6379&amp;gt; &lt;span class="nb"&gt;set&lt;/span&gt; a b
-&amp;gt; Redirected to slot &lt;span class="o"&gt;[&lt;/span&gt;15495&lt;span class="o"&gt;]&lt;/span&gt; located at 127.0.0.1:6381
OK

&lt;span class="c1"&gt;# åŒç†python redisæ¨¡å—ä¹Ÿæ˜¯ä¸èƒ½ç›´æ¥ç”¨é›†ç¾¤æ¨¡å¼äº†ï¼Œéœ€è¦æ›¿æ¢æˆæ”¯æŒredis clusterçš„pythonæ¨¡å—&lt;/span&gt;
&lt;span class="c1"&gt;# å®Œæ¯•&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</summary><category term="redis"></category><category term="cluster"></category><category term="install"></category></entry><entry><title>Node.jså…¥é—¨</title><link href="http://blog.wiseturtles.com/posts/Getstarted-Node.js.html" rel="alternate"></link><published>2015-09-18T13:49:00+08:00</published><author><name>ox0spy</name></author><id>tag:blog.wiseturtles.com,2015-09-18:posts/Getstarted-Node.js.html</id><summary type="html">&lt;p&gt;å¤§å®¶éƒ½çŸ¥é“Node.jsæ˜¯åŸºäºJavaScriptçš„ï¼Œä½¿JavaScriptå¯ä»¥ç”¨äºåå°å¼€å‘ã€‚&lt;/p&gt;
&lt;h2&gt;ä¸ºå•¥å­¦JavaScript&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;å…¬å¸é¡¹ç›®éœ€è¦&lt;/li&gt;
&lt;li&gt;JavaScriptç¨‹åºå‘˜ä¹‹å¤šç¤¾åŒºä¹‹æ´»è·ƒ&lt;/li&gt;
&lt;li&gt;Node.jså‘å±•éå¸¸å¿«&lt;/li&gt;
&lt;li&gt;æ›´å®¹æ˜“æˆä¸ºå…¨æ ˆå·¥ç¨‹å¸ˆ (å‰ç«¯ã€åå°ã€å®¢æˆ·ç«¯[React&amp;nbsp;Native])&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;nvm&lt;/h2&gt;
&lt;p&gt;nvm (Node Version Manager)ç±»ä¼¼Pythonä¸­çš„&lt;code&gt;virtualenv&lt;/code&gt;ï¼Œæ˜¯ç®¡ç†Node.jsç‰ˆæœ¬çš„å·¥å…·ï¼Œ&amp;nbsp;æ–¹ä¾¿åœ¨ä¸»æœºä¸Šå®‰è£…å¤šä¸ªNode.jsç‰ˆæœ¬ï¼Œå®‰è£…æ–¹æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ curl https://raw.githubusercontent.com/creationix/nvm/v0.23.2/install.sh &lt;span class="p"&gt;|&lt;/span&gt; bash
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¸¸ç”¨å‘½ä»¤:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ nvm --version  &lt;span class="c1"&gt;# æŸ¥çœ‹nvmç‰ˆæœ¬&lt;/span&gt;
$ nvm -h  &lt;span class="c1"&gt;# æŸ¥çœ‹nvmå¸®åŠ©æ–‡æ¡£&lt;/span&gt;
$ nvm current  &lt;span class="c1"&gt;# æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„node.jsç‰ˆæœ¬&lt;/span&gt;
$ nvm install stable
$ nvm install &amp;lt;version&amp;gt;  &lt;span class="c1"&gt;# å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„node.js&lt;/span&gt;
$ nvm uninstall &amp;lt;version&amp;gt;  &lt;span class="c1"&gt;# å¸è½½æŒ‡å®šç‰ˆæœ¬çš„node.js&lt;/span&gt;
$ nvm use &amp;lt;version&amp;gt;  &lt;span class="c1"&gt;# å°†é»˜è®¤node.jsç‰ˆæœ¬åˆ‡æ¢åˆ°æŒ‡å®šç‰ˆæœ¬&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;npm&lt;/h2&gt;
&lt;p&gt;npm (Node Package Manager)æ˜¯Node.jsé»˜è®¤çš„æ¨¡å—ç®¡ç†å™¨ï¼Œç”¨æ¥å®‰è£…ç®¡ç†Node.jsæ¨¡å—ã€‚&amp;nbsp;npmå·²ç»é›†æˆåˆ°Node.jsä¸­äº†ï¼Œæ‰€ä»¥è£…å®ŒNode.jså°±ä¸å†éœ€è¦å•ç‹¬å®‰è£…npmã€‚&lt;/p&gt;
&lt;p&gt;å¸¸ç”¨å‘½ä»¤å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ npm &lt;span class="nb"&gt;help&lt;/span&gt;  &lt;span class="c1"&gt;# æŸ¥çœ‹å¸®åŠ©&lt;/span&gt;
$ npm -l  &lt;span class="c1"&gt;# npmå‘½ä»¤åˆ—è¡¨&lt;/span&gt;
$ npm install npm@latest -g  &lt;span class="c1"&gt;# å°†npmæ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬&lt;/span&gt;
$ npm -v  &lt;span class="c1"&gt;# æŸ¥çœ‹npmç‰ˆæœ¬&lt;/span&gt;
$ npm config list -l &lt;span class="c1"&gt;# æŸ¥çœ‹npmé…ç½®&lt;/span&gt;
$ npm info
$ npm search
$ npm list
$ npm install
$ npm update
$ npm uninstall
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ›´å¤šä¿¡æ¯è¯·å‚è€ƒé˜®ä¸€å³°çš„&lt;a href="http://javascript.ruanyifeng.com/nodejs/npm.html"&gt;npmæ¨¡å—ç®¡ç†å™¨&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Node.jså­¦ä¹ &lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.nodebeginner.org/index-zh-cn.html"&gt;Node.jså…¥é—¨&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://blog.fens.me/series-nodejs/"&gt;ä»é›¶å¼€å§‹Node.jsç³»åˆ—&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/alsotang/node-lessons"&gt;Node.jsåŒ…æ•™ä¸åŒ…ä¼š&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://javascript.ruanyifeng.com/#nodejs"&gt;JavaScriptæ ‡å‡†å‚è€ƒæ•™ç¨‹&lt;/a&gt;æœ‰äº›ç« èŠ‚ä¸“é—¨ä»‹ç»Node.jsã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿˜åœ¨çœ‹ä¸Šé¢æ–‡ç« å­¦ä¹ çš„é˜¶æ®µ&amp;nbsp;:D&lt;/p&gt;</summary><category term="node.js"></category></entry><entry><title>Gitlabå®‰è£…</title><link href="http://blog.wiseturtles.com/posts/gitlab-setup-on-centos6.html" rel="alternate"></link><published>2015-09-18T13:13:00+08:00</published><author><name>ox0spy</name></author><id>tag:blog.wiseturtles.com,2015-09-18:posts/gitlab-setup-on-centos6.html</id><summary type="html">&lt;p&gt;å…¬å¸æ²¡æœ‰ç»Ÿä¸€çš„ä»£ç ç®¡ç†å¹³å°ï¼Œè™½ç„¶æ›¾ç»ç”¨è¿‡stashã€jiraã€confluenceï¼Œä½†è°ƒç ”åè¿˜æ˜¯è§‰å¾—ç”¨gitlabã€‚&amp;nbsp;ä¸‹é¢ä»‹ç»ä¸‹gitlabå®‰è£…ã€é…ç½®ã€‚&lt;/p&gt;
&lt;h2&gt;ç³»ç»Ÿç¯å¢ƒ&lt;/h2&gt;
&lt;p&gt;æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat /etc/issue
CentOS release 6.6 &lt;span class="o"&gt;(&lt;/span&gt;Final&lt;span class="o"&gt;)&lt;/span&gt;
Kernel &lt;span class="se"&gt;\r&lt;/span&gt; on an &lt;span class="se"&gt;\m&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;å®‰è£…gitlab&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://about.gitlab.com/downloads/#centos6"&gt;å®˜æ–¹å®‰è£…æ–‡æ¡£&lt;/a&gt;ä»‹ç»çš„æ¯”è¾ƒè¯¦ç»†ï¼Œ&amp;nbsp;æˆ‘ç”¨å…¬å¸é‚®ç®±å‘é€é‚®ä»¶ï¼Œæ‰€ä»¥ï¼Œæ²¡æœ‰å®‰è£…postfixã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo yum install curl openssh-server cronie
$ sudo lokkit -s http -s ssh
$ curl https://packages.gitlab.com/install/repositories/gitlab/gitlab-ce/script.rpm.sh &lt;span class="p"&gt;|&lt;/span&gt; sudo bash
$ sudo yum install gitlab-ce
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;é…ç½®gitlab&lt;/h2&gt;
&lt;p&gt;æ•°æ®åº“ä½¿ç”¨çš„æ˜¯PostgreSQLï¼Œä½¿ç”¨å…¬å¸é‚®ä»¶æœåŠ¡å™¨ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;--- /etc/gitlab/gitlab.rb.back  2015-09-07 16:31:05.247042700 +0800
+++ /etc/gitlab/gitlab.rb   2015-09-09 14:47:33.710061343 +0800
@@ -3,7 +3,7 @@
&lt;span class="c1"&gt;## Url on which GitLab will be reachable.&lt;/span&gt;
&lt;span class="c1"&gt;## For more details on configuring external_url see:&lt;/span&gt;
&lt;span class="c1"&gt;## https://gitlab.com/gitlab-org/omnibus-gitlab/blob/629def0a7a26e7c2326566f0758d4a27857b52a3/README.md#configuring-the-external-url-for-gitlab&lt;/span&gt;
-external_url &lt;span class="s1"&gt;&amp;#39;http://iZ23rkm97f5Z&amp;#39;&lt;/span&gt;
+external_url &lt;span class="s1"&gt;&amp;#39;http://your-git-domain&amp;#39;&lt;/span&gt;


&lt;span class="c1"&gt;## Note: configuration settings below are optional.&lt;/span&gt;
@@ -14,23 +14,23 @@

&lt;span class="c1"&gt;# gitlab_rails[&amp;#39;gitlab_ssh_host&amp;#39;] = &amp;#39;ssh.host_example.com&amp;#39;&lt;/span&gt;
gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;time_zone&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;UTC&amp;#39;&lt;/span&gt;
-# gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;gitlab_email_enabled&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;true&lt;/span&gt;
-# gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;gitlab_email_from&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;example@example.com&amp;#39;&lt;/span&gt;
-# gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;gitlab_email_display_name&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Example&amp;#39;&lt;/span&gt;
-# gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;gitlab_email_reply_to&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;noreply@example.com&amp;#39;&lt;/span&gt;
-# gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;gitlab_default_can_create_group&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;true&lt;/span&gt;
-# gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;gitlab_username_changing_enabled&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;true&lt;/span&gt;
-# gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;gitlab_default_theme&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 2
-# gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;gitlab_restricted_visibility_levels&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; nil &lt;span class="c1"&gt;# to restrict public and internal: [&amp;#39;public&amp;#39;, &amp;#39;internal&amp;#39;]&lt;/span&gt;
-# gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;gitlab_default_projects_features_issues&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;true&lt;/span&gt;
-# gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;gitlab_default_projects_features_merge_requests&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;true&lt;/span&gt;
-# gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;gitlab_default_projects_features_wiki&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;true&lt;/span&gt;
-# gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;gitlab_default_projects_features_snippets&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;false&lt;/span&gt;
-# gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;gitlab_default_projects_features_visibility_level&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;private&amp;#39;&lt;/span&gt;
-# gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;gitlab_repository_downloads_path&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;tmp/repositories&amp;#39;&lt;/span&gt;
+gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;gitlab_email_enabled&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;true&lt;/span&gt;
+gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;gitlab_email_from&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;noreply@yourdomain&amp;#39;&lt;/span&gt;
+gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;gitlab_email_display_name&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Gitlab&amp;#39;&lt;/span&gt;
+gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;gitlab_email_reply_to&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;noreply@yourdomain&amp;#39;&lt;/span&gt;
+gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;gitlab_default_can_create_group&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;true&lt;/span&gt;
+gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;gitlab_username_changing_enabled&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;true&lt;/span&gt;
+gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;gitlab_default_theme&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 2
+gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;gitlab_restricted_visibility_levels&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;public&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;internal&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="c1"&gt;# to restrict public and internal: [&amp;#39;public&amp;#39;, &amp;#39;internal&amp;#39;]&lt;/span&gt;
+gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;gitlab_default_projects_features_issues&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;true&lt;/span&gt;
+gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;gitlab_default_projects_features_merge_requests&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;true&lt;/span&gt;
+gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;gitlab_default_projects_features_wiki&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;true&lt;/span&gt;
+gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;gitlab_default_projects_features_snippets&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;false&lt;/span&gt;
+gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;gitlab_default_projects_features_visibility_level&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;private&amp;#39;&lt;/span&gt;
+gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;gitlab_repository_downloads_path&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;tmp/repositories&amp;#39;&lt;/span&gt;
&lt;span class="c1"&gt;# gitlab_rails[&amp;#39;gravatar_plain_url&amp;#39;] = &amp;#39;http://www.gravatar.com/avatar/%{hash}?s=%{size}&amp;amp;d=identicon&amp;#39;&lt;/span&gt;
&lt;span class="c1"&gt;# gitlab_rails[&amp;#39;gravatar_ssl_url&amp;#39;] = &amp;#39;https://secure.gravatar.com/avatar/%{hash}?s=%{size}&amp;amp;d=identicon&amp;#39;&lt;/span&gt;
-# gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;webhook_timeout&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 10
+gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;webhook_timeout&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 10

&lt;span class="c1"&gt;## For setting up LDAP&lt;/span&gt;
&lt;span class="c1"&gt;## see https://gitlab.com/gitlab-org/omnibus-gitlab/blob/629def0a7a26e7c2326566f0758d4a27857b52a3/README.md#setting-up-ldap-sign-in&lt;/span&gt;
@@ -107,9 +107,9 @@
&lt;span class="c1"&gt;## For setting up backups&lt;/span&gt;
&lt;span class="c1"&gt;## see https://gitlab.com/gitlab-org/omnibus-gitlab/blob/629def0a7a26e7c2326566f0758d4a27857b52a3/README.md#backups&lt;/span&gt;

-# gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;backup_path&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;/var/opt/gitlab/backups&amp;quot;&lt;/span&gt;
-# gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;backup_archive_permissions&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;0644&lt;/span&gt; &lt;span class="c1"&gt;# See: http://doc.gitlab.com/ce/raketasks/backup_restore.html#backup-archive-permissions&lt;/span&gt;
-# gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;backup_keep_time&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 604800
+gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;backup_path&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;/var/opt/gitlab/backups&amp;quot;&lt;/span&gt;
+gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;backup_archive_permissions&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;0644&lt;/span&gt; &lt;span class="c1"&gt;# See: http://doc.gitlab.com/ce/raketasks/backup_restore.html#backup-archive-permissions&lt;/span&gt;
+gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;backup_keep_time&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 604800
&lt;span class="c1"&gt;# gitlab_rails[&amp;#39;backup_upload_connection&amp;#39;] = {&lt;/span&gt;
&lt;span class="c1"&gt;#   &amp;#39;provider&amp;#39; =&amp;gt; &amp;#39;AWS&amp;#39;,&lt;/span&gt;
&lt;span class="c1"&gt;#   &amp;#39;region&amp;#39; =&amp;gt; &amp;#39;eu-west-1&amp;#39;,&lt;/span&gt;
@@ -128,9 +128,9 @@
&lt;span class="c1"&gt;# gitlab_rails[&amp;#39;satellites_timeout&amp;#39;] = 30&lt;/span&gt;

&lt;span class="c1"&gt;## GitLab Shell settings for GitLab&lt;/span&gt;
-# gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;gitlab_shell_ssh_port&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 22
-# gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;git_max_size&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 20971520
-# gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;git_timeout&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 10
+gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;gitlab_shell_ssh_port&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 22
+gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;git_max_size&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 20971520
+gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;git_timeout&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 10

&lt;span class="c1"&gt;## Extra customization&lt;/span&gt;
&lt;span class="c1"&gt;# gitlab_rails[&amp;#39;extra_google_analytics_id&amp;#39;] = &amp;#39;_your_tracking_id&amp;#39;&lt;/span&gt;
@@ -161,9 +161,9 @@
&lt;span class="c1"&gt;# GitLab application settings #&lt;/span&gt;
&lt;span class="c1"&gt;###############################&lt;/span&gt;

-# gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;uploads_directory&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;/var/opt/gitlab/gitlab-rails/uploads&amp;quot;&lt;/span&gt;
-# gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;rate_limit_requests_per_period&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 10
-# gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;rate_limit_period&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 60
+gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;uploads_directory&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;/var/opt/gitlab/gitlab-rails/uploads&amp;quot;&lt;/span&gt;
+gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;rate_limit_requests_per_period&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 10
+gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;rate_limit_period&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 60

&lt;span class="c1"&gt;# Change the initial default admin password.&lt;/span&gt;
&lt;span class="c1"&gt;# Only applicable on inital setup, changing this setting after database is created and seeded&lt;/span&gt;
@@ -176,13 +176,13 @@
&lt;span class="c1"&gt;## see https://gitlab.com/gitlab-org/omnibus-gitlab/blob/629def0a7a26e7c2326566f0758d4a27857b52a3/doc/settings/database.md#database-settings&lt;/span&gt;
&lt;span class="c1"&gt;## Only needed if you use an external database.&lt;/span&gt;

-# gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;db_adapter&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;postgresql&amp;quot;&lt;/span&gt;
-# gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;db_encoding&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;unicode&amp;quot;&lt;/span&gt;
-# gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;db_database&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;gitlabhq_production&amp;quot;&lt;/span&gt;
-# gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;db_pool&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 10
-# gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;db_username&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;gitlab&amp;quot;&lt;/span&gt;
-# gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;db_password&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; nil
-# gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;db_host&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; nil
+gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;db_adapter&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;postgresql&amp;quot;&lt;/span&gt;
+gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;db_encoding&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;unicode&amp;quot;&lt;/span&gt;
+gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;db_database&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;gitlab&amp;quot;&lt;/span&gt;
+gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;db_pool&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 10
+gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;db_username&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;gitlab&amp;quot;&lt;/span&gt;
+gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;db_password&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; nil
+gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;db_host&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; nil
&lt;span class="c1"&gt;# gitlab_rails[&amp;#39;db_port&amp;#39;] = 5432&lt;/span&gt;
&lt;span class="c1"&gt;# gitlab_rails[&amp;#39;db_socket&amp;#39;] = nil&lt;/span&gt;
&lt;span class="c1"&gt;# gitlab_rails[&amp;#39;db_sslmode&amp;#39;] = nil&lt;/span&gt;
@@ -206,15 +206,15 @@
&lt;span class="c1"&gt;# see https://gitlab.com/gitlab-org/omnibus-gitlab/blob/629def0a7a26e7c2326566f0758d4a27857b52a3/doc/settings/smtp.md#smtp-settings&lt;/span&gt;
&lt;span class="c1"&gt;# Use smtp instead of sendmail/postfix.&lt;/span&gt;

-# gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;smtp_enable&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;true&lt;/span&gt;
-# gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;smtp_address&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;smtp.server&amp;quot;&lt;/span&gt;
-# gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;smtp_port&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 456
-# gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;smtp_user_name&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;smtp user&amp;quot;&lt;/span&gt;
-# gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;smtp_password&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;smtp password&amp;quot;&lt;/span&gt;
-# gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;smtp_domain&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;example.com&amp;quot;&lt;/span&gt;
-# gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;smtp_authentication&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;login&amp;quot;&lt;/span&gt;
-# gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;smtp_enable_starttls_auto&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;true&lt;/span&gt;
-# gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;smtp_tls&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;false&lt;/span&gt;
+gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;smtp_enable&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;true&lt;/span&gt;
+gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;smtp_address&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;smtp.xxx.com&amp;quot;&lt;/span&gt;
+gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;smtp_port&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 25
+gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;smtp_user_name&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;noreply@yourdomain&amp;quot;&lt;/span&gt;
+gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;smtp_password&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;yourpassword&amp;quot;&lt;/span&gt;
+gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;smtp_domain&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;yourdomain&amp;quot;&lt;/span&gt;
+gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;smtp_authentication&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;login&amp;quot;&lt;/span&gt;
+gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;smtp_enable_starttls_auto&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;false&lt;/span&gt;
+gitlab_rails&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;smtp_tls&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;false&lt;/span&gt;
&lt;span class="c1"&gt;# gitlab_rails[&amp;#39;smtp_openssl_verify_mode&amp;#39;] = &amp;#39;none&amp;#39; # Can be: &amp;#39;none&amp;#39;, &amp;#39;peer&amp;#39;, &amp;#39;client_once&amp;#39;, &amp;#39;fail_if_no_peer_cert&amp;#39;, see http://api.rubyonrails.org/classes/ActionMailer/Base.html&lt;/span&gt;
&lt;span class="c1"&gt;# gitlab_rails[&amp;#39;smtp_ca_path&amp;#39;] = &amp;quot;/etc/ssl/certs&amp;quot;&lt;/span&gt;
&lt;span class="c1"&gt;# gitlab_rails[&amp;#39;smtp_ca_file&amp;#39;] = &amp;quot;/etc/ssl/certs/ca-certificates.crt&amp;quot;&lt;/span&gt;
@@ -242,18 +242,18 @@
&lt;span class="c1"&gt;##################&lt;/span&gt;
&lt;span class="c1"&gt;## Tweak unicorn settings.&lt;/span&gt;

-# unicorn&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;worker_timeout&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 60
-# unicorn&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;worker_processes&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 2
+unicorn&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;worker_timeout&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 60
+unicorn&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;worker_processes&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 2

&lt;span class="c1"&gt;## Advanced settings&lt;/span&gt;
-# unicorn&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;listen&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;127.0.0.1&amp;#39;&lt;/span&gt;
-# unicorn&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;port&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 8080
-# unicorn&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;socket&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;/var/opt/gitlab/gitlab-rails/sockets/gitlab.socket&amp;#39;&lt;/span&gt;
-# unicorn&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;pidfile&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;/opt/gitlab/var/unicorn/unicorn.pid&amp;#39;&lt;/span&gt;
+unicorn&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;listen&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;127.0.0.1&amp;#39;&lt;/span&gt;
+unicorn&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;port&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 8088
+unicorn&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;socket&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;/var/opt/gitlab/gitlab-rails/sockets/gitlab.socket&amp;#39;&lt;/span&gt;
+unicorn&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;pidfile&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;/opt/gitlab/var/unicorn/unicorn.pid&amp;#39;&lt;/span&gt;
&lt;span class="c1"&gt;# unicorn[&amp;#39;tcp_nopush&amp;#39;] = true&lt;/span&gt;
-# unicorn&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;backlog_socket&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 1024
+unicorn&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;backlog_socket&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 1024
&lt;span class="c1"&gt;# Make sure somaxconn is equal or higher then backlog_socket&lt;/span&gt;
-# unicorn&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;somaxconn&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 1024
+unicorn&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;somaxconn&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 1024
&lt;span class="c1"&gt;# We do not recommend changing this setting&lt;/span&gt;
&lt;span class="c1"&gt;# unicorn[&amp;#39;log_directory&amp;#39;] = &amp;quot;/var/log/gitlab/unicorn&amp;quot;&lt;/span&gt;

@@ -290,11 +290,11 @@
&lt;span class="c1"&gt;# GitLab PostgreSQL #&lt;/span&gt;
&lt;span class="c1"&gt;#####################&lt;/span&gt;

-# postgresql&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;enable&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;true&lt;/span&gt;
-# postgresql&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;listen_address&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; nil
-# postgresql&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;port&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 5432
-# postgresql&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;data_dir&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;/var/opt/gitlab/postgresql/data&amp;quot;&lt;/span&gt;
-# postgresql&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;shared_buffers&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;256MB&amp;quot;&lt;/span&gt; &lt;span class="c1"&gt;# recommend value is 1/4 of total RAM, up to 14GB.&lt;/span&gt;
+postgresql&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;enable&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;true&lt;/span&gt;
+postgresql&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;listen_address&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; nil
+postgresql&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;port&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 5432
+postgresql&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;data_dir&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;/var/opt/gitlab/postgresql/data&amp;quot;&lt;/span&gt;
+postgresql&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;shared_buffers&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;256MB&amp;quot;&lt;/span&gt; &lt;span class="c1"&gt;# recommend value is 1/4 of total RAM, up to 14GB.&lt;/span&gt;

&lt;span class="c1"&gt;## Advanced settings&lt;/span&gt;
&lt;span class="c1"&gt;# postgresql[&amp;#39;ha&amp;#39;] = false&lt;/span&gt;
@@ -326,7 +326,7 @@
&lt;span class="c1"&gt;################&lt;/span&gt;
&lt;span class="c1"&gt;## Can be disabled if you are using your own redis instance.&lt;/span&gt;

-# redis&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;enable&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;true&lt;/span&gt;
+redis&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;enable&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;true&lt;/span&gt;
&lt;span class="c1"&gt;# redis[&amp;#39;username&amp;#39;] = &amp;quot;gitlab-redis&amp;quot;&lt;/span&gt;
&lt;span class="c1"&gt;# redis[&amp;#39;uid&amp;#39;] = nil&lt;/span&gt;
&lt;span class="c1"&gt;# redis[&amp;#39;gid&amp;#39;] = nil&lt;/span&gt;
@@ -470,14 +470,14 @@
&lt;span class="c1"&gt;## see https://gitlab.com/gitlab-org/omnibus-gitlab/tree/629def0a7a26e7c2326566f0758d4a27857b52a3/doc/settings/database.md#database-settings&lt;/span&gt;
&lt;span class="c1"&gt;## Only needed if you use an external database.&lt;/span&gt;

-# gitlab_ci&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;db_adapter&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;postgresql&amp;quot;&lt;/span&gt;
-# gitlab_ci&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;db_encoding&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;unicode&amp;quot;&lt;/span&gt;
-# gitlab_ci&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;db_database&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;gitlab_ci_production&amp;quot;&lt;/span&gt;
+gitlab_ci&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;db_adapter&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;postgresql&amp;quot;&lt;/span&gt;
+gitlab_ci&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;db_encoding&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;unicode&amp;quot;&lt;/span&gt;
+gitlab_ci&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;db_database&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;gitlab_ci_production&amp;quot;&lt;/span&gt;
&lt;span class="c1"&gt;# gitlab_ci[&amp;#39;db_pool&amp;#39;] = 10&lt;/span&gt;
-# gitlab_ci&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;db_username&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;gitlab_ci&amp;quot;&lt;/span&gt;
-# gitlab_ci&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;db_password&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; nil
-# gitlab_ci&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;db_host&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; nil
-# gitlab_ci&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;db_port&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 5432
+gitlab_ci&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;db_username&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;gitlab_ci&amp;quot;&lt;/span&gt;
+gitlab_ci&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;db_password&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; nil
+gitlab_ci&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;db_host&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; nil
+gitlab_ci&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;db_port&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 5432
&lt;span class="c1"&gt;# gitlab_ci[&amp;#39;db_socket&amp;#39;] = nil&lt;/span&gt;
&lt;span class="c1"&gt;# gitlab_ci[&amp;#39;db_sslmode&amp;#39;] = nil&lt;/span&gt;
&lt;span class="c1"&gt;# gitlab_ci[&amp;#39;db_sslrootcert&amp;#39;] = nil&lt;/span&gt;
@@ -497,6 +497,15 @@
&lt;span class="c1"&gt;###################################&lt;/span&gt;
&lt;span class="c1"&gt;## see https://gitlab.com/gitlab-org/omnibus-gitlab/tree/629def0a7a26e7c2326566f0758d4a27857b52a3/doc/settings/smtp.md#smtp-settings&lt;/span&gt;

+gitlab_ci&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;smtp_enable&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;true&lt;/span&gt;
+gitlab_ci&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;smtp_address&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;smtp.xxx.com&amp;quot;&lt;/span&gt;
+gitlab_ci&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;smtp_port&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 25
+gitlab_ci&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;smtp_user_name&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;noreply@yourdomain&amp;quot;&lt;/span&gt;
+gitlab_ci&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;smtp_password&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;yourpassword&amp;quot;&lt;/span&gt;
+gitlab_ci&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;smtp_domain&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;yourdomain&amp;quot;&lt;/span&gt;
+gitlab_ci&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;smtp_authentication&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;login&amp;quot;&lt;/span&gt;
+gitlab_ci&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;smtp_enable_starttls_auto&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;false&lt;/span&gt;
+gitlab_ci&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;smtp_tls&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;false&lt;/span&gt;
&lt;span class="c1"&gt;# gitlab_ci[&amp;#39;smtp_enable&amp;#39;] = true&lt;/span&gt;
&lt;span class="c1"&gt;# gitlab_ci[&amp;#39;smtp_address&amp;#39;] = &amp;quot;smtp.server&amp;quot;&lt;/span&gt;
&lt;span class="c1"&gt;# gitlab_ci[&amp;#39;smtp_port&amp;#39;] = 456&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ ¹æ®/etc/gitlab/gitlab.rbé‡æ–°é…ç½®gitlabã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo gitlab-ctl reconfigure
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä½¿ç”¨é»˜è®¤ç”¨æˆ·å:&lt;code&gt;root&lt;/code&gt; å¯†ç :&lt;code&gt;5iveL!fe&lt;/code&gt;ç™»é™†ï¼Œç™»é™†åä¿®æ”¹é»˜è®¤å¯†ç ã€‚&lt;/p&gt;
&lt;h2&gt;å¤‡ä»½&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo crontab -l
&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="m"&gt;2&lt;/span&gt; * * * /opt/gitlab/bin/gitlab-rake gitlab:backup:create
&lt;/pre&gt;&lt;/div&gt;</summary><category term="gitlab"></category></entry><entry><title>Golangè¯„ä»·</title><link href="http://blog.wiseturtles.com/posts/golang-chaos.html" rel="alternate"></link><published>2015-09-15T13:47:00+08:00</published><author><name>ox0spy</name></author><id>tag:blog.wiseturtles.com,2015-09-15:posts/golang-chaos.html</id><summary type="html">&lt;h3&gt;djvu9&lt;/h3&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä½œä¸ºä¸€å…·ç äº†å·®ä¸å¤š20å¹´C++çš„C++11çˆ±å¥½è€…ï¼Œæˆ‘è§‰å¾—å¯¹äºå¤§éƒ¨åˆ†åç«¯åŠæ ˆç å†œï¼Œgolangæ‰æ˜¯æœªæ¥çš„æ–¹å‘ã€‚C++ç¼ºä¹å¯ç”¨çš„æ ‡å‡†åº“ï¼ŒJavaçš„é—®é¢˜æ˜¯&lt;span class="caps"&gt;JVM&lt;/span&gt;ï¼Œpython/phpæ²¡æœ‰static&amp;nbsp;typingï¼Œè¿™äº›é—®é¢˜çœ‹æ¥éƒ½æ²¡ä»€ä¹ˆè§£å†³å¸Œæœ›ã€‚golangçš„toolchainï¼Œruntimeå’Œæ ‡å‡†åº“ï¼Œç›®å‰æ¥çœ‹æ˜¯é…åˆçš„æœ€å¥½çš„æ²¡æœ‰ä¹‹ä¸€ã€‚è¯­è¨€æœ¬èº«å…¶å®ä¸å¤ªé‡è¦ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;golangçš„æœ€å¤§ç‰¹ç‚¹å°±æ˜¯æ–¹ä¾¿ï¼Œæ¯”å¦‚goroutineä¸ç”¨åˆ›å»ºçº¿ç¨‹ï¼Œchané€šä¿¡ä¸ç”¨æ¶ˆæ¯é˜Ÿåˆ—ï¼Œè‡ªå¸¦ç½‘ç»œã€å‹ç¼©ã€åŠ å¯†ã€åè®®ã€ç¼–è§£ç ã€å›¾åƒã€æ–‡æœ¬å¤„ç†çš„åº“ï¼Œå…¨éƒ¨ç”¨goå®ç°æ‰€ä»¥äº¤å‰ç¼–è¯‘å¾ˆç®€å•ï¼Œè¿˜æœ‰parser/serializerçš„æ”¯æŒï¼Œé™æ€ç¼–è¯‘éƒ¨ç½²ç®€å•ä¸æ‹…å¿ƒè¿è¡Œåº“çš„ç‰ˆæœ¬é—®é¢˜ã€‚æ‰€ä»¥å³ä½¿æ²¡æœ‰æ¨¡ç‰ˆï¼Œä»£ç ç´¯èµ˜ä¸”ä¸‘ä¹Ÿèƒ½æ¥å—äº†ã€‚ &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æœ‰äººé—®&lt;span class="caps"&gt;JVM&lt;/span&gt;æœ‰ä»€ä¹ˆé—®é¢˜ã€‚è½¯ä»¶çš„åŸºæœ¬åŸç†å°±æ˜¯&amp;#8221;We can solve any problem by introducing an extra level of indirection&amp;#8221;ã€‚ä½†æ˜¯æŠ½è±¡å°±ä¼šå¸¦æ¥æ–°çš„é—®é¢˜ï¼šç»´æŠ¤æˆæœ¬ï¼Œè·Ÿå¤–ç•Œçš„äº¤äº’é™åˆ¶ï¼Œä¿¡æ¯çš„ç¼ºå¤±ç­‰ï¼Œæ‰€ä»¥è¦è°ƒgcï¼Œjniä¼šå½±å“ä¼˜åŒ–ï¼Œdebugèµ·æ¥éº»çƒ¦ã€‚&lt;span class="caps"&gt;JVM&lt;/span&gt;å½“å¹´è¦è§£å†³çš„é—®é¢˜ç°åœ¨éƒ½ä¸å­˜åœ¨äº†æ‰€ä»¥å®ƒè‡ªå·±å°±æˆé—®é¢˜äº†ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;æ“ä½œç³»ç»Ÿå’Œä½“ç³»ç»“æ„çš„å¤šæ ·æ€§å‡å°‘ï¼Œç¼–è¯‘å™¨åŸºç¡€è®¾æ–½çš„æ”¹è¿›ï¼Œä»¥åŠå¼€æ”¾æºä»£ç çš„å‘å±•ã€‚åŸºæœ¬ä¸Šç°åœ¨æ¢ä¸ªå¹³å°é‡æ–°ç¼–è¯‘ä¸‹ä»£ç å°±å¥½äº†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h3&gt;yinwang&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.yinwang.org/blog-cn/2014/04/18/golang/"&gt;å¯¹ Go&amp;nbsp;è¯­è¨€çš„ç»¼åˆè¯„ä»·&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary><category term="go"></category></entry><entry><title>Elastichsearchåå‘ä»£ç†è®¾ç½®</title><link href="http://blog.wiseturtles.com/posts/elasticsearch-reverse-proxy.html" rel="alternate"></link><published>2015-08-12T17:29:00+08:00</published><author><name>craygit</name></author><id>tag:blog.wiseturtles.com,2015-08-12:posts/elasticsearch-reverse-proxy.html</id><summary type="html">&lt;p&gt;å†…ç½‘çš„&lt;span class="caps"&gt;ES&lt;/span&gt;é›†ç¾¤ï¼Œå¹³æ—¶æ“ä½œéƒ½æ˜¯é€šè¿‡å‘½ä»¤è¡Œï¼Œæœ‰ç‚¹ä¸æ–¹ä¾¿ï¼Œè€Œä¸”å®‰è£…çš„siteæ’ä»¶ä¹Ÿæ²¡æ³•ä½¿ç”¨&amp;nbsp;ï¼Œæ¯”è¾ƒè›‹ç–¼ï¼Œæ‰€ä»¥é…ç½®nginxä½œä¸ºelasticsearchçš„åå‘ä»£ç†ï¼Œå¹¶ä¸”æ·»åŠ è®¤è¯ä¿¡æ¯.&lt;/p&gt;
&lt;p&gt;å¦‚æœæ˜¯ç›´æ¥ç”¨åŸŸåçš„æ ¹èŠ‚ç‚¹ä½œä¸ºåå‘ä»£ç†çš„è¯ï¼Œæ¯”è¾ƒç®€å•ï¼Œç›´æ¥é…ç½®ä¸€ä¸‹å°±å¯ä»¥ï¼Œä½†æ˜¯é—®
é¢˜æ˜¯æ ¹èŠ‚ç‚¹è¢«æš‚ç”¨ï¼Œéœ€è¦è®¾ç½®ä¸€ä¸ªå‰ç¼€æ¥æ¥è®¿é—®,&amp;nbsp;å°±ç¨å¾®éº»çƒ¦ä¸€ç‚¹.&lt;/p&gt;
&lt;p&gt;nginxé…ç½®å¦‚ä¸‹:&lt;/p&gt;
&lt;pre&gt;
    location ~ ^/es/ {
            rewrite ^/es/(.*)$ /$1 break;
            include proxy_params;
            proxy_pass http://es_node_ip:9200;
            proxy_redirect http://$host/ http://$host/es/;
            auth_basic "please login";
            auth_basic_user_file /data/passwd/es.htpasswd;
    }
&lt;/pre&gt;

&lt;p&gt;å‡ ç‚¹éœ€è¦æ³¨æ„ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;include proxy_params;&lt;/code&gt; proxy_paramsä¸ºä¸€äº›åå‘ä»£ç†è®¾ç½®å‚æ•°ï¼Œæ²¡æœ‰çš„è¯å¯ä»¥å»æ‰&lt;/li&gt;
&lt;li&gt;&lt;code&gt;proxy_pass http://es_node_ip:9200;&lt;/code&gt; éœ€è¦æ›¿æ¢es_node_ip ä¸º&lt;span class="caps"&gt;ES&lt;/span&gt;é›†ç¾¤çš„&lt;span class="caps"&gt;IP&lt;/span&gt;,&lt;/li&gt;
&lt;li&gt;&lt;code&gt;auth_basic_user_file /data/passwd/es.htpasswd&lt;/code&gt;ä¸­&lt;code&gt;/data/passwd/es.htpasswd&lt;/code&gt;ä¸ºè®¤è¯æ–‡ä»¶ï¼Œå¯ä»¥ç”¨apacheå·¥å…·æˆ–ä¸€äº›&lt;a href="http://tool.oschina.net/htpasswd"&gt;åœ¨çº¿å·¥å…·&lt;/a&gt;ç”Ÿæˆ&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å‡è®¾åŸŸåä¸ºwww.example.com,&amp;nbsp;é‚£ä¹ˆå°±å¯ä»¥ç›´æ¥è®¿é—®&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.example.com/es/"&gt;http://www.example.com/es/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.example.com/es/_plugin/head/"&gt;http://www.example.com/es/_plugin/head/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é…ç½®å¥½ä¹‹åï¼Œç”¨èµ·æ¥çˆ½å¤šäº†ã€‚&lt;/p&gt;</summary><category term="elasticsearch"></category><category term="reverse"></category><category term="proxy"></category></entry><entry><title>Elastichsearchæ•°æ®å¤‡ä»½ï¼Œæ¢å¤ï¼ŒåŠè¿ç§»</title><link href="http://blog.wiseturtles.com/posts/elasticsearch-snapshot-restore.html" rel="alternate"></link><published>2015-08-12T14:13:00+08:00</published><author><name>craygit</name></author><id>tag:blog.wiseturtles.com,2015-08-12:posts/elasticsearch-snapshot-restore.html</id><summary type="html">&lt;h3&gt;å‚è€ƒèµ„æ–™:&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.elastic.co/guide/en/elasticsearch/guide/current/backing-up-your-cluster.html"&gt;https://www.elastic.co/guide/en/elasticsearch/guide/current/backing-up-your-cluster.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.elastic.co/guide/en/elasticsearch/guide/current/_restoring_from_a_snapshot.html"&gt;https://www.elastic.co/guide/en/elasticsearch/guide/current/_restoring_from_a_snapshot.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-snapshots.html"&gt;https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-snapshots.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.elastic.co/blog/introducing-snapshot-restore"&gt;https://www.elastic.co/blog/introducing-snapshot-restore&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://stackoverflow.com/questions/27903929/elasticsearch-snapshot-across-cluster"&gt;http://stackoverflow.com/questions/27903929/elasticsearch-snapshot-across-cluster&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æœ€è¿‘å·¥ä½œéœ€è¦ï¼Œè¦å°†ä¸€ä¸ªç´¢å¼•çš„æ•°æ®è¿ç§»åˆ°æ–°çš„å¦ä¸€ä¸ªé›†ç¾¤ï¼ŒæŸ¥é˜…äº†ä¸€äº›èµ„æ–™è¿‡åï¼Œä¾¿å¼€å§‹æ“ä½œã€‚ç”±äºæ•°æ®é‡å¤§ï¼Œæ•´ä¸ªè¿‡ç¨‹ä¹ŸèŠ±è´¹äº†ä¸å°‘æ—¶é—´ï¼Œé‡åˆ°ä¸€äº›å‘ï¼Œç‰¹æ­¤æ•´ç†ä¸€ä¸‹æ•´ä¸ªè¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;h3&gt;è¿ç§»æ³¨æ„äº‹é¡¹&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ä¿è¯&lt;span class="caps"&gt;ES&lt;/span&gt;é›†ç¾¤ä¸å†æ¥å—æ–°çš„æ•°æ®(å¦‚æœæ˜¯å¤‡ä»½çš„è¯ï¼Œè¿™ä¸€ç‚¹å¯ä»¥ä¸è€ƒè™‘ï¼Œä½†æ˜¯åšæ•°æ®è¿ç§»çš„è¯ï¼Œå»ºè®®è¿™æ ·åšï¼‰.&lt;/li&gt;
&lt;li&gt;ä¸å»ºè®®ç›´æ¥åœ¨ç”Ÿäº§ç¯å¢ƒåšè¿™äº›æ“ä½œï¼Œæœ€å¥½æ˜¯å…ˆåœ¨æœ¬åœ°æ­å»ºä¸€ä¸ªå’Œç”Ÿäº§ç¯å¢ƒä¸€æ ·çš„é›†ç¾¤ç¯å¢ƒï¼Œåˆ›å»ºä¸€äº›æµ‹è¯•æ•°æ®ï¼ŒæŠŠæ•´ä¸ªè¿‡ç¨‹å…ˆè·‘ä¸€éï¼Œç„¶åå†åˆ°ç”Ÿäº§ç¯å¢ƒæ“ä½œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æœ¬æ–‡å‡è®¾&lt;span class="caps"&gt;ES&lt;/span&gt;é›†ç¾¤æœ‰3ä¸ªèŠ‚ç‚¹ï¼Œ&lt;span class="caps"&gt;IP&lt;/span&gt;åˆ†åˆ«æ˜¯: 192.168.0.1, 193.168.0.2,&amp;nbsp;192.168.0.3&lt;/p&gt;
&lt;h3&gt;æ³¨å†Œå¿«ç…§ä»“åº“&lt;/h3&gt;
&lt;p&gt;&lt;span class="caps"&gt;ES&lt;/span&gt;æ˜¯é€šè¿‡å¿«ç…§çš„æ–¹å¼æ¥å®ç°æ•°æ®å¤‡ä»½ï¼Œå¹¶ä¸”æ˜¯ä»¥å¢é‡çš„æ–¹å¼ï¼Œæ‰€ä»¥ä¸€èˆ¬ç¬¬ä¸€æ¬¡åšçš„è¯ä¼šèŠ±è´¹è¾ƒé•¿çš„æ—¶é—´ã€‚ä¸ºäº†åšå¿«ç…§ï¼Œé‚£ä¹ˆå°±éœ€è¦æ³¨å†Œä¸€ä¸ªå¿«ç…§ä»“åº“ï¼Œå‘Šè¯‰&lt;span class="caps"&gt;ES&lt;/span&gt;æˆ‘ä»¬çš„å¿«ç…§åº”è¯¥å¦‚ä½•ä¿å­˜ä»¥åŠå°†å¿«ç…§ä¿å­˜åˆ°å“ªé‡Œ.&lt;/p&gt;
&lt;p&gt;&lt;span class="caps"&gt;ES&lt;/span&gt;çš„å¿«ç…§ä»“åº“æ”¯æŒå¦‚ä¸‹å‡ ç§å½¢å¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å…±äº«çš„æ–‡ä»¶ç³»ç»Ÿï¼Œå¦‚&lt;span class="caps"&gt;NAS&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;Amazon&amp;nbsp;S3&lt;/li&gt;
&lt;li&gt;&lt;span class="caps"&gt;HDFS&lt;/span&gt; (Hadoop Distributed File&amp;nbsp;System)&lt;/li&gt;
&lt;li&gt;Azure&amp;nbsp;Cloud&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é€šå¸¸é€‰æ‹©æ³¨å†Œç¬¬ä¸€ç§å½¢å¼ã€‚&lt;/p&gt;
&lt;p&gt;ä»»æ„é€‰æ‹©ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ curl -XPUT  http://192.168.0.1:9200/_snapshot/my_backup -d &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;
&lt;span class="s1"&gt;{&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;type&amp;quot;: &amp;quot;fs&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;settings&amp;quot;: {&lt;/span&gt;
&lt;span class="s1"&gt;        &amp;quot;location&amp;quot;: &amp;quot;/data/backups/elasticsearch&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;    }&lt;/span&gt;
&lt;span class="s1"&gt;}&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿™æ ·å°±æ³¨å†Œäº†ä¸€ä¸ªåä¸º&lt;code&gt;my_backup&lt;/code&gt;çš„ä»“åº“ï¼Œè¿™é‡Œçš„&lt;code&gt;location&lt;/code&gt;éœ€è¦æ³¨æ„ï¼Œæœ€å¥½æ˜¯è®¾ç½®ä¸€ä¸ªæ¯ä¸ªèŠ‚ç‚¹éƒ½èƒ½è®¿é—®å¹¶ä¸”æœ‰å†™æƒé™çš„å…±äº«ç›®å½•ï¼Œå¦‚smbç›®å½•ç­‰(å¦‚æœæ•´ä¸ªé›†ç¾¤å°±ä¸€ä¸ªèŠ‚ç‚¹é‚£ä¹ˆè®¾ç½®ä¸ºæœ¬åœ°ç›®å½•ä¹Ÿæ— æ‰€è°“)ã€‚
æˆ‘è‡ªå·±åœ¨åšçš„æ—¶å€™ç”±äºè®¾ç½®äº†æœ¬åœ°ç›®å½•&lt;code&gt;/data/backups/elasticsearch&lt;/code&gt;, æœ€ååšå‡ºæ¥å‘ç°å¿«ç…§è¢«åˆ†åˆ«ä¿å­˜åœ¨é›†ç¾¤æ¯ä¸ªèŠ‚ç‚¹çš„&lt;code&gt;/data/backups/elasticsearch&lt;/code&gt;ç›®å½•ä¸‹ï¼Œå¹¶ä¸”ä¸€ä¸ªèŠ‚ç‚¹ä¿å­˜äº†ä¸€äº›ä¿¡æ¯ã€‚æœ€ååšæ•°æ®è¿ç§»çš„æ—¶å€™ï¼Œä¸å¾—ä¸ä»æ¯ä¸ªèŠ‚ç‚¹å°†å¿«ç…§æ–‡ä»¶æ‹·è´å‡ºæ¥ï¼Œç„¶ååˆå¹¶åˆ°ä¸€èµ·ã€‚&lt;/p&gt;
&lt;p&gt;é™¤äº†&lt;code&gt;location&lt;/code&gt;å¤–ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–é€‰é¡¹å¯ä»¥è®¾ç½®:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;compress&amp;nbsp;æ˜¯å¦å‹ç¼©&lt;/li&gt;
&lt;li&gt;max_snapshot_bytes_per_sec&amp;nbsp;åˆ¶ä½œå¿«ç…§çš„é€Ÿåº¦ï¼Œé»˜è®¤20mb/s&lt;/li&gt;
&lt;li&gt;max_restore_bytes_per_sec&amp;nbsp;å¿«ç…§æ¢å¤çš„é€Ÿåº¦ï¼Œé»˜è®¤20mb/s&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ›´æ–°ä»“åº“è®¾ç½®å¦‚ä¸‹:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;curl -XPOST http://192.168.0.1:9200/_snapshot/my_backup/
&lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;type&amp;quot;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;quot;fs&amp;quot;&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;settings&amp;quot;&lt;/span&gt;: &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;location&amp;quot;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;quot;/data/backups/elasticsearch&amp;quot;&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;max_snapshot_bytes_per_sec&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;50mb&amp;quot;&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;max_restore_bytes_per_sec&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;50mb&amp;quot;&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;compress&amp;quot;&lt;/span&gt; : &lt;span class="nb"&gt;true&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ç‚¹æ˜¯ï¼Œæ³¨å†Œä»“åº“ç”¨çš„æ˜¯&lt;code&gt;PUT&lt;/code&gt;, è€Œæ›´æ–°ä»“åº“è®¾ç½®ç”¨çš„æ˜¯&lt;code&gt;POST&lt;/code&gt;.&lt;/p&gt;
&lt;h3&gt;æ£€æŸ¥æ³¨å†Œçš„ä»“åº“ä¿¡æ¯&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ curl -XGET http://192.168.0.1:9200/_snapshot/my_backup
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;å¼€å§‹å¤‡ä»½&lt;/h3&gt;
&lt;p&gt;æŒ‡å®šå¿«ç…§åç§°ä¸º&lt;code&gt;snapshot_20150812&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ curl -XPUT  http://192.168.0.1:9200/_snapshot/my_backup/snapshot_20150812
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ‰§è¡Œä¸Šé¢çš„ä¸Šé¢çš„å‘½ä»¤ä¼šé©¬ä¸Šè¿”å›ï¼Œå¹¶åœ¨åå°æ‰§è¡Œå¤‡ä»½æ“ä½œ, å¦‚æœæƒ³ç­‰åˆ°å¤‡ä»½å®Œæˆï¼Œå¯ä»¥åŠ ä¸Šå‚æ•°&lt;code&gt;wait_for_completion=true&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ curl -XPUT  http://192.168.0.1:9200/_snapshot/my_backup/snapshot_20150812?wait_for_completion&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;é»˜è®¤æ˜¯å¤‡ä»½æ‰€æœ‰çš„ç´¢å¼•indices,&amp;nbsp;å¦‚æœè¦æŒ‡å®šindex,å¯ä»¥&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;curl -XPUT http://192.168.0.1:9200/_snapshot/my_backup/snapshot_20150812
&lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;indices&amp;quot;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;quot;index_1,index_2&amp;quot;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿™ä¸ªå¤‡ä»½è¿‡ç¨‹éœ€è¦çš„æ—¶é—´è§†æ•°æ®é‡è€Œå®š.&lt;/p&gt;
&lt;h3&gt;æŸ¥çœ‹å¤‡ä»½çŠ¶æ€&lt;/h3&gt;
&lt;p&gt;æ•´ä¸ªå¤‡ä»½è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹å¤‡ä»½è¿›åº¦&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;curl -XGET http://192.168.0.1:9200/_snapshot/my_backup/snapshot_20150812/_status
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä¸»è¦ç”±å¦‚ä¸‹å‡ ç§çŠ¶æ€ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span class="caps"&gt;INITIALIZING&lt;/span&gt;&amp;nbsp;é›†ç¾¤çŠ¶æ€æ£€æŸ¥ï¼Œæ£€æŸ¥å½“å‰é›†ç¾¤æ˜¯å¦å¯ä»¥åšå¿«ç…§ï¼Œé€šå¸¸è¿™ä¸ªè¿‡ç¨‹ä¼šéå¸¸å¿«&lt;/li&gt;
&lt;li&gt;&lt;span class="caps"&gt;STARTED&lt;/span&gt;&amp;nbsp;æ­£åœ¨è½¬ç§»æ•°æ®åˆ°ä»“åº“&lt;/li&gt;
&lt;li&gt;&lt;span class="caps"&gt;FINALIZING&lt;/span&gt;&amp;nbsp;æ•°æ®è½¬ç§»å®Œæˆï¼Œæ­£åœ¨è½¬ç§»å…ƒä¿¡æ¯&lt;/li&gt;
&lt;li&gt;&lt;span class="caps"&gt;DONE&lt;/span&gt;ã€€å®Œæˆ&lt;/li&gt;
&lt;li&gt;&lt;span class="caps"&gt;FAILED&lt;/span&gt;&amp;nbsp;å¤‡ä»½å¤±è´¥&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;å–æ¶ˆå¤‡ä»½&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;curl -XDELETE http://192.168.0.1:9200/_snapshot/my_backup/snapshot_20150812
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;æ¢å¤å¤‡ä»½&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;curl -XPOST http://192.168.0.1:9200/_snapshot/my_backup/snapshot_20150812/_restore
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;åŒå¤‡ä»½ä¸€æ ·ï¼Œä¹Ÿå¯ä»¥è®¾ç½®wait_for_completion=trueç­‰å¾…æ¢å¤ç»“æœ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;curl -XPOST http://192.168.0.1:9200/_snapshot/my_backup/snapshot_20150812/_restore?wait_for_completion&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;é»˜è®¤æƒ…å†µä¸‹ï¼Œæ˜¯æ¢å¤æ‰€æœ‰çš„ç´¢å¼•ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è®¾ç½®ä¸€äº›å‚æ•°æ¥æŒ‡å®šæ¢å¤çš„ç´¢å¼•ï¼Œä»¥åŠé‡å‘½ä»¤æ¢å¤çš„ç´¢å¼•ï¼Œè¿™æ ·å¯ä»¥é¿å…è¦†ç›–åŸæœ‰çš„æ•°æ®.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;curl -XPOST http://192.168.0.1:9200/_snapshot/my_backup/snapshot_20150812/_restore
&lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;indices&amp;quot;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;quot;index_1&amp;quot;&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;rename_pattern&amp;quot;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;quot;index_(.+)&amp;quot;&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;rename_replacement&amp;quot;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;quot;restored_index_&lt;/span&gt;&lt;span class="nv"&gt;$1&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;ä¸Šé¢çš„indices,&amp;nbsp;è¡¨ç¤ºåªæ¢å¤ç´¢å¼•&amp;#8217;index_1&amp;#8217;&lt;/li&gt;
&lt;li&gt;rename_pattern:&amp;nbsp;è¡¨ç¤ºé‡å‘½åç´¢å¼•ä»¥&amp;#8217;index_&amp;#8217;å¼€å¤´çš„ç´¢å¼•.&lt;/li&gt;
&lt;li&gt;rename_replacement:&amp;nbsp;è¡¨ç¤ºå°†æ‰€æœ‰çš„ç´¢å¼•é‡å‘½åä¸º&amp;#8217;restored_index_xxx&amp;#8217;.å¦‚index_1ä¼šè¢«é‡å‘½åä¸ºrestored_index_1.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;æŸ¥çœ‹æ¢å¤è¿›åº¦&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# æŸ¥çœ‹æ‰€æœ‰ç´¢å¼•çš„æ¢å¤è¿›åº¦&lt;/span&gt;
curl -XGET http://192.168.0.1:9200/_recovery/

&lt;span class="c1"&gt;# æŸ¥çœ‹ç´¢å¼•restored_index_1çš„æ¢å¤è¿›åº¦&lt;/span&gt;
curl -XGET http://192.168.0.1:9200/_recovery/restored_index_1
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;å–æ¶ˆæ¢å¤&lt;/h3&gt;
&lt;p&gt;åªéœ€è¦åˆ é™¤ç´¢å¼•ï¼Œå³å¯å–æ¶ˆæ¢å¤&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;curl -XDELETE http://192.168.0.1:9200/restored_index_1
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;å¤‡ä»½å¿«ç…§è¿ç§»&lt;/h3&gt;
&lt;p&gt;å¦‚æœéœ€è¦å°†å¿«ç…§è¿ç§»åˆ°å¦ä¸€ä¸ªé›†ç¾¤.åªéœ€è¦å°†å¤‡ä»½æ–‡ä»¶å…¨éƒ¨æ‹·è´åˆ°è¦è¿ç§»çš„æœºå™¨ä¸Š, ç„¶åå†åœ¨æ–°çš„é›†ç¾¤ä¸Šæ³¨å†Œä¸€ä¸ªå¿«ç…§ä»“åº“,è®¾ç½®&lt;code&gt;location&lt;/code&gt;çš„ä½ç½®ä¸ºå¤‡ä»½æ–‡ä»¶æ‰€åœ¨çš„åœ°æ–¹ï¼Œç„¶åæ‰§è¡Œæ¢å¤å¤‡ä»½çš„å‘½ä»¤å³å¯ã€‚&lt;/p&gt;</summary><category term="elasticsearch"></category><category term="snapshot"></category><category term="restore"></category><category term="transfer"></category></entry><entry><title>Java SpringÂ å­¦ä¹ ç´¢å¼•</title><link href="http://blog.wiseturtles.com/posts/get-started-with-java-spring.html" rel="alternate"></link><published>2015-08-06T00:20:00+08:00</published><author><name>crazygit</name></author><id>tag:blog.wiseturtles.com,2015-08-06:posts/get-started-with-java-spring.html</id><summary type="html">&lt;p&gt;è¿‘æœŸç”±äºå·¥ä½œéœ€è¦ï¼Œéœ€è¦å­¦ä¹ Java Webå¼€å‘ï¼Œè™½ç„¶ä»¥å‰ä¹Ÿæ¥è§¦è¿‡Java, ä¸è¿‡ä¹Ÿå°±ä»…é™äºå†™ä¸ª&amp;#8221;Hello World&amp;#8221;. ä¸ºäº†å°½å¿«æŒæ¡Java Webå¼€å‘ï¼Œé¢å¯¹ç½‘ä¸Šç³ç…æ»¡ç›®çš„å­¦ä¹ èµ„æ–™ï¼Œ&amp;nbsp;å¿…é¡»æ¢³ç†ä¸€æ¡æ¸…æ™°çš„å­¦ä¹ è·¯çº¿ï¼Œä¸ç„¶å°±ä¼šé™·å…¥æ— å°½çš„æ–‡æ¡£æµä¸­äº†ã€‚ç»“åˆæœ¬äººçš„å­¦ä¹ æƒ…å†µï¼Œæ•´ç†å‡ºå¦‚ä¸‹å­¦ä¹ è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;JavaåŸºç¡€è¯­æ³•&lt;/p&gt;
&lt;p&gt;åƒé‡Œä¹‹è¡Œï¼Œå§‹äºè¶³ä¸‹ï¼Œå¦‚æœè¿Javaè¯­æ³•éƒ½æä¸æ¸…æ¥šï¼Œåé¢çš„ä¹Ÿå°±æ— ä»è°ˆèµ·äº†ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸»è¦æ˜¯äº†è§£Javaçš„åŸºæœ¬è¯­æ³•ï¼Œå’Œä¸€äº›å¸¸ç”¨çš„&lt;span class="caps"&gt;API&lt;/span&gt;(ç”±äºæ—¶é—´å…³ç³»ï¼Œå¸¸ç”¨&lt;span class="caps"&gt;API&lt;/span&gt;æˆ‘æ˜¯é€‰æ‹©è·³è¿‡äº†ï¼Œä¸€èˆ¬è¦ç”¨åˆ°äº†ï¼Œå†ä¸´æ—¶æŸ¥è¯¢,&amp;nbsp;ä¸è¿‡ä¹Ÿè¦å¤§æ¦‚äº†è§£ä¸€ä¸‹ï¼Œè‡³å°‘åšåˆ°æŸ¥è¯¢çš„æ—¶å€™çŸ¥é“è¦æŸ¥ä»€ä¹ˆ),å­¦ä¹ èµ„æ–™æˆ‘é€‰æ‹©çš„æ˜¯æ—ä¿¡è‰¯å†™çš„&amp;lt;&amp;lt;Javaå­¦ä¹ ç¬”è®°&amp;gt;&amp;gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Java&amp;nbsp;WebåŸºç¡€&lt;/p&gt;
&lt;p&gt;ä¸»è¦äº†è§£ä¸€äº›Webå¼€å‘çš„åŸºæœ¬æ¦‚å¿µï¼Œå¥½æ­¹çŸ¥é“ä»€ä¹ˆæ˜¯Servletå§ï¼Œè¿™ä¸ªé˜¶æ®µæˆ‘é€‰æ‹©çœ‹çš„æ˜¯æ—ä¿¡è‰¯å†™çš„&amp;lt;&amp;lt;&lt;span class="caps"&gt;JSP&lt;/span&gt;&amp;amp;Servletå­¦ä¹ ç¬”è®°&amp;gt;&amp;gt;ã€‚(ä¸è¿‡ç”±äºå®é™…å…³ç³»ï¼Œä¹Ÿæ˜¯åŒ†åŒ†ç„äº†å‡ ç« ï¼Œåé¢æœ‰æ—¶é—´å†æ…¢æ…¢å›æ¥çœ‹ï¼Œ
æ¯•ç«Ÿæ— è®ºä»€ä¹ˆWebå¼€å‘æ¡†æ¶ï¼Œéƒ½æ˜¯å»ºç«‹åœ¨è¿™äº›åŸºç¡€ä¸Šæ­å»ºèµ·æ¥çš„, ä»¥åè¦ç ”ç©¶æ¡†æ¶æ·±å…¥ä¸€ç‚¹,&amp;nbsp;éƒ½æ˜¯æ— æ³•æ‘†è„±è¿™äº›åŸºç¡€çš„)ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Springæ¡†æ¶å­¦ä¹ &lt;/p&gt;
&lt;p&gt;é¦–å…ˆä¸å¾—ä¸åæ§½ä¸€ä¸‹, SpringçœŸçš„å¤ªåºå¤§äº†ï¼Œæ‰“å¼€å®˜ç½‘ï¼Œçœ‹åˆ°ä¸€å¤§å †çš„æ–‡æ¡£ï¼Œä¸çŸ¥å¦‚ä½•ä¸‹æ‰‹å•Š,&amp;nbsp;ç»è¿‡ä¸€ç•ªæ‘¸ç´¢ï¼Œå¥½åœ¨æ‰¾åˆ°äº†ä¸€äº›æ€è·¯.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href="http://spring.io/guides/gs/maven/"&gt;ä½¿ç”¨Mavenåˆ›å»ºJavaé¡¹ç›®&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://spring.io/guides/gs/gradle/"&gt;ä½¿ç”¨Gradleåˆ›å»ºJavaé¡¹ç›®&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://projects.spring.io/spring-framework/"&gt;Spring&amp;nbsp;Frameworkå…¥é—¨&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;é¦–å…ˆï¼Œä¸Šé¢çš„Mavenå’ŒGradleæ˜¯Javaçš„ä¾èµ–ç®¡ç†å·¥å…·ï¼Œå…ˆæš‚æ—¶ç®€å•äº†è§£ä¸€ä¸‹å°±è¡Œï¼Œæš‚æ—¶ä¸åšæ·±å…¥ç ”ç©¶ï¼Œè¦æ˜ç¡®æˆ‘ä»¬çš„ç›®å½•æ˜¯å­¦ä¹ Webå¼€å‘ï¼Œè€Œä¸æ˜¯å­¦ä¹ å·¥å…·çš„ä½¿ç”¨ï¼Œè¿™äº›çŸ¥è¯†&amp;nbsp;åé¢æ…¢æ…¢è¡¥ä¸Š.(å¤šè¯´ä¸€å¥ï¼Œè²Œä¼¼Gradleå·²ç»æ…¢æ…¢è¦å–ä»£Maven). &lt;/p&gt;
&lt;p&gt;Spring çœ‹æ ·å­æ˜¯åˆ†äº†å¾ˆå¤šé¡¹ç›®çš„ï¼ŒWebå¼€å‘ä¸»è¦è¦ç”¨åˆ°Framework,&amp;nbsp;æ‰€ä»¥å°±å…ˆå­¦ä¹ Framework.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æš‚æ—¶å°±æ•´ç†è¿™ä¹ˆå¤šå§ï¼Œåé¢å­¦ä¹ äº†ä¹‹åå†ç»§ç»­æ•´ç†ã€‚&lt;/p&gt;
&lt;p&gt;æœªå®Œï¼Œå¾…ç»­&amp;#8230;&amp;#8230;&lt;/p&gt;</summary><category term="java"></category><category term="spring"></category></entry><entry><title>Goå­¦ä¹ ç¬”è®°5ä¹‹Beegoæ¡†æ¶</title><link href="http://blog.wiseturtles.com/posts/go-hello-beego.html" rel="alternate"></link><published>2015-07-22T16:33:00+08:00</published><author><name>crazygit</name></author><id>tag:blog.wiseturtles.com,2015-07-22:posts/go-hello-beego.html</id><summary type="html">&lt;h3&gt;Beegoæ¡†æ¶å‡†å¤‡&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ go get github.com/astaxie/beego
$ go get github.com/beego/bee
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;åˆ›å»ºç¨‹åº&lt;code&gt;hello-beego.go&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nx"&gt;main&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot;github.com/astaxie/beego&amp;quot;&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="kd"&gt;type&lt;/span&gt; &lt;span class="nx"&gt;MainController&lt;/span&gt; &lt;span class="kd"&gt;struct&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
     &lt;span class="nx"&gt;beego&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Controller&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kd"&gt;func&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;this&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nx"&gt;MainController&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="nx"&gt;Get&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Ctx&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;WriteString&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hello world&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kd"&gt;func&lt;/span&gt; &lt;span class="nx"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;beego&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Router&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;/&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="nx"&gt;MainController&lt;/span&gt;&lt;span class="p"&gt;{})&lt;/span&gt;
    &lt;span class="nx"&gt;beego&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Run&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ‰§è¡Œ&lt;code&gt;go run hello-beego.go&lt;/code&gt;, è®¿é—®&lt;a href="http://127.0.0.1:8080"&gt;http://127.0.0.1:8080&lt;/a&gt;æ£€æŸ¥ï¼Œã€€å¦‚æœè¾“å‡º&amp;#8221;hello world&amp;#8221;&amp;nbsp;è¡¨ç¤ºæœ¬åœ°beegoç¯å¢ƒå·²ç»æ­å»ºæˆåŠŸ&lt;/p&gt;</summary><category term="go"></category><category term="beego"></category></entry><entry><title>Goå­¦ä¹ ç¬”è®°4ä¹‹çŸ¥è¯†ç‚¹è®°å½•</title><link href="http://blog.wiseturtles.com/posts/go-notes.html" rel="alternate"></link><published>2015-07-22T14:09:00+08:00</published><author><name>crazygit</name></author><id>tag:blog.wiseturtles.com,2015-07-22:posts/go-notes.html</id><summary type="html">&lt;h3&gt;Goç¯å¢ƒé…ç½®&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å¦‚æœä½ æƒ³åœ¨åŒä¸€ä¸ªç³»ç»Ÿä¸­å®‰è£…å¤šä¸ªç‰ˆæœ¬çš„Goï¼Œä½ å¯ä»¥å‚è€ƒç¬¬ä¸‰æ–¹å·¥å…·&lt;a href="https://github.com/moovweb/gvm"&gt;&lt;span class="caps"&gt;GVM&lt;/span&gt;&lt;/a&gt;ï¼Œè¿™æ˜¯ç›®å‰åœ¨è¿™&amp;nbsp;æ–¹é¢åšå¾—æœ€å¥½çš„å·¥å…·ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;span class="caps"&gt;GOPATH&lt;/span&gt;å…è®¸å¤šä¸ªç›®å½•, å½“&lt;span class="caps"&gt;GOPATH&lt;/span&gt;æœ‰å¤šä¸ªç›®å½•æ—¶ï¼Œä¸ºäº†è®©æ¯ä¸ªç›®å½•ä¸‹çš„binç›®å½•éƒ½åŠ å…¥ç¯å¢ƒå˜é‡
å¯ä»¥è®¾ç½®&lt;code&gt;${GOPATH//://bin:}/bin&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;GOROOT&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/usr/local/go&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;GOPATH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$HOME&lt;/span&gt;&lt;span class="s2"&gt;/golang:&lt;/span&gt;&lt;span class="nv"&gt;$HOME&lt;/span&gt;&lt;span class="s2"&gt;/github/golang&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;PATH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$PATH&lt;/span&gt;:&lt;span class="nv"&gt;$GOROOT&lt;/span&gt;/bin:&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;GOPATH&lt;/span&gt;&lt;span class="p"&gt;//://bin:&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;/bin
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Go&amp;nbsp;å‘½ä»¤&lt;/h3&gt;
&lt;p&gt;è¯¦ç»†ä½¿ç”¨å¯ä»¥å‚è€ƒ
&lt;a href="https://github.com/astaxie/build-web-application-with-golang/blob/master/zh/01.3.md"&gt;https://github.com/astaxie/build-web-application-with-golang/blob/master/zh/01.3.md&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;go&amp;nbsp;build&lt;/li&gt;
&lt;li&gt;go&amp;nbsp;clean&lt;/li&gt;
&lt;li&gt;go&amp;nbsp;fmt&lt;/li&gt;
&lt;li&gt;go&amp;nbsp;install&lt;/li&gt;
&lt;li&gt;go&amp;nbsp;test&lt;/li&gt;
&lt;li&gt;go tool&amp;nbsp;fix&lt;/li&gt;
&lt;li&gt;go tool vet&amp;nbsp;directory|files&lt;/li&gt;
&lt;li&gt;go&amp;nbsp;generate&lt;/li&gt;
&lt;li&gt;godoc&lt;/li&gt;
&lt;li&gt;go&amp;nbsp;version&lt;/li&gt;
&lt;li&gt;go&amp;nbsp;env&lt;/li&gt;
&lt;li&gt;go&amp;nbsp;list&lt;/li&gt;
&lt;li&gt;go&amp;nbsp;run&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Goå­—ç¬¦ä¸²&lt;/h3&gt;
&lt;p&gt;å­—ç¬¦ä¸²æ˜¯ç”¨ä¸€å¯¹åŒå¼•å·ï¼ˆ&amp;#8221;&amp;#8220;ï¼‰æˆ–åå¼•å·ï¼ˆ&amp;#8220;ï¼‰æ‹¬èµ·æ¥å®šä¹‰ï¼Œå®ƒçš„ç±»å‹æ˜¯string&amp;nbsp;å¦‚æœè¦å£°æ˜ä¸€ä¸ªå¤šè¡Œçš„å­—ç¬¦ä¸²æ€ä¹ˆåŠï¼Ÿå¯ä»¥é€šè¿‡`æ¥å£°æ˜&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt; &lt;span class="nx"&gt;m&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="s"&gt;`hello&lt;/span&gt;
&lt;span class="s"&gt;        world`&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;iotaæšä¸¾&lt;/h3&gt;
&lt;p&gt;Goé‡Œé¢æœ‰ä¸€ä¸ªå…³é”®å­—iotaï¼Œè¿™ä¸ªå…³é”®å­—ç”¨æ¥å£°æ˜enumçš„æ—¶å€™é‡‡ç”¨ï¼Œå®ƒé»˜è®¤å¼€å§‹å€¼æ˜¯0ï¼Œæ¯è°ƒç”¨ä¸€æ¬¡åŠ 1ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kd"&gt;const&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="nx"&gt;x&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;iota&lt;/span&gt;  &lt;span class="c1"&gt;// x == 0&lt;/span&gt;
    &lt;span class="nx"&gt;y&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;iota&lt;/span&gt;  &lt;span class="c1"&gt;// y == 1&lt;/span&gt;
    &lt;span class="nx"&gt;z&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;iota&lt;/span&gt;  &lt;span class="c1"&gt;// z == 2&lt;/span&gt;
    &lt;span class="nx"&gt;w&lt;/span&gt;  &lt;span class="c1"&gt;// å¸¸é‡å£°æ˜çœç•¥å€¼æ—¶ï¼Œé»˜è®¤å’Œä¹‹å‰ä¸€ä¸ªå€¼çš„å­—é¢ç›¸åŒã€‚è¿™é‡Œéšå¼åœ°è¯´w = iotaï¼Œå› æ­¤w == 3ã€‚å…¶å®ä¸Šé¢yå’Œzå¯åŒæ ·ä¸ç”¨&amp;quot;= iota&amp;quot;&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="kd"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;v&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;iota&lt;/span&gt; &lt;span class="c1"&gt;// æ¯é‡åˆ°ä¸€ä¸ªconstå…³é”®å­—ï¼Œiotaå°±ä¼šé‡ç½®ï¼Œæ­¤æ—¶v == 0&lt;/span&gt;

&lt;span class="kd"&gt;const&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
&lt;span class="nx"&gt;e&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;g&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;iota&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kc"&gt;iota&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kc"&gt;iota&lt;/span&gt; &lt;span class="c1"&gt;//e=0,f=0,g=0 iotaåœ¨åŒä¸€è¡Œå€¼ç›¸åŒ&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;é™¤éè¢«æ˜¾å¼è®¾ç½®ä¸ºå…¶å®ƒå€¼æˆ–iotaï¼Œæ¯ä¸ªconståˆ†ç»„çš„ç¬¬ä¸€ä¸ªå¸¸é‡è¢«é»˜è®¤è®¾ç½®ä¸ºå®ƒçš„0å€¼ï¼Œç¬¬äºŒåŠåç»­çš„å¸¸é‡è¢«é»˜è®¤è®¾ç½®ä¸ºå®ƒå‰é¢é‚£ä¸ªå¸¸é‡çš„å€¼ï¼Œå¦‚æœå‰é¢é‚£ä¸ªå¸¸é‡çš„å€¼æ˜¯iotaï¼Œåˆ™å®ƒä¹Ÿè¢«è®¾ç½®ä¸ºiotaã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;é»˜è®¤å˜é‡åŠå‡½æ•°åè§„åˆ™&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å¤§å†™å­—æ¯å¼€å¤´çš„å˜é‡æ˜¯å¯å¯¼å‡ºçš„ï¼Œä¹Ÿå°±æ˜¯å…¶å®ƒåŒ…å¯ä»¥è¯»å–çš„ï¼Œæ˜¯å…¬ç”¨å˜é‡ï¼›å°å†™å­—æ¯å¼€å¤´çš„å°±æ˜¯ä¸å¯å¯¼å‡ºçš„ï¼Œæ˜¯ç§æœ‰å˜é‡ã€‚&lt;/li&gt;
&lt;li&gt;å¤§å†™å­—æ¯å¼€å¤´çš„å‡½æ•°ä¹Ÿæ˜¯ä¸€æ ·ï¼Œç›¸å½“äºclassä¸­çš„å¸¦publicå…³é”®è¯çš„å…¬æœ‰å‡½æ•°ï¼›å°å†™å­—æ¯å¼€å¤´çš„å°±æ˜¯æœ‰privateå…³é”®è¯çš„ç§æœ‰å‡½æ•°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;æ•°ç»„&lt;/h3&gt;
&lt;p&gt;å£°æ˜&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nx"&gt;a&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="c1"&gt;// å£°æ˜äº†ä¸€ä¸ªé•¿åº¦ä¸º3çš„intæ•°ç»„&lt;/span&gt;
&lt;span class="nx"&gt;b&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="c1"&gt;// å£°æ˜äº†ä¸€ä¸ªé•¿åº¦ä¸º10çš„intæ•°ç»„ï¼Œå…¶ä¸­å‰ä¸‰ä¸ªå…ƒç´ åˆå§‹åŒ–ä¸º1ã€2ã€3ï¼Œå…¶å®ƒé»˜è®¤ä¸º0&lt;/span&gt;
&lt;span class="nx"&gt;c&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="c1"&gt;// å¯ä»¥çœç•¥é•¿åº¦è€Œé‡‡ç”¨`...`çš„æ–¹å¼ï¼ŒGoä¼šè‡ªåŠ¨æ ¹æ®å…ƒç´ ä¸ªæ•°æ¥è®¡ç®—é•¿åº¦&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;äºŒç»´æ•°ç»„&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;// å£°æ˜äº†ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œè¯¥æ•°ç»„ä»¥ä¸¤ä¸ªæ•°ç»„ä½œä¸ºå…ƒç´ ï¼Œå…¶ä¸­æ¯ä¸ªæ•°ç»„ä¸­åˆæœ‰4ä¸ªintç±»å‹çš„å…ƒç´ &lt;/span&gt;
&lt;span class="nx"&gt;doubleArray&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="p"&gt;{[&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;}}&lt;/span&gt;

&lt;span class="c1"&gt;// ä¸Šé¢çš„å£°æ˜å¯ä»¥ç®€åŒ–ï¼Œç›´æ¥å¿½ç•¥å†…éƒ¨çš„ç±»å‹&lt;/span&gt;
&lt;span class="nx"&gt;easyArray&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="p"&gt;{{&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;}}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;æ³¨æ„&lt;/em&gt;:&amp;nbsp;æ•°ç»„ä¹‹é—´çš„èµ‹å€¼æ˜¯å€¼çš„èµ‹å€¼ï¼Œå³å½“æŠŠä¸€ä¸ªæ•°ç»„ä½œä¸ºå‚æ•°ä¼ å…¥å‡½æ•°çš„æ—¶å€™ï¼Œä¼ å…¥çš„å…¶å®æ˜¯è¯¥æ•°ç»„çš„å‰¯æœ¬ï¼Œè€Œä¸æ˜¯å®ƒçš„æŒ‡é’ˆã€‚å¦‚æœè¦ä½¿ç”¨æŒ‡é’ˆï¼Œé‚£ä¹ˆå°±éœ€è¦ç”¨åˆ°åé¢ä»‹ç»çš„sliceç±»å‹äº†ã€‚&lt;/p&gt;
&lt;h3&gt;Slice&lt;/h3&gt;
&lt;p&gt;æ³¨æ„sliceå’Œæ•°ç»„åœ¨å£°æ˜æ—¶çš„åŒºåˆ«ï¼šå£°æ˜æ•°ç»„æ—¶ï¼Œæ–¹æ‹¬å·å†…å†™æ˜äº†æ•°ç»„çš„é•¿åº¦æˆ–ä½¿ç”¨&amp;#8230;è‡ªåŠ¨è®¡ç®—é•¿åº¦ï¼Œè€Œå£°æ˜sliceæ—¶ï¼Œæ–¹æ‹¬å·å†…æ²¡æœ‰ä»»ä½•å­—ç¬¦ã€‚&lt;/p&gt;</summary><category term="go"></category><category term="ide"></category><category term="note"></category></entry><entry><title>MacÂ Proåˆä½“éªŒ</title><link href="http://blog.wiseturtles.com/posts/mac-pro-get-started.html" rel="alternate"></link><published>2015-07-18T14:56:00+08:00</published><author><name>ox0spy</name></author><id>tag:blog.wiseturtles.com,2015-07-18:posts/mac-pro-get-started.html</id><summary type="html">&lt;p&gt;è²Œä¼¼å¦‚ä»Šä¸ç©ä¸‹Macæ€»è§‰å¾—é€¼æ ¼ä¸å¤Ÿï¼Œæœ€è¿‘08å¹´ä¹°çš„Thinkpad R60ä¹Ÿåæ‰äº†ï¼Œå°±å…¥æ‰‹ä¸€å°Mac Proã€‚&amp;nbsp;ä¸‹é¢è®°å½•ä¸‹ç¯å¢ƒé…ç½®å’Œæœ€è¿‘ä½¿ç”¨æ„Ÿå—ã€‚&lt;/p&gt;
&lt;h2&gt;Xcode&lt;/h2&gt;
&lt;h3&gt;å®‰è£…Xcodeå‘½ä»¤è¡Œå·¥å…·:&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ xcode-select --install
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;XcodeåŒ…ç®¡ç†å·¥å…·&lt;a href="http://alcatraz.io/"&gt;Alcatraz&lt;/a&gt;å®‰è£…:&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ curl -fsSL https://raw.githubusercontent.com/supermarin/Alcatraz/deploy/Scripts/install.sh &lt;span class="p"&gt;|&lt;/span&gt; sh
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Xcodeå®‰è£…Solarized-Dark-for-Xcodeä¸»é¢˜:&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;æ‰“å¼€Xcodeï¼ŒWindow -&amp;gt; Package Managerï¼Œé€‰æ‹©Color&amp;nbsp;Themesï¼Œæœç´¢solarï¼Œå®‰è£…ArtSabintsev/Solarized-Dark-for-Xcode&lt;/li&gt;
&lt;li&gt;é‡å¯Xcodeï¼ŒXcode -&amp;gt; Preference -&amp;gt; Fonts &lt;span class="amp"&gt;&amp;amp;&lt;/span&gt;&amp;nbsp;Colorsï¼Œé€‰æ‹©åˆšæ‰å®‰è£…çš„Solarized-Dark-for-Xcode&lt;/li&gt;
&lt;li&gt;å†é‡å¯Xcodeç”Ÿæ•ˆ&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;æ³¨ï¼šå¦‚æœæƒ³ä¿®æ”¹å­—ä½“åŠå­—ä½“å¤§å°ï¼Œè¯·æ‰‹åŠ¨ä¿®æ”¹&lt;code&gt;~/Library/Developer/Xcode/UserData/FontAndColorThemes/Solarized\ Dark\ for\ Xcode.dvtcolortheme&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;Homebrew&lt;/h2&gt;
&lt;p&gt;&lt;a href="http://brew.sh"&gt;Homebrew&lt;/a&gt;æ˜¯Macä¸­éå¸¸å—æ¬¢è¿çš„åŒ…ç®¡ç†å·¥å…·ï¼Œç†Ÿæ‚‰Linuxçš„æœ‹å‹ä¸€å®šçŸ¥é“rpm/yum,&amp;nbsp;dpkg/aptç­‰ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ruby -e &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
$ brew doctor
$ man brew                     &lt;span class="c1"&gt;# manpage for brew&lt;/span&gt;
$ brew install &amp;lt;package-name&amp;gt;  &lt;span class="c1"&gt;# install package&lt;/span&gt;
$ brew update
$ brew outdated
$ brew upgrade &amp;lt;package-name&amp;gt;
$ brew cleanup
$ brew list --versions
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä½¿ç”¨&lt;code&gt;æ¸…åå¤§å­¦Tunaé•œåƒæº&lt;/code&gt;ï¼š&lt;a href="https://mirrors.tuna.tsinghua.edu.cn/help/homebrew/"&gt;Homebrew&amp;nbsp;é•œåƒä½¿ç”¨å¸®åŠ©&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Homebrew&amp;nbsp;Cask&lt;/h2&gt;
&lt;p&gt;é€šè¿‡Homebrewå¯ä»¥æ–¹ä¾¿çš„ç®¡ç†å‘½ä»¤è¡Œç¨‹åºï¼ŒHomebrew&amp;nbsp;Caskå¯ä»¥ç®¡ç†å›¾å½¢ç•Œé¢ç¨‹åºã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ brew tap caskroom/cask
$ brew install brew-cask
$ brew cask install google-chrome
$ brew update &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; brew upgrade brew-cask &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; brew cleanup
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;iTerm2&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;ä»&lt;a href="https://www.iterm2.com/"&gt;å®˜ç½‘&lt;/a&gt;ä¸‹è½½ã€å®‰è£…iTerm2ã€‚&lt;/li&gt;
&lt;li&gt;å…³é—­çƒ¦äººçš„bell: &lt;code&gt;iTerm 2: Preferences -&amp;gt; Profiles -&amp;gt; Tab: Terminal -&amp;gt; Notifications -&amp;gt; Silence Bell&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Zsh&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ brew install zsh zsh-completions
$ sh -c &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
$ chsh -s /bin/zsh
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Zshè¿˜é…ç½®äº†powerlineï¼Œå¼€å§‹Zshã€viméƒ½ä½¿ç”¨powerlineï¼Œåæ¥vimä½¿ç”¨vim-airlineã€‚&amp;nbsp;powerlineè¦æ˜¾ç¤ºä¸€äº›Unicodeå­—ç¬¦ï¼Œéœ€è¦å®‰è£…æ‰“è¿‡patchçš„powerlineå­—ä½“ã€‚&lt;/p&gt;
&lt;p&gt;å®‰è£…powerline: https://powerline.readthedocs.org/en/latest/installation/linux.html
powerline font:&amp;nbsp;https://github.com/powerline/fonts&lt;/p&gt;
&lt;p&gt;å­—ä½“å®‰è£…åéœ€è¦åœ¨iTerm2ä¸­é€‰ç”¨åˆšå®‰è£…çš„æ‰“è¿‡powerline&amp;nbsp;patchçš„å­—ä½“ã€‚&lt;/p&gt;
&lt;h2&gt;&lt;span class="caps"&gt;GNU&lt;/span&gt; command line&amp;nbsp;tools&lt;/h2&gt;
&lt;p&gt;Macé»˜è®¤çš„å‘½ä»¤è¡Œå·¥å…·å¤ªè›‹ç–¼äº†ï¼Œè‡³å°‘å¯¹æˆ‘è¿™æ ·éå¸¸ç†Ÿæ‚‰Linuxçš„äººæ¥è¯´æ˜¯è¿™æ ·çš„ã€‚ä¸‹é¢ä»‹ç»ä¸‹å¦‚ä½•å®‰è£…&lt;span class="caps"&gt;GNU&lt;/span&gt;å‘½ä»¤è¡Œå·¥å…·:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;brew install coreutils
brew tap homebrew/dupes
brew install binutils
brew install diffutils
brew install ed --default-names
brew install findutils --with-default-names
brew install gawk
brew install gnu-indent --with-default-names
brew install gnu-sed --with-default-names
brew install gnu-tar --with-default-names
brew install gnu-which --with-default-names
brew install grep --with-default-names
brew install gzip
brew install watch
brew install wdiff --with-gettext
brew install wget
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;pip&lt;/h2&gt;
&lt;p&gt;ä¸ªäººç»å¸¸å†™ç‚¹Pythonä»£ç ï¼Œéœ€è¦å®‰è£…Pythonæ¨¡å—ç®¡ç†å·¥å…·-&lt;code&gt;pip&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://pip.pypa.io/en/stable/installing/"&gt;Installing with&amp;nbsp;get-pip.py&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;pypiæºè®¾ç½®è¯·å‚è€ƒï¼š&lt;a href="https://mirrors.tuna.tsinghua.edu.cn/help/pypi/"&gt;æ¸…åå¤§å­¦Tunaçš„pypi&amp;nbsp;é•œåƒä½¿ç”¨å¸®åŠ©&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;CocoaPods&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://cocoapods.org/"&gt;CocoaPods&lt;/a&gt;æ˜¯Xcodeé¡¹ç›®çš„ä¾èµ–åº“ç®¡ç†å·¥å…·ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘å°†å®ƒå®‰è£…åˆ°è‡ªå·±çš„$&lt;span class="caps"&gt;HOME&lt;/span&gt;ç›®å½•ä¸‹ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å®‰è£…åˆ°ç³»ç»Ÿç›®å½•ã€‚&lt;/p&gt;
&lt;p&gt;å°†ä¸‹é¢å†…å®¹æ·»åŠ åˆ° $&lt;span class="caps"&gt;HOME&lt;/span&gt;/.zshrcä¸­&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;export GEM_HOME=$&lt;span class="caps"&gt;HOME&lt;/span&gt;/.gem
export &lt;span class="caps"&gt;PATH&lt;/span&gt;=$GEM_HOME/ruby/2.0.0/bin:$&lt;span class="caps"&gt;PATH&lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;é€šè¿‡ä¸‹é¢å‘½ä»¤å®‰è£…CocoaPods:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;source&lt;/span&gt; ~/.zshrc  &lt;span class="c1"&gt;# è·å–GEM_HOME, PATHé…ç½®&lt;/span&gt;
$ gem sources -l  &lt;span class="c1"&gt;# åˆ—å‡ºå½“å‰ruby gemæºåœ°å€&lt;/span&gt;
$ gem sources --remove https://rubygems.org/  &lt;span class="c1"&gt;# åˆ é™¤å®˜æ–¹æº&lt;/span&gt;
$ gem sources -a https://ruby.taobao.org/  &lt;span class="c1"&gt;# ä½¿ç”¨æ·˜å®ruby gemé•œåƒ&lt;/span&gt;
$ gem install cocoapods --user-install  &lt;span class="c1"&gt;# å®‰è£…CocoaPods&lt;/span&gt;
$ pod install
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä½¿ç”¨CocoaPodså›½å†…é•œåƒç´¢å¼•:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ pod repo  &lt;span class="c1"&gt;# æŸ¥çœ‹repoä¿¡æ¯ï¼Œä¸‹é¢ä¿®æ”¹repo master git URL&lt;/span&gt;
$ pod repo remove master
$ pod repo add master https://gitcafe.com/akuandev/Specs.git
$ pod repo update
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;CocoaPodsçš„æ›´å¤šä»‹ç»è¯·é˜…è¯»&lt;a href="http://blog.devtang.com/blog/2014/05/25/use-cocoapod-to-manage-ios-lib-dependency/"&gt;ç”¨CocoaPodsåšiOSç¨‹åºçš„ä¾èµ–ç®¡ç†&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;vim&lt;/h2&gt;
&lt;p&gt;å¸¸ç”¨vimï¼Œåœ¨macä¸Šé…ç½®ä¸‹ï¼Œæ›¾ç»è‡ªå·±çš„vimé…ç½®æœ‰ç‚¹ä¹±äº†ï¼Œå‘ç°ï¼»k-vim](https://github.com/wklken/k-vim)ä¸é”™ï¼Œå°±ä½¿ç”¨å®ƒäº†ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ brew install macvim  &lt;span class="c1"&gt;# åªä½¿ç”¨äº†macvimï¼Œæ²¡æœ‰ç”¨åŸç”Ÿvim&lt;/span&gt;
$ ln -s /usr/local/bin/mvim /usr/local/bin/vim  &lt;span class="c1"&gt;# å¦åˆ™YouCompleteMeç­‰pluginä¼šæŠ¥æ— æ³•å®‰è£…éœ€è¦ vim 7.4 ä¹‹ç±»çš„&lt;/span&gt;
$ git clone https://github.com/wklken/k-vim.git ~/k-vim
$ &lt;span class="nb"&gt;cd&lt;/span&gt; ~/k-vim &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; bash -x install.sh
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ³¨ï¼š
1. k-vimæ²¡æœ‰é€‚é…æœ€æ–°ç‰ˆçš„vbundleï¼Œå¯¼è‡´è¿è¡Œå®‰è£…ç¨‹åºæŠ¥é”™ï¼ŒåŸºæœ¬å°±æ˜¯Bundleä¿®æ”¹ä¸ºPluginã€‚ã€‚ã€‚
2.&amp;nbsp;YouCompleteMeå®‰è£…æ€»å¤±è´¥ï¼Œåæ¥æ‰‹åŠ¨ä¸‹è½½å®‰è£…&lt;/p&gt;
&lt;h2&gt;Intellij &lt;span class="caps"&gt;IDEA&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;&lt;span class="caps"&gt;IDEA&lt;/span&gt;è¿è¡Œéœ€è¦&lt;span class="caps"&gt;JDK&lt;/span&gt;ï¼Œä»oracleå®˜ç½‘ä¸‹è½½ã€å®‰è£…Java 1.8 &lt;span class="caps"&gt;JDK&lt;/span&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä»&lt;span class="caps"&gt;IDEA&lt;/span&gt; -&amp;gt; Project Default -&amp;gt; Project Structure -&amp;gt; &lt;span class="caps"&gt;SDKS&lt;/span&gt;ä¸­æ·»åŠ &lt;span class="caps"&gt;JDK&lt;/span&gt;å’ŒIntellij Platform Plugin &lt;span class="caps"&gt;SDK&lt;/span&gt;ã€‚ï¼ˆéœ€è¦é€‰æ‹©&lt;span class="caps"&gt;JDK&lt;/span&gt;ã€Intellijçš„ç›®å½•ï¼‰&lt;/p&gt;
&lt;p&gt;å®‰è£…go-lang-idea-pluginæ’ä»¶ï¼Œå¯ä»¥ä»&lt;a href="https://plugins.jetbrains.com/plugin/5047"&gt;å®˜ç½‘&lt;/a&gt;ä¸‹è½½å®‰è£…ï¼›ä¹Ÿå¯ä»¥é€šè¿‡ä¸‹é¢æ–¹å¼ç¼–è¯‘å®‰è£…ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ git clone https://github.com/go-lang-plugin-org/go-lang-idea-plugin.git
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;span class="caps"&gt;IDEA&lt;/span&gt;ä¸­æ‰“å¼€è¯¥pluginä»£ç ï¼Œé…ç½®&lt;span class="caps"&gt;IDEA&lt;/span&gt; Platform &lt;span class="caps"&gt;SDK&lt;/span&gt;ç‰ˆæœ¬ï¼ŒBuildå‡ºjaråŒ…ã€‚ç„¶åï¼Œé€‰æ‹©jaråŒ…å®‰è£…ã€‚&lt;/p&gt;
&lt;p&gt;é…ç½®&lt;span class="caps"&gt;IDEA&lt;/span&gt;çš„golangå¼€å‘ç¯å¢ƒæµªè´¹äº†å¾ˆå¤šæ—¶é—´ï¼Œå°è¯•äº†ä¸åŒç‰ˆæœ¬çš„&lt;a href="https://github.com/go-lang-plugin-org/go-lang-idea-plugin"&gt;go-lang-idea-plugin&lt;/a&gt;ï¼Œæ€»æ˜¯æŠ¥é”™â€œThe selected directory is not a valid home for Go &lt;span class="caps"&gt;SDK&lt;/span&gt;â€ã€‚
æœ€åè¿è¡Œä¸‹é¢å‘½ä»¤å†é€‰æ‹©&lt;span class="caps"&gt;GO&lt;/span&gt; &lt;span class="caps"&gt;SDK&lt;/span&gt;ç›®å½•ç»ˆäºå¯ä»¥äº†ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$GOROOT&lt;/span&gt;
/Users/&amp;lt;my-home&amp;gt;/Projects/golang/sdk
$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$GOPATH&lt;/span&gt;
/Users/&amp;lt;my-home&amp;gt;/Projects/golang/mygo
$ &lt;span class="nb"&gt;cd&lt;/span&gt; &lt;span class="nv"&gt;$GOROOT&lt;/span&gt;
$ git checkout -b go1.4.2 go1.4.2
$ &lt;span class="nb"&gt;cd&lt;/span&gt; src &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; ./all.bash
$ cp &lt;span class="nv"&gt;$GOPATH&lt;/span&gt;/bin/go &lt;span class="nv"&gt;$GOROOT&lt;/span&gt;/bin/
$ cp &lt;span class="nv"&gt;$GOPATH&lt;/span&gt;/bin/gofmt &lt;span class="nv"&gt;$GOROOT&lt;/span&gt;/bin/
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ³¨ï¼š
1. &lt;span class="caps"&gt;GOROOT&lt;/span&gt;æ˜¯goçš„æºä»£ç ï¼Œä¸‹è½½åœ°å€ï¼šhttps://github.com/golang/go
2. &lt;span class="caps"&gt;GOPATH&lt;/span&gt;æ˜¯go workspaceï¼Œè‡ªå·±çš„ä»£ç éƒ½$&lt;span class="caps"&gt;GOPATH&lt;/span&gt;/srcä¸‹&lt;/p&gt;
&lt;h2&gt;æœ€å&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;macçš„å±çš„ç¡®è¦æ¯”æˆ‘ä¹‹å‰ç”¨è¿‡çš„ç¬”è®°æœ¬å¥½å¾ˆå¤š&lt;/li&gt;
&lt;li&gt;ä¸¥é‡æ€€ç–‘ç½‘ä¸Šé‚£äº›æŠŠmacæ§å¾—å¤ªé«˜çš„äººåªç”¨è¿‡Windowsï¼Œæ ¹æœ¬æ²¡ç”¨è¿‡Ubuntuä¹‹ç±»çš„æ¡Œé¢Linux&amp;nbsp;(è‡³å°‘ç›®å‰è‡ªå·±è¿˜æ²¡ä½“ä¼šåˆ°macæ¯”Linuxé«˜æ•ˆåœ¨å“ªé‡Œ)&lt;/li&gt;
&lt;li&gt;åˆšå¼€å§‹ä½¿ç”¨éš¾å…å‡ºé”™ï¼Œä¹Ÿè®¸ä¸Šé¢çš„éƒ½æ˜¯é”™çš„ã€‚ã€‚&lt;/li&gt;
&lt;/ol&gt;</summary><category term="Mac"></category></entry><entry><title>Goå­¦ä¹ ç¬”è®°3ä¹‹æ‰“é€ Sublime TextÂ 3ä½œä¸ºGoçš„é›†æˆå¼€å‘ç¯å¢ƒ</title><link href="http://blog.wiseturtles.com/posts/go-ide.html" rel="alternate"></link><published>2015-07-13T16:45:00+08:00</published><author><name>crazygit</name></author><id>tag:blog.wiseturtles.com,2015-07-13:posts/go-ide.html</id><summary type="html">&lt;h3&gt;å¯ç”¨äº&lt;span class="caps"&gt;GO&lt;/span&gt;å¼€å‘çš„å·¥å…·&lt;/h3&gt;
&lt;p&gt;å¯ä»¥ç”¨äº&lt;span class="caps"&gt;GO&lt;/span&gt;å¼€å‘çš„å·¥å…·å’Œæ’ä»¶ç›®å‰å·²ç»éå¸¸å¤šäº†,å¦‚&lt;span class="caps"&gt;VIM&lt;/span&gt;, Emacs, atomç­‰ï¼Œè¿™é‡Œ&lt;a href="https://github.com/golang/go/wiki/IDEsAndTextEditorPlugins"&gt;IDEs and Plugins for
Go&lt;/a&gt;ç½—åˆ—äº†è®¸å¤šå¯ä»¥ä½œä¸º&lt;span class="caps"&gt;GO&lt;/span&gt;å¼€å‘
çš„&lt;span class="caps"&gt;IDE&lt;/span&gt;å’Œæ’ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®è‡ªå·±çš„ä½¿ç”¨ä¹ æƒ¯è‡ªè¡Œé€‰æ‹©ã€‚æœ¬æ–‡ä¸»è¦é˜è¿°å¦‚ä½•åˆ©ç”¨Sublime
Text 3 ä½œä¸º&lt;span class="caps"&gt;GO&lt;/span&gt;çš„å¼€å‘ç¯å¢ƒ.&lt;/p&gt;
&lt;h3&gt;å®‰è£…Sublime text&amp;nbsp;3åŠæ’ä»¶&lt;/h3&gt;
&lt;p&gt;åˆ°Sublime å®˜ç½‘é€‰æ‹©é€‚åˆè‡ªå·±ç³»ç»Ÿçš„ç‰ˆæœ¬&lt;a href="http://www.sublimetext.com/3"&gt;http://www.sublimetext.com/3&lt;/a&gt;, æˆ‘é€‰æ‹©çš„æ˜¯
Ubuntu&amp;nbsp;64ä½çš„tarballåŒ…ï¼Œè§£å‹å‡ºæ¥å¯ä»¥ç›´æ¥ç”¨äº†ã€‚&lt;/p&gt;
&lt;p&gt;ä¾æ¬¡å®‰è£…æ’ä»¶&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Package&amp;nbsp;Control&lt;/li&gt;
&lt;li&gt;GoSublime&lt;/li&gt;
&lt;li&gt;GoDef&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™é‡Œæˆ‘åªåˆ—å‡ºäº†Goå¼€å‘å¿…é¡»çš„æ’ä»¶, å…¶ä»–çš„ä¸€äº›æ’ä»¶å¯ä»¥æ ¹æ®è‡ªèº«éœ€è¦é€‰æ‹©å®‰è£…æˆ–è€…ä»
&lt;a href="http://blog.wiseturtles.com/posts/go-introduce.html"&gt;http://blog.wiseturtles.com/posts/go-introduce.html&lt;/a&gt;é€‰æ‹©çƒ­é—¨æ’ä»¶&lt;/p&gt;
&lt;h3&gt;å®‰è£…æ’ä»¶ä¾èµ–çš„Go&amp;nbsp;Package&lt;/h3&gt;
&lt;p&gt;ä¸Šé¢çš„æ’ä»¶éœ€è¦ç”¨åˆ°ä¸€äº›go cmd tools, ä½†æ˜¯è¿™äº›å·¥å…·å› ä¸ºå¢™çš„é—®é¢˜ï¼Œæ²¡æ³•ç›´æ¥ä¸‹è½½ï¼Œå¥½
åœ¨Githubä¸Šé¢ç”±è¿™äº›å·¥å…·çš„é•œåƒï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥æ›²çº¿æ•‘å›½ï¼Œä»é•œåƒä¸‹è½½ã€‚åœ¨ä¸‹è½½ä¹‹å‰ï¼Œé¦–å…ˆï¼Œè¿˜æ˜¯è¦å…ˆè®¾ç½®&lt;code&gt;GOPATH&lt;/code&gt;å˜
é‡, æ€ä¹ˆè®¾ç½®å¯ä»¥å‚è€ƒæœ¬ç³»åˆ—æ–‡ç« ç¬¬äºŒç¯‡&lt;a href="http://blog.wiseturtles.com/posts/go-introduce.html"&gt;http://blog.wiseturtles.com/posts/go-introduce.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å®‰è£…å¿…å¤‡çš„cmd&amp;nbsp;tools&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;#ã€€åˆ›å»ºç›®å½•&lt;/span&gt;
$ &lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;GOPATH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;your_go_path&amp;#39;&lt;/span&gt;
$ mkdir -p &lt;span class="nv"&gt;$GOPATH&lt;/span&gt;/src/golang.org/x

&lt;span class="c1"&gt;# æ ¹æ®å®é™…éœ€è¦ä¸‹è½½å¯¹åº”åˆ†æ”¯çš„tools&lt;/span&gt;
$ git clone -b release-branch.go1.4 git@github.com:golang/tools.git &lt;span class="nv"&gt;$GOPATH&lt;/span&gt;/src/golang.org/x/tools
$ &lt;span class="nb"&gt;cd&lt;/span&gt; &lt;span class="nv"&gt;$GOPATH&lt;/span&gt;
&lt;span class="c1"&gt;# å®‰è£…å·¥å…·&lt;/span&gt;
$ go install golang.org/x/tools/cmd/goimports
$ go install golang.org/x/tools/cmd/vet
$ go install golang.org/x/tools/cmd/oracle
$ go install golang.org/x/tools/cmd/godoc

&lt;span class="c1"&gt;# å®‰è£…ä¸éœ€è¦ç¿»å¢™çš„å·¥å…·&lt;/span&gt;
$ go get github.com/rogpeppe/godef

&lt;span class="c1"&gt;# æœ€åä¸¤ä¸ªæ˜¯æˆ‘åšwebå¼€å‘éœ€è¦å®‰è£…çš„åŒ…ï¼Œæ²¡æœ‰éœ€è¦çš„è¯å¯ä»¥ä¸ä¸‹è½½&lt;/span&gt;
$ go get github.com/astaxie/beego
$ go get github.com/beego/bee
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;é…ç½®æ’ä»¶:&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;GoSublime é…ç½®, Preferences -&amp;gt; Package Settings -&amp;gt; GoSublime -&amp;gt;ã€€Settings -&amp;nbsp;User&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;{
    // &lt;span class="n"&gt;you&lt;/span&gt; &lt;span class="n"&gt;may&lt;/span&gt; &lt;span class="n"&gt;set&lt;/span&gt; &lt;span class="n"&gt;specific&lt;/span&gt; &lt;span class="n"&gt;environment&lt;/span&gt; &lt;span class="n"&gt;variables&lt;/span&gt; &lt;span class="n"&gt;here&lt;/span&gt;
    // &lt;span class="nb"&gt;e&lt;/span&gt;.&lt;span class="n"&gt;g&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;env&amp;quot;&lt;/span&gt;: { &lt;span class="s"&gt;&amp;quot;PATH&amp;quot;&lt;/span&gt;: &lt;span class="s"&gt;&amp;quot;$HOME/go/bin:$PATH&amp;quot;&lt;/span&gt; }
    // &lt;span class="n"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;values&lt;/span&gt;, &lt;span class="nv"&gt;$PATH&lt;/span&gt; &lt;span class="o"&gt;and&lt;/span&gt; ${&lt;span class="n"&gt;PATH&lt;/span&gt;} &lt;span class="n"&gt;are&lt;/span&gt; &lt;span class="n"&gt;replaced&lt;/span&gt; &lt;span class="n"&gt;with&lt;/span&gt;
    // &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;corresponding&lt;/span&gt; &lt;span class="n"&gt;environment&lt;/span&gt;(&lt;span class="n"&gt;PATH&lt;/span&gt;) &lt;span class="n"&gt;variable&lt;/span&gt;, &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;it&lt;/span&gt; &lt;span class="nb"&gt;exists&lt;/span&gt;.
    //&lt;span class="n"&gt;æ ¹æ®å®é™…æƒ…å†µè®¾ç½®å¦‚ä¸‹å˜é‡&lt;/span&gt;
    &lt;span class="s"&gt;&amp;quot;env&amp;quot;&lt;/span&gt;: {&lt;span class="s"&gt;&amp;quot;GOROOT&amp;quot;&lt;/span&gt;: &lt;span class="s"&gt;&amp;quot;/usr/local/go&amp;quot;&lt;/span&gt;, &lt;span class="s"&gt;&amp;quot;GOPATH&amp;quot;&lt;/span&gt;: &lt;span class="s"&gt;&amp;quot;$HOME/golang&amp;quot;&lt;/span&gt;, &lt;span class="s"&gt;&amp;quot;PATH&amp;quot;&lt;/span&gt;: &lt;span class="s"&gt;&amp;quot;$GOPATH/bin:$GOROOT/bin:$PATH&amp;quot;&lt;/span&gt; },

    &lt;span class="s"&gt;&amp;quot;fmt_cmd&amp;quot;&lt;/span&gt;: [&lt;span class="s"&gt;&amp;quot;goimports&amp;quot;&lt;/span&gt;],&lt;span class="sr"&gt;&lt;/span&gt;

&lt;span class="sr"&gt;    //&lt;/span&gt; &lt;span class="n"&gt;enable&lt;/span&gt; &lt;span class="n"&gt;comp-lint&lt;/span&gt;, &lt;span class="n"&gt;this&lt;/span&gt; &lt;span class="k"&gt;will&lt;/span&gt; &lt;span class="n"&gt;effectively&lt;/span&gt; &lt;span class="n"&gt;disable&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;live&lt;/span&gt; &lt;span class="n"&gt;linter&lt;/span&gt;
    &lt;span class="s"&gt;&amp;quot;comp_lint_enabled&amp;quot;&lt;/span&gt;: &lt;span class="nb"&gt;true&lt;/span&gt;,&lt;span class="sr"&gt;&lt;/span&gt;

&lt;span class="sr"&gt;    //&lt;/span&gt; &lt;span class="n"&gt;list&lt;/span&gt; &lt;span class="k"&gt;of&lt;/span&gt; &lt;span class="n"&gt;commands&lt;/span&gt; &lt;span class="nb"&gt;to&lt;/span&gt; &lt;span class="nb"&gt;run&lt;/span&gt;
    &lt;span class="s"&gt;&amp;quot;comp_lint_commands&amp;quot;&lt;/span&gt;: [
        // &lt;span class="nb"&gt;run&lt;/span&gt; `&lt;span class="n"&gt;golint&lt;/span&gt;` &lt;span class="n"&gt;on&lt;/span&gt; &lt;span class="nb"&gt;all&lt;/span&gt; &lt;span class="n"&gt;files&lt;/span&gt; &lt;span class="n"&gt;in&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="k"&gt;package&lt;/span&gt;
        // &lt;span class="s"&gt;&amp;quot;shell&amp;quot;&lt;/span&gt;:&lt;span class="n"&gt;true&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt; &lt;span class="k"&gt;required&lt;/span&gt; &lt;span class="n"&gt;in&lt;/span&gt; &lt;span class="n"&gt;order&lt;/span&gt; &lt;span class="nb"&gt;to&lt;/span&gt; &lt;span class="nb"&gt;run&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;command&lt;/span&gt; &lt;span class="n"&gt;through&lt;/span&gt; &lt;span class="n"&gt;your&lt;/span&gt; &lt;span class="n"&gt;shell&lt;/span&gt; (&lt;span class="nb"&gt;to&lt;/span&gt; &lt;span class="n"&gt;expand&lt;/span&gt; `*.&lt;span class="n"&gt;go&lt;/span&gt;`)
        // &lt;span class="o"&gt;also&lt;/span&gt; &lt;span class="n"&gt;see:&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;documentation&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; `&lt;span class="n"&gt;shell&lt;/span&gt;` &lt;span class="n"&gt;setting&lt;/span&gt; &lt;span class="n"&gt;in&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="k"&gt;default&lt;/span&gt; &lt;span class="n"&gt;settings&lt;/span&gt; &lt;span class="n"&gt;file&lt;/span&gt; &lt;span class="n"&gt;ctrl&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;dot&lt;/span&gt;,&lt;span class="n"&gt;ctrl&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;
        {&lt;span class="s"&gt;&amp;quot;cmd&amp;quot;&lt;/span&gt;: [&lt;span class="s"&gt;&amp;quot;golint *.go&amp;quot;&lt;/span&gt;], &lt;span class="s"&gt;&amp;quot;shell&amp;quot;&lt;/span&gt;: &lt;span class="nb"&gt;true&lt;/span&gt;},&lt;span class="sr"&gt;&lt;/span&gt;

&lt;span class="sr"&gt;        //&lt;/span&gt; &lt;span class="nb"&gt;run&lt;/span&gt; &lt;span class="n"&gt;go&lt;/span&gt; &lt;span class="n"&gt;vet&lt;/span&gt; &lt;span class="n"&gt;on&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="k"&gt;package&lt;/span&gt;
        {&lt;span class="s"&gt;&amp;quot;cmd&amp;quot;&lt;/span&gt;: [&lt;span class="s"&gt;&amp;quot;go&amp;quot;&lt;/span&gt;, &lt;span class="s"&gt;&amp;quot;vet&amp;quot;&lt;/span&gt;]},&lt;span class="sr"&gt;&lt;/span&gt;

&lt;span class="sr"&gt;        //&lt;/span&gt; &lt;span class="nb"&gt;run&lt;/span&gt; `&lt;span class="n"&gt;go&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt;` &lt;span class="n"&gt;on&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="k"&gt;package&lt;/span&gt;. &lt;span class="n"&gt;GOBIN&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt; &lt;span class="n"&gt;set&lt;/span&gt;,&lt;span class="sr"&gt;&lt;/span&gt;
&lt;span class="sr"&gt;        //&lt;/span&gt; &lt;span class="o"&gt;so&lt;/span&gt; `&lt;span class="n"&gt;main&lt;/span&gt;` &lt;span class="n"&gt;packages&lt;/span&gt; &lt;span class="n"&gt;shouldn&amp;#39;t&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="n"&gt;in&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;installation&lt;/span&gt; &lt;span class="k"&gt;of&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="k"&gt;binary&lt;/span&gt;
        {&lt;span class="s"&gt;&amp;quot;cmd&amp;quot;&lt;/span&gt;: [&lt;span class="s"&gt;&amp;quot;go&amp;quot;&lt;/span&gt;, &lt;span class="s"&gt;&amp;quot;install&amp;quot;&lt;/span&gt;]}
    ],

    &lt;span class="s"&gt;&amp;quot;on_save&amp;quot;&lt;/span&gt;: [
        // &lt;span class="nb"&gt;run&lt;/span&gt; &lt;span class="n"&gt;comp-lint&lt;/span&gt; &lt;span class="k"&gt;when&lt;/span&gt; &lt;span class="n"&gt;you&lt;/span&gt; &lt;span class="n"&gt;save&lt;/span&gt;,&lt;span class="sr"&gt;&lt;/span&gt;
&lt;span class="sr"&gt;        //&lt;/span&gt; &lt;span class="n"&gt;naturally&lt;/span&gt;, &lt;span class="n"&gt;you&lt;/span&gt; &lt;span class="nb"&gt;can&lt;/span&gt; &lt;span class="o"&gt;also&lt;/span&gt; &lt;span class="n"&gt;bind&lt;/span&gt; &lt;span class="n"&gt;this&lt;/span&gt; &lt;span class="n"&gt;command&lt;/span&gt; `&lt;span class="n"&gt;gs_comp_lint&lt;/span&gt;`
        // &lt;span class="nb"&gt;to&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="nb"&gt;key&lt;/span&gt; &lt;span class="n"&gt;binding&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;you&lt;/span&gt; &lt;span class="nb"&gt;want&lt;/span&gt;
        {&lt;span class="s"&gt;&amp;quot;cmd&amp;quot;&lt;/span&gt;: &lt;span class="s"&gt;&amp;quot;gs_comp_lint&amp;quot;&lt;/span&gt;}
    ]
}
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;GoDef é…ç½®, Preferences -&amp;gt; Package Settings -&amp;gt; GoDef -&amp;gt;ã€€Settings -&amp;nbsp;User&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;{
    //æ ¹æ®å®é™…æƒ…å†µè®¾ç½®å¦‚ä¸‹å˜é‡
    &amp;quot;gopath&amp;quot;: &amp;quot;/home/linliang/golang&amp;quot;
}
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;ä½¿ç”¨&lt;/h3&gt;
&lt;p&gt;åˆ›å»ºä¸€ä¸ªGoæ–‡ä»¶ï¼Œé»˜è®¤æƒ…å†µä¸‹:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¿ç»­ä¸¤æ¬¡è¾“å…¥&lt;code&gt;Ctrl + dot(.)&lt;/code&gt;,&amp;nbsp;å¯ä»¥æŸ¥çœ‹GoSublimeçš„åŠŸèƒ½å’Œå¿«æ·é”®&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨&lt;code&gt;gd&lt;/code&gt;å¯ä»¥ä½¿ç”¨GoDefæ’ä»¶çš„è·³è½¬&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ›´å¤šä½¿ç”¨å¯ä»¥å‚è€ƒä¸¤ä¸ªæ’ä»¶çš„å¸®åŠ©æ–‡æ¡£&lt;/p&gt;</summary><category term="go"></category><category term="ide"></category><category term="sublime"></category></entry><entry><title>sSMTPå‘é€é‚®ä»¶</title><link href="http://blog.wiseturtles.com/posts/install-sSMTP.html" rel="alternate"></link><published>2015-07-06T15:00:00+08:00</published><author><name>ox0spy</name></author><id>tag:blog.wiseturtles.com,2015-07-06:posts/install-sSMTP.html</id><summary type="html">&lt;p&gt;å·¥ä½œä¸­å¾ˆå¤šåœºæ™¯éœ€è¦å‘é€é‚®ä»¶ï¼Œå¦‚ï¼šæŠ¥è­¦é‚®ä»¶ã€æ—¥æŠ¥ç­‰ã€‚æœ¬æ–‡ä»‹ç»å¦‚ä½•å®‰è£…ã€é…ç½®sSMTPåšé‚®ä»¶å‘é€ã€‚&lt;/p&gt;
&lt;h2&gt;å®‰è£…&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt-get install ssmtp
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;é…ç½®&lt;/h2&gt;
&lt;p&gt;/etc/ssmtp/revaliases&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat /etc/ssmtp/revaliases
&lt;span class="c1"&gt;# sSMTP aliases&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# Format:   local_account:outgoing_address:mailhub&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# Example: root:your_login@your.domain:mailhub.your.domain[:port]&lt;/span&gt;
&lt;span class="c1"&gt;# where [:port] is an optional port number that defaults to 25.&lt;/span&gt;
nagios:no-reply@example.com:mail.example.com:587
root:no-reply@example.com:mail.example.com:587
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;/etc/ssmtp/ssmtp.conf&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# Config file for sSMTP sendmail&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# The person who gets all mail for userids &amp;lt; 1000&lt;/span&gt;
&lt;span class="c1"&gt;# Make this empty to disable rewriting.&lt;/span&gt;
&lt;span class="nv"&gt;root&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;lt;your-email@example.com&amp;gt;
&lt;span class="c1"&gt;# The place where the mail goes. The actual machine name is required no&lt;/span&gt;
&lt;span class="c1"&gt;# MX records are consulted. Commonly mailhosts are named mail.domain.com&lt;/span&gt;
&lt;span class="nv"&gt;mailhub&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;lt;mail.example.com&amp;gt;
&lt;span class="c1"&gt;# Where will the mail seem to come from?&lt;/span&gt;
&lt;span class="c1"&gt;#rewriteDomain=&lt;/span&gt;
&lt;span class="c1"&gt;# The full hostname&lt;/span&gt;
&lt;span class="nv"&gt;hostname&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;lt;mail.example.com&amp;gt;
&lt;span class="c1"&gt;# Are users allowed to set their own From: address?&lt;/span&gt;
&lt;span class="c1"&gt;# YES - Allow the user to specify their own From: address&lt;/span&gt;
&lt;span class="c1"&gt;# NO - Use the system generated From: address&lt;/span&gt;
&lt;span class="nv"&gt;FromLineOverride&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;YES
&lt;span class="nv"&gt;UseSTARTTLS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;yes
&lt;span class="nv"&gt;UseTLS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;yes
&lt;span class="nv"&gt;AuthUser&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;lt;your-domain/username&amp;gt;
&lt;span class="nv"&gt;AuthPass&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;lt;your-passwd&amp;gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;æµ‹è¯•&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ /usr/sbin/sendmail -t -F your-domain-name &lt;span class="s"&gt;&amp;lt;&amp;lt;EOF&lt;/span&gt;
&lt;span class="s"&gt;SUBJECT: $YOUR-SUBJECT&lt;/span&gt;
&lt;span class="s"&gt;TO: A@example.com,B@example.com&lt;/span&gt;
&lt;span class="s"&gt;MIME-VERSION: 1.0&lt;/span&gt;
&lt;span class="s"&gt;Content-type: text/plain&lt;/span&gt;
&lt;span class="s"&gt;$YOUR-MAIL-BODY&lt;/span&gt;

&lt;span class="s"&gt;EOF&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</summary><category term="Debian"></category><category term="sSMTP"></category></entry><entry><title>Goå­¦ä¹ ç¬”è®°2ä¹‹åˆè¯†Go</title><link href="http://blog.wiseturtles.com/posts/go-introduce.html" rel="alternate"></link><published>2015-06-30T23:37:00+08:00</published><author><name>crazygit</name></author><id>tag:blog.wiseturtles.com,2015-06-30:posts/go-introduce.html</id><summary type="html">&lt;p&gt;æœ¬æ–‡å‚è€ƒäº:
&lt;a href="https://golang.org/doc/code.html"&gt;How to Write Go&amp;nbsp;Code&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;ä»£ç ç»„ç»‡&lt;/h2&gt;
&lt;h3&gt;å·¥ä½œç©ºé—´&lt;/h3&gt;
&lt;p&gt;Go&amp;nbsp;toolå…ˆå¤©å°±æ˜¯è®¾è®¡æ¥ä¸å¼€æºä»“åº“åä½œçš„ï¼Œä¸ç®¡ä½ æ„¿ä¸æ„¿æ„å‘å¸ƒä½ çš„ä»£ç ï¼Œæ„å»ºå¼€å‘ç¯å¢ƒçš„æ–¹å¼æ˜¯ä¸€æ ·çš„ã€‚&lt;/p&gt;
&lt;p&gt;Goä»£ç å¿…é¡»ä¿å­˜åœ¨ä¸€ä¸ªå·¥ä½œç©ºé—´é‡Œï¼Œã€€ä¸€ä¸ªå·¥ä½œç©ºé—´è¦æœ‰ä¸‰ä¸ªæ ¹ç›®å½•&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;src&amp;nbsp;Goæºä»£ç &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;pkg&amp;nbsp;Goåº“æ–‡ä»¶&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;bin&amp;nbsp;åŒ…å«å¯æ‰§è¡Œå‘½ä»¤&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸€ä¸ªå·¥ä½œç©ºé—´çš„ç¤ºä¾‹:
&lt;pre&gt;
bin/
    hello                          # command executable
    outyet                         # command executable
pkg/
    linux_amd64/
        github.com/golang/example/
            stringutil.a           # package object
src/
    github.com/golang/example/
        .git/                      # Git repository metadata
    hello/
        hello.go               # command source
    outyet/
        main.go                # command source
        main_test.go           # test source
    stringutil/
        reverse.go             # package source
        reverse_test.go        # test source
    github.com/golang/project1/
        ......
    github.com/golang/project2/
        ......
&lt;/pre&gt;&lt;/p&gt;
&lt;h3&gt;è®¾ç½®&lt;span class="caps"&gt;GOPATH&lt;/span&gt;ç¯å¢ƒå˜é‡&lt;/h3&gt;
&lt;p&gt;&lt;span class="caps"&gt;GOPATH&lt;/span&gt;æ˜¯Goä¸­å”¯ä¸€å¿…é¡»éœ€è¦è®¾ç½®çš„ç¯å¢ƒå˜é‡, &lt;span class="caps"&gt;GOPATH&lt;/span&gt;å°±æ˜¯å·¥ä½œç©ºé—´çš„è·¯å¾„, å¹¶ä¸”&lt;span class="caps"&gt;GOPATH&lt;/span&gt;å¯
ä»¥è®¾ç½®å¤šä¸ªå€¼ï¼ŒåŒºåˆ«æ˜¯ä½¿ç”¨&lt;code&gt;go get&lt;/code&gt;å‘½ä»¤çš„æ—¶å€™é»˜è®¤å°†ä¸‹è½½çš„åŒ…å®‰è£…åœ¨&lt;span class="caps"&gt;GOPATH&lt;/span&gt;ç¬¬ä¸€ä¸ªè·¯å¾„
ä¸‹é¢ï¼Œæˆ‘è‡ªå·±ä¸€èˆ¬è®¾ç½®ä¸¤ä¸ªè·¯å¾„ä½œä¸º&lt;span class="caps"&gt;GOPATH&lt;/span&gt;çš„å€¼ï¼Œä¸€ä¸ªç”¨äºä¸“é—¨ä¸‹è½½ç¬¬ä¸‰æ–¹åŒ…ï¼Œä¸€ä¸ªä½œä¸º
è‡ªå·±çš„å·¥ä½œç¯å¢ƒ,ã€€è¿™æœ‰çš„å¥½å¤„æ˜¯å¯ä»¥åœ¨ä»£ç ç‰ˆæœ¬æ§åˆ¶æ—¶,&amp;nbsp;ä¸å—ç¬¬ä¸‰æ–¹åº“çš„å½±å“&lt;/p&gt;
&lt;p&gt;å¦‚:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# &lt;span class="nv"&gt;$HOME&lt;/span&gt;/golangä½œä¸ºç¬¬ä¸‰æ–¹åŒ…çš„ä¸‹è½½ç›®å½•
# &lt;span class="nv"&gt;$HOME&lt;/span&gt;/github/golangä½œä¸ºè‡ªå·±çš„å¼€å‘ç›®å½•
$ export GOPATH=&amp;quot;&lt;span class="nv"&gt;$HOME&lt;/span&gt;/golang:&lt;span class="nv"&gt;$HOME&lt;/span&gt;/github/golang&amp;quot;

# å°†æ¯ä¸ªGOPATHä¸‹é¢çš„binç›®å½•æ·»åŠ åˆ°PATHå˜é‡
$ export PATH=&lt;span class="nv"&gt;$PATH&lt;/span&gt;:&lt;span class="nv"&gt;$GOROOT&lt;/span&gt;/bin:&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;GOPATH&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="nb"&gt;bin&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/bin
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;åŒ…è·¯å¾„&lt;/h3&gt;
&lt;p&gt;æ— è®ºä½ æ˜¯å¦è¦å‘å¸ƒä½ çš„ç¨‹åº, ä½ éƒ½åº”è¯¥ä»¥è¦å‘å¸ƒçš„æ–¹å¼æ¥æ„å»ºä½ çš„ç¨‹åº,æœ€å¥½çš„åŒ…åæ˜¯&amp;nbsp;github.com/user&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ mkdir -p &lt;span class="nv"&gt;$GOPATH&lt;/span&gt;/src/github.com/user
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;ç¬¬ä¸€ä¸ªGoç¨‹åº&lt;/h3&gt;
&lt;p&gt;ä¸‹é¢ï¼Œæˆ‘å°†ä»‹ç»å¦‚ä½•å°†ä»å¤´æ„å»ºä¸€ä¸ªç®€å•çš„goç¨‹åº.
é¦–å…ˆ, æˆ‘ä»¬ä»¥&lt;code&gt;/data/github/golang&lt;/code&gt;ä¸ºå·¥ä½œç©ºé—´&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ mkdir -p /data/github/golang
$ &lt;span class="nb"&gt;cd&lt;/span&gt; /data/github/golang
$ &lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;GOPATH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;&lt;span class="nb"&gt;pwd&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä¸ºäº†åˆ›å»ºä¸€ä¸ªç®€å•çš„ç¨‹åº. é¦–å…ˆè¦é€‰æ‹©åŒ…è·¯å¾„, å¦‚&lt;code&gt;github.com/crazygit/hello&lt;/code&gt;,&amp;nbsp;å¹¶åˆ›å»ºå¯¹äºçš„ç›®å½•ç»“æ„&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ mkdir -p &lt;span class="nv"&gt;$GOPATH&lt;/span&gt;/src/github.com/crazygit/hello
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;åœ¨ç›®å½•&lt;code&gt;$GOPATH/src/github.com/crazygit/hello&lt;/code&gt;é‡Œåˆ›å»º&lt;code&gt;hello.go&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nx"&gt;main&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;fmt&amp;quot;&lt;/span&gt;

&lt;span class="kd"&gt;func&lt;/span&gt; &lt;span class="nx"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nx"&gt;fmt&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Hello world&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä½¿ç”¨goå·¥å…·ç¼–è¯‘å¹¶å®‰è£…ç¨‹åº&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;cd&lt;/span&gt; &lt;span class="nv"&gt;$GOPATH&lt;/span&gt;
$ go install github.com/crazygit/hello
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æˆ–è€…&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;cd&lt;/span&gt; &lt;span class="nv"&gt;$GOPATH&lt;/span&gt;/github.com/crazygit/hello
$ go install
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ‰§è¡Œäº†ä¹‹åï¼Œå¯ä»¥çœ‹åˆ°&lt;code&gt;$GOPATH&lt;/code&gt;ä¸­å¤šäº†ä¸€ä¸ª&lt;code&gt;bin&lt;/code&gt;ç›®å½•ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªåä¸º&lt;code&gt;hello&lt;/code&gt;çš„å¯æ‰§è¡Œæ–‡ä»¶&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nv"&gt;$GOPATH&lt;/span&gt;/bin/hello
Hello, world.
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;ç¬¬ä¸€ä¸ªGoåº“&lt;/h3&gt;
&lt;p&gt;è®©æˆ‘ä»¬å†åˆ›å»ºä¸€ä¸ªåº“ï¼ŒåŒæ ·ï¼Œå…ˆåˆ›å»ºåŒ…è·¯å¾„&lt;code&gt;github.com/crazygit/stringutil&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ mkdir &lt;span class="nv"&gt;$GOPATH&lt;/span&gt;/src/github.com/crazygit/stringutil
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;åœ¨é‡Œé¢å†åˆ›å»ºä¸€ä¸ªåä¸º&lt;code&gt;reverse.go&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nx"&gt;stringutil&lt;/span&gt;

&lt;span class="kd"&gt;func&lt;/span&gt; &lt;span class="nx"&gt;Reverse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;s&lt;/span&gt; &lt;span class="kt"&gt;string&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="kt"&gt;string&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;r&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;&lt;span class="nb"&gt;rune&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;s&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nx"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;j&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;r&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="nx"&gt;i&lt;/span&gt; &lt;span class="p"&gt;&amp;lt;&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;r&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="nx"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;j&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;i&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;j&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nx"&gt;r&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;i&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="nx"&gt;r&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;j&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;r&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;j&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="nx"&gt;r&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nb"&gt;string&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;r&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ç¼–è¯‘&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;cd&lt;/span&gt; &lt;span class="nv"&gt;$GOPATH&lt;/span&gt;
$ go build github.com/crazygit/stringutil
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ç¼–è¯‘è¿‡ç¨‹ä¸ä¼šæœ‰ä»€ä¹ˆæ–‡ä»¶äº§ç”Ÿ, å¯ä»¥ä½¿ç”¨&lt;code&gt;go install&lt;/code&gt;, å®ƒä¼šåˆ›å»ºpkgç›®å½•
å¹¶ç”Ÿæˆ&lt;code&gt;pkg/linux_amd64/github.com/crazygit/stringutil.a&lt;/code&gt;æ–‡ä»¶.&lt;/p&gt;
&lt;p&gt;ä¿®æ”¹&lt;code&gt;hello.go&lt;/code&gt;,è®©å®ƒä½¿ç”¨æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„åº“&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="s"&gt;&amp;quot;fmt&amp;quot;&lt;/span&gt;
    &lt;span class="s"&gt;&amp;quot;github.com/crazygit/stringutil&amp;quot;&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="kd"&gt;func&lt;/span&gt; &lt;span class="nx"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;fmt&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Hello world&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="nx"&gt;fmt&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;stringutil&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Reverse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;!oG ,olleH&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å®‰è£…ï¼Œå½“å®‰è£…çš„çš„æ—¶å€™ï¼Œå®ƒä¼šè‡ªåŠ¨æ ¹æ®å®‰è£…ä¾èµ–,æ‰€ä»¥å®‰è£…&lt;code&gt;hello&lt;/code&gt;æ—¶, å®ƒä¼šè‡ªåŠ¨å®‰è£…&lt;code&gt;stringutil&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ go install github.com/crazygit/hello
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿è¡Œ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nv"&gt;$GOPATH&lt;/span&gt;/bin/hello
Hello, Go!
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;åŒ…å&lt;/h3&gt;
&lt;p&gt;Goä»£ç æ–‡ä»¶çš„ç¬¬ä¸€å¥è¯å¿…é¡»æ˜¯&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nx"&gt;name&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;nameå°±æ˜¯è¦å¼•èµ·çš„åŒ…åï¼Œæ‰€æœ‰åœ¨åŒä¸€ä¸ªåŒ…ä¸‹çš„åŒ…åä¹Ÿä¸€æ ·&lt;/p&gt;
&lt;p&gt;goé‡Œé¢ä¸ºäº†æ–¹ä¾¿ï¼Œä¼šä½¿ç”¨å¼•å…¥åŒ…è·¯å¾„çš„æœ€åä¸€æ®µä½œä¸ºåŒ…åï¼Œå¦‚ &lt;code&gt;crazygit/rot14&lt;/code&gt;çš„åŒ…åå°±æ˜¯&lt;code&gt;rot14&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å¯æ‰§è¡Œçš„å‘½ä»¤å¿…é¡»å¼•å…¥åŒ…&lt;code&gt;package main&lt;/code&gt;&lt;/p&gt;
&lt;h2&gt;æµ‹è¯•&lt;/h2&gt;
&lt;p&gt;Goè‡ªå¸¦äº†ä¸€ä¸ªä½¿ç”¨&lt;code&gt;go test&lt;/code&gt;çš„æµ‹è¯•æ¡†æ¶ï¼Œä¸ºäº†å†™ä¸€ä¸ªæµ‹è¯•æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;åº”è¯¥åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å&lt;code&gt;_test.go&lt;/code&gt;ç»“å°¾çš„æ–‡ä»¶ï¼Œå‡½æ•°åä¸ºå¦‚&lt;code&gt;TestXXX&lt;/code&gt;çš„, å¹¶ä¸”æœ‰å‚æ•°&lt;code&gt;t *testing.T&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;è®©æˆ‘ä»¬ä¸ºstringutilåŒ…åˆ›å»ºæµ‹è¯•&lt;code&gt;$GOPATH/src/github.com/crazygit/stringutil/reverse_test.go&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nx"&gt;stringutil&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;testing&amp;quot;&lt;/span&gt;

&lt;span class="kd"&gt;func&lt;/span&gt; &lt;span class="nx"&gt;TestReverse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nx"&gt;testing&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;T&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;cases&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;&lt;span class="kd"&gt;struct&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nx"&gt;in&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;want&lt;/span&gt; &lt;span class="kt"&gt;string&lt;/span&gt;
    &lt;span class="p"&gt;}{&lt;/span&gt;
        &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Hello, world&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;dlrow ,olleH&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
        &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Hello, ä¸–ç•Œ&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;ç•Œä¸– ,olleH&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
        &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nx"&gt;_&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;c&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="k"&gt;range&lt;/span&gt; &lt;span class="nx"&gt;cases&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nx"&gt;got&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="nx"&gt;Reverse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;c&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;in&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nx"&gt;got&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="nx"&gt;c&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;want&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="nx"&gt;t&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Errorf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Reverse(%q) == %q, want %q&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;c&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;in&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;got&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;c&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;want&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ‰§è¡Œæµ‹è¯•&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ go &lt;span class="nb"&gt;test&lt;/span&gt; github.com/crazygit/stringutil
ok      github.com/crazygit/stringutil  0.002s
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;ç¬¬ä¸‰æ–¹åŒ…&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ go get github.com/golang/example/hello
$ &lt;span class="nv"&gt;$GOPATH&lt;/span&gt;/bin/hello
Hello, Go examples!
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¦‚æœå½“å‰åŒ…å·²ç»å­˜åœ¨ï¼Œ&lt;code&gt;go get&lt;/code&gt;ä¼šè·³è¿‡ä¸‹è½½&lt;/p&gt;
&lt;p&gt;åˆ°æ­¤ï¼Œæˆ‘ä»¬å¯¹goæœ‰äº†ä¸ªå¤§è‡´çš„å°è±¡ï¼Œè™½ç„¶æœ‰äº›åœ°æ–¹çœ‹ä¸æ‡‚ï¼Œä¸è¿‡æ²¡æœ‰å…³ç³»ï¼Œæˆ‘ä»¬åé¢ä¼šç»§ç»­å­¦ä¹ ã€‚&lt;/p&gt;</summary><category term="go"></category><category term="å…¥é—¨"></category></entry><entry><title>Goå­¦ä¹ ç¬”è®°1ä¹‹å®‰è£…Go</title><link href="http://blog.wiseturtles.com/posts/go-install.html" rel="alternate"></link><published>2015-06-30T23:11:00+08:00</published><author><name>crazygit</name></author><id>tag:blog.wiseturtles.com,2015-06-30:posts/go-install.html</id><summary type="html">&lt;p&gt;æœ¬æ–‡å‚è€ƒäº:
&lt;a href="https://golang.org/doc/install"&gt;Installing Go - Getting&amp;nbsp;Started&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;å¿…å¤‡æŠ€èƒ½ä¹‹ç¿»å¢™&lt;/h3&gt;
&lt;p&gt;è¿™ä¸ªæ˜¯å¿…é¡»çš„æŠ€èƒ½ï¼Œä¸ç„¶goçš„å®˜ç½‘éƒ½æ²¡æ³•è®¿é—®,&amp;nbsp;åé¢ä¹Ÿä¸ç”¨çœ‹äº†ã€‚&lt;/p&gt;
&lt;h3&gt;å¼€å‘ç¯å¢ƒæ­å»º&lt;/h3&gt;
&lt;p&gt;æ•´ä¸ªå®‰è£…è¿‡ç¨‹æ¯”è¾ƒç®€å•ï¼Œä¸‹è½½å®‰è£…åŒ…ï¼Œé…ç½®ç¯å¢ƒå˜é‡å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥Linuxä¸ºä¾‹.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ wget https://storage.googleapis.com/golang/go1.4.2.linux-amd64.tar.gz
$ tar -C /usr/local -xzf go1.4.2.linux-amd64.tar.gz
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ·»åŠ ç¯å¢ƒå˜é‡:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="x"&gt;export GOROOT=/usr/local/go&lt;/span&gt;
&lt;span class="x"&gt;export PATH=&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;PATH&lt;/span&gt;&lt;span class="x"&gt;:&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;GOROOT&lt;/span&gt;&lt;span class="x"&gt;/bin&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;GOROOT&lt;/code&gt;æ˜¯å‘Šè¯‰ç³»ç»ŸGoå®‰è£…åœ¨å“ªé‡Œï¼Œ
&lt;code&gt;PATH&lt;/code&gt;æ˜¯æŒ‡å®šGoç›¸å…³å‘½ä»¤çš„è°ƒç”¨è·¯å¾„.&lt;/p&gt;
&lt;p&gt;ç¯å¢ƒæ£€æŸ¥ï¼ŒæŒ‰ç…§å›½é™…æƒ¯ä¾‹ï¼Œå½“ç„¶æ˜¯å…ˆæ¥&amp;#8221;Hello World&amp;#8221;. åˆ›å»º&lt;code&gt;hello.go&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nx"&gt;main&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;fmt&amp;quot;&lt;/span&gt;

&lt;span class="kd"&gt;func&lt;/span&gt; &lt;span class="nx"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;fmt&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hello, world\n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ‰§è¡Œ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ go run hello.go
hello, world
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¦‚æœè¾“å‡º&amp;#8221;hello,world&amp;#8221;ï¼Œ&amp;nbsp;åˆ™è¡¨ç¤ºç¯å¢ƒæ²¡æœ‰ä»€ä¹ˆé—®é¢˜.&lt;/p&gt;</summary><category term="go"></category><category term="å…¥é—¨"></category></entry><entry><title>é«˜å¹¶å‘ä¸‹è¿æ¥rediså¯¼è‡´redisè¿æ¥å¤±è´¥</title><link href="http://blog.wiseturtles.com/posts/flask-redis-gevent.html" rel="alternate"></link><published>2015-06-26T12:59:00+08:00</published><author><name>crazygit</name></author><id>tag:blog.wiseturtles.com,2015-06-26:posts/flask-redis-gevent.html</id><summary type="html">&lt;h3&gt;ç°è±¡&lt;/h3&gt;
&lt;p&gt;æœ€è¿‘çº¿ä¸Šçš„redisæœåŠ¡å™¨ä¼šè«åå‡ºç°æ— æ³•çªç„¶ä¹‹é—´æ— æ³•è¿æ¥çš„æƒ…å†µï¼Œéœ€è¦é‡å¯ä¸€ä¸‹redisæœåŠ¡å™¨æ‰èƒ½æ­£å¸¸å·¥ä½œï¼Œæ„Ÿè§‰å¾ˆè¯¡å¼‚.&amp;nbsp;æŸ¥çœ‹redisæ—¥å¿—ï¼Œå‘ç°æŠ¥å¦‚ä¸‹é”™è¯¯:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Error allocating resoures for the&amp;nbsp;client&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç½‘ä¸Šæœç´¢ä¹‹åï¼Œæ‰¾åˆ°&lt;/p&gt;
&lt;p&gt;&lt;a href="http://blog.sina.com.cn/s/blog_6262a50e0101cjyf.html"&gt;http://blog.sina.com.cn/s/blog_6262a50e0101cjyf.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ ¹æ®æè¿°,&amp;nbsp;æ€€ç–‘å¯èƒ½æ˜¯redisè¿æ¥æ•°å¤ªå¤šå¯¼è‡´,äºæ˜¯æŸ¥çœ‹&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ redis-cli -a password info &lt;span class="p"&gt;|&lt;/span&gt; grep connected_clients
connected_clients:6997
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿™è¿˜æ˜¯æˆ‘åˆšåˆšæ‰é‡æ–°å¯åŠ¨äº†redis&amp;nbsp;serverä¸ä¹…çœ‹åˆ°çš„æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆä¼šç”¨è¿™ä¹ˆé«˜è¿æ¥æ•°?ä¸Šé¢çš„æ–‡ç« ä¸­ä»‹ç»çš„æ˜¯ç”±äºä»£ç å¼•èµ·ä¸åœåœ°åˆ›å»ºredis Connection&amp;nbsp;poolå¯¼è‡´ã€‚ä»”ç»†æ£€æŸ¥äº†è‡ªå·±çš„ä»£ç ä¹‹åï¼Œå‘ç°ä¸ä¼šæœ‰è¿™ç§æƒ…å†µï¼Œä½†ä¸ºä»€ä¹ˆè¿˜æ˜¯ä¼šæœ‰è¿™ä¹ˆé«˜çš„è¿æ¥?&lt;/p&gt;
&lt;h3&gt;éªŒè¯&lt;/h3&gt;
&lt;p&gt;ç»è¿‡è°ƒè¯•å‘ç°ã€‚è™½ç„¶ä½¿ç”¨py-redisè¿æ¥redis, å®ƒä½¿ç”¨åˆ°äº†è¿æ¥æ± ï¼Œä½†æ˜¯ï¼Œè¿æ¥æ± é»˜è®¤æ˜¯æ²¡æœ‰è®¾ç½®è¿æ¥æ•°çš„ä¸Šé™(å¯ä»¥é€šè¿‡ç›¸å…³å‚æ•°è®¾ç½®)ï¼Œå½“é«˜å¹¶å‘æ—¶ï¼Œå®ƒä¼šä¸æ–­çš„åˆ›å»ºè¿æ¥ï¼Œå¹¶ä¸”è¿™äº›è¿æ¥ç”¨å®Œä¹‹åä¹Ÿä¸ä¼šè‡ªåŠ¨é‡Šæ”¾ã€‚
ç”±äºæˆ‘ä»¬çš„æœåŠ¡è¿è¡Œé‡‡ç”¨çš„geventæ–¹å¼ã€‚ å› æ­¤, æ›´å®¹æ˜“å¼•èµ·è¿™ä¸ªé—®é¢˜ã€‚ä¸ºäº†éªŒè¯è‡ªå·±çš„
çŒœæµ‹, å†™äº†ä¸ªç®€å•çš„è®¡æ•°ç¨‹åº&lt;code&gt;app.py&lt;/code&gt;æµ‹è¯•ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;flask&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Flask&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;flask_redis&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;FlaskRedis&lt;/span&gt;

&lt;span class="n"&gt;REDIS_URL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;redis://:password@localhost:6379/0&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;DEBUG&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;
&lt;span class="n"&gt;app&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Flask&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;__name__&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;config&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;from_object&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;__name__&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;redis&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;FlaskRedis&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;


&lt;span class="nd"&gt;@app.route&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;index&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;redis&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;incr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;hit&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;redis&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;hit&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;__name__&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;__main__&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;é‡‡ç”¨geventæ–¹å¼,&amp;nbsp;å•workerå¯åŠ¨&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ gunicorn -w &lt;span class="m"&gt;1&lt;/span&gt; app:app --worker-class gevent --error-logfile -
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä½¿ç”¨abæ¨¡æ‹Ÿ500ä¸ªç”¨æˆ·å‘é€50000æ¬¡è¯·æ±‚çš„é«˜å¹¶å‘&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ab  -c &lt;span class="m"&gt;500&lt;/span&gt;  -t &lt;span class="m"&gt;30&lt;/span&gt; -r  &lt;span class="s2"&gt;&amp;quot;http://127.0.0.1:8000/&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æŸ¥çœ‹è¿æ¥æ•°&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ redis-cli -a password info &lt;span class="p"&gt;|&lt;/span&gt;grep connected_clients
connected_clients:232
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¯ä»¥çœ‹åˆ°, åœ¨é«˜å¹¶å‘, å•workerçš„æ¡ä»¶ä¸‹ï¼Œ&amp;nbsp;ä¸€ä¸ªè¿æ¥æ± çš„è¿æ¥æ•°ä¼šå°±æœ‰ä¸¤ç™¾å¤šã€‚ç„¶åæµ‹è¯•å¼€å¯ï¼”ä¸ªworkerçš„è¯ï¼Œèƒ½è¾¾åˆ°ä¸€åƒäºŒç™¾å¤šã€‚&lt;/p&gt;
&lt;p&gt;è¿™äº›è¿æ¥åœ¨è¿æ¥æ± é‡Œä½¿ç”¨ä¹‹åï¼ŒåŸºæœ¬ä¸Šéƒ½é•¿æœŸå¤„äºidleçŠ¶æ€ï¼Œç™½ç™½æµªè´¹èµ„æº.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ redis-cli -a password client list
&lt;span class="nv"&gt;addr&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;127.0.0.1:45327 &lt;span class="nv"&gt;fd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;170&lt;/span&gt; &lt;span class="nv"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;age&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;35&lt;/span&gt; &lt;span class="nv"&gt;idle&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;34&lt;/span&gt; &lt;span class="nv"&gt;flags&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;N &lt;span class="nv"&gt;db&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;sub&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;psub&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;0
&lt;span class="nv"&gt;multi&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;-1 &lt;span class="nv"&gt;qbuf&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; qbuf-free&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;obl&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;oll&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;omem&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;events&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;r &lt;span class="nv"&gt;cmd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;get
&lt;span class="nv"&gt;addr&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;127.0.0.1:43684 &lt;span class="nv"&gt;fd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;44&lt;/span&gt; &lt;span class="nv"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;age&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;36&lt;/span&gt; &lt;span class="nv"&gt;idle&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt; &lt;span class="nv"&gt;flags&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;N &lt;span class="nv"&gt;db&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;sub&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;psub&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;0
&lt;span class="nv"&gt;multi&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;-1 &lt;span class="nv"&gt;qbuf&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; qbuf-free&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;obl&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;oll&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;omem&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;events&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;r &lt;span class="nv"&gt;cmd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;get
&lt;span class="nv"&gt;addr&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;127.0.0.1:43704 &lt;span class="nv"&gt;fd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;45&lt;/span&gt; &lt;span class="nv"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;age&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;36&lt;/span&gt; &lt;span class="nv"&gt;idle&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt; &lt;span class="nv"&gt;flags&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;N &lt;span class="nv"&gt;db&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;sub&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;psub&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;0
&lt;span class="nv"&gt;multi&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;-1 &lt;span class="nv"&gt;qbuf&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; qbuf-free&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;obl&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;oll&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;omem&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;events&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;r &lt;span class="nv"&gt;cmd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;get
&lt;span class="nv"&gt;addr&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;127.0.0.1:43705 &lt;span class="nv"&gt;fd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;46&lt;/span&gt; &lt;span class="nv"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;age&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;36&lt;/span&gt; &lt;span class="nv"&gt;idle&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt; &lt;span class="nv"&gt;flags&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;N &lt;span class="nv"&gt;db&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;sub&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;psub&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;0
&lt;span class="nv"&gt;multi&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;-1 &lt;span class="nv"&gt;qbuf&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; qbuf-free&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;obl&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;oll&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;omem&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;events&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;r &lt;span class="nv"&gt;cmd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;get
&lt;span class="nv"&gt;addr&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;127.0.0.1:43729 &lt;span class="nv"&gt;fd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;47&lt;/span&gt; &lt;span class="nv"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;age&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;36&lt;/span&gt; &lt;span class="nv"&gt;idle&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt; &lt;span class="nv"&gt;flags&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;N &lt;span class="nv"&gt;db&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;sub&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;psub&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;0
&lt;span class="nv"&gt;multi&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;-1 &lt;span class="nv"&gt;qbuf&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; qbuf-free&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;obl&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;oll&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;omem&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;events&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;r &lt;span class="nv"&gt;cmd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;get
&lt;span class="nv"&gt;addr&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;127.0.0.1:43730 &lt;span class="nv"&gt;fd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;48&lt;/span&gt; &lt;span class="nv"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;age&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;36&lt;/span&gt; &lt;span class="nv"&gt;idle&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt; &lt;span class="nv"&gt;flags&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;N &lt;span class="nv"&gt;db&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;sub&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;psub&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;0
&lt;span class="nv"&gt;multi&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;-1 &lt;span class="nv"&gt;qbuf&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; qbuf-free&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;obl&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;oll&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;omem&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;events&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;r &lt;span class="nv"&gt;cmd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;get
&lt;span class="nv"&gt;addr&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;127.0.0.1:43731 &lt;span class="nv"&gt;fd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;49&lt;/span&gt; &lt;span class="nv"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;age&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;36&lt;/span&gt; &lt;span class="nv"&gt;idle&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt; &lt;span class="nv"&gt;flags&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;N &lt;span class="nv"&gt;db&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;sub&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;psub&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;0
&lt;span class="nv"&gt;multi&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;-1 &lt;span class="nv"&gt;qbuf&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; qbuf-free&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;obl&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;oll&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;omem&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;events&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;r &lt;span class="nv"&gt;cmd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;get
&lt;span class="nv"&gt;addr&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;127.0.0.1:43732 &lt;span class="nv"&gt;fd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;50&lt;/span&gt; &lt;span class="nv"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;age&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;36&lt;/span&gt; &lt;span class="nv"&gt;idle&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt; &lt;span class="nv"&gt;flags&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;N &lt;span class="nv"&gt;db&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;sub&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;psub&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;0
.....
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;è§£å†³æ–¹å¼:&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;ä»ç›®å‰çš„æƒ…å†µæ¥çœ‹ï¼Œæ˜¯ç”±äºè¿æ¥æ± ç»´æŒäº†å¤ªå¤šçš„è¿æ¥å¯¼è‡´.ã€€å› æ­¤ä¸ç”¨çš„è¿æ¥æ± åº”è¯¥åŠ&amp;nbsp;æ—¶è¢«é‡Šæ”¾æ‰ã€‚é€šè¿‡è®¾ç½®&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ reidis-cli -a password CONFIG SET timeout 30
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è®©redisè‡ªåŠ¨é‡Šæ”¾æ‰idleæ—¶é—´è¶…è¿‡30ç§’çš„è¿æ¥,ã€€è®¾ç½®ä¹‹åï¼ŒæœåŠ¡å™¨ä¸Šredisè¿æ¥æ•°ä¸€&amp;nbsp;ä¸‹å­é™ä¸‹æ¥äº†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è®©redisè¿æ¥ä¹Ÿå¼‚æ­¥&lt;/p&gt;
&lt;p&gt;æ ¹æ®å¦ä¸€ç¯‡æ–‡ç« ä»‹ç»ä½¿ç”¨rediså¼‚æ­¥, è‡ªå·±æµ‹è¯•ä¹‹åå‘ç°æ²¡æœ‰ä»€ä¹ˆæ•ˆæœï¼Œä¹Ÿä¸çŸ¥é“å“ª
é‡Œæ²¡æœ‰åšå¯¹,&amp;nbsp;æœ‰æœºä¼šå†ç ”ç©¶ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href="https://gehrcke.de/2013/01/highly-concurrent-connections-to-redis-with-gevent-and-redis-py/"&gt;https://gehrcke.de/2013/01/highly-concurrent-connections-to-redis-with-gevent-and-redis-py/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;</summary><category term="flask"></category><category term="redis"></category><category term="gevent"></category></entry><entry><title>Gunicorn å‡ ç§ Worker classÂ æ€§èƒ½æµ‹è¯•æ¯”è¾ƒ</title><link href="http://blog.wiseturtles.com/posts/gunicorn-worker-class-compare.html" rel="alternate"></link><published>2015-06-26T09:30:00+08:00</published><author><name>crazygit</name></author><id>tag:blog.wiseturtles.com,2015-06-26:posts/gunicorn-worker-class-compare.html</id><summary type="html">&lt;h2&gt;ç®€ä»‹&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Gunicorn, ä¸€ä¸ªæ”¯æŒ&lt;span class="caps"&gt;WSGI&lt;/span&gt;åè®®çš„webæœåŠ¡å™¨&lt;/li&gt;
&lt;li&gt;Flask, ä¸€ä¸ªè½»é‡çº§çš„python&amp;nbsp;webæ¡†æ¶&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Gunicornç›®å‰è‡ªå¸¦æ”¯æŒå‡ ç§å·¥ä½œæ–¹å¼:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;sync&amp;nbsp;(é»˜è®¤å€¼)&lt;/li&gt;
&lt;li&gt;eventlet&lt;/li&gt;
&lt;li&gt;gevent&lt;/li&gt;
&lt;li&gt;tornado&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;æµ‹è¯•ç¯å¢ƒå‡†å¤‡&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;python&amp;nbsp;2.7+&lt;/li&gt;
&lt;li&gt;redis-server&amp;nbsp;2.8.4&lt;/li&gt;
&lt;li&gt;å‹åŠ›æµ‹è¯•å·¥å…·ab&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä»£ç åŠç›¸å…³pythonåŒ…å‡†å¤‡&amp;nbsp;åˆ›å»ºè™šä¸€ä¸ªæ–°çš„è™šæ‹Ÿç¯å¢ƒå¹¶å®‰è£…éœ€è¦çš„åŒ…&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ mkvirtualenv &lt;span class="nb"&gt;test&lt;/span&gt;
$ workon &lt;span class="nb"&gt;test&lt;/span&gt;

$ cat requirements.txt
&lt;span class="nv"&gt;gunicorn&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;19.3.0
&lt;span class="nv"&gt;flask&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;0.10.1
flask-redis&lt;span class="o"&gt;==&lt;/span&gt;0.1.0
&lt;span class="nv"&gt;gevent&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;1.0.2
&lt;span class="nv"&gt;tornado&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;4.2
&lt;span class="nv"&gt;eventlet&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;0.17.4

$ pip install -r requirements.txt
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æµ‹è¯•ç¨‹åº&lt;code&gt;app.py&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;flask&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Flask&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;flask_redis&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;FlaskRedis&lt;/span&gt;

&lt;span class="n"&gt;REDIS_URL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;redis://:password-string@localhost:6379/0&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;app&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Flask&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;__name__&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;config&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;from_object&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;__name__&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;redis&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;FlaskRedis&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="nd"&gt;@app.route&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;index&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;redis&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;incr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;hit&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;redis&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;hit&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;__name__&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;__main__&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;å¼€å§‹æµ‹è¯•&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨abå·¥å…·,å¹¶è¡Œ500ä¸ªå®¢æˆ·ç«¯,&amp;nbsp;å‘é€50000æ¬¡è¯·æ±‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ab -c &lt;span class="m"&gt;500&lt;/span&gt; -t &lt;span class="m"&gt;30&lt;/span&gt; -r &lt;span class="s2"&gt;&amp;quot;http://127.0.0.1:8000/&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åˆ†åˆ«ä½¿ç”¨å››ç§æ–¹å¼å¯åŠ¨ä½¿ç”¨æœåŠ¡ï¼Œ&amp;nbsp;å¹¶å¼€å¯ï¼”ä¸ªworker&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ gunicorn -w &lt;span class="m"&gt;4&lt;/span&gt; app:app --error-logfile - --worker-class sync
$ gunicorn -w &lt;span class="m"&gt;4&lt;/span&gt; app:app --error-logfile - --worker-class gevent
$ gunicorn -w &lt;span class="m"&gt;4&lt;/span&gt; app:app --error-logfile - --worker-class tornado
$ gunicorn -w &lt;span class="m"&gt;4&lt;/span&gt; app:app --error-logfile - --worker-class eventlet
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç»“æœæ¯”è¾ƒ&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;table class="table table-striped table-bordered table-hover table-condensed"&gt;
    &lt;tbody&gt;
        &lt;tr&gt;
            &lt;td&gt;
                Worker class
            &lt;/td&gt;
            &lt;td&gt;
                Time taken for tests
            &lt;/td&gt;
            &lt;td&gt;
                Complete requests
            &lt;/td&gt;
            &lt;td&gt;
                Failed requests
            &lt;/td&gt;
            &lt;td&gt;
                Requests per second
            &lt;/td&gt;
            &lt;td&gt;
                ç”¨æˆ·å¹³å‡è¯·æ±‚ç­‰å¾…æ—¶é—´
            &lt;/td&gt;
            &lt;td&gt;
                æœåŠ¡å™¨å¹³å‡å¤„ç†æ—¶é—´
            &lt;/td&gt;
            &lt;td&gt;
                æœ€å°è¿æ¥æ—¶é—´
            &lt;/td&gt;
            &lt;td&gt;
                å¹³å‡è¿æ¥æ—¶é—´
            &lt;/td&gt;
            &lt;td&gt;
                50%çš„è¿æ¥æ—¶é—´
            &lt;/td&gt;
            &lt;td&gt;
                æœ€å¤§è¿æ¥æ—¶é—´
            &lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;
                sync
            &lt;/td&gt;
            &lt;td&gt;
                37.363 s
            &lt;/td&gt;
            &lt;td&gt;
                49928
            &lt;/td&gt;
            &lt;td&gt;
                793
            &lt;/td&gt;
            &lt;td&gt;
                1336.29
            &lt;/td&gt;
            &lt;td&gt;
                374.169 ms
            &lt;/td&gt;
            &lt;td&gt;
                0.748 ms
            &lt;/td&gt;
            &lt;td&gt;
                5 ms
            &lt;/td&gt;
            &lt;td&gt;
                75 ms
            &lt;/td&gt;
            &lt;td&gt;
                17 ms
            &lt;/td&gt;
            &lt;td&gt;
                31746 ms
            &lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;
               tornado
            &lt;/td&gt;
            &lt;td&gt;
               13.995
            &lt;/td&gt;
            &lt;td&gt;
                50000
            &lt;/td&gt;
            &lt;td&gt;
                543
            &lt;/td&gt;
            &lt;td&gt;
               3572.64
            &lt;/td&gt;
            &lt;td&gt;
                139.953 ms
            &lt;/td&gt;
            &lt;td&gt;
                0.280 ms
            &lt;/td&gt;
            &lt;td&gt;
                6 ms
            &lt;/td&gt;
            &lt;td&gt;
                110 ms
            &lt;/td&gt;
            &lt;td&gt;
                24 ms
            &lt;/td&gt;
            &lt;td&gt;
                13837 ms
            &lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;
              eventlet
            &lt;/td&gt;
            &lt;td&gt;
              8.156
            &lt;/td&gt;
            &lt;td&gt;
                50000
            &lt;/td&gt;
            &lt;td&gt;
                0
            &lt;/td&gt;
            &lt;td&gt;
               6130.74
            &lt;/td&gt;
            &lt;td&gt;
               81.556
            &lt;/td&gt;
            &lt;td&gt;
                0.163 ms
            &lt;/td&gt;
            &lt;td&gt;
                2 ms
            &lt;/td&gt;
            &lt;td&gt;
                80 ms
            &lt;/td&gt;
            &lt;td&gt;
               62 ms
            &lt;/td&gt;
            &lt;td&gt;
               3153 ms
            &lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;
                gevent
            &lt;/td&gt;
            &lt;td&gt;
                7.647 s
            &lt;/td&gt;
            &lt;td&gt;
                50000
            &lt;/td&gt;
            &lt;td&gt;
                0
            &lt;/td&gt;
            &lt;td&gt;
               6538.23
            &lt;/td&gt;
            &lt;td&gt;
                76.473 ms
            &lt;/td&gt;
            &lt;td&gt;
                0.153 ms
            &lt;/td&gt;
            &lt;td&gt;
                1 ms
            &lt;/td&gt;
            &lt;td&gt;
                74 ms
            &lt;/td&gt;
            &lt;td&gt;
                52 ms
            &lt;/td&gt;
            &lt;td&gt;
                1122 ms
            &lt;/td&gt;
        &lt;/tr&gt;
    &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;ä»æµ‹è¯•ç»“æœæ¥çœ‹ï¼Œé»˜è®¤è‡ªå¸¦syncæ•ˆç‡å¾ˆä½ï¼Œå¹¶ä¸”åœ¨æµ‹è¯•æ—¶å‘ç°ï¼Œé‡‡ç”¨syncæ–¹å¼åœ¨é«˜å¹¶å‘æ—¶
ä¼šå‡ºç°wokeré‡å¯çš„æƒ…å†µ,&amp;nbsp;å¦‚ä¸‹:&lt;/p&gt;
&lt;pre&gt;
[2015-06-25 11:31:06 +0000] [27040] [CRITICAL] WORKER TIMEOUT (pid:27064)
[2015-06-25 11:31:06 +0000] [27040] [CRITICAL] WORKER TIMEOUT (pid:27051)
[2015-06-25 11:31:06 +0000] [27040] [CRITICAL] WORKER TIMEOUT (pid:27045)
[2015-06-25 11:31:06 +0000] [27040] [CRITICAL] WORKER TIMEOUT (pid:27046)
[2015-06-25 11:31:06 +0000] [27064] [INFO] Worker exiting (pid: 27064)
[2015-06-25 11:31:06 +0000] [27051] [INFO] Worker exiting (pid: 27051)
[2015-06-25 11:31:06 +0000] [27045] [INFO] Worker exiting (pid: 27045)
[2015-06-25 11:31:06 +0000] [27046] [INFO] Worker exiting (pid: 27046)
[2015-06-25 11:31:06 +0000] [27263] [INFO] Booting worker with pid: 27263
[2015-06-25 11:31:06 +0000] [27264] [INFO] Booting worker with pid: 27264
[2015-06-25 11:31:06 +0000] [27277] [INFO] Booting worker with pid: 27277
[2015-06-25 11:31:06 +0000] [27280] [INFO] Booting worker with pid: 27280
&lt;/pre&gt;

&lt;p&gt;eventlet&amp;nbsp;å’Œgeventä¸¤ç§æ–¹å¼æ•ˆæœæœ€å¥½ï¼Œæ•°æ®åŸºæœ¬å·®ä¸å¤š.&lt;/p&gt;</summary><category term="gunicorn"></category><category term="flask"></category><category term="gevent"></category><category term="eventlet"></category><category term="tornado"></category></entry><entry><title>å‹åŠ›æµ‹è¯•å·¥å…·ab webbench</title><link href="http://blog.wiseturtles.com/posts/server-benchmarkingt-tool-ab-and-webbench.html" rel="alternate"></link><published>2015-06-26T07:29:00+08:00</published><author><name>crazygit</name></author><id>tag:blog.wiseturtles.com,2015-06-26:posts/server-benchmarkingt-tool-ab-and-webbench.html</id><summary type="html">&lt;h2&gt;ab&lt;/h2&gt;
&lt;p&gt;abæ˜¯apacheè‡ªå¸¦çš„å‹åŠ›æµ‹è¯•å·¥å…·ã€‚ä½¿ç”¨ç®€å•ï¼Œä¾¿äºä¸€äº›ç®€å•çš„å‹åŠ›æµ‹è¯•.&lt;/p&gt;
&lt;h3&gt;å®‰è£…&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt-get install apache2-utils
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;ä½¿ç”¨å¸®åŠ©&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ab -h
Usage: ab &lt;span class="o"&gt;[&lt;/span&gt;options&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;http&lt;span class="o"&gt;[&lt;/span&gt;s&lt;span class="o"&gt;]&lt;/span&gt;://&lt;span class="o"&gt;]&lt;/span&gt;hostname&lt;span class="o"&gt;[&lt;/span&gt;:port&lt;span class="o"&gt;]&lt;/span&gt;/path
Options are:
    -n requests     Number of requests to perform &lt;span class="c1"&gt;# è¯·æ±‚æ¬¡æ•°&lt;/span&gt;
    -c concurrency  Number of multiple requests to make at a &lt;span class="nb"&gt;time&lt;/span&gt; &lt;span class="c1"&gt;# å¹¶å‘æ•°&lt;/span&gt;
    -t timelimit    Seconds to max. to spend on benchmarking &lt;span class="c1"&gt;# å‹åŠ›æµ‹è¯•çš„æœ€å¤§æ—¶é—´&lt;/span&gt;
                    This implies -n 50000
    -s timeout      Seconds to max. &lt;span class="nb"&gt;wait&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; each response
                    Default is &lt;span class="m"&gt;30&lt;/span&gt; seconds
    -b windowsize   Size of TCP send/receive buffer, in bytes
    -B address      Address to &lt;span class="nb"&gt;bind&lt;/span&gt; to when making outgoing connections
    -p postfile     File containing data to POST. Remember also to &lt;span class="nb"&gt;set&lt;/span&gt; -T  &lt;span class="c1"&gt;# POSTæ–¹å¼ï¼ŒåŒæ—¶å¿…é¡»ä½¿ç”¨-TæŒ‡å®šâ€œContent-Typeâ€&lt;/span&gt;
    -u putfile      File containing data to PUT. Remember also to &lt;span class="nb"&gt;set&lt;/span&gt; -T   &lt;span class="c1"&gt;# PUTæ–¹å¼&lt;/span&gt;
    -T content-type Content-type header to use &lt;span class="k"&gt;for&lt;/span&gt; POST/PUT data, eg.
                    &lt;span class="s1"&gt;&amp;#39;application/x-www-form-urlencoded&amp;#39;&lt;/span&gt;
                    Default is &lt;span class="s1"&gt;&amp;#39;text/plain&amp;#39;&lt;/span&gt;
    -v verbosity    How much troubleshooting info to print
    -w              Print out results in HTML tables &lt;span class="c1"&gt;# ä»¥htmlè¡¨æ ¼å½¢å¼è¾“å‡ºç»“æœ&lt;/span&gt;
    -i              Use HEAD instead of GET &lt;span class="c1"&gt;# ä½¿ç”¨Headè¯·æ±‚&lt;/span&gt;
    -x attributes   String to insert as table attributes
    -y attributes   String to insert as tr attributes
    -z attributes   String to insert as td or th attributes
    -C attribute    Add cookie, eg. &lt;span class="s1"&gt;&amp;#39;Apache=1234&amp;#39;&lt;/span&gt;. &lt;span class="o"&gt;(&lt;/span&gt;repeatable&lt;span class="o"&gt;)&lt;/span&gt;
    -H attribute    Add Arbitrary header line, eg. &lt;span class="s1"&gt;&amp;#39;Accept-Encoding: gzip&amp;#39;&lt;/span&gt;  &lt;span class="c1"&gt;# æ·»åŠ HTTPå¤´ä¿¡æ¯&lt;/span&gt;
                    Inserted after all normal header lines. &lt;span class="o"&gt;(&lt;/span&gt;repeatable&lt;span class="o"&gt;)&lt;/span&gt;
    -A attribute    Add Basic WWW Authentication, the attributes   &lt;span class="c1"&gt;# æ·»åŠ è®¤è¯ä¿¡æ¯&lt;/span&gt;
                    are a colon separated username and password.
    -P attribute    Add Basic Proxy Authentication, the attributes
                    are a colon separated username and password.
    -X proxy:port   Proxyserver and port number to use
    -V              Print version number and &lt;span class="nb"&gt;exit&lt;/span&gt;
    -k              Use HTTP KeepAlive feature
    -d              Do not show percentiles served table.
    -S              Do not show confidence estimators and warnings.
    -q              Do not show progress when doing more than &lt;span class="m"&gt;150&lt;/span&gt; requests
    -l              Accept variable document length &lt;span class="o"&gt;(&lt;/span&gt;use this &lt;span class="k"&gt;for&lt;/span&gt; dynamic pages&lt;span class="o"&gt;)&lt;/span&gt;
    -g filename     Output collected data to gnuplot format file.
    -e filename     Output CSV file with percentages served
    -r              Don&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;t &lt;span class="nb"&gt;exit&lt;/span&gt; on socket receive errors.   &lt;span class="c1"&gt;# åœ¨æ¥æ”¶åˆ°socketé”™è¯¯æ—¶ä¸é€€å‡º&lt;/span&gt;
    -h              Display usage information &lt;span class="o"&gt;(&lt;/span&gt;this message&lt;span class="o"&gt;)&lt;/span&gt;
    -Z ciphersuite  Specify SSL/TLS cipher suite &lt;span class="o"&gt;(&lt;/span&gt;See openssl ciphers&lt;span class="o"&gt;)&lt;/span&gt;
    -f protocol     Specify SSL/TLS protocol
                    &lt;span class="o"&gt;(&lt;/span&gt;SSL3, TLS1, TLS1.1, TLS1.2 or ALL&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;ä½¿ç”¨ç¤ºä¾‹&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# GET&lt;/span&gt;

&lt;span class="c1"&gt;# 30ç§’å†…å¹¶è¡Œ1000ä¸ªå®¢æˆ·ç«¯ï¼Œè¯·æ±‚é»˜è®¤çš„50000æ¬¡è¯·æ±‚&lt;/span&gt;
$ ab -c &lt;span class="m"&gt;1000&lt;/span&gt; -t  &lt;span class="m"&gt;30&lt;/span&gt; http://www.baidu.com/
&lt;span class="c1"&gt;# å¹¶å‘100ä¸ªå®¢æˆ·ç«¯ï¼Œè¯·æ±‚10000æ¬¡&lt;/span&gt;
$ ab -c &lt;span class="m"&gt;100&lt;/span&gt; -n &lt;span class="m"&gt;10000&lt;/span&gt; http://www.baidu.com/

&lt;span class="c1"&gt;# POST&lt;/span&gt;

$ cat data.json
&lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;apps&amp;quot;&lt;/span&gt;: &lt;span class="o"&gt;[{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;package_name&amp;quot;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;quot;com.baidu.browser.apps&amp;quot;&lt;/span&gt;, &lt;span class="s2"&gt;&amp;quot;app_name&amp;quot;&lt;/span&gt;:&lt;span class="s2"&gt;&amp;quot;ç™¾åº¦æµè§ˆå™¨&amp;quot;&lt;/span&gt;, &lt;span class="s2"&gt;&amp;quot;version_code&amp;quot;&lt;/span&gt;: 1, &lt;span class="s2"&gt;&amp;quot;version_name&amp;quot;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;quot;5.3.4.1&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;}]&lt;/span&gt;, &lt;span class="s2"&gt;&amp;quot;pm_name&amp;quot;&lt;/span&gt;:&lt;span class="s2"&gt;&amp;quot;TCL M2M&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="c1"&gt;# post json æ•°æ®&lt;/span&gt;
$ ab -c &lt;span class="m"&gt;1000&lt;/span&gt; -t &lt;span class="m"&gt;30&lt;/span&gt; -p data.json -T &lt;span class="s2"&gt;&amp;quot;application/json&amp;quot;&lt;/span&gt; -r &lt;span class="s2"&gt;&amp;quot;127.0.0.1:8888/m3/apps/update&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;æ›´å¤š&lt;/h3&gt;
&lt;p&gt;å…³äºå…¶ä»–çš„å‘½ä»¤é€‰é¡¹åŠå‘½ä»¤çš„ç»“æœè¾“å‡ºä»‹ç»ï¼Œå¯ä»¥å‚çœ‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a href="http://httpd.apache.org/docs/2.2/programs/ab.html"&gt;http://httpd.apache.org/docs/2.2/programs/ab.html&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;webbench&lt;/h2&gt;
&lt;p&gt;å¦ä¸€ä¸ªè½»é‡çº§çš„å‹åŠ›æµ‹è¯•å·¥å…·ï¼Œæ®è¯´æ¯”abå¥½ç”¨ï¼Œä½†æ˜¯å¥½åƒä¸æ”¯æŒæ¨¡æ‹Ÿ&lt;span class="caps"&gt;POST&lt;/span&gt;è¯·æ±‚&lt;/p&gt;
&lt;h3&gt;å®‰è£…&lt;/h3&gt;
&lt;p&gt;å¯ä»¥åˆ°&lt;a href="http://home.tiscali.cz/~cz210552/webbench.html"&gt;http://home.tiscali.cz/~cz210552/webbench.html&lt;/a&gt;è·å–æœ€æ–°ç‰ˆæœ¬çš„ä¸‹è½½åœ°å€&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ wget http://home.tiscali.cz/~cz210552/distfiles/webbench-1.5.tar.gz
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è§£å‹ä¹‹å&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ make &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; sudo make install
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;ä½¿ç”¨å¸®åŠ©&lt;/h3&gt;
&lt;p&gt;ä½¿ç”¨ä¸Šå’Œabå·®ä¸å¤šï¼Œå…·ä½“å‚æ•°å¯ä»¥å‚è€ƒä¸‹é¢&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ webbench
webbench &lt;span class="o"&gt;[&lt;/span&gt;option&lt;span class="o"&gt;]&lt;/span&gt;... URL
-f&lt;span class="p"&gt;|&lt;/span&gt;--force               Don&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;t &lt;span class="nb"&gt;wait&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; reply from server.
-r&lt;span class="p"&gt;|&lt;/span&gt;--reload              Send reload request - Pragma: no-cache.
-t&lt;span class="p"&gt;|&lt;/span&gt;--time &amp;lt;sec&amp;gt;          Run benchmark &lt;span class="k"&gt;for&lt;/span&gt; &amp;lt;sec&amp;gt; seconds. Default 30.
-p&lt;span class="p"&gt;|&lt;/span&gt;--proxy &amp;lt;server:port&amp;gt; Use proxy server &lt;span class="k"&gt;for&lt;/span&gt; request.
-c&lt;span class="p"&gt;|&lt;/span&gt;--clients &amp;lt;n&amp;gt;         Run &amp;lt;n&amp;gt; HTTP clients at once. Default one.
-9&lt;span class="p"&gt;|&lt;/span&gt;--http09              Use HTTP/0.9 style requests.
-1&lt;span class="p"&gt;|&lt;/span&gt;--http10              Use HTTP/1.0 protocol.
-2&lt;span class="p"&gt;|&lt;/span&gt;--http11              Use HTTP/1.1 protocol.
--get                    Use GET request method.
--head                   Use HEAD request method.
--options                Use OPTIONS request method.
--trace                  Use TRACE request method.
-?&lt;span class="p"&gt;|&lt;/span&gt;-h&lt;span class="p"&gt;|&lt;/span&gt;--help             This information.
-V&lt;span class="p"&gt;|&lt;/span&gt;--version             Display program version.
&lt;/pre&gt;&lt;/div&gt;</summary><category term="ab"></category><category term="workbench"></category></entry><entry><title>Upgrade Elasticsearch 1.2.1 toÂ 1.4.5</title><link href="http://blog.wiseturtles.com/posts/Upgrade-Elasticsearch-1.2.1-to-1.4.5.html" rel="alternate"></link><published>2015-06-19T00:00:00+08:00</published><author><name>Zhang Wanming</name></author><id>tag:blog.wiseturtles.com,2015-06-19:posts/Upgrade-Elasticsearch-1.2.1-to-1.4.5.html</id><summary type="html">&lt;p&gt;ä¸€å¹´å‰åˆšå¼€å§‹åšåº”ç”¨å¸‚åœºæ•°æ®ç»Ÿè®¡ï¼Œå›¢é˜Ÿé€‰ç”¨äº†&lt;span class="caps"&gt;ELK&lt;/span&gt;ä¸­çš„&lt;span class="caps"&gt;EL&lt;/span&gt; (Elasticsearch, Logstash)ï¼Œæ²¡æœ‰ç”¨Kibanaï¼›è€Œä¸”æ ¹æ®äº§å“ã€è¿è¥éœ€æ±‚è°ƒç”¨&lt;span class="caps"&gt;ES&lt;/span&gt; Restful &lt;span class="caps"&gt;API&lt;/span&gt;ï¼Œè‡ªå·±åšWebå±•ç¤ºã€‚
ç”¨äº†ä»¥ä¸‹æ’ä»¶:analysis-icu, analysis-ik, analysis-mmseg, analysis-pinyin
å½“æ—¶&lt;span class="caps"&gt;ES&lt;/span&gt;ç‰ˆæœ¬ä¸º1.2.1ï¼Œä¸€ç›´æ²¡æœ‰å‡çº§ï¼Œæœ€è¿‘å‡çº§åˆ°1.4.5ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ä¹‹å‰æœåŠ¡å™¨æ˜¯Debian 7ï¼Œç°åœ¨æœåŠ¡å™¨æ˜¯CentOS 6.5ï¼›æœåŠ¡å™¨ç‰ˆæœ¬å’Œ&lt;span class="caps"&gt;ES&lt;/span&gt;æ²¡æœ‰å…³ç³»ï¼Œè‡³å°‘æˆ‘æ²¡ç¢°åˆ°ä»»ä½•ç³»ç»Ÿé—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;ç›®å‰æœ‰ä¸¤å°&lt;span class="caps"&gt;ES&lt;/span&gt; 1.2.1ï¼Œå‡†å¤‡ç”¨ä¸‰å°&lt;span class="caps"&gt;ES&lt;/span&gt;&amp;nbsp;1.4.5æ›¿æ¢ã€‚åˆšå¼€å§‹æ²¡æœ‰rootæƒé™ï¼Œåªå¥½ä¸‹è½½å‹ç¼©åŒ…å®‰è£…ã€‚&lt;/p&gt;
&lt;p&gt;æ³¨: Elasticsearchå’ŒLogstashéƒ½éœ€è¦å®‰è£…&lt;span class="caps"&gt;JDK&lt;/span&gt;, æˆ‘ä»¬ç”¨çš„&lt;span class="caps"&gt;JDK&lt;/span&gt;&amp;nbsp;1.7&lt;/p&gt;
&lt;h1&gt;å®‰è£…Logstash&amp;nbsp;1.4.3&lt;/h1&gt;
&lt;h2&gt;å®‰è£…éœ€è¦çš„è½¯ä»¶åŒ…&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;cd&lt;/span&gt; /data/software
$ wget https://download.elastic.co/logstash/logstash/logstash-1.4.3.tar.gz
$ tar zxf logstash-1.4.3.tar.gz
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;ä¿®æ”¹é…ç½®æ–‡ä»¶&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat /data/softwares/logstash-1.4.3/logstash.conf &lt;span class="p"&gt;|&lt;/span&gt; grep -Ev &lt;span class="s1"&gt;&amp;#39;^#|^$&amp;#39;&lt;/span&gt;
input &lt;span class="o"&gt;{&lt;/span&gt;
  redis &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="nv"&gt;codec&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;json&amp;quot;&lt;/span&gt;
    &lt;span class="nv"&gt;data_type&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;list&amp;quot;&lt;/span&gt;
    &lt;span class="nv"&gt;host&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;x.x.x.x&amp;quot;&lt;/span&gt;
    &lt;span class="nv"&gt;key&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;appstore:logstash&amp;quot;&lt;/span&gt;
    &lt;span class="nv"&gt;password&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;passwd&amp;quot;&lt;/span&gt;
    &lt;span class="nv"&gt;tags&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;appstore_logs&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;
    &lt;span class="nv"&gt;db&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; 0
  &lt;span class="o"&gt;}&lt;/span&gt;
  redis &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="nv"&gt;codec&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;json&amp;quot;&lt;/span&gt;
    &lt;span class="nv"&gt;data_type&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;list&amp;quot;&lt;/span&gt;
    &lt;span class="nv"&gt;host&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;x.x.x.x&amp;quot;&lt;/span&gt;
    &lt;span class="nv"&gt;password&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;passwd&amp;quot;&lt;/span&gt;
    &lt;span class="nv"&gt;key&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;appstore:overview_reports&amp;quot;&lt;/span&gt;
    &lt;span class="nv"&gt;tags&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;overview_reports&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;
    &lt;span class="nv"&gt;db&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; 0
  &lt;span class="o"&gt;}&lt;/span&gt;
  redis &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="nv"&gt;codec&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;json&amp;quot;&lt;/span&gt;
    &lt;span class="nv"&gt;data_type&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;list&amp;quot;&lt;/span&gt;
    &lt;span class="nv"&gt;host&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;x.x.x.x&amp;quot;&lt;/span&gt;
    &lt;span class="nv"&gt;password&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;passwd&amp;quot;&lt;/span&gt;
    &lt;span class="nv"&gt;key&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s1"&gt;&amp;#39;appstore:imei_reports&amp;#39;&lt;/span&gt;
    &lt;span class="nv"&gt;tags&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;imei_reports&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;
    &lt;span class="nv"&gt;db&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; 1
  &lt;span class="o"&gt;}&lt;/span&gt;
  redis &lt;span class="o"&gt;{&lt;/span&gt; 
     &lt;span class="nv"&gt;codec&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;json&amp;quot;&lt;/span&gt; 
     &lt;span class="nv"&gt;data_type&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;list&amp;quot;&lt;/span&gt; 
     &lt;span class="nv"&gt;host&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;x.x.x.x&amp;quot;&lt;/span&gt; 
     &lt;span class="nv"&gt;password&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;tclonline&amp;quot;&lt;/span&gt;
     &lt;span class="nv"&gt;key&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;appstore:overview_date_reports&amp;quot;&lt;/span&gt; 
     &lt;span class="nv"&gt;tags&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;overview_date_reports&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; 
     &lt;span class="nv"&gt;db&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; 3
   &lt;span class="o"&gt;}&lt;/span&gt; 
   redis &lt;span class="o"&gt;{&lt;/span&gt; 
     &lt;span class="nv"&gt;codec&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;json&amp;quot;&lt;/span&gt; 
     &lt;span class="nv"&gt;data_type&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;list&amp;quot;&lt;/span&gt; 
     &lt;span class="nv"&gt;host&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;x.x.x.x&amp;quot;&lt;/span&gt; 
     &lt;span class="nv"&gt;password&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;pwd&amp;quot;&lt;/span&gt;
     &lt;span class="nv"&gt;key&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;appstore:overview_model_reports&amp;quot;&lt;/span&gt; 
     &lt;span class="nv"&gt;tags&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;overview_model_reports&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; 
     &lt;span class="nv"&gt;db&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; 3

   &lt;span class="o"&gt;}&lt;/span&gt; 
&lt;span class="o"&gt;}&lt;/span&gt;
filter &lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;appstore_logs&amp;quot;&lt;/span&gt; in &lt;span class="o"&gt;[&lt;/span&gt;tags&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    date &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="nv"&gt;match&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;timestamp&amp;quot;&lt;/span&gt; , &lt;span class="s2"&gt;&amp;quot;UNIX&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;imei_reports&amp;quot;&lt;/span&gt; in &lt;span class="o"&gt;[&lt;/span&gt;tags&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    date &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="nv"&gt;match&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;timestamp&amp;quot;&lt;/span&gt; , &lt;span class="s2"&gt;&amp;quot;UNIX&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
output &lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;appstore_logs&amp;quot;&lt;/span&gt; in &lt;span class="o"&gt;[&lt;/span&gt;tags&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    elasticsearch &lt;span class="o"&gt;{&lt;/span&gt; 
      &lt;span class="nv"&gt;index&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; logstash
      &lt;span class="nv"&gt;index_type&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;appstore_stats&amp;quot;&lt;/span&gt;
      &lt;span class="nv"&gt;cluster&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;elasticsearch_dashboard&amp;quot;&lt;/span&gt;
      &lt;span class="nv"&gt;node_name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;logstash_appstore_logs&amp;quot;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    redis&lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="nv"&gt;data_type&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;list&amp;quot;&lt;/span&gt;
      &lt;span class="nv"&gt;db&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; 3
      &lt;span class="nv"&gt;host&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;x.x.x.x&amp;quot;&lt;/span&gt; 
      &lt;span class="nv"&gt;password&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;passwd&amp;quot;&lt;/span&gt;
      &lt;span class="nv"&gt;key&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;logstash:appstore_logs&amp;quot;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;overview_reports&amp;quot;&lt;/span&gt; in &lt;span class="o"&gt;[&lt;/span&gt;tags&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    elasticsearch &lt;span class="o"&gt;{&lt;/span&gt; 
      &lt;span class="nv"&gt;index&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; dashboard
      &lt;span class="nv"&gt;index_type&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;overview_records&amp;quot;&lt;/span&gt;
      &lt;span class="nv"&gt;cluster&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;elasticsearch_dashboard&amp;quot;&lt;/span&gt;
      &lt;span class="nv"&gt;node_name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;logstash_overview_reports&amp;quot;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;
   &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;imei_reports&amp;quot;&lt;/span&gt; in &lt;span class="o"&gt;[&lt;/span&gt;tags&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    elasticsearch &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="nv"&gt;index&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; imei
      &lt;span class="nv"&gt;index_type&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;imei_records&amp;quot;&lt;/span&gt;
      &lt;span class="nv"&gt;cluster&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;elasticsearch_dashboard&amp;quot;&lt;/span&gt;
      &lt;span class="nv"&gt;node_name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;logstash_imei_reports&amp;quot;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;
   &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;overview_date_reports&amp;quot;&lt;/span&gt; in &lt;span class="o"&gt;[&lt;/span&gt;tags&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; 
     elasticsearch &lt;span class="o"&gt;{&lt;/span&gt; 
       &lt;span class="nv"&gt;cluster&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;elasticsearch_dashboard&amp;quot;&lt;/span&gt; 
       &lt;span class="nv"&gt;index&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; dashboard 
       &lt;span class="nv"&gt;index_type&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;overview_date_records&amp;quot;&lt;/span&gt; 
       &lt;span class="nv"&gt;node_name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;logstash_overview_date_reports&amp;quot;&lt;/span&gt;
     &lt;span class="o"&gt;}&lt;/span&gt; 
   &lt;span class="o"&gt;}&lt;/span&gt; 
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;overview_model_reports&amp;quot;&lt;/span&gt; in &lt;span class="o"&gt;[&lt;/span&gt;tags&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; 
     elasticsearch &lt;span class="o"&gt;{&lt;/span&gt; 
       &lt;span class="nv"&gt;cluster&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;elasticsearch_dashboard&amp;quot;&lt;/span&gt; 
       &lt;span class="nv"&gt;index&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; dashboard 
       &lt;span class="nv"&gt;index_type&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;overview_model_records&amp;quot;&lt;/span&gt; 
       &lt;span class="nv"&gt;node_name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;logstash_overview_model_reports&amp;quot;&lt;/span&gt;
     &lt;span class="o"&gt;}&lt;/span&gt; 
   &lt;span class="o"&gt;}&lt;/span&gt;   
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;å¯åŠ¨æµ‹è¯•&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;cd&lt;/span&gt; /data/softwares/logstash-1.4.3
$ bin/logstash -f logstash.conf
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;å®‰è£…Elasticsearch&amp;nbsp;1.4.5&lt;/h1&gt;
&lt;h2&gt;å®‰è£…éœ€è¦çš„è½¯ä»¶åŒ…&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;cd&lt;/span&gt; /data/software
$ wget https://download.elastic.co/elasticsearch/elasticsearch/elasticsearch-1.4.5.tar.gz
$ tar zxf elasticsearch-1.4.5.tar.gz
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å®‰è£…æ’ä»¶ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;cd&lt;/span&gt; /data/software &lt;span class="c1"&gt;# å®‰è£…åˆ†è¯æ’ä»¶&lt;/span&gt;
$ git clone -b 1.4.0 https://github.com/medcl/elasticsearch-rtf.git
$ &lt;span class="nb"&gt;cd&lt;/span&gt; elasticsearch-rtf
$ cp -vrf plugins/analysis-ik /data/softwares/elasticsearch-1.4.5/plugins/
$ cp -vrf config/ik config/mmseg /data/softwares/elasticsearch-1.4.5/config/


:::bash

$ &lt;span class="nb"&gt;cd&lt;/span&gt; /data/software &lt;span class="c1"&gt;# ç›‘æ§æ’ä»¶&lt;/span&gt;
$ &lt;span class="nb"&gt;cd&lt;/span&gt; elasticsearch-1.4.5
$ bin/plugin -install mobz/elasticsearch-head &lt;span class="c1"&gt;# headæ’ä»¶&lt;/span&gt;
$ bin/plugin -install lukas-vlcek/bigdesk     &lt;span class="c1"&gt;# bigdeskæ’ä»¶&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;ä¿®æ”¹é…ç½®æ–‡ä»¶&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat /data/softwares/elasticsearch-1.4.5/config/elasticsearch.yml &lt;span class="p"&gt;|&lt;/span&gt; grep -Ev &lt;span class="s1"&gt;&amp;#39;^#|^$&amp;#39;&lt;/span&gt;
cluster.name: elasticsearch_dashboard
node.name: &lt;span class="s2"&gt;&amp;quot;es1&amp;quot;&lt;/span&gt;
node.master: &lt;span class="nb"&gt;true&lt;/span&gt;
node.data: &lt;span class="nb"&gt;true&lt;/span&gt;
index.number_of_shards: 5
index.number_of_replicas: 2
path.data: /data/softwares/elasticsearch-1.4.5/data
path.work: /data/softwares/elasticsearch-1.4.5/work
path.logs: /data/log/elasticsearch
path.plugins: /data/softwares/elasticsearch-1.4.5/plugins
network.bind_host: 192.168.1.2
network.publish_host: 192.168.1.2
network.host: 192.168.1.2
transport.tcp.port: 9300
http.port: 9200
indices.recovery.max_bytes_per_sec: 200mb
indices.recovery.concurrent_streams: 8
discovery.zen.minimum_master_nodes: 2
discovery.zen.ping.timeout: 10s
discovery.zen.ping.multicast.enabled: &lt;span class="nb"&gt;true&lt;/span&gt;
discovery.zen.ping.unicast.hosts: &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;192.168.1.2&amp;quot;&lt;/span&gt;, &lt;span class="s2"&gt;&amp;quot;192.168.1.6&amp;quot;&lt;/span&gt;, &lt;span class="s2"&gt;&amp;quot;192.168.1.7&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;
index:
  analysis:
    analyzer:
      standardPlusWordDelimiter:
        type: custom
        tokenizer: standard
        filter: &lt;span class="o"&gt;[&lt;/span&gt;standard, wordDelim, lowercase, stop, dict&lt;span class="o"&gt;]&lt;/span&gt;
      ik:
        alias: &lt;span class="o"&gt;[&lt;/span&gt;ik_analyzer&lt;span class="o"&gt;]&lt;/span&gt;
        type: ik
      ik_max_word:
        type: ik
        use_smart: &lt;span class="nb"&gt;false&lt;/span&gt;
      ik_smart:
        type: ik
        use_smart: &lt;span class="nb"&gt;true&lt;/span&gt;
      pinyin_ngram_analyzer:
        type: custom
        tokenizer: my_pinyin
        filter: &lt;span class="o"&gt;[&lt;/span&gt;standard,lowercase,nGram,trim,unique&lt;span class="o"&gt;]&lt;/span&gt;     
    tokenizer:
      my_pinyin:
        type: pinyin
        first_letter: prefix
        padding_char : &lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;
    filter:
      wordDelim:
        type: word_delimiter
        preserve_original: &lt;span class="nb"&gt;true&lt;/span&gt;
      dict:
        type: dictionary_decompounder
        word_list: &lt;span class="o"&gt;[&lt;/span&gt;cool, iris, fire, bug, flag, fox, grease, monkey, flash, block, forecast, screen, grab, cookie, auto, fill, text, all, so, think, mega, upload, download, video, map, spring, fix, input, clip, fly, lang, up, down, persona, css, html, all, http, ball, firefox, bookmark, chat, zilla, edit, menu, menus, status, bar, with, easy, sync, search, google, time, window, js, super, scroll, title, close, undo, user, inspect, inspector, browser, context, dictionary, mail, button, url, password, secure, image, new, tab, delete, click, name, smart, down, manager, open, query, net, link, blog, this, color, &lt;span class="k"&gt;select&lt;/span&gt;, key, keys, foxy, translate, word&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ³¨ï¼š
1. åˆ é™¤äº†æ³¨é‡Š
2. å…¶å®ƒæœºå™¨é…ç½®æ–‡ä»¶ç±»ä¼¼ï¼Œåªéœ€è¦ä¿®æ”¹å’Œ&lt;span class="caps"&gt;IP&lt;/span&gt;ç›¸å…³çš„å­—æ®µå€¼&lt;/p&gt;
&lt;h2&gt;å¯åŠ¨Elasticsearch&lt;/h2&gt;
&lt;p&gt;æµ‹è¯•èƒ½å¦æ­£å¸¸å¯åŠ¨ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;cd&lt;/span&gt; /data/software/elasticsearch-1.4.5
$ bin/elasticsearch  &lt;span class="c1"&gt;# å¯åŠ¨ESï¼Œæµ‹è¯•æ˜¯å¦å¯ä»¥æ­£å¸¸å¯åŠ¨&lt;/span&gt;
$ tail -f /data/log/elasticsearch/elasticsearch_dashboard.log &lt;span class="c1"&gt;# æŸ¥çœ‹æ—¥å¿—&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;ç›‘æ§æ’ä»¶ä½¿ç”¨&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;head:&amp;nbsp;http://&amp;lt;your-es-ip&amp;gt;:9200/_plugin/head/&lt;/li&gt;
&lt;li&gt;bigdesk:&amp;nbsp;http://&amp;lt;your-es-ip&amp;gt;:9200/_plugin/bigdesk/&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;é…ç½®supervisor&lt;/h1&gt;
&lt;p&gt;å¦‚æœå¯ä»¥æ­£å¸¸å¯åŠ¨ï¼Œæˆ‘ä»¬é€šè¿‡supervisorç®¡ç†Elasticsearchå’ŒLogstashã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo pip install supervisor &lt;span class="c1"&gt;# åæ¥æ‹¿åˆ°rootæƒé™ï¼Œå¦åˆ™è¿˜è¦å…ˆå¼„Python virtual env&lt;/span&gt;
$ ä¿®æ”¹/etc/init.d/supervisor ä»¥åŠ chkconfig æ·»åŠ ç³»ç»Ÿå¯åŠ¨å°±ä¸è¯´äº†


:::bash

$ cat /etc/supervisor/supervisord.conf &lt;span class="p"&gt;|&lt;/span&gt; grep -Ev &lt;span class="s1"&gt;&amp;#39;^;|^$&amp;#39;&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;unix_http_server&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="nv"&gt;file&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/var/run/supervisor.sock    &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;the path to the socket file&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nv"&gt;chmod&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0700&lt;/span&gt;                       &lt;span class="p"&gt;;&lt;/span&gt; sockef file mode &lt;span class="o"&gt;(&lt;/span&gt;default 0700&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;rpcinterface:supervisor&lt;span class="o"&gt;]&lt;/span&gt;
supervisor.rpcinterface_factory &lt;span class="o"&gt;=&lt;/span&gt; supervisor.rpcinterface:make_main_rpcinterface
&lt;span class="o"&gt;[&lt;/span&gt;supervisord&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="nv"&gt;http_port&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/var/run/supervisor.sock &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;default is to run a UNIX domain socket server&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nv"&gt;logfile&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/data/log/supervisor/supervisord.log &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;main log file&lt;span class="p"&gt;;&lt;/span&gt;default &lt;span class="nv"&gt;$CWD&lt;/span&gt;/supervisord.log&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nv"&gt;logfile_maxbytes&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;50MB       &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;max main logfile bytes b4 rotation&lt;span class="p"&gt;;&lt;/span&gt;default 50MB&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nv"&gt;logfile_backups&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt;          &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;num of main logfile rotation backups&lt;span class="p"&gt;;&lt;/span&gt;default 10&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nv"&gt;loglevel&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;debug              &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;logging level&lt;span class="p"&gt;;&lt;/span&gt;default info&lt;span class="p"&gt;;&lt;/span&gt; others: debug,warn&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nv"&gt;pidfile&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/var/run/supervisord.pid &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;supervisord pidfile&lt;span class="p"&gt;;&lt;/span&gt;default supervisord.pid&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nv"&gt;nodaemon&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;false&lt;/span&gt;              &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;start in foreground &lt;span class="k"&gt;if&lt;/span&gt; true&lt;span class="p"&gt;;&lt;/span&gt;default &lt;span class="nb"&gt;false&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nv"&gt;minfds&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1024&lt;/span&gt;                 &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;min. avail startup file descriptors&lt;span class="p"&gt;;&lt;/span&gt;default 1024&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nv"&gt;minprocs&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;200&lt;/span&gt;                &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;min. avail process descriptors&lt;span class="p"&gt;;&lt;/span&gt;default 200&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nv"&gt;childlogdir&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/data/log/supervisor &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;AUTO&amp;#39;&lt;/span&gt; child log dir, default &lt;span class="nv"&gt;$TEMP&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;supervisorctl&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="nv"&gt;serverurl&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;unix:////var/run/supervisor.sock &lt;span class="p"&gt;;&lt;/span&gt; use a unix:// URL  &lt;span class="k"&gt;for&lt;/span&gt; a unix socket
&lt;span class="o"&gt;[&lt;/span&gt;include&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="nv"&gt;files&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; /etc/supervisor/conf.d/*.conf


:::bash

$ cat /etc/supervisor/conf.d/elasticsearch.conf 
&lt;span class="o"&gt;[&lt;/span&gt;program:elasticsearch&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="nv"&gt;command&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/data/softwares/elasticsearch-1.4.5/bin/elasticsearch -Xmx6g -Xms6g -XX:PermSize&lt;span class="o"&gt;=&lt;/span&gt;512m -Des.max-open-files&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;
&lt;span class="nv"&gt;directory&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/data/softwares/elasticsearch-1.4.5
&lt;span class="nv"&gt;user&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;work
&lt;span class="nv"&gt;autostart&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;
&lt;span class="nv"&gt;autorestart&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;
&lt;span class="nv"&gt;stdout_logfile&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/data/log/supervisor/elasticsearch.stdout
&lt;span class="nv"&gt;stderr_logfile&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/data/log/supervisor/elasticsearch.stderr


:::bash

$ cat /etc/supervisor/conf.d/logstash.conf 
&lt;span class="o"&gt;[&lt;/span&gt;program:logstash&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="nv"&gt;command&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/data/softwares/logstash-1.4.3/bin/logstash -f logstash.conf
&lt;span class="nv"&gt;directory&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/data/softwares/logstash-1.4.3
&lt;span class="nv"&gt;user&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;work
&lt;span class="nv"&gt;autostart&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;
&lt;span class="nv"&gt;autorestart&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;
&lt;span class="nv"&gt;stdout_logfile&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/data/log/supervisor/logstash.stdout
&lt;span class="nv"&gt;stderr_logfile&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/data/log/supervisor/logstash.stderr
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;å¸¸ç”¨çš„&lt;span class="caps"&gt;ES&lt;/span&gt;å‘½ä»¤åˆ«å&lt;/h1&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ tail -n3 ~/.bashrc 
&lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;esh&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;curl &lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;ip -4 -o addr show dev eth0 &lt;span class="p"&gt;|&lt;/span&gt; awk &lt;span class="s1"&gt;&amp;#39;{split($4,a,&amp;quot;/&amp;quot;);print a[1]}&amp;#39;&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;:9200/_cluster/health?pretty&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;esi&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;curl &lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;ip -4 -o addr show dev eth0 &lt;span class="p"&gt;|&lt;/span&gt; awk &lt;span class="s1"&gt;&amp;#39;{split($4,a,&amp;quot;/&amp;quot;);print a[1]}&amp;#39;&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;:9200/_cat/indices?pretty&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;ess&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;curl &lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;ip -4 -o addr show dev eth0 &lt;span class="p"&gt;|&lt;/span&gt; awk &lt;span class="s1"&gt;&amp;#39;{split($4,a,&amp;quot;/&amp;quot;);print a[1]}&amp;#39;&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;:9200/_cat/shards&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;esdownlocal&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;curl &lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;ip -4 -o addr show dev eth0 &lt;span class="p"&gt;|&lt;/span&gt; awk &lt;span class="s1"&gt;&amp;#39;{split($4,a,&amp;quot;/&amp;quot;);print a[1]}&amp;#39;&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;:9200/_cluster/nodes/_local/_shutdown&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;esdownall&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;curl &lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;ip -4 -o addr show dev eth0 &lt;span class="p"&gt;|&lt;/span&gt; awk &lt;span class="s1"&gt;&amp;#39;{split($4,a,&amp;quot;/&amp;quot;);print a[1]}&amp;#39;&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;:9200/_shutdown&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;å‡çº§&lt;/h1&gt;
&lt;p&gt;é€šè¿‡ä¸Šé¢æ­¥éª¤ï¼Œé…ç½®å¥½3å°Elasticsearch 1.4.5ï¼Œç„¶åï¼Œå°†è¿™ä¸‰å°&lt;span class="caps"&gt;ES&lt;/span&gt;æœºå™¨åŠ å…¥ä»¥å‰çš„Elasticsearch 1.2.1çš„é›†ç¾¤ã€‚
æ•°æ®é€æ­¥åŒæ­¥åˆ°&lt;span class="caps"&gt;ES&lt;/span&gt; 1.4.5åï¼Œé€æ­¥å°†&lt;span class="caps"&gt;ES&lt;/span&gt;&amp;nbsp;1.2.1çš„æœºå™¨åœæ‰ã€‚&lt;/p&gt;
&lt;h1&gt;ç¢°åˆ°çš„é—®é¢˜&lt;/h1&gt;
&lt;h2&gt;æ²¡æœ‰å°†shardåŒæ­¥åˆ°æ–°åŠ å…¥çš„&lt;span class="caps"&gt;ES&lt;/span&gt;&amp;nbsp;1.4.5æœºå™¨ä¸Š&lt;/h2&gt;
&lt;p&gt;ä¿®æ”¹number_of_replicasï¼Œæ ¹æ®æœºå™¨ä¸ªæ•°ä¿®æ”¹ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ curl -XPUT &lt;span class="s1"&gt;&amp;#39;&amp;lt;your-ip&amp;gt;:9200/&amp;lt;your-index&amp;gt;/_settings&amp;#39;&lt;/span&gt; -d &lt;span class="s1"&gt;&amp;#39;{&lt;/span&gt;
&lt;span class="s1"&gt;     &amp;quot;index&amp;quot; : {&lt;/span&gt;
&lt;span class="s1"&gt;         &amp;quot;number_of_replicas&amp;quot; : 2&lt;/span&gt;
&lt;span class="s1"&gt;      }&lt;/span&gt;
&lt;span class="s1"&gt;}&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ˜ç¡®è®©æŸä¸ªindexçš„æŸä¸ªshardåˆ†é…åˆ°æŒ‡å®šæœºå™¨ä¸Šã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ curl -XPOST &lt;span class="s1"&gt;&amp;#39;&amp;lt;your-es-ip&amp;gt;:9200/_cluster/reroute&amp;#39;&lt;/span&gt; -d &lt;span class="s1"&gt;&amp;#39;{&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;commands&amp;quot; : [ {&lt;/span&gt;
&lt;span class="s1"&gt;        &amp;quot;move&amp;quot; :&lt;/span&gt;
&lt;span class="s1"&gt;            {&lt;/span&gt;
&lt;span class="s1"&gt;              &amp;quot;index&amp;quot; : &amp;quot;your-index&amp;quot;, &amp;quot;shard&amp;quot; : shard-no,&lt;/span&gt;
&lt;span class="s1"&gt;              &amp;quot;from_node&amp;quot; : &amp;quot;es-node-name&amp;quot;, &amp;quot;to_node&amp;quot; : &amp;quot;es-node-name&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;            }&lt;/span&gt;
&lt;span class="s1"&gt;        },&lt;/span&gt;
&lt;span class="s1"&gt;        {&lt;/span&gt;
&lt;span class="s1"&gt;          &amp;quot;allocate&amp;quot; : {&lt;/span&gt;
&lt;span class="s1"&gt;              &amp;quot;index&amp;quot; : &amp;quot;your-index&amp;quot;, &amp;quot;shard&amp;quot; : shard-no, &amp;quot;node&amp;quot; : &amp;quot;es-node-name&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;          }&lt;/span&gt;
&lt;span class="s1"&gt;        }&lt;/span&gt;
&lt;span class="s1"&gt;    ]&lt;/span&gt;
&lt;span class="s1"&gt;}&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ¯”å¦‚ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ curl -XPOST &lt;span class="s1"&gt;&amp;#39;localhost:9200/_cluster/reroute&amp;#39;&lt;/span&gt; -d &lt;span class="s1"&gt;&amp;#39;{&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;commands&amp;quot; : [ {&lt;/span&gt;
&lt;span class="s1"&gt;        &amp;quot;move&amp;quot; :&lt;/span&gt;
&lt;span class="s1"&gt;            {&lt;/span&gt;
&lt;span class="s1"&gt;              &amp;quot;index&amp;quot; : &amp;quot;logstash_v1_new&amp;quot;, &amp;quot;shard&amp;quot; : 4,&lt;/span&gt;
&lt;span class="s1"&gt;              &amp;quot;from_node&amp;quot; : &amp;quot;Yojimbo&amp;quot;, &amp;quot;to_node&amp;quot; : &amp;quot;es3&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;            }&lt;/span&gt;
&lt;span class="s1"&gt;        },&lt;/span&gt;
&lt;span class="s1"&gt;        {&lt;/span&gt;
&lt;span class="s1"&gt;          &amp;quot;allocate&amp;quot; : {&lt;/span&gt;
&lt;span class="s1"&gt;              &amp;quot;index&amp;quot; : &amp;quot;logstash_v1_new&amp;quot;, &amp;quot;shard&amp;quot; : 4, &amp;quot;node&amp;quot; : &amp;quot;es2&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;          }&lt;/span&gt;
&lt;span class="s1"&gt;        }&lt;/span&gt;
&lt;span class="s1"&gt;    ]&lt;/span&gt;
&lt;span class="s1"&gt;}&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å‚è€ƒï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href="http://stackoverflow.com/questions/23656458/elasticsearch-what-to-do-with-unassigned-shards/"&gt;http://stackoverflow.com/questions/23656458/elasticsearch-what-to-do-with-unassigned-shards/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://stackoverflow.com/questions/25135869/how-to-rebalance-shard-elasticsearch"&gt;http://stackoverflow.com/questions/25135869/how-to-rebalance-shard-elasticsearch&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://t37.net/how-to-fix-your-elasticsearch-cluster-stuck-in-initializing-shards-mode.html"&gt;https://t37.net/how-to-fix-your-elasticsearch-cluster-stuck-in-initializing-shards-mode.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://stackoverflow.com/questions/19967472/elasticsearch-unassigned-shards-how-to-fix"&gt;http://stackoverflow.com/questions/19967472/elasticsearch-unassigned-shards-how-to-fix&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;</summary><category term="Dashboard"></category><category term="Elasticsearch"></category><category term="Logstash"></category><category term="ELK"></category></entry><entry><title>Install Nagios 4 onÂ Ubuntu/Debian</title><link href="http://blog.wiseturtles.com/posts/install-nagios4-on-ubuntu-or-debian.html" rel="alternate"></link><published>2015-05-23T00:00:00+08:00</published><author><name>Zhang Wanming</name></author><id>tag:blog.wiseturtles.com,2015-05-23:posts/install-nagios4-on-ubuntu-or-debian.html</id><summary type="html">&lt;p&gt;Ucloudåå°ç›‘æ§ç³»ç»ŸåŠŸèƒ½å¾ˆç®€å•ï¼Œæœ€è¿‘å‘ç°ä¹‹å‰è®¾ç½®è¿‡çš„ç›‘æ§é¡¹ä¹Ÿæ— æ³•æ­£å¸¸æ˜¾ç¤ºï¼Œæ›´ä¸èƒ½ç¼–è¾‘äº†ã€‚&amp;nbsp;è™½ç„¶ï¼Œé©¬ä¸Šå°±è¦å°†ç³»ç»Ÿè¿ç§»åˆ°å…¬å¸è‡ªå·±å¤§å®¶çš„äº‘å¹³å°ï¼Œä½†ï¼Œæœ€è¿‘UcloudæœåŠ¡å™¨å‹åŠ›å¾ˆå¤§ï¼Œå‘¨æœ«æŠ½ç©ºå…ˆå°†Nagiosæ­å»ºèµ·æ¥ï¼Œè®©è‡ªå·±èƒ½åŠæ—¶æ”¶åˆ°æŠ¥è­¦ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬UcloudæœåŠ¡å™¨éƒ½ç”¨çš„Debian 7 (wheezy)ï¼Œæºé‡Œåªæœ‰nagios3ï¼Œæ‰€ä»¥ï¼Œè‡ªå·±ç¼–è¯‘ã€å®‰è£…Nagios&amp;nbsp;4ã€‚&lt;/p&gt;
&lt;h1&gt;ç›‘æ§ä¸»æœºå®‰è£…Nagios&lt;/h1&gt;
&lt;h2&gt;å®‰è£…éœ€è¦çš„è½¯ä»¶åŒ…&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt-get install build-essential libgd2-xpm-dev openssl libssl-dev apache2 php5 libapache2-mod-php5 apache2-utils postfix
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;åˆ›å»ºç”¨æˆ·ã€ç»„&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo useradd nagios
$ sudo groupadd nagcmd
$ sudo usermod -a -G nagcmd nagios
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;å®‰è£…nagios&amp;nbsp;4&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;cd&lt;/span&gt; /data/software
$ wget http://prdownloads.sourceforge.net/sourceforge/nagios/nagios-4.0.8.tar.gz
$ tar zxf nagios-4.0.8.tar.gz
$ &lt;span class="nb"&gt;cd&lt;/span&gt; nagios-4.0.8
$ ./configure --with-nagios-group&lt;span class="o"&gt;=&lt;/span&gt;nagios --with-command-group&lt;span class="o"&gt;=&lt;/span&gt;nagcmd --with-mail&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;which sendmail&lt;span class="k"&gt;)&lt;/span&gt;
$ sudo make all
$ sudo make install &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; make install-commandmode &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; make install-init &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; make install-config
$ sudo ln -s /etc/init.d/nagios /etc/rcS.d/S99nagios &lt;span class="c1"&gt;# å¼€æœºè‡ªå¯åŠ¨&lt;/span&gt;
$ sudo service nagios restart
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;é…ç½®apache2&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo /usr/bin/install -c -m &lt;span class="m"&gt;644&lt;/span&gt; sample-config/httpd.conf /etc/apache2/sites-available/nagios.conf
$ sudo ln -s /etc/apache2/sites-available/nagios.conf /etc/apache2/sites-enabled/
$ sudo a2enmod rewrite
$ sudo a2enmod cgi
$ sudo htpasswd -c /usr/local/nagios/etc/htpasswd.users nagiosadmin
$ sudo service apache2 restart
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æµè§ˆå™¨è®¿é—® http://ç›‘æ§ä¸»æœº&lt;span class="caps"&gt;IP&lt;/span&gt;/nagios æŸ¥çœ‹ç›‘æ§æƒ…å†µ, ç™»å½•ç”¨æˆ·åã€å¯†ç å°±æ˜¯ htpasswd è®¾ç½®çš„ã€‚
nagios 4å°†è¢«å®‰è£…åˆ° /usr/local/nagios ç›®å½•ï¼Œè¯¥ç›®å½•ä¸‹çš„ etc&amp;nbsp;æ˜¯é…ç½®æ–‡ä»¶å¤¹ã€‚&lt;/p&gt;
&lt;h2&gt;å®‰è£…nagios-plugins-2.0.3&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;cd&lt;/span&gt; /data/software
$ wget https://nagios-plugins.org/download/nagios-plugins-2.0.3.tar.gz
$ tar zxf nagios-plugins-2.0.3.tar.gz
$ &lt;span class="nb"&gt;cd&lt;/span&gt; nagios-plugins-2.0.3
$ ./configure --with-nagios-user&lt;span class="o"&gt;=&lt;/span&gt;nagios --with-nagios-group&lt;span class="o"&gt;=&lt;/span&gt;nagios --with-openssl
$ make all &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; make install
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;nagios-plugins å‘½ä»¤å®‰è£…åœ¨ /usr/local/nagios/libexec&amp;nbsp;ç›®å½•ã€‚&lt;/p&gt;
&lt;h2&gt;å®‰è£…nagios-nrpe-2.15&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;cd&lt;/span&gt; /data/software
$ wget -O nrpe-2.15.tar.gz &lt;span class="s2"&gt;&amp;quot;http://downloads.sourceforge.net/project/nagios/nrpe-2.x/nrpe-2.15/nrpe-2.15.tar.gz?r=http%3A%2F%2Fsourceforge.net%2Fprojects%2Fnagios%2Ffiles%2Fnrpe-2.x%2Fnrpe-2.15%2F&amp;amp;ts=1432369927&amp;amp;use_mirror=liquidtelecom&amp;quot;&lt;/span&gt;
$ tar zxf nrpe-2.15.tar.gz
$ &lt;span class="nb"&gt;cd&lt;/span&gt; nrpe-2.15
$ ./configure --with-nagios-user&lt;span class="o"&gt;=&lt;/span&gt;nagios --with-nagios-group&lt;span class="o"&gt;=&lt;/span&gt;nagios --with-ssl&lt;span class="o"&gt;=&lt;/span&gt;/usr/bin/openssl --with-ssl-lib&lt;span class="o"&gt;=&lt;/span&gt;/usr/lib/x86_64-linux-gnu 
$ make all
$ find -iname &lt;span class="s1"&gt;&amp;#39;check_nrpe&amp;#39;&lt;/span&gt;
$ sudo /usr/bin/install -c -m &lt;span class="m"&gt;755&lt;/span&gt; ./src/check_nrpe /usr/local/nagios/libexec/
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æµ‹è¯•æ˜¯å¦å¯ä»¥å·¥ä½œ:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ /usr/local/nagios/libexec/check_nrpe -H 10.4.2.2 &lt;span class="c1"&gt;# è¯¥IPæ˜¯è¢«ç›‘æ§ä¸»æœºçš„IP&lt;/span&gt;
NRPE v2.13
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;è¢«ç›‘æ§ä¸»æœºå®‰è£…Nagios &lt;span class="caps"&gt;NRPE&lt;/span&gt;&lt;/h1&gt;
&lt;p&gt;å®‰è£…nagios-plugins,&amp;nbsp;nagios-nrpe-server&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt-get install nagios-plugins nagios-nrpe-server
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;é…ç½®nagios-nrpe-serverï¼Œå…è®¸ç›‘æ§ä¸»æœºè¿æ¥è¯¥è¢«ç›‘æ§ä¸»æœºã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo vim /etc/nagios/nrpe.cfg
$ å°† ç›‘æ§ä¸»æœºIP å¡«å…¥ allowed_hosts å­—æ®µï¼Œå¦‚: &lt;span class="nv"&gt;allowed_hosts&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;127.0.0.1,10.4.22.22
$ sudo service nagios-nrpe-server restart
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;é…ç½®&lt;/h1&gt;
&lt;h2&gt;é…ç½®ç›‘æ§ä¸»æœº&lt;/h2&gt;
&lt;p&gt;/usr/local/nagios/etc/nagios.cfg&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ diff -u nagios.cfg.back nagios.cfg
--- nagios.cfg.back2015-05-23 11:07:51.436491931 +0800
+++ nagios.cfg2015-05-23 22:08:09.872618927 +0800
@@ -30,6 +30,9 @@
&lt;span class="nv"&gt;cfg_file&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/usr/local/nagios/etc/objects/contacts.cfg
&lt;span class="nv"&gt;cfg_file&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/usr/local/nagios/etc/objects/timeperiods.cfg
&lt;span class="nv"&gt;cfg_file&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/usr/local/nagios/etc/objects/templates.cfg
+cfg_file&lt;span class="o"&gt;=&lt;/span&gt;/usr/local/nagios/etc/objects/hosts.cfg
+cfg_file&lt;span class="o"&gt;=&lt;/span&gt;/usr/local/nagios/etc/objects/groups.cfg
+cfg_file&lt;span class="o"&gt;=&lt;/span&gt;/usr/local/nagios/etc/objects/services.cfg

&lt;span class="c1"&gt;# Definitions for monitoring the local (Linux) host&lt;/span&gt;
&lt;span class="nv"&gt;cfg_file&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/usr/local/nagios/etc/objects/localhost.cfg
@@ -1174,7 +1177,7 @@
&lt;span class="c1"&gt;# using the $ADMINEMAIL$ and $ADMINPAGER$ macros in your notification&lt;/span&gt;
&lt;span class="c1"&gt;# commands.&lt;/span&gt;

-admin_email&lt;span class="o"&gt;=&lt;/span&gt;nagios@localhost
+admin_email&lt;span class="o"&gt;=&lt;/span&gt;your-emai-address
&lt;span class="nv"&gt;admin_pager&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;pagenagios@localhost
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;/usr/local/nagios/etc/objects/hosts.cfg&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="c1"&gt;# Define a host for the local machine&lt;/span&gt;
&lt;span class="c1"&gt;##############&lt;/span&gt;
&lt;span class="c1"&gt;# appstore01 #&lt;/span&gt;
&lt;span class="c1"&gt;##############&lt;/span&gt;
define host&lt;span class="o"&gt;{&lt;/span&gt;
    use                             linux-server  &lt;span class="p"&gt;;&lt;/span&gt; Name of host template to use
                                    &lt;span class="p"&gt;;&lt;/span&gt; This host definition will inherit all variables that are defined
                                    &lt;span class="p"&gt;;&lt;/span&gt; in &lt;span class="o"&gt;(&lt;/span&gt;or inherited by&lt;span class="o"&gt;)&lt;/span&gt; the linux-server host template definition.
    host_name                       appstore01
    &lt;span class="nb"&gt;alias&lt;/span&gt;                           appstore01 on ucloud
    address                         10.4.2.2
    &lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="c1"&gt;##############&lt;/span&gt;
&lt;span class="c1"&gt;# appstore02 #&lt;/span&gt;
&lt;span class="c1"&gt;##############&lt;/span&gt;
define host&lt;span class="o"&gt;{&lt;/span&gt;
    use                             linux-server  &lt;span class="p"&gt;;&lt;/span&gt; Name of host template to use
                                    &lt;span class="p"&gt;;&lt;/span&gt; This host definition will inherit all variables that are defined
                                    &lt;span class="p"&gt;;&lt;/span&gt; in &lt;span class="o"&gt;(&lt;/span&gt;or inherited by&lt;span class="o"&gt;)&lt;/span&gt; the linux-server host template definition.
    host_name                       appstore02
    &lt;span class="nb"&gt;alias&lt;/span&gt;                           appstore02 on ucloud
    address                         10.4.2.22
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;/usr/local/nagios/etc/objects/groups.cfg&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Define an optional hostgroup for Linux machines&lt;/span&gt;
define hostgroup&lt;span class="o"&gt;{&lt;/span&gt;
    hostgroup_name  appstore-group &lt;span class="p"&gt;;&lt;/span&gt; The name of the hostgroup
    &lt;span class="nb"&gt;alias&lt;/span&gt;           appstore server group &lt;span class="p"&gt;;&lt;/span&gt; Long name of the group
    members         appstore01,appstore02     &lt;span class="p"&gt;;&lt;/span&gt; Comma separated list of hosts that belong to this group
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;/etc/local/nagios/etc/objects/commands.cfg&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ diff -u objects/commands.cfg.back objects/commands.cfg
+########################
+# add by zhang wanming &lt;span class="c1"&gt;#&lt;/span&gt;
+########################
+# &lt;span class="s1"&gt;&amp;#39;check_mysql&amp;#39;&lt;/span&gt; &lt;span class="nb"&gt;command&lt;/span&gt; definition
+define command&lt;span class="o"&gt;{&lt;/span&gt;
+   command_name    check_mysql
+   command_line    &lt;span class="nv"&gt;$USER1&lt;/span&gt;$/check_mysql -H &lt;span class="nv"&gt;$HOSTADDRESS&lt;/span&gt;$ -u &lt;span class="nv"&gt;$ARG1&lt;/span&gt;$ -p &lt;span class="nv"&gt;$ARG2&lt;/span&gt;$ -d &lt;span class="nv"&gt;$ARG3&lt;/span&gt;$ -P 3306
+   &lt;span class="o"&gt;}&lt;/span&gt;

+# &lt;span class="s1"&gt;&amp;#39;check_http_with_url_port&amp;#39;&lt;/span&gt; &lt;span class="nb"&gt;command&lt;/span&gt; definition
+define command&lt;span class="o"&gt;{&lt;/span&gt;
+        command_name    check_http_with_url_port
+        command_line    &lt;span class="nv"&gt;$USER1&lt;/span&gt;$/check_http -I &lt;span class="nv"&gt;$HOSTADDRESS&lt;/span&gt;$ -u &lt;span class="nv"&gt;$ARG1&lt;/span&gt;$ -p &lt;span class="nv"&gt;$ARG2&lt;/span&gt;$
+        &lt;span class="o"&gt;}&lt;/span&gt;
+
+# &lt;span class="s1"&gt;&amp;#39;check_nrpe&amp;#39;&lt;/span&gt; &lt;span class="nb"&gt;command&lt;/span&gt; definition
+define command&lt;span class="o"&gt;{&lt;/span&gt;
+        command_name check_nrpe
+        command_line &lt;span class="nv"&gt;$USER1&lt;/span&gt;$/check_nrpe -H &lt;span class="nv"&gt;$HOSTADDRESS&lt;/span&gt;$ -c &lt;span class="nv"&gt;$ARG1&lt;/span&gt;$
+        &lt;span class="o"&gt;}&lt;/span&gt;
+
+# &lt;span class="s1"&gt;&amp;#39;check_memcached&amp;#39;&lt;/span&gt; &lt;span class="nb"&gt;command&lt;/span&gt; definition
+define command&lt;span class="o"&gt;{&lt;/span&gt;
+        command_name check_memcached
+        command_line &lt;span class="nv"&gt;$USER1&lt;/span&gt;$/check_tcp -H &lt;span class="nv"&gt;$HOSTADDRESS&lt;/span&gt;$ -p &lt;span class="m"&gt;11211&lt;/span&gt; -t &lt;span class="m"&gt;5&lt;/span&gt; -E -s &lt;span class="s1"&gt;&amp;#39;stats\r\nquit\r\n&amp;#39;&lt;/span&gt; -e &lt;span class="s1"&gt;&amp;#39;uptime&amp;#39;&lt;/span&gt; -M crit
+        &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;/etc/local/nagios/etc/objects/services.cfg&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat objects/services.cfg 
define service &lt;span class="o"&gt;{&lt;/span&gt;
        use                             generic-service
        hostgroup_name                  appstore-group
        service_description             PING
        check_command                   check_ping!100.0,20%!500.0,60%
&lt;span class="o"&gt;}&lt;/span&gt;

define service &lt;span class="o"&gt;{&lt;/span&gt;
        use                             generic-service
        hostgroup_name                  appstore-group
        service_description             SSH
        check_command                   check_ssh!-p 1122
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="c1"&gt;#################&lt;/span&gt;
&lt;span class="c1"&gt;# HTTP services #&lt;/span&gt;
&lt;span class="c1"&gt;#################&lt;/span&gt;
define service &lt;span class="o"&gt;{&lt;/span&gt;
        use                             generic-service
        hostgroup_name                  appstore-group
        service_description             Nginx
        check_command                   check_http
&lt;span class="o"&gt;}&lt;/span&gt;

define service &lt;span class="o"&gt;{&lt;/span&gt;
        use                             generic-service
        hostgroup_name                  appstore-group
        service_description             check http tdnaceweb
        check_command                   check_nrpe!check_http_tdanceweb
&lt;span class="o"&gt;}&lt;/span&gt;

define service &lt;span class="o"&gt;{&lt;/span&gt;
        use                             generic-service
        hostgroup_name                  appstore-group
        service_description             check http appstore
        check_command                   check_nrpe!check_http_appstore
&lt;span class="o"&gt;}&lt;/span&gt;

define service &lt;span class="o"&gt;{&lt;/span&gt;
        use                             generic-service
        hostgroup_name                  appstore-group
        service_description             check http launcher
        check_command                   check_nrpe!check_http_launcher
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="c1"&gt;#########&lt;/span&gt;
&lt;span class="c1"&gt;# Redis #&lt;/span&gt;
&lt;span class="c1"&gt;#########&lt;/span&gt;
define service &lt;span class="o"&gt;{&lt;/span&gt;
        use                             generic-service
        hostgroup_name                  appstore-group
        service_description             Redis
        check_command                   check_nrpe!check_redis
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="c1"&gt;#############&lt;/span&gt;
&lt;span class="c1"&gt;# Memcached #&lt;/span&gt;
&lt;span class="c1"&gt;#############&lt;/span&gt;
define service &lt;span class="o"&gt;{&lt;/span&gt;
        use                             generic-service
        hostgroup_name                  appstore-group
        service_description             Memcached
        check_command                   check_nrpe!check_memcached
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="c1"&gt;#########&lt;/span&gt;
&lt;span class="c1"&gt;# MySQL #&lt;/span&gt;
&lt;span class="c1"&gt;#########&lt;/span&gt;
define service &lt;span class="o"&gt;{&lt;/span&gt;
        use                             generic-service
        host_name                       appstore01
        service_description             MySQL
        check_command                   check_nrpe!check_mysql
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="c1"&gt;################&lt;/span&gt;
&lt;span class="c1"&gt;# disk/partion #&lt;/span&gt;
&lt;span class="c1"&gt;################&lt;/span&gt;
define service &lt;span class="o"&gt;{&lt;/span&gt;
        use                             generic-service
        hostgroup_name                  appstore-group
        service_description             check root disk
        check_command                   check_nrpe!check_disk_root
&lt;span class="o"&gt;}&lt;/span&gt;

define service &lt;span class="o"&gt;{&lt;/span&gt;
        use                             generic-service
        hostgroup_name                  appstore-group
        service_description             check root data
        check_command                   check_nrpe!check_disk_data
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;é…ç½®è¢«ç›‘æ§ä¸»æœº&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat /etc/nagios/nrpe_local.cfg 
&lt;span class="c1"&gt;######################################&lt;/span&gt;
&lt;span class="c1"&gt;# Do any local nrpe configuration here&lt;/span&gt;
&lt;span class="c1"&gt;######################################&lt;/span&gt;
command&lt;span class="o"&gt;[&lt;/span&gt;check_disk_root&lt;span class="o"&gt;]=&lt;/span&gt;/usr/lib/nagios/plugins/check_disk -w 25% -c 10% -p /
command&lt;span class="o"&gt;[&lt;/span&gt;check_disk_data&lt;span class="o"&gt;]=&lt;/span&gt;/usr/lib/nagios/plugins/check_disk -w 25% -c 10% -p /data
command&lt;span class="o"&gt;[&lt;/span&gt;check_redis&lt;span class="o"&gt;]=&lt;/span&gt;/usr/lib/nagios/plugins/check_tcp -H localhost -p &lt;span class="m"&gt;6379&lt;/span&gt; -t &lt;span class="m"&gt;5&lt;/span&gt; -E -s &lt;span class="s1"&gt;&amp;#39;info\r\n&amp;#39;&lt;/span&gt; -q &lt;span class="s1"&gt;&amp;#39;quit\r\n&amp;#39;&lt;/span&gt; -e &lt;span class="s1"&gt;&amp;#39;uptime_in_days&amp;#39;&lt;/span&gt; -M crit
command&lt;span class="o"&gt;[&lt;/span&gt;check_memcached&lt;span class="o"&gt;]=&lt;/span&gt;/usr/lib/nagios/plugins/check_tcp -H localhost -p &lt;span class="m"&gt;11211&lt;/span&gt; -t &lt;span class="m"&gt;5&lt;/span&gt; -E -s &lt;span class="s1"&gt;&amp;#39;stats\r\nquit\r\n&amp;#39;&lt;/span&gt; -e &lt;span class="s1"&gt;&amp;#39;uptime&amp;#39;&lt;/span&gt; -M crit
command&lt;span class="o"&gt;[&lt;/span&gt;check_mysql&lt;span class="o"&gt;]=&lt;/span&gt;/usr/lib/nagios/plugins/check_mysql -H localhost -u user -p passwd -d your-database
command&lt;span class="o"&gt;[&lt;/span&gt;check_http_tdanceweb&lt;span class="o"&gt;]=&lt;/span&gt;/usr/lib/nagios/plugins/check_http -H localhost -p &lt;span class="m"&gt;6688&lt;/span&gt; -t 3
command&lt;span class="o"&gt;[&lt;/span&gt;check_http_appstore&lt;span class="o"&gt;]=&lt;/span&gt;/usr/lib/nagios/plugins/check_http -H localhost -p &lt;span class="m"&gt;8888&lt;/span&gt; -t &lt;span class="m"&gt;3&lt;/span&gt; -u /m3/subjects
command&lt;span class="o"&gt;[&lt;/span&gt;check_http_launcher&lt;span class="o"&gt;]=&lt;/span&gt;/usr/lib/nagios/plugins/check_http -H localhost -p &lt;span class="m"&gt;9999&lt;/span&gt; -t 3
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;é…ç½®è¿‡ç¨‹ä¸­ç¢°åˆ°çš„é—®é¢˜&lt;/h1&gt;
&lt;h2&gt;ç›‘æ§æœåŠ¡å™¨ä¸Šæ²¡æœ‰check_nrpeå‘½ä»¤&lt;/h2&gt;
&lt;p&gt;å¦‚æœæ²¡æœ‰å®‰è£…nrpeï¼Œè¯·ä¸‹è½½ã€ç¼–è¯‘ã€å®‰è£…ï¼Œè¯·å‚è€ƒ&amp;nbsp;å®‰è£…nagios-nrpe-2.15&lt;/p&gt;
&lt;h2&gt;CHECK_NRPE: Error - Could not complete &lt;span class="caps"&gt;SSL&lt;/span&gt;&amp;nbsp;handshake.&lt;/h2&gt;
&lt;p&gt;ç¼–è¾‘/etc/nagios/nrpe.cfg, ç¡®å®š allowed_hosts ä¸­åŠ å…¥ç›‘æ§ä¸»æœº&lt;span class="caps"&gt;IP&lt;/span&gt;ï¼Œå¤šä¸ª&lt;span class="caps"&gt;IP&lt;/span&gt;ä»¥ &amp;#8220;,&amp;#8221; åˆ†éš”ã€‚
å¦‚:&amp;nbsp;allowed_hosts=127.0.0.1,10.4.13.14&lt;/p&gt;
&lt;p&gt;ç„¶åï¼Œé‡æ–°åŠ è½½ nagios-nrpe-server&amp;nbsp;é…ç½®æ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ service nagios-nrpe-server reload
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä¸‹æ¬¡å†å­¦ä¹ å¹¶è¡¥å……è”ç³»äººåŠæŠ¥è­¦ç›¸å…³è®¾ç½®ã€‚&lt;/p&gt;
&lt;p&gt;å‚è€ƒï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href="https://www.digitalocean.com/community/tutorials/how-to-install-nagios-4-and-monitor-your-servers-on-ubuntu-14-04"&gt;https://www.digitalocean.com/community/tutorials/how-to-install-nagios-4-and-monitor-your-servers-on-ubuntu-14-04&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://netkiller.github.io/monitoring/nagios/"&gt;http://netkiller.github.io/monitoring/nagios/&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;</summary><category term="Ubuntu"></category><category term="Debian"></category><category term="Monitor"></category><category term="Management"></category></entry><entry><title>Pythonä¸‹è½½å¤§æ–‡ä»¶</title><link href="http://blog.wiseturtles.com/posts/python-download-large-file-without-out-of-memory.html" rel="alternate"></link><published>2015-05-22T00:00:00+08:00</published><author><name>Zhang Wanming</name></author><id>tag:blog.wiseturtles.com,2015-05-22:posts/python-download-large-file-without-out-of-memory.html</id><summary type="html">&lt;h2&gt;requests&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;download_file&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;span class="n"&gt;local_filename&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="c1"&gt;# NOTE the stream=True parameter&lt;/span&gt;
&lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;requests&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;stream&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;local_filename&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;wb&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;chunk&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;iter_content&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;chunk_size&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1024&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt; 
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;chunk&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="c1"&gt;# filter out keep-alive new chunks&lt;/span&gt;
            &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;chunk&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;flush&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;local_filename&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;urllib2&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;file&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;urllib2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;urlopen&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;url&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;filename&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;w&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;tmp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;file&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1024&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;tmp&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="k"&gt;break&lt;/span&gt; 
        &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tmp&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¯¦è§:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;http://stackoverflow.com/questions/16694907/how-to-download-large-file-in-python-with-requests-py&lt;/li&gt;
&lt;li&gt;http://stackoverflow.com/questions/27053028/how-to-download-large-file-without-memoryerror-in-python&lt;/li&gt;
&lt;/ol&gt;</summary><category term="Python"></category><category term="OOM"></category></entry><entry><title>ä»æºç ç¼–è¯‘å®‰è£…vimÂ 7.4</title><link href="http://blog.wiseturtles.com/posts/build-vim-7.4.html" rel="alternate"></link><published>2015-03-07T00:15:00+08:00</published><author><name>Zhang Wanming</name></author><id>tag:blog.wiseturtles.com,2015-03-07:posts/build-vim-7.4.html</id><summary type="html">&lt;h3&gt;å‡†å¤‡ç¼–è¯‘ç¯å¢ƒ&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    $ sudo apt-get build-dep vim
    $ sudo apt-get install libncurses5-dev libgnome2-dev libgnomeui-dev \
            libgtk2.0-dev libatk1.0-dev libbonoboui2-dev \
            libcairo2-dev libx11-dev libxpm-dev libxt-dev python-dev \
            ruby-dev mercurial
    $ sudo apt-get install checkinstall
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;åˆ é™¤ç³»ç»ŸvimåŒ…&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    $ sudo apt-get purge vim-tiny vim-common vim-runtime vim
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;ä¸‹è½½ç¼–è¯‘&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    $ hg clone https://code.google.com/p/vim/
    $ cd vim
    $ ./configure --with-features=huge \
      --enable-multibyte \
      --enable-perlinterp=dynamic \
      --enable-pythoninterp=dynamic \
      --enable-rubyinterp=dynamic \
      --enable-luainterp --with-lua-prefix=/usr \
      --with-python-config-dir=/usr/lib/python2.7/config \
      --enable-gui=auto \
      --enable-gtk2-check \
      --enable-gnome-check \
      --enable-cscope \
      --with-x \
      --prefix=/usr
    $ make VIMRUNTIMEDIR=/usr/share/vim/vim74
    $ sudo checkinstall
    $ vim --version
    $ sudo update-alternatives --install /usr/bin/editor editor /usr/bin/vim 1
    $ sudo update-alternatives --set editor /usr/bin/vim
    $ sudo update-alternatives --install /usr/bin/vi vi /usr/bin/vim 1
    $ sudo update-alternatives --set vi /usr/bin/vim
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;å‘&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Ubuntuç³»ç»ŸåŒ…ä¸­çš„vimå¤ªè€äº†&lt;/li&gt;
&lt;li&gt;æµªè´¹ç”Ÿå‘½çš„å¯¡å¦‡ç‹&lt;/li&gt;
&lt;li&gt;./configure &amp;#8212;with-luajit&amp;nbsp;æ€»å¤±è´¥ï¼Œæœ€åç›´æ¥å»æ‰&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;æ”¶è·&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;checkinstall&amp;nbsp;æ˜¯ä¸ªå¥½ä¸œè¥¿&lt;/li&gt;
&lt;/ol&gt;</summary><category term="vim"></category><category term="ubuntu"></category></entry><entry><title>Flaskä¸­é€šè¿‡fileConfigé…ç½®å¤šä¸ªlogger</title><link href="http://blog.wiseturtles.com/posts/flask-logging.html" rel="alternate"></link><published>2015-02-11T00:05:00+08:00</published><author><name>crazygit</name></author><id>tag:blog.wiseturtles.com,2015-02-11:posts/flask-logging.html</id><summary type="html">&lt;h2&gt;Flaskä¸­å¦‚ä½•é€šè¿‡é…ç½®æ–‡ä»¶é…ç½®logger&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;åˆ›å»º&lt;code&gt;app.py&lt;/code&gt;æ–‡ä»¶&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="n"&gt;cat&lt;/span&gt; &lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;py&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;flask&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Flask&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;logging&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;logging.config&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;configure_logger&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;logging&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;config&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fileConfig&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;log.conf&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="c1"&gt;# è·å–å½“å‰æ‰€æœ‰çš„logger&lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="n"&gt;logging&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;manager&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;loggerDict&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;keys&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;logger start&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;app_factory&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;app&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Flask&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;root&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;configure_logger&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;app&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åˆ›å»º&lt;code&gt;run.py&lt;/code&gt;æ–‡ä»¶&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="n"&gt;cat&lt;/span&gt; &lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;py&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;app&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;app_factory&lt;/span&gt;

&lt;span class="n"&gt;app&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;app_factory&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="nd"&gt;@app.route&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;index&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;index&amp;quot;&lt;/span&gt;

&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;__name__&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;__main__&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;debug&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åˆ›å»ºloggerçš„é…ç½®æ–‡ä»¶&lt;code&gt;log.conf&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat log.conf
&lt;span class="c1"&gt;# https://docs.python.org/2/library/logging.config.html#logging-config-fileformat&lt;/span&gt;

&lt;span class="c1"&gt;# configure loggers&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;loggers&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="nv"&gt;keys&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;root, other_logger

&lt;span class="o"&gt;[&lt;/span&gt;logger_root&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="nv"&gt;level&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;DEBUG
&lt;span class="nv"&gt;handlers&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;root_handler
&lt;span class="nv"&gt;qualname&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;root

&lt;span class="o"&gt;[&lt;/span&gt;logger_other_logger&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="nv"&gt;level&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;DEBUG
&lt;span class="nv"&gt;handlers&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;root_handler
&lt;span class="nv"&gt;qualname&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;root.other_logger

&lt;span class="c1"&gt;# configure handlers&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;handlers&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="nv"&gt;keys&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;root_handler

&lt;span class="o"&gt;[&lt;/span&gt;handler_root_handler&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="nv"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;FileHandler
&lt;span class="nv"&gt;level&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;INFO
&lt;span class="nv"&gt;formatter&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;root_formatter
&lt;span class="nv"&gt;args&lt;/span&gt;&lt;span class="o"&gt;=(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;app.log&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;w+&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# configure formatters&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;formatters&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="nv"&gt;keys&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;root_formatter

&lt;span class="o"&gt;[&lt;/span&gt;formatter_root_formatter&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="nv"&gt;format&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;%&lt;span class="o"&gt;(&lt;/span&gt;asctime&lt;span class="o"&gt;)&lt;/span&gt;s %&lt;span class="o"&gt;(&lt;/span&gt;levelname&lt;span class="o"&gt;)&lt;/span&gt;s %&lt;span class="o"&gt;(&lt;/span&gt;message&lt;span class="o"&gt;)&lt;/span&gt;s
&lt;span class="nv"&gt;datefmt&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;
&lt;span class="nv"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;logging.Formatter
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è¿è¡Œ&lt;code&gt;run.py&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ python run.py 
&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;root&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;root.other_logger&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;root&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;root.other_logger&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¯ä»¥çœ‹å‡ºå½“å‰å·²ç»é…ç½®äº†ä¸¤ä¸ªlogger&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Flaskä¸­çš„é»˜è®¤loggerå&lt;/p&gt;
&lt;p&gt;Flaské»˜è®¤ä»¥import_nameä½œä¸ºloggerçš„é»˜è®¤å&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;app = Flask(&amp;#39;root&amp;#39;)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æœ¬ä¾‹å°±æ˜¯ä»¥rootä½œä¸ºloggeråå­—ï¼Œå¹¶é…ç½®äº†æ–°çš„logger:&amp;nbsp;root.other_logger,&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨å»ºè®®&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸ºFlaské…ç½®å¤šä¸ªæ¨¡å—æ—¶ï¼Œå»ºè®®é€šè¿‡è®¾ç½®&amp;#8217;qualname&amp;#8217;ä¸º&amp;#8217;import_name.sub_name&amp;#8217;åšä¸ºæ–°çš„loggerå,&lt;/li&gt;
&lt;li&gt;levelè®¾ç½®æ—¶, loggerçš„levelç­‰çº§åº”è¯¥å°äºhandlerçš„levelç­‰çº§ï¼Œæœ€ç»ˆæ˜¯ä»¥handlerçš„è®¾ç½®ä¸ºå‡†ï¼Œ&amp;nbsp;åä¹‹ï¼Œåˆ™èµ·ä½œç”¨çš„æ˜¯loggerçš„level&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;</summary><category term="flask"></category><category term="logging"></category></entry><entry><title>CentOSä¸Šå®‰è£…Supervisor</title><link href="http://blog.wiseturtles.com/posts/centos-supervisor.html" rel="alternate"></link><published>2015-02-09T23:49:00+08:00</published><author><name>crazygit</name></author><id>tag:blog.wiseturtles.com,2015-02-09:posts/centos-supervisor.html</id><summary type="html">&lt;h2&gt;å®‰è£…&lt;/h2&gt;
&lt;p&gt;éƒ¨ç½²é¡¹ç›®ä»Ubuntuè½¬æˆ˜åˆ°CentOS,&amp;nbsp;ä½¿ç”¨yumå‘½ä»¤å®‰è£…supervisoråï¼Œå‘ç°æ— æ³•æ­£å¸¸ä½¿ç”¨ï¼Œå› æ­¤åªæœ‰ä½¿ç”¨pipå®‰è£….&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo pip install supervisor
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;é…ç½®supervisor&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;æ·»åŠ é…ç½®æ–‡ä»¶&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo mkdir /etc/supervisor
$ sudo mkdir /etc/supervisor/conf.d
&lt;span class="c1"&gt;# æ·»åŠ å¦‚ä¸‹é…ç½®æ–‡ä»¶&lt;/span&gt;
$ cat /etc/supervisor/supervisord.conf
&lt;span class="o"&gt;[&lt;/span&gt;unix_http_server&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="nv"&gt;file&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/var/tmp/supervisor.sock    &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;the path to the socket file&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nv"&gt;chmod&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0700&lt;/span&gt;                       &lt;span class="p"&gt;;&lt;/span&gt; sockef file mode &lt;span class="o"&gt;(&lt;/span&gt;default 0700&lt;span class="o"&gt;)&lt;/span&gt;

&lt;span class="p"&gt;;&lt;/span&gt; the below section must remain in the config file &lt;span class="k"&gt;for&lt;/span&gt; RPC
&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;supervisorctl/web interface&lt;span class="o"&gt;)&lt;/span&gt; to work, additional interfaces may be
&lt;span class="p"&gt;;&lt;/span&gt; added by defining them in separate rpcinterface: sections
&lt;span class="o"&gt;[&lt;/span&gt;rpcinterface:supervisor&lt;span class="o"&gt;]&lt;/span&gt;
supervisor.rpcinterface_factory &lt;span class="o"&gt;=&lt;/span&gt; supervisor.rpcinterface:make_main_rpcinterface

&lt;span class="o"&gt;[&lt;/span&gt;supervisord&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="nv"&gt;http_port&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/var/run/supervisor.sock &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;default is to run a UNIX domain socket server&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="nv"&gt;http_port&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;127.0.0.1:9001  &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;alternately, ip_address:port specifies AF_INET&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="nv"&gt;sockchmod&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0700&lt;/span&gt;              &lt;span class="p"&gt;;&lt;/span&gt; AF_UNIX socketmode &lt;span class="o"&gt;(&lt;/span&gt;AF_INET ignore, default 0700&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="nv"&gt;sockchown&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;nobody.nogroup     &lt;span class="p"&gt;;&lt;/span&gt; AF_UNIX socket uid.gid owner &lt;span class="o"&gt;(&lt;/span&gt;AF_INET ignores&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="nv"&gt;umask&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;022&lt;/span&gt;                   &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;process file creation umask&lt;span class="p"&gt;;&lt;/span&gt;default 022&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nv"&gt;logfile&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/data/log/supervisor/supervisord.log &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;main log file&lt;span class="p"&gt;;&lt;/span&gt;default &lt;span class="nv"&gt;$CWD&lt;/span&gt;/supervisord.log&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nv"&gt;logfile_maxbytes&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;50MB       &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;max main logfile bytes b4 rotation&lt;span class="p"&gt;;&lt;/span&gt;default 50MB&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nv"&gt;logfile_backups&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt;          &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;num of main logfile rotation backups&lt;span class="p"&gt;;&lt;/span&gt;default 10&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nv"&gt;loglevel&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;debug              &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;logging level&lt;span class="p"&gt;;&lt;/span&gt;default info&lt;span class="p"&gt;;&lt;/span&gt; others: debug,warn&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nv"&gt;pidfile&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/var/run/supervisord.pid &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;supervisord pidfile&lt;span class="p"&gt;;&lt;/span&gt;default supervisord.pid&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nv"&gt;nodaemon&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;false&lt;/span&gt;              &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;start in foreground &lt;span class="k"&gt;if&lt;/span&gt; true&lt;span class="p"&gt;;&lt;/span&gt;default &lt;span class="nb"&gt;false&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nv"&gt;minfds&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1024&lt;/span&gt;                 &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;min. avail startup file descriptors&lt;span class="p"&gt;;&lt;/span&gt;default 1024&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nv"&gt;minprocs&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;200&lt;/span&gt;                &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;min. avail process descriptors&lt;span class="p"&gt;;&lt;/span&gt;default 200&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nv"&gt;childlogdir&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/data/log/supervisor &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;AUTO&amp;#39;&lt;/span&gt; child log dir, default &lt;span class="nv"&gt;$TEMP&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;

&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="nv"&gt;nocleanup&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;              &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;don&lt;span class="s1"&gt;&amp;#39;t clean up tempfiles at start;default false)&lt;/span&gt;
&lt;span class="s1"&gt;;http_username=user          ; (default is no username (open system))&lt;/span&gt;
&lt;span class="s1"&gt;;http_password=123           ; (default is no password (open system))&lt;/span&gt;
&lt;span class="s1"&gt;;user=chrism                 ; (default is current user, required if root)&lt;/span&gt;
&lt;span class="s1"&gt;;directory=/tmp              ; (default is not to cd during start)&lt;/span&gt;
&lt;span class="s1"&gt;;environment=KEY=value       ; (key value pairs to add to environment)&lt;/span&gt;

&lt;span class="s1"&gt;[supervisorctl]&lt;/span&gt;
&lt;span class="s1"&gt;serverurl=unix:///var/tmp/supervisor.sock ; use a unix:// URL  for a unix socket&lt;/span&gt;
&lt;span class="s1"&gt;;serverurl=http://127.0.0.1:9001 ; use an http:// url to specify an inet socket&lt;/span&gt;
&lt;span class="s1"&gt;;username=chris              ; should be same as http_username if set&lt;/span&gt;
&lt;span class="s1"&gt;;password=123                ; should be same as http_password if set&lt;/span&gt;
&lt;span class="s1"&gt;;prompt=mysupervisor         ; cmd line prompt (default &amp;quot;supervisor&amp;quot;)&lt;/span&gt;

&lt;span class="s1"&gt;; The below sample program section shows all possible program subsection values,&lt;/span&gt;
&lt;span class="s1"&gt;; create one or more &amp;#39;&lt;/span&gt;real&lt;span class="s1"&gt;&amp;#39; program: sections to be able to control them under&lt;/span&gt;
&lt;span class="s1"&gt;; supervisor.&lt;/span&gt;

&lt;span class="s1"&gt;;[program:theprogramname]&lt;/span&gt;
&lt;span class="s1"&gt;;command=/bin/cat            ; the program (relative uses PATH, can take args)&lt;/span&gt;
&lt;span class="s1"&gt;;priority=999                ; the relative start priority (default 999)&lt;/span&gt;
&lt;span class="s1"&gt;;autostart=true              ; start at supervisord start (default: true)&lt;/span&gt;
&lt;span class="s1"&gt;;autorestart=true            ; retstart at unexpected quit (default: true)&lt;/span&gt;
&lt;span class="s1"&gt;;startsecs=10                ; number of secs prog must stay running (def. 10)&lt;/span&gt;
&lt;span class="s1"&gt;;startretries=3              ; max # of serial start failures (default 3)&lt;/span&gt;
&lt;span class="s1"&gt;;exitcodes=0,2               ; &amp;#39;&lt;/span&gt;expected&lt;span class="err"&gt;&amp;#39;&lt;/span&gt; &lt;span class="nb"&gt;exit&lt;/span&gt; codes &lt;span class="k"&gt;for&lt;/span&gt; process &lt;span class="o"&gt;(&lt;/span&gt;default 0,2&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="nv"&gt;stopsignal&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;QUIT             &lt;span class="p"&gt;;&lt;/span&gt; signal used to &lt;span class="nb"&gt;kill&lt;/span&gt; process &lt;span class="o"&gt;(&lt;/span&gt;default TERM&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="nv"&gt;stopwaitsecs&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt;             &lt;span class="p"&gt;;&lt;/span&gt; max num secs to &lt;span class="nb"&gt;wait&lt;/span&gt; before SIGKILL &lt;span class="o"&gt;(&lt;/span&gt;default 10&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="nv"&gt;user&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;chrism                 &lt;span class="p"&gt;;&lt;/span&gt; setuid to this UNIX account to run the program
&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="nv"&gt;log_stdout&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;             &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; true, log program stdout &lt;span class="o"&gt;(&lt;/span&gt;default &lt;span class="nb"&gt;true&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="nv"&gt;log_stderr&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;             &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; true, log program stderr &lt;span class="o"&gt;(&lt;/span&gt;def &lt;span class="nb"&gt;false&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="nv"&gt;logfile&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/var/log/cat.log    &lt;span class="p"&gt;;&lt;/span&gt; child log path, use NONE &lt;span class="k"&gt;for&lt;/span&gt; none&lt;span class="p"&gt;;&lt;/span&gt; default AUTO
&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="nv"&gt;logfile_maxbytes&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;1MB        &lt;span class="p"&gt;;&lt;/span&gt; max &lt;span class="c1"&gt;# logfile bytes b4 rotation (default 50MB)&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="nv"&gt;logfile_backups&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt;          &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;# of logfile backups (default 10)&lt;/span&gt;

&lt;span class="o"&gt;[&lt;/span&gt;include&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="nv"&gt;files&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; /etc/supervisor/conf.d/*.conf
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;é¡¹ç›®çš„é…ç½®æ–‡ä»¶å†™å…¥&amp;nbsp;/etc/supervisor/conf.d/ç›®å½•å³å¯&lt;/p&gt;
&lt;h2&gt;æ·»åŠ å¼€æœºå¯åŠ¨&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# æ·»åŠ å¦‚ä¸‹é…ç½®æ–‡ä»¶&lt;/span&gt;
$ cat /etc/init.d/supervisord

&lt;span class="c1"&gt;#!/bin/bash&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# /etc/rc.d/init.d/supervisord&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# Supervisor is a client/server system that&lt;/span&gt;
&lt;span class="c1"&gt;# allows its users to monitor and control a&lt;/span&gt;
&lt;span class="c1"&gt;# number of processes on UNIX-like operating&lt;/span&gt;
&lt;span class="c1"&gt;# systems.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# chkconfig: - 64 36&lt;/span&gt;
&lt;span class="c1"&gt;# description: Supervisor Server&lt;/span&gt;
&lt;span class="c1"&gt;# processname: supervisord&lt;/span&gt;

&lt;span class="c1"&gt;# Source init functions&lt;/span&gt;
. /etc/rc.d/init.d/functions

&lt;span class="nv"&gt;prog&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;supervisord&amp;quot;&lt;/span&gt;

&lt;span class="nv"&gt;prefix&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/usr&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;exec_prefix&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;prefix&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;prog_bin&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;exec_prefix&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;/bin/supervisord&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;PIDFILE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/var/run/&lt;/span&gt;&lt;span class="nv"&gt;$prog&lt;/span&gt;&lt;span class="s2"&gt;.pid&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;DAEMON_OPTS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;-c /etc/supervisor/supervisord.conf &lt;/span&gt;&lt;span class="nv"&gt;$DAEMON_OPTS&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;

start&lt;span class="o"&gt;()&lt;/span&gt;
&lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="nb"&gt;echo&lt;/span&gt; -n $&lt;span class="s2"&gt;&amp;quot;Starting &lt;/span&gt;&lt;span class="nv"&gt;$prog&lt;/span&gt;&lt;span class="s2"&gt;: &amp;quot;&lt;/span&gt;
    daemon &lt;span class="nv"&gt;$prog_bin&lt;/span&gt; &lt;span class="nv"&gt;$DAEMON_OPTS&lt;/span&gt; --pidfile &lt;span class="nv"&gt;$PIDFILE&lt;/span&gt;
    &lt;span class="o"&gt;[&lt;/span&gt; -f &lt;span class="nv"&gt;$PIDFILE&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; success $&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$prog&lt;/span&gt;&lt;span class="s2"&gt; startup&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; failure $&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$prog&lt;/span&gt;&lt;span class="s2"&gt; startup&amp;quot;&lt;/span&gt;
    &lt;span class="nb"&gt;echo&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

stop&lt;span class="o"&gt;()&lt;/span&gt;
&lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="nb"&gt;echo&lt;/span&gt; -n $&lt;span class="s2"&gt;&amp;quot;Shutting down &lt;/span&gt;&lt;span class="nv"&gt;$prog&lt;/span&gt;&lt;span class="s2"&gt;: &amp;quot;&lt;/span&gt;
    &lt;span class="o"&gt;[&lt;/span&gt; -f &lt;span class="nv"&gt;$PIDFILE&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; killproc &lt;span class="nv"&gt;$prog&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; success $&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$prog&lt;/span&gt;&lt;span class="s2"&gt; shutdown&amp;quot;&lt;/span&gt;
    &lt;span class="nb"&gt;echo&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$1&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; in

start&lt;span class="o"&gt;)&lt;/span&gt;
start
&lt;span class="p"&gt;;;&lt;/span&gt;

stop&lt;span class="o"&gt;)&lt;/span&gt;
stop
&lt;span class="p"&gt;;;&lt;/span&gt;

status&lt;span class="o"&gt;)&lt;/span&gt;
    status &lt;span class="nv"&gt;$prog&lt;/span&gt;
&lt;span class="p"&gt;;;&lt;/span&gt;

restart&lt;span class="o"&gt;)&lt;/span&gt;
stop
start
&lt;span class="p"&gt;;;&lt;/span&gt;

*&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Usage: &lt;/span&gt;&lt;span class="nv"&gt;$0&lt;/span&gt;&lt;span class="s2"&gt; {start|stop|restart|status}&amp;quot;&lt;/span&gt;
&lt;span class="p"&gt;;;&lt;/span&gt;

&lt;span class="k"&gt;esac&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è®¾ç½®å¦‚ä¸‹:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo chmod +x /etc/init.d/supervisord
$ sudo chkconfig --add supervisord
$ sudo chkconfig supervisord on
$ sudo service supervisord start
&lt;/pre&gt;&lt;/div&gt;</summary><category term="centos"></category><category term="supervisor"></category></entry><entry><title>OpenResty</title><link href="http://blog.wiseturtles.com/posts/openresty-install.html" rel="alternate"></link><published>2015-02-06T15:45:00+08:00</published><author><name>crazygit</name></author><id>tag:blog.wiseturtles.com,2015-02-06:posts/openresty-install.html</id><summary type="html">&lt;h2&gt;ä»€ä¹ˆæ˜¯OpenResty&lt;/h2&gt;
&lt;p&gt;OpenRestyï¼ˆä¹Ÿç§°ä¸º ngx_openrestyï¼‰æ˜¯ä¸€ä¸ªå…¨åŠŸèƒ½çš„ Web åº”ç”¨æœåŠ¡å™¨ï¼Œå®ƒæ‰“åŒ…äº†æ ‡å‡†
çš„Nginx æ ¸å¿ƒï¼Œå¾ˆå¤šçš„å¸¸ç”¨çš„ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œä»¥åŠå®ƒä»¬çš„å¤§å¤šæ•°ä¾èµ–é¡¹ã€‚å¯¹äºç»å¸¸éœ€è¦ä½¿ç”¨&amp;nbsp;nginxç¬¬ä¸‰æ–¹æ¨¡å—çš„äººæ¥è¯´ï¼Œæ˜¯ä¸€ä¸ªéå¸¸ä¸é”™çš„é€‰æ‹©.&lt;/p&gt;
&lt;h2&gt;ä¸‹è½½åŠå®‰è£…&lt;/h2&gt;
&lt;p&gt;å…³äºå¦‚ä½•ä¸‹è½½åŠå®‰è£…OpenResty, &lt;a href="http://openresty.org/cn/"&gt;å®˜ç½‘&lt;/a&gt;å·²ç»æœ‰å¾ˆè¯¦ç»†çš„ä»‹&amp;nbsp;ç»ï¼Œä¸å†èµ˜è¿°ã€‚&lt;/p&gt;
&lt;h2&gt;æ·»åŠ å¼€æœºå¯åŠ¨è„šæœ¬&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;åˆ›å»ºå¦‚ä¸‹æ–‡ä»¶:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat /etc/init.d/nginx

&lt;span class="c1"&gt;#!/bin/bash&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# chkconfig: 2345 55 25&lt;/span&gt;
&lt;span class="c1"&gt;# Description: Nginx init.d script, put in /etc/init.d, chmod +x /etc/init.d/nginx&lt;/span&gt;
&lt;span class="c1"&gt;#              For Debian, run: update-rc.d -f nginx defaults&lt;/span&gt;
&lt;span class="c1"&gt;#              For CentOS, run: chkconfig --add nginx&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;### BEGIN INIT INFO&lt;/span&gt;
&lt;span class="c1"&gt;# Provides:          nginx&lt;/span&gt;
&lt;span class="c1"&gt;# Required-Start:    $all&lt;/span&gt;
&lt;span class="c1"&gt;# Required-Stop:     $all&lt;/span&gt;
&lt;span class="c1"&gt;# Default-Start:     2 3 4 5&lt;/span&gt;
&lt;span class="c1"&gt;# Default-Stop:      0 1 6&lt;/span&gt;
&lt;span class="c1"&gt;# Short-Description: nginx init.d script&lt;/span&gt;
&lt;span class="c1"&gt;# Description:       OpenResty (aka. ngx_openresty) is a full-fledged web application server by bundling the standard Nginx core,&lt;/span&gt;
&lt;span class="c1"&gt;#                    lots of 3rd-party Nginx modules, as well as most of their external dependencies.&lt;/span&gt;
&lt;span class="c1"&gt;### END INIT INFO&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;

&lt;span class="nv"&gt;PATH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin
&lt;span class="nv"&gt;DESC&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Nginx Daemon&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;NAME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;nginx
&lt;span class="nv"&gt;PREFIX&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/etc/openresty/nginx
&lt;span class="nv"&gt;DAEMON&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$PREFIX&lt;/span&gt;/sbin/&lt;span class="nv"&gt;$NAME&lt;/span&gt;
&lt;span class="nv"&gt;CONF&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$PREFIX&lt;/span&gt;/conf/&lt;span class="nv"&gt;$NAME&lt;/span&gt;.conf
&lt;span class="nv"&gt;PID&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$PREFIX&lt;/span&gt;/logs/&lt;span class="nv"&gt;$NAME&lt;/span&gt;.pid
&lt;span class="nv"&gt;SCRIPT&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/etc/init.d/&lt;span class="nv"&gt;$NAME&lt;/span&gt;

&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; ! -x &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$DAEMON&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; ! -f &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$CONF&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
    &lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\033[33m &lt;/span&gt;&lt;span class="nv"&gt;$DAEMON&lt;/span&gt;&lt;span class="s2"&gt; has no permission to run. \033[0m&amp;quot;&lt;/span&gt;
    &lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\033[33m Or &lt;/span&gt;&lt;span class="nv"&gt;$CONF&lt;/span&gt;&lt;span class="s2"&gt; doesn&amp;#39;t exist. \033[0m&amp;quot;&lt;/span&gt;
    sleep 1
    &lt;span class="nb"&gt;exit&lt;/span&gt; 1
&lt;span class="k"&gt;fi&lt;/span&gt;

do_start&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; -f &lt;span class="nv"&gt;$PID&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
        &lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\033[33m &lt;/span&gt;&lt;span class="nv"&gt;$PID&lt;/span&gt;&lt;span class="s2"&gt; already exists. \033[0m&amp;quot;&lt;/span&gt;
        &lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\033[33m &lt;/span&gt;&lt;span class="nv"&gt;$DESC&lt;/span&gt;&lt;span class="s2"&gt; is already running or crashed. \033[0m&amp;quot;&lt;/span&gt;
        &lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\033[32m &lt;/span&gt;&lt;span class="nv"&gt;$DESC&lt;/span&gt;&lt;span class="s2"&gt; Reopening &lt;/span&gt;&lt;span class="nv"&gt;$CONF&lt;/span&gt;&lt;span class="s2"&gt; ... \033[0m&amp;quot;&lt;/span&gt;
        &lt;span class="nv"&gt;$DAEMON&lt;/span&gt; -s reopen -c &lt;span class="nv"&gt;$CONF&lt;/span&gt;
        sleep 1
        &lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\033[36m &lt;/span&gt;&lt;span class="nv"&gt;$DESC&lt;/span&gt;&lt;span class="s2"&gt; reopened. \033[0m&amp;quot;&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;
        &lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\033[32m &lt;/span&gt;&lt;span class="nv"&gt;$DESC&lt;/span&gt;&lt;span class="s2"&gt; Starting &lt;/span&gt;&lt;span class="nv"&gt;$CONF&lt;/span&gt;&lt;span class="s2"&gt; ... \033[0m&amp;quot;&lt;/span&gt;
        &lt;span class="nv"&gt;$DAEMON&lt;/span&gt; -c &lt;span class="nv"&gt;$CONF&lt;/span&gt;
        sleep 1
        &lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\033[36m &lt;/span&gt;&lt;span class="nv"&gt;$DESC&lt;/span&gt;&lt;span class="s2"&gt; started. \033[0m&amp;quot;&lt;/span&gt;
    &lt;span class="k"&gt;fi&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

do_stop&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; ! -f &lt;span class="nv"&gt;$PID&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
        &lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\033[33m &lt;/span&gt;&lt;span class="nv"&gt;$PID&lt;/span&gt;&lt;span class="s2"&gt; doesn&amp;#39;t exist. \033[0m&amp;quot;&lt;/span&gt;
        &lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\033[33m &lt;/span&gt;&lt;span class="nv"&gt;$DESC&lt;/span&gt;&lt;span class="s2"&gt; isn&amp;#39;t running. \033[0m&amp;quot;&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;
        &lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\033[32m &lt;/span&gt;&lt;span class="nv"&gt;$DESC&lt;/span&gt;&lt;span class="s2"&gt; Stopping &lt;/span&gt;&lt;span class="nv"&gt;$CONF&lt;/span&gt;&lt;span class="s2"&gt; ... \033[0m&amp;quot;&lt;/span&gt;
        &lt;span class="nv"&gt;$DAEMON&lt;/span&gt; -s stop -c &lt;span class="nv"&gt;$CONF&lt;/span&gt;
        sleep 1
        &lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\033[36m &lt;/span&gt;&lt;span class="nv"&gt;$DESC&lt;/span&gt;&lt;span class="s2"&gt; stopped. \033[0m&amp;quot;&lt;/span&gt;
    &lt;span class="k"&gt;fi&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

do_reload&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; ! -f &lt;span class="nv"&gt;$PID&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
        &lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\033[33m &lt;/span&gt;&lt;span class="nv"&gt;$PID&lt;/span&gt;&lt;span class="s2"&gt; doesn&amp;#39;t exist. \033[0m&amp;quot;&lt;/span&gt;
        &lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\033[33m &lt;/span&gt;&lt;span class="nv"&gt;$DESC&lt;/span&gt;&lt;span class="s2"&gt; isn&amp;#39;t running. \033[0m&amp;quot;&lt;/span&gt;
        &lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\033[32m &lt;/span&gt;&lt;span class="nv"&gt;$DESC&lt;/span&gt;&lt;span class="s2"&gt; Starting &lt;/span&gt;&lt;span class="nv"&gt;$CONF&lt;/span&gt;&lt;span class="s2"&gt; ... \033[0m&amp;quot;&lt;/span&gt;
        &lt;span class="nv"&gt;$DAEMON&lt;/span&gt; -c &lt;span class="nv"&gt;$CONF&lt;/span&gt;
        sleep 1
        &lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\033[36m &lt;/span&gt;&lt;span class="nv"&gt;$DESC&lt;/span&gt;&lt;span class="s2"&gt; started. \033[0m&amp;quot;&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;
        &lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\033[32m &lt;/span&gt;&lt;span class="nv"&gt;$DESC&lt;/span&gt;&lt;span class="s2"&gt; Reloading &lt;/span&gt;&lt;span class="nv"&gt;$CONF&lt;/span&gt;&lt;span class="s2"&gt; ... \033[0m&amp;quot;&lt;/span&gt;
        &lt;span class="nv"&gt;$DAEMON&lt;/span&gt; -s reload -c &lt;span class="nv"&gt;$CONF&lt;/span&gt;
        sleep 1
        &lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\033[36m &lt;/span&gt;&lt;span class="nv"&gt;$DESC&lt;/span&gt;&lt;span class="s2"&gt; reloaded. \033[0m&amp;quot;&lt;/span&gt;
    &lt;span class="k"&gt;fi&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

do_quit&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; ! -f &lt;span class="nv"&gt;$PID&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
        &lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\033[33m &lt;/span&gt;&lt;span class="nv"&gt;$PID&lt;/span&gt;&lt;span class="s2"&gt; doesn&amp;#39;t exist. \033[0m&amp;quot;&lt;/span&gt;
        &lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\033[33m &lt;/span&gt;&lt;span class="nv"&gt;$DESC&lt;/span&gt;&lt;span class="s2"&gt; isn&amp;#39;t running. \033[0m&amp;quot;&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;
        &lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\033[32m &lt;/span&gt;&lt;span class="nv"&gt;$DESC&lt;/span&gt;&lt;span class="s2"&gt; Quitting &lt;/span&gt;&lt;span class="nv"&gt;$CONF&lt;/span&gt;&lt;span class="s2"&gt; ... \033[0m&amp;quot;&lt;/span&gt;
        &lt;span class="nv"&gt;$DAEMON&lt;/span&gt; -s quit -c &lt;span class="nv"&gt;$CONF&lt;/span&gt;
        sleep 1
        &lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\033[36m &lt;/span&gt;&lt;span class="nv"&gt;$DESC&lt;/span&gt;&lt;span class="s2"&gt; quitted. \033[0m&amp;quot;&lt;/span&gt;
    &lt;span class="k"&gt;fi&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

do_test&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\033[32m &lt;/span&gt;&lt;span class="nv"&gt;$DESC&lt;/span&gt;&lt;span class="s2"&gt; Testing &lt;/span&gt;&lt;span class="nv"&gt;$CONF&lt;/span&gt;&lt;span class="s2"&gt; ... \033[0m&amp;quot;&lt;/span&gt;
    &lt;span class="nv"&gt;$DAEMON&lt;/span&gt; -t -c &lt;span class="nv"&gt;$CONF&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

do_info&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="nv"&gt;$DAEMON&lt;/span&gt; -V
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$1&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; in
start&lt;span class="o"&gt;)&lt;/span&gt;
do_start
&lt;span class="p"&gt;;;&lt;/span&gt;
stop&lt;span class="o"&gt;)&lt;/span&gt;
do_stop
&lt;span class="p"&gt;;;&lt;/span&gt;
reload&lt;span class="o"&gt;)&lt;/span&gt;
do_reload
&lt;span class="p"&gt;;;&lt;/span&gt;
restart&lt;span class="o"&gt;)&lt;/span&gt;
do_stop
do_start
&lt;span class="p"&gt;;;&lt;/span&gt;
quit&lt;span class="o"&gt;)&lt;/span&gt;
do_quit
&lt;span class="p"&gt;;;&lt;/span&gt;
&lt;span class="nb"&gt;test&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
do_test
&lt;span class="p"&gt;;;&lt;/span&gt;
info&lt;span class="o"&gt;)&lt;/span&gt;
do_info
&lt;span class="p"&gt;;;&lt;/span&gt;
*&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Usage: &lt;/span&gt;&lt;span class="nv"&gt;$SCRIPT&lt;/span&gt;&lt;span class="s2"&gt; {start|stop|reload|restart|quit|test|info}&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;exit&lt;/span&gt; 2
&lt;span class="p"&gt;;;&lt;/span&gt;
&lt;span class="k"&gt;esac&lt;/span&gt;

&lt;span class="nb"&gt;exit&lt;/span&gt; 0
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç»™æ–‡ä»¶è®¾ç½®æ‰§è¡Œæƒé™&lt;code&gt;chmod +x /etc/init.d/nginx&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ·»åŠ åˆ°å¼€æœºå¯åŠ¨&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;CentOSç³»ç»Ÿ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;chkconfig --list nginx   &lt;span class="c1"&gt;# åˆ—å‡ºç³»ç»ŸnginxæœåŠ¡å¯åŠ¨æƒ…å†µ&lt;/span&gt;
chkconfig --add nginx    &lt;span class="c1"&gt;# æ·»åŠ nginxæœåŠ¡&lt;/span&gt;
chkconfig --level &lt;span class="m"&gt;35&lt;/span&gt; nginx on &lt;span class="c1"&gt;# è®¾å®šnginxåœ¨ç­‰çº§3å’Œ5ä¸ºå¼€æœºè¿è¡ŒæœåŠ¡ï¼Œ--level 35è¡¨ç¤ºæ“ä½œåªåœ¨ç­‰çº§3å’Œ5æ‰§è¡Œï¼Œonè¡¨ç¤ºå¯åŠ¨ï¼Œoffè¡¨ç¤ºå…³é—­&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Debianç³»ç»Ÿ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo update-rc.d -f nginx remove  &lt;span class="c1"&gt;# åˆ é™¤nginxæœåŠ¡&lt;/span&gt;
sudo update-rc.d apache2 defaults &lt;span class="c1"&gt;# æ·»åŠ nginxæœåŠ¡&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;ä½¿ç”¨logrotateåˆ‡å‰²æ—¥å¿—&lt;/h2&gt;
&lt;p&gt;åˆ›å»ºå¦‚ä¸‹æ–‡ä»¶&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat /etc/logrotate.d/nginx
/etc/openresty/nginx/logs/*.log &lt;span class="o"&gt;{&lt;/span&gt;
    daily
    missingok
    rotate 52
    dateext
    dateformat  -%Y-%m-%d
    compress
    delaycompress
    notifempty
    create &lt;span class="m"&gt;0640&lt;/span&gt; www-data adm
    sharedscripts
    postrotate
        &lt;span class="o"&gt;[&lt;/span&gt; ! -f /etc/openresty/nginx/logs/nginx.pid &lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="nb"&gt;kill&lt;/span&gt; -USR1 &lt;span class="sb"&gt;`&lt;/span&gt;cat /etc/openresty/nginx/logs/nginx.pid&lt;span class="sb"&gt;`&lt;/span&gt;
    endscript
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ³¨é‡Šï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;/etc/openresty/nginx/logs/*.log&lt;/code&gt; ä¸ºOpenRestyçš„logç›®å½•&lt;/li&gt;
&lt;li&gt;dailyï¼šæ¯å¤©è½®è¯¢&lt;/li&gt;
&lt;li&gt;missingok:&amp;nbsp;å¦‚æœæ—¥å¿—ä¸¢å¤±ï¼Œä¸æŠ¥é”™ç»§ç»­æ»šåŠ¨ä¸‹ä¸€ä¸ªæ—¥å¿—&lt;/li&gt;
&lt;li&gt;rotate&amp;nbsp;52ï¼šä¿ç•™æœ€å¤š52æ¬¡æ»šåŠ¨çš„æ—¥å¿—&lt;/li&gt;
&lt;li&gt;dateextï¼šæ—¥æœŸæ‰©å±•&lt;/li&gt;
&lt;li&gt;dateformat:&amp;nbsp;æ—¥æœŸæ ¼å¼&lt;/li&gt;
&lt;li&gt;compressï¼šæ—§æ—¥å¿—é»˜è®¤ç”¨gzipå‹ç¼©&lt;/li&gt;
&lt;li&gt;notifempty:å½“æ—¥å¿—ä¸ºç©ºæ—¶ä¸è¿›è¡Œæ»šåŠ¨&lt;/li&gt;
&lt;li&gt;create: mode owner group&amp;nbsp;è½¬å‚¨æ–‡ä»¶ï¼Œä½¿ç”¨æŒ‡å®šçš„æ–‡ä»¶æ¨¡å¼åˆ›å»ºæ–°çš„æ—¥å¿—æ–‡ä»¶&lt;/li&gt;
&lt;li&gt;/etc/openresty/nginx/logs/nginx.pidï¼šnginxä¸»è¿›ç¨‹pid&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æµ‹è¯•:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ logroate -f /etc/logrotate.d/nginx
&lt;/pre&gt;&lt;/div&gt;</summary><category term="nginx"></category><category term="openresty"></category></entry><entry><title>linuxÂ å°è´´å£«</title><link href="http://blog.wiseturtles.com/posts/linux-tips.html" rel="alternate"></link><published>2015-01-20T18:16:00+08:00</published><author><name>crazygit</name></author><id>tag:blog.wiseturtles.com,2015-01-20:posts/linux-tips.html</id><summary type="html">&lt;h2&gt;sshç«¯å£è½¬å‘&lt;/h2&gt;
&lt;p&gt;ç”±äºæœåŠ¡å™¨ä¸Šä¸€äº›æœåŠ¡çš„ç«¯å£æ²¡æœ‰å¯¹å¤–å¼€å‘ï¼Œä½†æ˜¯åœ¨å¼€å‘æ—¶åˆæƒ³ç›´æ¥ä½¿ç”¨æœåŠ¡å™¨ä¸Šçš„è¿™äº›æœåŠ¡ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ&lt;/p&gt;
&lt;p&gt;ä»¥æˆ‘ä»¬æœåŠ¡å™¨A(192.167.0.1) ä¸ºä¾‹, ä¸Šé¢æœ‰Elasticsheachæ•°æ®åº“ä¸ºä¾‹, ç”±äºElasticsearchæ•°æ®åº“æ¯”è¾ƒ&amp;nbsp;å¤§ï¼Œä»æœåŠ¡å™¨ä¸Šå°†æ•°æ®æ‹·è´åˆ°æœ¬åœ°ä¸å¤ªç°å®ï¼Œä¾¿å¯ä»¥é€šè¿‡sshç«¯å£è½¬å‘æ¥å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;å‰æ:&amp;nbsp;æœ¬åœ°æœåŠ¡å™¨å¯ä»¥é€šè¿‡sshç™»é™†åˆ°æœåŠ¡å™¨A(192.167.0.1)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ssh -fNL 9200:localhost:9200 192.167.0.1
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;é€šè¿‡ä¸Šé¢å‘½ä»¤å¯ä»¥åœ¨æœ¬åœ°æœºå™¨å’ŒæœåŠ¡å™¨Açš„9200ç«¯å£ä¹‹é—´åšä¸€ä¸ªéš§é“ï¼Œè®¿é—®æœ¬åœ°çš„9200ç«¯&amp;nbsp;å£å°±è·Ÿç›´æ¥è®¿é—®æœåŠ¡å™¨Aä¸Šçš„9200ç«¯å£ä¸€æ ·ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†ä½¿ç”¨æ–¹ä¾¿ï¼Œå¯ä»¥ä¸ºä¸Šé¢çš„å‘½ä»¤è®¾ç½®ä¸€ä¸ªåˆ«å,æ·»åŠ åˆ°&lt;code&gt;~/.bashrc&lt;/code&gt;ä¸­ï¼Œ&amp;nbsp;å¦‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;sshes&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;ssh -fNL 9200:localhost:9200 192.167.0.1&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;é‚£ä¹ˆä»¥åä½¿ç”¨&lt;code&gt;sshes&lt;/code&gt;å°±å¯ä»¥æ–¹ä¾¿çš„å»ºç«‹ä¸€ä¸ªsshéš§é“è¿æ¥,ã€€åŒç†ï¼Œæ­¤æ³•å¯ç”¨äºè¿æ¥æœåŠ¡å™¨ä¸Šçš„mysqlåŠå…¶å®ƒæœåŠ¡.&lt;/p&gt;
&lt;p&gt;å¦å¤–ä¸€ä¸ªå¸¸ç”¨çš„æ˜¯é€šè¿‡sshç¿»å¢™çš„å‘½ä»¤&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ssh -qTfnN -D &lt;span class="m"&gt;7070&lt;/span&gt; 192.167.0.2
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å‰ææ˜¯172.167.0.2æ˜¯ä¸€å°å¯ä»¥ç›´æ¥ç¿»å¢™çš„æœºå™¨(å¦‚å›½å¤–çš„äº‘ä¸»æœº),æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤åä¾¿å¯ä»¥é€šè¿‡æœ¬åœ°çš„7070ç«¯å£ç¿»å¢™.&lt;/p&gt;
&lt;p&gt;æ›´å¤šå…³äºsshè½¬å‘çš„å¯ä»¥æŸ¥çœ‹ä¸‹é¢çš„æ–‡ç« :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://codelife.me/blog/2012/12/09/three-types-of-ssh-turneling/"&gt;ä¸‰ç§ä¸åŒç±»å‹çš„sshéš§é“&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;sshç™»é™†é…ç½®&lt;/h2&gt;
&lt;p&gt;ç™»é™†åˆ°è¿œç¨‹æœåŠ¡å™¨æ—¶,å½“æœåŠ¡å™¨ä¸Šçš„ç”¨æˆ·åå’Œæœ¬åœ°çš„ç”¨æˆ·åä¸ä¸€è‡´ä¸”ç«¯å£ä¹Ÿä¸æ˜¯é»˜è®¤ç«¯å£æ—¶.
ä»¥æœåŠ¡å™¨A(192.168.0.1), ç”¨æˆ·åä¸ºroot, ç«¯å£ä¸º4455ã€‚æˆ‘ä»¬æ¯æ¬¡ç™»é™†åˆ°è¿œç¨‹ä¸»æœºæˆ–æ‹·è´
æ–‡ä»¶æ—¶,&amp;nbsp;éƒ½éœ€è¦å¸¦ä¸Šç”¨æˆ·åå’Œç«¯å£ä¿¡æ¯ã€‚å¦‚:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# sshç™»é™†&lt;/span&gt;
$ ssh -p &lt;span class="m"&gt;4455&lt;/span&gt; root@192.168.0.1
&lt;span class="c1"&gt;# scpæ‹·è´&lt;/span&gt;
$ scp -P &lt;span class="m"&gt;4455&lt;/span&gt; root@192.168.0.1:/tmp/a a
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿™æ ·æ¯”è¾ƒç¹çã€‚ç¨å¾®é…ç½®ä¸€ä¸‹ä¾¿å¯ä»¥åŒ–ç¹ä¸ºç®€&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat ~/.ssh/config
Host 192.168.0.1
    User root
    Port 4455
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿™æ ·ä»¥åæ¯æ¬¡è®¿é—®è¯¥æœåŠ¡å™¨éƒ½ä¸éœ€è¦å¸¦ä¸Šç”¨æˆ·åŠç«¯å£ä¿¡æ¯&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# sshç™»é™†&lt;/span&gt;
$ ssh 192.168.0.1
&lt;span class="c1"&gt;# scpæ‹·è´&lt;/span&gt;
$ scp -P 192.168.0.1:/tmp/a a
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å½“æœ¬æœºéœ€è¦é€šè¿‡ä¸åŒçš„keyç™»é™†åˆ°ä¸åŒçš„æœåŠ¡å™¨æ—¶ï¼Œæˆ‘ä»¬éƒ½æ˜¯é€šè¿‡&lt;code&gt;-i&lt;/code&gt;æ¥ä¸´æ—¶æŒ‡å®škey.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# ä½¿ç”¨a.keyç™»é™†192.168.0.1&lt;/span&gt;
$ ssh -i ~/.ssh/a.key 192.168.0.1
&lt;span class="c1"&gt;# ä½¿ç”¨b.keyç™»é™†192.168.0.2&lt;/span&gt;
$ ssh -i ~/.ssh/b.key 192.168.0.2
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ç¨å¾®é…ç½®ä¸€ä¸‹&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat ~/.ssh/config
Host 192.168.0.1
    User root
    Port 4455
    IdentityFile ~/.ssh/a.key

Host 192.168.0.2
    User root
    Port 4455
    IdentityFile ~/.ssh/b.key
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;é…ç½®ä¹‹åæ¯æ¬¡ç™»é™†ä¸åŒçš„æœåŠ¡å™¨ä¹Ÿä¸éœ€è¦é€šè¿‡&lt;code&gt;-i&lt;/code&gt;å‚æ•°æŒ‡å®škeyäº†ã€‚&lt;/p&gt;
&lt;h2&gt;~/.bashrcé…ç½®&lt;/h2&gt;
&lt;p&gt;ä¸‹é¢ä»‹ç»çš„éƒ½æ˜¯å¯ä»¥æ·»åŠ åˆ°&lt;code&gt;~/.bashrc&lt;/code&gt;ä¸­çš„ä¸€äº›é…ç½®.&lt;/p&gt;
&lt;h3&gt;è®©man&amp;nbsp;pageä¸å†å•è°ƒ&lt;/h3&gt;
&lt;p&gt;å¹³æ—¶ä½¿ç”¨man pageçš„æ—¶å€™ï¼Œéƒ½æ˜¯é»‘ç™½çš„æ–‡å­—ã€‚çœ‹èµ·æ¥å¾ˆæ˜¯ä¸æ–¹ä¾¿ï¼Œç¨å¾®é…ç½®ä¸€ä¸‹ï¼Œå¯ä»¥è®©
ä½ çš„man&amp;nbsp;pageå……æ»¡é¢œè‰²ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# color man pages&lt;/span&gt;
&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;LESS_TERMCAP_mb&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;$&amp;#39;\E[01;31m&amp;#39;&lt;/span&gt;
&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;LESS_TERMCAP_md&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;$&amp;#39;\E[01;31m&amp;#39;&lt;/span&gt;
&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;LESS_TERMCAP_me&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;$&amp;#39;\E[0m&amp;#39;&lt;/span&gt;
&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;LESS_TERMCAP_se&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;$&amp;#39;\E[0m&amp;#39;&lt;/span&gt;
&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;LESS_TERMCAP_so&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;$&amp;#39;\E[01;44;33m&amp;#39;&lt;/span&gt;
&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;LESS_TERMCAP_ue&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;$&amp;#39;\E[0m&amp;#39;&lt;/span&gt;
&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;LESS_TERMCAP_us&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;$&amp;#39;\E[01;32m&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;source ~/.bashrc&lt;/code&gt;åï¼Œmanä¸€ä¸ªå‘½ä»¤å¯ä»¥çœ‹åˆ°æ•ˆæœ&lt;/p&gt;
&lt;h3&gt;ç»ˆç«¯æ“ä½œä½¿ç”¨vimæ¨¡å¼&lt;/h3&gt;
&lt;p&gt;ä»&lt;code&gt;@WanMing&lt;/code&gt;å¤„ä¹ å¾—çš„æŠ€èƒ½ï¼Œvimæ§å¿…å¤‡&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;set&lt;/span&gt; -o vi
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ•ˆæœå¦‚ä½•ï¼Œè°ç”¨è°çŸ¥é“&lt;/p&gt;
&lt;h3&gt;pythonè‡ªåŠ¨æ¿€æ´»é¡¹ç›®çš„è™šæ‹Ÿç¯å¢ƒ&lt;/h3&gt;
&lt;p&gt;é‡å†™&lt;code&gt;cd&lt;/code&gt;å‘½ä»¤ï¼Œä½¿å®ƒåœ¨è¿›å…¥åˆ°pythoné¡¹ç›®æ—¶ï¼Œè‡ªåŠ¨æ¿€æ´»ä¸é¡¹ç›®åä¸€æ ·çš„è™šæ‹Ÿç¯å¢ƒ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;function&lt;/span&gt; workon_cwd &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="c1"&gt;# Check that this is a Git repo&lt;/span&gt;
    &lt;span class="nv"&gt;GIT_DIR&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;git rev-parse --git-dir 2&amp;gt; /dev/null&lt;span class="sb"&gt;`&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="nv"&gt;$?&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
        &lt;span class="c1"&gt;# Find the repo root and check for virtualenv name override&lt;/span&gt;
        &lt;span class="nv"&gt;GIT_DIR&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;&lt;span class="se"&gt;\c&lt;/span&gt;d &lt;span class="nv"&gt;$GIT_DIR&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="nb"&gt;pwd&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;
        &lt;span class="nv"&gt;PROJECT_ROOT&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;dirname &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$GIT_DIR&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;
        &lt;span class="nv"&gt;ENV_NAME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;basename &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$PROJECT_ROOT&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; -f &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$PROJECT_ROOT&lt;/span&gt;&lt;span class="s2"&gt;/.venv&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
            &lt;span class="nv"&gt;ENV_NAME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;cat &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$PROJECT_ROOT&lt;/span&gt;&lt;span class="s2"&gt;/.venv&amp;quot;&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;
        &lt;span class="k"&gt;fi&lt;/span&gt;
        &lt;span class="c1"&gt;# Activate the environment only if it is not already active&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$VIRTUAL_ENV&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; !&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$WORKON_HOME&lt;/span&gt;&lt;span class="s2"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;$ENV_NAME&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$WORKON_HOME&lt;/span&gt;&lt;span class="s2"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;$ENV_NAME&lt;/span&gt;&lt;span class="s2"&gt;/bin/activate&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
                workon &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$ENV_NAME&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;CD_VIRTUAL_ENV&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$ENV_NAME&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
            &lt;span class="k"&gt;fi&lt;/span&gt;
        &lt;span class="k"&gt;fi&lt;/span&gt;
    &lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="nv"&gt;$CD_VIRTUAL_ENV&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
        &lt;span class="c1"&gt;# We&amp;#39;ve just left the repo, deactivate the environment&lt;/span&gt;
        &lt;span class="c1"&gt;# Note: this only happens if the virtualenv was activated automatically&lt;/span&gt;
        deactivate &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="nb"&gt;unset&lt;/span&gt; CD_VIRTUAL_ENV
    &lt;span class="k"&gt;fi&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="c1"&gt;# New cd function that does the virtualenv magic&lt;/span&gt;
&lt;span class="k"&gt;function&lt;/span&gt; venv_cd &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="nb"&gt;cd&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$@&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; workon_cwd
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;cd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;venv_cd&amp;quot;&lt;/span&gt;
&lt;span class="c1"&gt;# init for create new terminal tab&lt;/span&gt;
workon_cwd
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;ä¸ªæ€§åŒ–ç»ˆç«¯æç¤ºç¬¦&lt;/h3&gt;
&lt;p&gt;é€šè¿‡è®¾ç½®&lt;span class="caps"&gt;PS1&lt;/span&gt;å˜é‡, å¯ä»¥ä¸ªæ€§åŒ–ç»ˆç«¯æç¤ºç¬¦,&amp;nbsp;å±•ç¤ºæ›´å¤šæœ‰ç”¨ä¿¡æ¯.&lt;/p&gt;
&lt;p&gt;å¦‚æˆ‘çš„ç»ˆç«¯è®¾ç½®, é‡Œé¢åŒ…å«äº†é¡¹ç›®çš„åˆ†æ”¯ï¼Œå½“å‰&lt;span class="caps"&gt;HEAD&lt;/span&gt;å€¼ï¼ŒåŠgitåº“çš„çŠ¶æ€ä¿¡æ¯&lt;/p&gt;
&lt;p&gt;&lt;img alt="PS1 screenshot" src="http://pic.yupoo.com/crazygit_v/En4dALxz/medium.jpg" /&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;PS1&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;TITLEBAR&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&lt;/span&gt;
&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;SAVE_CURSOR&lt;/span&gt;&lt;span class="si"&gt;}${&lt;/span&gt;&lt;span class="nv"&gt;MOVE_CURSOR_RIGHTMOST&lt;/span&gt;&lt;span class="si"&gt;}${&lt;/span&gt;&lt;span class="nv"&gt;MOVE_CURSOR_5_LEFT&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;\&lt;/span&gt;
&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;RESTORE_CURSOR&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;\&lt;/span&gt;
&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;VIRTUALENV&lt;/span&gt;&lt;span class="p"&gt;:+(&lt;/span&gt;&lt;span class="nv"&gt;$VIRTUALENV&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="si"&gt;}${&lt;/span&gt;&lt;span class="nv"&gt;D_USER_COLOR&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;\u &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;D_INTERMEDIATE_COLOR&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;\&lt;/span&gt;
&lt;span class="s2"&gt;at &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;D_MACHINE_COLOR&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;\h &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;D_INTERMEDIATE_COLOR&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;\&lt;/span&gt;
&lt;span class="s2"&gt;in &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;D_DIR_COLOR&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;\w &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;D_INTERMEDIATE_COLOR&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;\&lt;/span&gt;
&lt;span class="k"&gt;$(&lt;/span&gt;demula_vcprompt&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;\&lt;/span&gt;
&lt;span class="k"&gt;$(&lt;/span&gt;is_vim_shell&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¦‚ä¸‹æ˜¯ä¸€ä¸ªåœ¨çº¿ç”Ÿæˆ&lt;span class="caps"&gt;PS1&lt;/span&gt;å˜é‡çš„ç½‘ç«™ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚å®šåˆ¶&lt;span class="caps"&gt;PS1&lt;/span&gt;å˜é‡:&lt;/p&gt;
&lt;p&gt;&lt;a href="http://bashrcgenerator.com/"&gt;http://bashrcgenerator.com/&lt;/a&gt;&lt;/p&gt;</summary><category term="linux"></category><category term="tips"></category></entry><entry><title>Gerritæ­å»ºæŒ‡å—</title><link href="http://blog.wiseturtles.com/posts/gerrit.html" rel="alternate"></link><published>2015-01-15T17:09:00+08:00</published><author><name>crazygit</name></author><id>tag:blog.wiseturtles.com,2015-01-15:posts/gerrit.html</id><summary type="html">&lt;h2&gt;ä»€ä¹ˆæ˜¯Gerrit&lt;/h2&gt;
&lt;p&gt;Gerritï¼Œä¸€ç§å…è´¹ã€å¼€æ”¾æºä»£ç çš„ä»£ç å®¡æŸ¥è½¯ä»¶ï¼Œä½¿ç”¨ç½‘é¡µç•Œé¢ã€‚åˆ©ç”¨ç½‘é¡µæµè§ˆå™¨ï¼ŒåŒä¸€ä¸ªå›¢é˜Ÿçš„è½¯ä»¶ç¨‹åºå‘˜ï¼Œå¯ä»¥ç›¸äº’å®¡é˜…å½¼æ­¤ä¿®æ”¹åçš„ç¨‹åºä»£ç ï¼Œå†³å®šæ˜¯å¦èƒ½å¤Ÿæäº¤ï¼Œé€€å›æˆ–è€…ç»§ç»­ä¿®æ”¹ã€‚å®ƒä½¿ç”¨Gitä½œä¸ºåº•å±‚ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ä»¥Ubuntu&amp;nbsp;12.04ï¼ŒGerrit2.9.4(ç›®å‰æœ€æ–°çš„ç‰ˆæœ¬)ä¸ºä¾‹ä»‹ç»æ•´ä¸ªæ­å»ºè¿‡ç¨‹&lt;/p&gt;
&lt;h2&gt;å‚è€ƒæ–‡çŒ®&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://gerrit-documentation.storage.googleapis.com/Documentation/2.9.4/install.html"&gt;https://gerrit-documentation.storage.googleapis.com/Documentation/2.9.4/install.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;ç¯å¢ƒè¦æ±‚&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span class="caps"&gt;JDK&lt;/span&gt;&amp;nbsp;1.7+&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;å‰æœŸå‡†å¤‡&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;å®‰è£…&lt;span class="caps"&gt;JDK1&lt;/span&gt;.7&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo add-apt-repository ppa:webupd8team/java
$ sudo apt-get update
$ sudo apt-get install oracle-java7-installer
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å®‰è£…Git&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt-get install git
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å®‰è£…NginxæœåŠ¡å™¨, ç”¨äºä½œä¸ºGerritç½‘ç«™çš„åå‘ä»£ç†ä»¥åŠ&lt;span class="caps"&gt;HTTP&lt;/span&gt;è®¤è¯&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt-get install nginx
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;æ•°æ®åº“è®¾ç½®&lt;/h2&gt;
&lt;p&gt;Gerritçš„ä½¿ç”¨å¿…é¡»ä¾èµ–äºæ•°æ®åº“ï¼Œç›®å‰æ”¯æŒçš„æ•°æ®åº“æœ‰H2(Gerritå†…ç½®çš„), PostgreSQL, MySQL,&amp;nbsp;Oracle.&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ä»¥MySQLä¸ºä¾‹ï¼Œä»‹ç»æ•°æ®åº“çš„è®¾ç½®ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# å®‰è£…æ•°æ®åº“&lt;/span&gt;
$ sudo apt-get install mysql-server

&lt;span class="c1"&gt;# åˆ›å»ºæ•°æ®åº“reviewdbå’Œç”¨æˆ·gerrit2ä¸ºåé¢åšå‡†å¤‡&lt;/span&gt;
&lt;span class="c1"&gt;# æ•°æ®åº“åå’Œç”¨æˆ·åå¯ä»¥æ ¹æ®å®é™…çš„ä½¿ç”¨æƒ…å†µè‡ªå·±é€‰æ‹©&lt;/span&gt;
mysql&amp;gt; CREATE USER &lt;span class="s1"&gt;&amp;#39;gerrit2&amp;#39;&lt;/span&gt;@&lt;span class="s1"&gt;&amp;#39;localhost&amp;#39;&lt;/span&gt; IDENTIFIED BY &lt;span class="s1"&gt;&amp;#39;secret&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
mysql&amp;gt; CREATE DATABASE reviewdb&lt;span class="p"&gt;;&lt;/span&gt;
mysql&amp;gt; GRANT ALL ON reviewdb.* TO &lt;span class="s1"&gt;&amp;#39;gerrit2&amp;#39;&lt;/span&gt;@&lt;span class="s1"&gt;&amp;#39;localhost&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
mysql&amp;gt; FLUSH PRIVILEGES&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;åˆå§‹åŒ–Gerritç«™ç‚¹&lt;/h2&gt;
&lt;p&gt;ç”±äºGerritåˆ›å»ºä¸­éœ€è¦ä¿å­˜è‡ªå·±çš„&lt;span class="caps"&gt;SSH&lt;/span&gt; Keys,&amp;nbsp;é…ç½®æ–‡ä»¶ï¼Œä»£ç åº“ç­‰ä¿¡æ¯ï¼Œå› æ­¤å¼ºçƒˆå»ºè®®å•ç‹¬åˆ›å»ºä¸€ä¸ªç”¨æˆ·æ¥åˆ›å»ºGerritç«™ç‚¹ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# åœ¨ç³»ç»Ÿä¸Šæ·»åŠ ç”¨æˆ·gerrit2&lt;/span&gt;
$ sudo adduser gerrit2
&lt;span class="c1"&gt;# åˆ‡æ¢åˆ°å½“å‰ç”¨æˆ·&lt;/span&gt;
$ sudo su gerrit2
&lt;span class="c1"&gt;# ä¸‹è½½gerritå®‰è£…åŒ…&lt;/span&gt;
$ wget http://gerrit-releases.storage.googleapis.com/gerrit-2.9.4.war
&lt;span class="c1"&gt;# -d æŒ‡å®šç«™ç‚¹çš„æ ¹ç›®å½•, æœ¬ä¾‹ä»¥gerrit2 HOMEç›®å½•ä¸‹çš„gerritä¸ºä¾‹&lt;/span&gt;
$ java -jar gerrit-2.9.4.war init -d gerrit

*** Gerrit Code Review 2.9.4
***

Create &lt;span class="s1"&gt;&amp;#39;/home/gerrit2/gerrit&amp;#39;&lt;/span&gt;  &lt;span class="o"&gt;[&lt;/span&gt;Y/n&lt;span class="o"&gt;]&lt;/span&gt;?

*** Git Repositories
***
&lt;span class="c1"&gt;# é¡¹ç›®ä»£ç ç›®å½•è®¾ç½®&lt;/span&gt;
Location of Git repositories   &lt;span class="o"&gt;[&lt;/span&gt;git&lt;span class="o"&gt;]&lt;/span&gt;:

*** SQL Database
***

Database server &lt;span class="nb"&gt;type&lt;/span&gt;           &lt;span class="o"&gt;[&lt;/span&gt;h2&lt;span class="o"&gt;]&lt;/span&gt;: mysql

Gerrit Code Review is not shipped with MySQL Connector/J 5.1.21
**  This library is required &lt;span class="k"&gt;for&lt;/span&gt; your configuration. **
Download and install it now &lt;span class="o"&gt;[&lt;/span&gt;Y/n&lt;span class="o"&gt;]&lt;/span&gt;?
Downloading http://repo2.maven.org/maven2/mysql/mysql-connector-java/5.1.21/mysql-connector-java-5.1.21.jar ... OK
Checksum mysql-connector-java-5.1.21.jar OK
Server hostname                &lt;span class="o"&gt;[&lt;/span&gt;localhost&lt;span class="o"&gt;]&lt;/span&gt;:           &lt;span class="c1"&gt;# æ­¤å¤„å¡«å†™åˆšåˆšåˆ›å»ºæ•°æ®åº“æ—¶è®¾ç½®çš„ä¿¡æ¯&lt;/span&gt;
Server port                    &lt;span class="o"&gt;[(&lt;/span&gt;mysql default&lt;span class="o"&gt;)]&lt;/span&gt;:
Database name                  &lt;span class="o"&gt;[&lt;/span&gt;reviewdb&lt;span class="o"&gt;]&lt;/span&gt;:
Database username              &lt;span class="o"&gt;[&lt;/span&gt;gerrit2&lt;span class="o"&gt;]&lt;/span&gt;:
gerrit2&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;s password             :
            confirm password :

*** Index
***

Type                           &lt;span class="o"&gt;[&lt;/span&gt;LUCENE/?&lt;span class="o"&gt;]&lt;/span&gt;:

*** User Authentication
***

&lt;span class="c1"&gt;# è®¤è¯æ–¹å¼è®¾ç½®, æ ¹æ®å®é™…æƒ…å†µè‡ªè¡Œé€‰æ‹©ï¼Œä¸æ¸…æ¥šæœ‰å“ªäº›æ–¹å¼å¯ä»¥è¾“å…¥&amp;quot;?&amp;quot;æŸ¥çœ‹&lt;/span&gt;
Authentication method          &lt;span class="o"&gt;[&lt;/span&gt;OPENID/?&lt;span class="o"&gt;]&lt;/span&gt;: http
Get username from custom HTTP header &lt;span class="o"&gt;[&lt;/span&gt;y/N&lt;span class="o"&gt;]&lt;/span&gt;?
SSO &lt;span class="nb"&gt;logout&lt;/span&gt; URL                 :

*** Review Labels
***

Install Verified label         &lt;span class="o"&gt;[&lt;/span&gt;y/N&lt;span class="o"&gt;]&lt;/span&gt;?

*** Email Delivery
***

&lt;span class="c1"&gt;# é‚®ä»¶æœåŠ¡å™¨è®¾ç½®, æ ¹æ®å®é™…æƒ…å†µè‡ªè¡Œé€‰æ‹©&lt;/span&gt;
SMTP server hostname           &lt;span class="o"&gt;[&lt;/span&gt;localhost&lt;span class="o"&gt;]&lt;/span&gt;:
SMTP server port               &lt;span class="o"&gt;[(&lt;/span&gt;default&lt;span class="o"&gt;)]&lt;/span&gt;:
SMTP encryption                &lt;span class="o"&gt;[&lt;/span&gt;NONE/?&lt;span class="o"&gt;]&lt;/span&gt;:
SMTP username                  :

*** Container Process
***

Run as                         &lt;span class="o"&gt;[&lt;/span&gt;gerrit2&lt;span class="o"&gt;]&lt;/span&gt;:
Java runtime                   &lt;span class="o"&gt;[&lt;/span&gt;/usr/lib/jvm/java-7-oracle/jre&lt;span class="o"&gt;]&lt;/span&gt;:
Copy gerrit-2.9.4.war to /home/gerrit2/gerrit/bin/gerrit.war &lt;span class="o"&gt;[&lt;/span&gt;Y/n&lt;span class="o"&gt;]&lt;/span&gt;?
Copying gerrit-2.9.4.war to /home/gerrit2/gerrit/bin/gerrit.war

*** SSH Daemon
***

Listen on address              &lt;span class="o"&gt;[&lt;/span&gt;*&lt;span class="o"&gt;]&lt;/span&gt;:
Listen on port                 &lt;span class="o"&gt;[&lt;/span&gt;29418&lt;span class="o"&gt;]&lt;/span&gt;:

Gerrit Code Review is not shipped with Bouncy Castle Crypto SSL v149
If available, Gerrit can take advantage of features
in the library, but will also &lt;span class="k"&gt;function&lt;/span&gt; without it.
Download and install it now &lt;span class="o"&gt;[&lt;/span&gt;Y/n&lt;span class="o"&gt;]&lt;/span&gt;?
Downloading http://www.bouncycastle.org/download/bcpkix-jdk15on-149.jar ... OK
Checksum bcpkix-jdk15on-149.jar OK

Gerrit Code Review is not shipped with Bouncy Castle Crypto Provider v149
** This library is required by Bouncy Castle Crypto SSL v149. **
Download and install it now &lt;span class="o"&gt;[&lt;/span&gt;Y/n&lt;span class="o"&gt;]&lt;/span&gt;?
Downloading http://www.bouncycastle.org/download/bcprov-jdk15on-149.jar ... OK
Checksum bcprov-jdk15on-149.jar OK
Generating SSH host key ... rsa... dsa... &lt;span class="k"&gt;done&lt;/span&gt;

*** HTTP Daemon
***

&lt;span class="c1"&gt;# å¯ç”¨åå‘ä»£ç†&lt;/span&gt;
Behind reverse proxy           &lt;span class="o"&gt;[&lt;/span&gt;y/N&lt;span class="o"&gt;]&lt;/span&gt;? y
Proxy uses SSL &lt;span class="o"&gt;(&lt;/span&gt;https://&lt;span class="o"&gt;)&lt;/span&gt;      &lt;span class="o"&gt;[&lt;/span&gt;y/N&lt;span class="o"&gt;]&lt;/span&gt;?
Subdirectory on proxy server   &lt;span class="o"&gt;[&lt;/span&gt;/&lt;span class="o"&gt;]&lt;/span&gt;:
Listen on address              &lt;span class="o"&gt;[&lt;/span&gt;*&lt;span class="o"&gt;]&lt;/span&gt;:
Listen on port                 &lt;span class="o"&gt;[&lt;/span&gt;8081&lt;span class="o"&gt;]&lt;/span&gt;:     &lt;span class="c1"&gt;# è®¾ç½®gerritç½‘ç«™ç›‘å¬ç«¯å£&lt;/span&gt;
Canonical URL                  &lt;span class="o"&gt;[&lt;/span&gt;http://localhost/&lt;span class="o"&gt;]&lt;/span&gt;:

*** Plugins
***

Install plugin commit-message-length-validator version v2.9.4 &lt;span class="o"&gt;[&lt;/span&gt;y/N&lt;span class="o"&gt;]&lt;/span&gt;?
Install plugin download-commands version v2.9.4 &lt;span class="o"&gt;[&lt;/span&gt;y/N&lt;span class="o"&gt;]&lt;/span&gt;?
Install plugin replication version v2.9.4 &lt;span class="o"&gt;[&lt;/span&gt;y/N&lt;span class="o"&gt;]&lt;/span&gt;?
Install plugin reviewnotes version v2.9.4 &lt;span class="o"&gt;[&lt;/span&gt;y/N&lt;span class="o"&gt;]&lt;/span&gt;?
Install plugin singleusergroup version v2.9.4 &lt;span class="o"&gt;[&lt;/span&gt;y/N&lt;span class="o"&gt;]&lt;/span&gt;?

Initialized /home/gerrit2/gerrit
Executing /home/gerrit2/gerrit/bin/gerrit.sh start
Starting Gerrit Code Review: OK
Waiting &lt;span class="k"&gt;for&lt;/span&gt; server on localhost:80 ... OK
Opening http://localhost/#/admin/projects/ ...No protocol specified
No protocol specified
OK
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;é…ç½®nginxåå‘ä»£ç†&lt;/h2&gt;
&lt;p&gt;åœ¨nginxé…ç½®ä¸­é—´ä¸­é…ç½®å¦‚ä¸‹:&lt;/p&gt;
&lt;pre&gt;
      location / {
            proxy_pass        http://localhost:8081;
            proxy_set_header  X-Forwarded-For $remote_addr;
            proxy_set_header  Host $host;
            auth_basic "Restricted";  # é…ç½®è®¿é—®é™åˆ¶å’Œå¯†ç æ–‡ä»¶
            auth_basic_user_file  /home/gerrit2/gerrit/etc/auth_passwd;

    }
&lt;/pre&gt;

&lt;p&gt;åˆ›å»ºç”¨æˆ·å¯†ç æ–‡ä»¶&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# åˆ›å»ºç”¨æˆ·åå’Œå¯†ç éƒ½æ˜¯adminçš„æ–‡ä»¶&lt;/span&gt;
$ htpasswd -b -c /home/gerrit2/gerrit/etc/auth_passwd admin admin
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;æµ‹è¯•&lt;/h2&gt;
&lt;p&gt;è®¿é—®&lt;a href="http://localhost/"&gt;http://localhost/&lt;/a&gt;è¾“å…¥ç”¨æˆ·åå’Œå¯†ç å³å¯ç™»é™†åˆ°Gerrit&lt;/p&gt;
&lt;h2&gt;Gerritç›®å½•ç»“æ„&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ tree -L &lt;span class="m"&gt;1&lt;/span&gt; gerrit
gerrit
â”œâ”€â”€ bin
â”œâ”€â”€ cache
â”œâ”€â”€ data
â”œâ”€â”€ etc  &lt;span class="c1"&gt;# é…ç½®ä¿¡æ¯, åˆ›å»ºç«™ç‚¹æ—¶çš„é…ç½®ä¿¡æ¯éƒ½ä¿å­˜åœ¨è¿™é‡Œï¼Œå¯ä»¥æŒ‰ç…§éœ€è¦ä¿®æ”¹&lt;/span&gt;
â”œâ”€â”€ git
â”œâ”€â”€ index
â”œâ”€â”€ lib
â”œâ”€â”€ logs
â”œâ”€â”€ plugins
â”œâ”€â”€ static
â””â”€â”€ tmp
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;å¸¸ç”¨å‘½ä»¤&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ gerrit/bin/gerrit.sh start  &lt;span class="c1"&gt;# å¯åŠ¨gerritæœåŠ¡&lt;/span&gt;
$ gerrit/bin/gerrit.sh stop   &lt;span class="c1"&gt;# å…³é—­gerritæœåŠ¡&lt;/span&gt;
$ gerrit/bin/gerrit.sh restart &lt;span class="c1"&gt;# é‡å¯gerritæœåŠ¡&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;æ›´å¤šä¿¡æ¯&lt;/h2&gt;
&lt;p&gt;å…³äºgerritä¸»é¢˜è®¾ç½®ï¼Œä½¿ç”¨æ–¹æ³•ç­‰æ›´å¤šä¿¡æ¯ï¼Œå®˜æ–¹æ–‡æ¡£ä¸Šå·²æœ‰è¯¦ç»†æè¿°,&amp;nbsp;è¯·å‚è€ƒ:&lt;/p&gt;
&lt;p&gt;&lt;a href="https://gerrit-documentation.storage.googleapis.com/Documentation/2.9.4/index.html"&gt;https://gerrit-documentation.storage.googleapis.com/Documentation/2.9.4/index.html&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;æ›´æ–°&lt;/h2&gt;
&lt;p&gt;&lt;em&gt;æœ€è¿‘å› å·¥ä½œéœ€è¦ï¼Œåˆé‡æ–°æ­å»ºäº†ä¸€æ¬¡gerrit, é‡åˆ°ä¸€äº›å‘, è®°å½•ä¸€ä¸‹&lt;/em&gt;.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å¦‚æœç”¨MySQLä½œä¸ºæ•°æ®åº“ï¼ŒGerritæ•°æ®åº“çš„å¼•æ“åº”è¯¥æ˜¯Innodb.&lt;/li&gt;
&lt;li&gt;é…ç½®é‚®ä»¶æ—¶ï¼Œä¸€ç›´è®¤è¯å¤±è´¥ï¼Œé™¤äº†åœ¨&lt;code&gt;etc/gerrt.conf&lt;/code&gt;æ–‡ä»¶é‡ŒæŒ‡å®š&lt;code&gt;sendmail.smtpUser&lt;/code&gt;, è¿˜éœ€è¦æŒ‡å®š&lt;code&gt;sendmail.from&lt;/code&gt;ä¸ºå‘é€é‚®ä»¶çš„ç”¨æˆ·ä¿¡æ¯, æ ¼å¼ä¸º&lt;code&gt;username &amp;lt;youmail@mail.com&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;è®¤è¯å¯ä»¥ä½¿ç”¨github oauthè®¤è¯&lt;a href="https://github.com/davido/gerrit-oauth-provider"&gt;gerrit-oauth-provider&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;</summary><category term="git"></category><category term="gerrit"></category></entry><entry><title>netstat</title><link href="http://blog.wiseturtles.com/posts/linux-netstat.html" rel="alternate"></link><published>2015-01-14T10:35:00+08:00</published><author><name>crazygit</name></author><id>tag:blog.wiseturtles.com,2015-01-14:posts/linux-netstat.html</id><summary type="html">&lt;p&gt;æœ¬æ–‡å‚è€ƒï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.cnblogs.com/ggjucheng/archive/2012/01/08/2316661.html"&gt;http://www.cnblogs.com/ggjucheng/archive/2012/01/08/2316661.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.binarytides.com/linux-netstat-command-examples/"&gt;http://www.binarytides.com/linux-netstat-command-examples/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;ä½œç”¨&lt;/h2&gt;
&lt;p&gt;Netstat å‘½ä»¤ç”¨äºæ˜¾ç¤ºå„ç§ç½‘ç»œç›¸å…³ä¿¡æ¯ï¼Œå¦‚ç½‘ç»œè¿æ¥ï¼Œè·¯ç”±è¡¨ï¼Œæ¥å£çŠ¶æ€
(Interface Statistics)ï¼Œmasquerade è¿æ¥ï¼Œå¤šæ’­æˆå‘˜ (Multicast Memberships) ç­‰&amp;nbsp;ç­‰ã€‚&lt;/p&gt;
&lt;h2&gt;è¾“å‡ºä¿¡æ¯å«ä¹‰&lt;/h2&gt;
&lt;p&gt;æ‰§è¡Œnetstatåï¼Œå…¶è¾“å‡ºç»“æœä¸º&lt;/p&gt;
&lt;pre&gt;
Active Internet connections (w/o servers)
Proto Recv-Q Send-Q Local Address Foreign Address State
tcp 0 2 210.34.6.89:telnet 210.34.6.96:2873 ESTABLISHED
tcp 296 0 210.34.6.89:1165 210.34.6.84:netbios-ssn ESTABLISHED
tcp 0 0 localhost.localdom:9001 localhost.localdom:1162 ESTABLISHED
tcp 0 0 localhost.localdom:1162 localhost.localdom:9001 ESTABLISHED
tcp 0 80 210.34.6.89:1161 210.34.6.10:netbios-ssn CLOSE

Active UNIX domain sockets (w/o servers)
Proto RefCnt Flags Type State I-Node Path
unix 1 [ ] STREAM CONNECTED 16178 @000000dd
unix 1 [ ] STREAM CONNECTED 16176 @000000dc
unix 9 [ ] DGRAM 5292 /dev/log
unix 1 [ ] STREAM CONNECTED 16182 @000000df
&lt;/pre&gt;

&lt;p&gt;ä»æ•´ä½“ä¸Šçœ‹ï¼Œnetstatçš„è¾“å‡ºç»“æœå¯ä»¥åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªæ˜¯Active Internet connectionsï¼Œç§°ä¸ºæœ‰æº&lt;span class="caps"&gt;TCP&lt;/span&gt;è¿æ¥ï¼Œå…¶ä¸­&amp;#8221;Recv-Q&amp;#8221;å’Œ&amp;#8221;Send-Q&amp;#8221;æŒ‡%0Açš„æ˜¯æ¥æ”¶é˜Ÿåˆ—å’Œå‘é€é˜Ÿåˆ—ã€‚è¿™äº›æ•°å­—ä¸€èˆ¬éƒ½åº”è¯¥æ˜¯0ã€‚å¦‚æœä¸æ˜¯åˆ™è¡¨ç¤ºè½¯ä»¶åŒ…æ­£åœ¨é˜Ÿåˆ—ä¸­å †ç§¯ã€‚è¿™ç§æƒ…å†µåªèƒ½åœ¨éå¸¸å°‘çš„æƒ…å†µè§åˆ°ã€‚&lt;/p&gt;
&lt;p&gt;å¦ä¸€ä¸ªæ˜¯Active &lt;span class="caps"&gt;UNIX&lt;/span&gt; domain socketsï¼Œç§°ä¸ºæœ‰æºUnixåŸŸå¥—æ¥å£(å’Œç½‘ç»œå¥—æ¥å­—ä¸€æ ·ï¼Œä½†æ˜¯åªèƒ½ç”¨äºæœ¬æœºé€šä¿¡ï¼Œæ€§èƒ½å¯ä»¥æé«˜ä¸€å€)ã€‚&amp;nbsp;Protoæ˜¾ç¤ºè¿æ¥ä½¿ç”¨çš„åè®®,RefCntè¡¨ç¤ºè¿æ¥åˆ°æœ¬å¥—æ¥å£ä¸Šçš„è¿›ç¨‹å·,Typesæ˜¾ç¤ºå¥—æ¥å£çš„ç±»å‹,Stateæ˜¾ç¤ºå¥—æ¥å£å½“å‰çš„çŠ¶æ€,Pathè¡¨ç¤ºè¿æ¥åˆ°å¥—æ¥å£çš„å…¶å®ƒè¿›ç¨‹ä½¿ç”¨çš„è·¯å¾„åã€‚&lt;/p&gt;
&lt;h2&gt;å¸¸è§å‚æ•°&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;-a&amp;nbsp;(all)æ˜¾ç¤ºæ‰€æœ‰ç›‘å¬å’Œæœªç›‘å¬çš„è¿æ¥&lt;/li&gt;
&lt;li&gt;-t&amp;nbsp;(tcp)ä»…æ˜¾ç¤ºtcpç›¸å…³é€‰é¡¹&lt;/li&gt;
&lt;li&gt;-u&amp;nbsp;(udp)ä»…æ˜¾ç¤ºudpç›¸å…³é€‰é¡¹&lt;/li&gt;
&lt;li&gt;-n&amp;nbsp;æ‹’ç»æ˜¾ç¤ºåˆ«åï¼Œèƒ½æ˜¾ç¤ºæ•°å­—çš„å…¨éƒ¨è½¬åŒ–æˆæ•°å­—ã€‚&lt;/li&gt;
&lt;li&gt;-l ä»…åˆ—å‡ºæœ‰åœ¨ Listen (ç›‘å¬) çš„æœå‹™çŠ¶æ€&amp;nbsp;*&lt;/li&gt;
&lt;li&gt;-p&amp;nbsp;æ˜¾ç¤ºå»ºç«‹ç›¸å…³é“¾æ¥çš„ç¨‹åºå&lt;/li&gt;
&lt;li&gt;-r&amp;nbsp;æ˜¾ç¤ºè·¯ç”±ä¿¡æ¯ï¼Œè·¯ç”±è¡¨&lt;/li&gt;
&lt;li&gt;-e&amp;nbsp;æ˜¾ç¤ºæ‰©å±•ä¿¡æ¯ï¼Œä¾‹å¦‚uidç­‰&lt;/li&gt;
&lt;li&gt;-s&amp;nbsp;æŒ‰å„ä¸ªåè®®è¿›è¡Œç»Ÿè®¡&lt;/li&gt;
&lt;li&gt;-c&amp;nbsp;æ¯éš”ä¸€ä¸ªå›ºå®šæ—¶é—´ï¼Œæ‰§è¡Œè¯¥netstatå‘½ä»¤ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;æç¤º&lt;/strong&gt;ï¼š&lt;span class="caps"&gt;LISTEN&lt;/span&gt;å’Œ&lt;span class="caps"&gt;LISTENING&lt;/span&gt;çš„çŠ¶æ€åªæœ‰ç”¨-aæˆ–è€…-læ‰èƒ½çœ‹åˆ°&lt;/p&gt;
&lt;h2&gt;å®ç”¨å‘½ä»¤å®ä¾‹&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# åˆ—å‡ºæ‰€æœ‰è¿æ¥ï¼ˆåŒ…æ‹¬ç›‘å¬å’Œæœªç›‘å¬çš„)&lt;/span&gt;
$ netstat -a

&lt;span class="c1"&gt;# åˆ—å‡ºæ‰€æœ‰tcpè¿æ¥&lt;/span&gt;
$ netstat -at

&lt;span class="c1"&gt;# åˆ—å‡ºæ‰€æœ‰udpè¿æ¥&lt;/span&gt;
$ netstat -au

&lt;span class="c1"&gt;# é»˜è®¤æƒ…å†µä¸‹ï¼Œnetstatå‘½ä»¤ä¼šåšä¸€ä¸ªreverse dns lookupå»æŸ¥æ‰¾è¿æ¥çš„ip&lt;/span&gt;
&lt;span class="c1"&gt;# å¯¹åº”çš„ä¸»æœºåï¼Œè¿™ä¼šé™ä½è¾“å‡ºé€Ÿåº¦ï¼Œå¦‚æœä¸éœ€è¦ï¼Œå¯ä»¥ä½¿ç”¨-n&lt;/span&gt;
&lt;span class="c1"&gt;# åœ¨netstatè¾“å‡ºä¸­ä¸æ˜¾ç¤ºä¸»æœºï¼Œç«¯å£å’Œç”¨æˆ·å(host, port or user)&lt;/span&gt;
$ netstat -an

&lt;span class="c1"&gt;# åˆ—å‡ºæ‰€æœ‰å¤„äºç›‘å¬çŠ¶æ€çš„&lt;/span&gt;
&lt;span class="c1"&gt;# -lé€‰é¡¹ä¸è¦ä¸-aåŒæ—¶ä½¿ç”¨ï¼Œä¸ç„¶ä¹Ÿä¼šåˆ—å‡ºæœªç›‘å¬çŠ¶æ€çš„è¿æ¥&lt;/span&gt;
$ netstat -l

&lt;span class="c1"&gt;# åˆ—å‡ºæ‰€æœ‰ç›‘å¬çŠ¶æ€çš„tcpè¿å‡»&lt;/span&gt;
$ netstat -lt

&lt;span class="c1"&gt;# åˆ—å‡ºæ‰€æœ‰ç›‘å¬çŠ¶æ€çš„udpè¿å‡»&lt;/span&gt;
$ netstat -lu

&lt;span class="c1"&gt;# åˆ—å‡ºæ‰€æœ‰çš„unixè¿æ¥&lt;/span&gt;
$ netstat -lx

&lt;span class="c1"&gt;# åœ¨netstatè¾“å‡ºä¸­æ˜¾ç¤ºPIDå’Œè¿›ç¨‹åç§°(-p),ç”¨æˆ·å(-e)&lt;/span&gt;
&lt;span class="c1"&gt;# -pä½¿ç”¨éœ€è¦rootæƒé™,ä¸ç„¶æ— æ³•è·å–PID&lt;/span&gt;
$ sudo netstat -ltpe
Proto Recv-Q Send-Q Local Address           Foreign Address         State       User       Inode       PID/Program name
tcp        &lt;span class="m"&gt;0&lt;/span&gt;      &lt;span class="m"&gt;0&lt;/span&gt; localhost:5037          *:*                     LISTEN      linliang   &lt;span class="m"&gt;4530492&lt;/span&gt;     11684/adb
tcp        &lt;span class="m"&gt;0&lt;/span&gt;      &lt;span class="m"&gt;0&lt;/span&gt; localhost:63342         *:*                     LISTEN      linliang   &lt;span class="m"&gt;10952269&lt;/span&gt;    6663/java
tcp        &lt;span class="m"&gt;0&lt;/span&gt;      &lt;span class="m"&gt;0&lt;/span&gt; localhost:9200          *:*                     LISTEN      linliang   &lt;span class="m"&gt;10361577&lt;/span&gt;    12461/ssh
tcp        &lt;span class="m"&gt;0&lt;/span&gt;      &lt;span class="m"&gt;0&lt;/span&gt; *:http                  *:*                     LISTEN      root       &lt;span class="m"&gt;12810&lt;/span&gt;       1344/nginx
tcp        &lt;span class="m"&gt;0&lt;/span&gt;      &lt;span class="m"&gt;0&lt;/span&gt; localhost:domain        *:*                     LISTEN      root       &lt;span class="m"&gt;683&lt;/span&gt;         1481/dnsmasq

&lt;span class="c1"&gt;# ä¸Šé¢çš„å‘½ä»¤æ€»å¦‚æœä½¿ç”¨-n,å°†ä¼šæ˜¾ç¤ºç”¨æˆ·UIDï¼Œè€Œä¸æ˜¯ç”¨æˆ·å&lt;/span&gt;

&lt;span class="c1"&gt;# åˆ—å‡ºæ‰€æœ‰çš„ç½‘ç»œç»Ÿè®¡ä¿¡æ¯&lt;/span&gt;
$ netstat -s
Ip:
&lt;span class="m"&gt;14989101&lt;/span&gt; total packets received
&lt;span class="m"&gt;0&lt;/span&gt; forwarded
&lt;span class="m"&gt;0&lt;/span&gt; incoming packets discarded
&lt;span class="m"&gt;14986294&lt;/span&gt; incoming packets delivered
&lt;span class="m"&gt;11643610&lt;/span&gt; requests sent out
Icmp:
    &lt;span class="m"&gt;6034&lt;/span&gt; ICMP messages received
    &lt;span class="m"&gt;71&lt;/span&gt; input ICMP message failed.
    ICMP input histogram:
        destination unreachable: 5774
        timeout in transit: 106
        &lt;span class="nb"&gt;echo&lt;/span&gt; replies: 154
    &lt;span class="m"&gt;6882&lt;/span&gt; ICMP messages sent
    &lt;span class="m"&gt;0&lt;/span&gt; ICMP messages failed
    ICMP output histogram:
....

&lt;span class="c1"&gt;# æ˜¾ç¤ºTCPæˆ–UDPè¿æ¥çš„ç»Ÿè®¡ä¿¡æ¯&lt;/span&gt;
$ netstat -st
$ netstat -su

&lt;span class="c1"&gt;# æ˜¾ç¤ºkernelçš„è·¯ç”±ä¿¡æ¯(-r)&lt;/span&gt;
$ netstat -rn
Kernel IP routing table
Destination     Gateway         Genmask         Flags   MSS Window  irtt Iface
0.0.0.0         172.26.50.1     0.0.0.0         UG        &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;          &lt;span class="m"&gt;0&lt;/span&gt; eth1
169.254.0.0     0.0.0.0         255.255.0.0     U         &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;          &lt;span class="m"&gt;0&lt;/span&gt; eth1
172.26.50.0     0.0.0.0         255.255.255.0   U         &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;          &lt;span class="m"&gt;0&lt;/span&gt; eth1
192.168.56.0    0.0.0.0         255.255.255.0   U         &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;          &lt;span class="m"&gt;0&lt;/span&gt; vboxnet0

&lt;span class="c1"&gt;# æ‰“å°ç½‘ç»œæ¥å£(-i)&lt;/span&gt;
$ netstat -i
Kernel Interface table
Iface   MTU Met   RX-OK RX-ERR RX-DRP RX-OVR    TX-OK TX-ERR TX-DRP TX-OVR Flg
eth1       &lt;span class="m"&gt;1500&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;  &lt;span class="m"&gt;10650979&lt;/span&gt;      &lt;span class="m"&gt;0&lt;/span&gt;      &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;      &lt;span class="m"&gt;10656895&lt;/span&gt;      &lt;span class="m"&gt;0&lt;/span&gt;      &lt;span class="m"&gt;0&lt;/span&gt;      &lt;span class="m"&gt;0&lt;/span&gt; BMRU
lo        &lt;span class="m"&gt;65536&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;   &lt;span class="m"&gt;5095802&lt;/span&gt;      &lt;span class="m"&gt;0&lt;/span&gt;      &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;       &lt;span class="m"&gt;5095802&lt;/span&gt;      &lt;span class="m"&gt;0&lt;/span&gt;      &lt;span class="m"&gt;0&lt;/span&gt;      &lt;span class="m"&gt;0&lt;/span&gt; LRU
vboxnet0   &lt;span class="m"&gt;1500&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;         &lt;span class="m"&gt;0&lt;/span&gt;      &lt;span class="m"&gt;0&lt;/span&gt;      &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;          &lt;span class="m"&gt;1505&lt;/span&gt;      &lt;span class="m"&gt;0&lt;/span&gt;      &lt;span class="m"&gt;0&lt;/span&gt;      &lt;span class="m"&gt;0&lt;/span&gt; BMRU

&lt;span class="c1"&gt;# ä¸Šé¢çš„è¾“å‡ºæ¯”è¾ƒåŸå§‹ï¼Œä¸ºäº†è·å–å‹å¥½è¾“å‡ºï¼Œå¯ä»¥åŠ ä¸Š(-e)&lt;/span&gt;
&lt;span class="c1"&gt;# è¾¾åˆ°ä¸ifconfigå‘½ä»¤ç±»ä¼¼çš„æ•ˆæœ&lt;/span&gt;
$ netstat -ie
Kernel Interface table
eth1      Link encap:Ethernet  HWaddr 44:39:c4:8d:d9:64
        inet addr:172.26.50.13  Bcast:172.26.50.255  Mask:255.255.255.0
        inet6 addr: fe80::4639:c4ff:fe8d:d964/64 Scope:Link
        UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
        RX packets:10651112 errors:0 dropped:0 overruns:0 frame:0
        TX packets:10656940 errors:0 dropped:0 overruns:0 carrier:0
        collisions:0 txqueuelen:1000
        RX bytes:6607723134 &lt;span class="o"&gt;(&lt;/span&gt;6.6 GB&lt;span class="o"&gt;)&lt;/span&gt;  TX bytes:10396843122 &lt;span class="o"&gt;(&lt;/span&gt;10.3 GB&lt;span class="o"&gt;)&lt;/span&gt;
        Interrupt:20 Memory:f7c00000-f7c20000

lo        Link encap:Local Loopback
        inet addr:127.0.0.1  Mask:255.0.0.0
        inet6 addr: ::1/128 Scope:Host
        UP LOOPBACK RUNNING  MTU:65536  Metric:1
        RX packets:5095811 errors:0 dropped:0 overruns:0 frame:0
        TX packets:5095811 errors:0 dropped:0 overruns:0 carrier:0
        collisions:0 txqueuelen:0
        RX bytes:2717552755 &lt;span class="o"&gt;(&lt;/span&gt;2.7 GB&lt;span class="o"&gt;)&lt;/span&gt;  TX bytes:2717552755 &lt;span class="o"&gt;(&lt;/span&gt;2.7 GB&lt;span class="o"&gt;)&lt;/span&gt;

vboxnet0  Link encap:Ethernet  HWaddr 0a:00:27:00:00:00
        inet addr:192.168.56.1  Bcast:192.168.56.255  Mask:255.255.255.0
        inet6 addr: fe80::800:27ff:fe00:0/64 Scope:Link
        UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
        RX packets:0 errors:0 dropped:0 overruns:0 frame:0
        TX packets:1505 errors:0 dropped:0 overruns:0 carrier:0
        collisions:0 txqueuelen:1000
        RX bytes:0 &lt;span class="o"&gt;(&lt;/span&gt;0.0 B&lt;span class="o"&gt;)&lt;/span&gt;  TX bytes:130893 &lt;span class="o"&gt;(&lt;/span&gt;130.8 KB&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</summary><category term="linux"></category><category term="command"></category><category term="netstat"></category></entry><entry><title>ps</title><link href="http://blog.wiseturtles.com/posts/linux-ps.html" rel="alternate"></link><published>2015-01-13T09:51:00+08:00</published><author><name>crazygit</name></author><id>tag:blog.wiseturtles.com,2015-01-13:posts/linux-ps.html</id><summary type="html">&lt;p&gt;æœ¬æ–‡å‚è€ƒï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.binarytides.com/linux-ps-command/"&gt;10 basic examples of Linux ps&amp;nbsp;command&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://man.linuxde.net/ps"&gt;http://man.linuxde.net/ps&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;ä½œç”¨&lt;/h2&gt;
&lt;p&gt;pså‘½ä»¤ç”¨æ¥åˆ—å‡ºç³»ç»Ÿä¸­å½“å‰è¿è¡Œçš„é‚£äº›è¿›ç¨‹ã€‚pså‘½ä»¤åˆ—å‡ºçš„æ˜¯å½“å‰é‚£äº›è¿›ç¨‹çš„å¿«ç…§ï¼Œå°±æ˜¯æ‰§è¡Œpså‘½ä»¤çš„é‚£ä¸ªæ—¶åˆ»çš„é‚£äº›è¿›ç¨‹ï¼Œå¦‚æœæƒ³è¦åŠ¨æ€çš„æ˜¾ç¤ºè¿›ç¨‹ä¿¡æ¯ï¼Œå¯ä»¥ä½¿ç”¨topå‘½ä»¤&amp;nbsp;ã€‚&lt;/p&gt;
&lt;h2&gt;å‚æ•°å½¢å¼&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Unixé£æ ¼çš„å‚æ•°ï¼Œå‰é¢åŠ å•ç ´æŠ˜çº¿&lt;/li&gt;
&lt;li&gt;&lt;span class="caps"&gt;BSD&lt;/span&gt;é£æ ¼çš„å‚æ•°ï¼Œ&amp;nbsp;å‰é¢ä¸åŠ ç ´æŠ˜çº¿&lt;/li&gt;
&lt;li&gt;&lt;span class="caps"&gt;GNU&lt;/span&gt;é£æ ¼çš„é•¿å‚æ•°ï¼Œå‰é¢åŠ åŒç ´æŠ˜çº¿&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸åŒé£æ ¼çš„å‚æ•°å¯ä»¥æ··åˆä½¿ç”¨,&amp;nbsp;ä½†æ˜¯è¦æ³¨æ„é¿å…å†²çªã€‚&lt;/p&gt;
&lt;p&gt;å¦‚:&lt;/p&gt;
&lt;p&gt;å‘½ä»¤&lt;code&gt;ps -aux&lt;/code&gt;å’Œ&lt;code&gt;ps aux&lt;/code&gt;æ˜¯ä¸ä¸€æ ·çš„ã€‚&lt;code&gt;ps -aux&lt;/code&gt;æ˜¯æ˜¾ç¤ºæ‰€æœ‰&amp;#8217;x&amp;#8217;ç”¨æˆ·çš„è¿›ç¨‹, å¦‚æœç”¨æˆ·&amp;#8217;x&amp;#8217;ä¸å­˜åœ¨çš„è¯ï¼Œä¼šç»™å‡ºè­¦å‘Šï¼Œå¹¶å½“åš&lt;code&gt;ps aux&lt;/code&gt;æ¥å¤„ç†ã€‚&lt;/p&gt;
&lt;h2&gt;ä½¿ç”¨ç¤ºä¾‹&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;æ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ps aux
$ ps -ef
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ˜¾ç¤ºæŒ‡å®šç”¨æˆ·çš„è¿›ç¨‹&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ps -f -u www-data

&lt;span class="c1"&gt;# å¤šä¸ªç”¨æˆ·ç”¨&amp;#39;,&amp;#39;éš”å¼€&lt;/span&gt;
$ ps -f -u www-data,root
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æŒ‰ç…§è¿›ç¨‹åæ¥æŒ‡å®š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ps -C nginx
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;-C&amp;nbsp;é€‰é¡¹å¿…é¡»æä¾›ç²¾ç¡®çš„è¿›ç¨‹åï¼Œä¸æä¾›æ¨¡ç³ŠåŒ¹é…ï¼Œä¸€èˆ¬ä½¿ç”¨grepæ¥æœç´¢&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ps -ef &lt;span class="p"&gt;|&lt;/span&gt;grep nginx
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æŒ‰ç…§è¿›ç¨‹idæ¥æŸ¥æ‰¾&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ps -f -p 3150,7298,6455
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æŒ‰ç…§&lt;span class="caps"&gt;CPU&lt;/span&gt;æˆ–å†…å­˜ä½¿ç”¨æƒ…å†µæ’åº&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨&amp;#8212;sorté€‰é¡¹å¯ä»¥æŒ‰ç…§ä¸€å®šçš„é¡ºåºæ’åºï¼Œå¹¶ä¸”å¯ä»¥åœ¨æŒ‡å®šçš„æ’åºåˆ—å‰æ·»åŠ &amp;#8217;-&amp;#8216;æˆ–&amp;#8217;+&amp;#8217;&amp;nbsp;æ¥æŒ‡å®šé™åºæˆ–å‡åºæ’åˆ—&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# cpu ä½¿ç”¨å‰ï¼•&lt;/span&gt;
$ ps aux --sort&lt;span class="o"&gt;=&lt;/span&gt;-pcpu &lt;span class="p"&gt;|&lt;/span&gt; head -5

&lt;span class="c1"&gt;# å†…å­˜ ä½¿ç”¨å‰ï¼•&lt;/span&gt;
$ ps aux --sort&lt;span class="o"&gt;=&lt;/span&gt;-pmem &lt;span class="p"&gt;|&lt;/span&gt; head -5

&lt;span class="c1"&gt;# æŒ‡å®šå¤šä¸ªæ’åº&lt;/span&gt;
$ ps jax --sort&lt;span class="o"&gt;=&lt;/span&gt;uid,-ppid,+pid
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ’åºé€‰é¡¹å‚è§man page &lt;code&gt;STANDARD FORMAT SPECIFIERS&lt;/code&gt;éƒ¨åˆ†&lt;/p&gt;
&lt;p&gt;éƒ¨åˆ†é€‰é¡¹åˆ—å‡ºå¦‚ä¸‹
&lt;pre&gt;
cmd          simple name of executable
pcpu         cpu utilization
pmem         ratio of the process's resident set size to the
            physical memory on the machine, expressed as a
            percentage
flags        flags as in long format F field
pgrp         process group ID
tpgid        controlling tty process group ID
cutime       cumulative user time
cstime       cumulative system time
utime        user time
min_flt      number of minor page faults
maj_flt      number of major page faults
cmin_flt     cumulative minor page faults
cmaj_flt     cumulative major page faults
session      session ID
pid          process ID
ppid         parent process ID
rss          resident set size
resident     resident pages
size         approximate amount of swap space that would be
            required if the process were to dirty all writable
            pages and then be swapped out. This number is
            very rough!
share        amount of shared pages
tty          the device number of the controlling tty
start_time   time process was started
uid          user ID number
user         user name
vsize        total VM size in kB
priority     kernel scheduling priority
&lt;/pre&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æŒ‰ç…§æ ‘çŠ¶ç»“æ„æ˜¾ç¤º&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨&lt;code&gt;--forest&lt;/code&gt;é€‰é¡¹&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ps -f --forest -C nginx
UID        PID  PPID  C STIME TTY          TIME CMD
root      &lt;span class="m"&gt;1344&lt;/span&gt;     &lt;span class="m"&gt;1&lt;/span&gt;  &lt;span class="m"&gt;0&lt;/span&gt;  &lt;span class="m"&gt;2014&lt;/span&gt; ?        00:00:00 nginx: master process /usr/sbin/nginx
www-data  &lt;span class="m"&gt;1345&lt;/span&gt;  &lt;span class="m"&gt;1344&lt;/span&gt;  &lt;span class="m"&gt;0&lt;/span&gt;  &lt;span class="m"&gt;2014&lt;/span&gt; ?        00:01:52  &lt;span class="se"&gt;\_&lt;/span&gt; nginx: worker process
www-data  &lt;span class="m"&gt;1346&lt;/span&gt;  &lt;span class="m"&gt;1344&lt;/span&gt;  &lt;span class="m"&gt;0&lt;/span&gt;  &lt;span class="m"&gt;2014&lt;/span&gt; ?        00:02:05  &lt;span class="se"&gt;\_&lt;/span&gt; nginx: worker process
www-data  &lt;span class="m"&gt;1348&lt;/span&gt;  &lt;span class="m"&gt;1344&lt;/span&gt;  &lt;span class="m"&gt;0&lt;/span&gt;  &lt;span class="m"&gt;2014&lt;/span&gt; ?        00:02:00  &lt;span class="se"&gt;\_&lt;/span&gt; nginx: worker process
www-data  &lt;span class="m"&gt;1349&lt;/span&gt;  &lt;span class="m"&gt;1344&lt;/span&gt;  &lt;span class="m"&gt;0&lt;/span&gt;  &lt;span class="m"&gt;2014&lt;/span&gt; ?        00:01:04  &lt;span class="se"&gt;\_&lt;/span&gt; nginx: worker process
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä¸è¦æŠŠ&lt;code&gt;--forest&lt;/code&gt;å’Œ&lt;code&gt;--sort&lt;/code&gt;é€‰é¡¹æ··åˆä½¿ç”¨ï¼Œå› ä¸ºä»–ä»¬éƒ½ä¼šå½±å“ç»“æœ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åˆ—å‡ºå­è¿›ç¨‹&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ï¼ƒå…ˆåˆ—å‡ºæ‰€æœ‰nginxè¿›ç¨‹
$ ps -o pid,uname,comm -C nginx
PID USER     COMMAND
&lt;span class="m"&gt;1344&lt;/span&gt; root     nginx
&lt;span class="m"&gt;1345&lt;/span&gt; www-data nginx
&lt;span class="m"&gt;1346&lt;/span&gt; www-data nginx
&lt;span class="m"&gt;1348&lt;/span&gt; www-data nginx
&lt;span class="m"&gt;1349&lt;/span&gt; www-data nginx

&lt;span class="c1"&gt;# ä½¿ç”¨--ppidé€‰é¡¹åˆ—å‡ºå­è¿›ç¨‹&lt;/span&gt;
$ ps --ppid 2359
PID TTY          TIME CMD
&lt;span class="m"&gt;4524&lt;/span&gt; ?        00:00:00 apache2
&lt;span class="m"&gt;4525&lt;/span&gt; ?        00:00:00 apache2
&lt;span class="m"&gt;4526&lt;/span&gt; ?        00:00:00 apache2
&lt;span class="m"&gt;4527&lt;/span&gt; ?        00:00:00 apache2
&lt;span class="m"&gt;4528&lt;/span&gt; ?        00:00:00 apache2
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åˆ—å‡ºè¿›ç¨‹çš„çº¿ç¨‹&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨&lt;code&gt;-L&lt;/code&gt;é€‰é¡¹&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ps -p &lt;span class="m"&gt;3150&lt;/span&gt; -L
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æŒ‡å®šè¾“å‡ºç»“æœçš„åˆ—&lt;/p&gt;
&lt;p&gt;å¯ä»¥è¾“å‡ºçš„åˆ—ä¿¡æ¯ä¸&lt;code&gt;--sort&lt;/code&gt;é€‰é¡¹ä¸€æ ·ï¼Œå¯ä»¥æŸ¥çœ‹man page çš„&lt;code&gt;STANDARD FORMAT SPECIFIERS&lt;/code&gt;éƒ¨åˆ†&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ps -e -o pid,uname,pcpu,pmem,comm

&lt;span class="c1"&gt;# æ˜¾ç¤ºæŒ‡å®šçš„åˆ—å¹¶ç»™å‡ºåˆ«å&lt;/span&gt;
$ ps -e -o pid,uname&lt;span class="o"&gt;=&lt;/span&gt;USERNAME,pcpu&lt;span class="o"&gt;=&lt;/span&gt;CPU_USAGE,pmem,comm
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å°†psè½¬å˜ä¸ºå®æ—¶æ›´æ–°çš„æ•ˆæœ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$  watch -n &lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;ps -e -o pid,uname,cmd,pmem,pcpu --sort=-pmem,-pcpu | head -15&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åˆ—å‡ºåƒµå°¸è¿›ç¨‹&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ps -A -o stat,ppid,pid,cmd &lt;span class="p"&gt;|&lt;/span&gt;grep -e &lt;span class="s1"&gt;&amp;#39;^[Zz]&amp;#39;&lt;/span&gt;
$ ps -ef &lt;span class="p"&gt;|&lt;/span&gt; grep defunct &lt;span class="p"&gt;|&lt;/span&gt; grep -v grep
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æŒ‡å®šç”¨æˆ·, ç¨‹åºçš„&lt;span class="caps"&gt;CPU&lt;/span&gt;å’Œå†…å­˜ä½¿ç”¨æƒ…å†µç»Ÿè®¡&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# redisç”¨æˆ·æ‰€ä½¿ç”¨çš„cpuå’Œå†…å­˜ä¿¡æ¯ç»Ÿè®¡&lt;/span&gt;
$ ps --no-headers -u redis -o pcpu,pmem,command &lt;span class="p"&gt;|&lt;/span&gt; awk &lt;span class="s1"&gt;&amp;#39;{cpu += $1; pmem += $2} END {print cpu, pmem}&amp;#39;&lt;/span&gt;
&lt;span class="c1"&gt;# æŸ¥çœ‹åªæ˜¯ç›‘å¬åœ¨6000ç«¯å£çš„redisä½¿ç”¨cpuå’Œå†…å­˜ä¿¡æ¯&lt;/span&gt;
$ ps --no-headers -u redis -o pcpu,pmem,command &lt;span class="p"&gt;|&lt;/span&gt; grep &lt;span class="m"&gt;6000&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; awk &lt;span class="s1"&gt;&amp;#39;{cpu += $1; pmem += $2} END {print cpu, pmem}&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;éƒ¨åˆ†é€‰é¡¹è§£é‡Š&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;
-aï¼š æ˜¾ç¤ºæ‰€æœ‰ç»ˆç«¯æœºä¸‹æ‰§è¡Œçš„ç¨‹åºï¼Œé™¤äº†é˜¶æ®µä½œä¸šé¢†å¯¼è€…ä¹‹å¤–ã€‚
aï¼š  æ˜¾ç¤ºç°è¡Œç»ˆç«¯æœºä¸‹çš„æ‰€æœ‰ç¨‹åºï¼ŒåŒ…æ‹¬å…¶ä»–ç”¨æˆ·çš„ç¨‹åºã€‚
-Aï¼š æ˜¾ç¤ºæ‰€æœ‰ç¨‹åºã€‚
-cï¼š æ˜¾ç¤ºCLSå’ŒPRIæ ä½ã€‚
cï¼š  åˆ—å‡ºç¨‹åºæ—¶ï¼Œæ˜¾ç¤ºæ¯ä¸ªç¨‹åºçœŸæ­£çš„æŒ‡ä»¤åç§°ï¼Œè€Œä¸åŒ…å«è·¯å¾„ï¼Œé€‰é¡¹æˆ–å¸¸é©»æœåŠ¡çš„æ ‡ç¤ºã€‚
-C&lt;æŒ‡ä»¤åç§°&gt;ï¼š æŒ‡å®šæ‰§è¡ŒæŒ‡ä»¤çš„åç§°ï¼Œå¹¶åˆ—å‡ºè¯¥æŒ‡ä»¤çš„ç¨‹åºçš„çŠ¶å†µã€‚
-dï¼š æ˜¾ç¤ºæ‰€æœ‰ç¨‹åºï¼Œä½†ä¸åŒ…æ‹¬é˜¶æ®µä½œä¸šé¢†å¯¼è€…çš„ç¨‹åºã€‚
-eï¼š æ­¤é€‰é¡¹çš„æ•ˆæœå’ŒæŒ‡å®š"A"é€‰é¡¹ç›¸åŒã€‚
eï¼š  åˆ—å‡ºç¨‹åºæ—¶ï¼Œæ˜¾ç¤ºæ¯ä¸ªç¨‹åºæ‰€ä½¿ç”¨çš„ç¯å¢ƒå˜é‡ã€‚
-fï¼š æ˜¾ç¤ºUID,PPIP,Cä¸STIMEæ ä½ã€‚
fï¼š  ç”¨ASCIIå­—ç¬¦æ˜¾ç¤ºæ ‘çŠ¶ç»“æ„ï¼Œè¡¨è¾¾ç¨‹åºé—´çš„ç›¸äº’å…³ç³»ã€‚
-g&lt;ç¾¤ç»„åç§°&gt;ï¼š æ­¤é€‰é¡¹çš„æ•ˆæœå’ŒæŒ‡å®š"-G"é€‰é¡¹ç›¸åŒï¼Œå½“äº¦èƒ½ä½¿ç”¨é˜¶æ®µä½œä¸šé¢†å¯¼è€…çš„åç§°æ¥æŒ‡å®šã€‚
gï¼š  æ˜¾ç¤ºç°è¡Œç»ˆç«¯æœºä¸‹çš„æ‰€æœ‰ç¨‹åºï¼ŒåŒ…æ‹¬ç¾¤ç»„é¢†å¯¼è€…çš„ç¨‹åºã€‚ -G&lt;ç¾¤ç»„è¯†åˆ«ç &gt;ï¼šåˆ—å‡ºå±äºè¯¥ç¾¤ç»„çš„ç¨‹åºçš„çŠ¶å†µï¼Œä¹Ÿå¯ä½¿ç”¨ç¾¤ç»„åç§°æ¥æŒ‡å®šã€‚
hï¼š  ä¸æ˜¾ç¤ºæ ‡é¢˜åˆ—ã€‚
-Hï¼š æ˜¾ç¤ºæ ‘çŠ¶ç»“æ„ï¼Œè¡¨ç¤ºç¨‹åºé—´çš„ç›¸äº’å…³ç³»ã€‚
-jæˆ–jï¼š é‡‡ç”¨å·¥ä½œæ§åˆ¶çš„æ ¼å¼æ˜¾ç¤ºç¨‹åºçŠ¶å†µã€‚
-læˆ–lï¼š é‡‡ç”¨è¯¦ç»†çš„æ ¼å¼æ¥æ˜¾ç¤ºç¨‹åºçŠ¶å†µã€‚
Lï¼š  åˆ—å‡ºæ ä½çš„ç›¸å…³ä¿¡æ¯ã€‚
-mæˆ–mï¼š æ˜¾ç¤ºæ‰€æœ‰çš„æ‰§è¡Œç»ªã€‚
nï¼š  ä»¥æ•°å­—æ¥è¡¨ç¤ºUSERå’ŒWCHANæ ä½ã€‚
-Nï¼š æ˜¾ç¤ºæ‰€æœ‰çš„ç¨‹åºï¼Œé™¤äº†æ‰§è¡ŒpsæŒ‡ä»¤ç»ˆç«¯æœºä¸‹çš„ç¨‹åºä¹‹å¤–ã€‚
-p&lt;ç¨‹åºè¯†åˆ«ç &gt;ï¼š æŒ‡å®šç¨‹åºè¯†åˆ«ç ï¼Œå¹¶åˆ—å‡ºè¯¥ç¨‹åºçš„çŠ¶å†µã€‚
p&lt;ç¨‹åºè¯†åˆ«ç &gt;ï¼š  æ­¤é€‰é¡¹çš„æ•ˆæœå’ŒæŒ‡å®š"-p"é€‰é¡¹ç›¸åŒï¼Œåªåœ¨åˆ—è¡¨æ ¼å¼æ–¹é¢ç¨æœ‰å·®å¼‚ã€‚
rï¼š  åªåˆ—å‡ºç°è¡Œç»ˆç«¯æœºæ­£åœ¨æ‰§è¡Œä¸­çš„ç¨‹åºã€‚
-s&lt;é˜¶æ®µä½œä¸š&gt;ï¼š   æŒ‡å®šé˜¶æ®µä½œä¸šçš„ç¨‹åºè¯†åˆ«ç ï¼Œå¹¶åˆ—å‡ºéš¶å±è¯¥é˜¶æ®µä½œä¸šçš„ç¨‹åºçš„çŠ¶å†µã€‚
sï¼š  é‡‡ç”¨ç¨‹åºä¿¡å·çš„æ ¼å¼æ˜¾ç¤ºç¨‹åºçŠ¶å†µã€‚
Sï¼š  åˆ—å‡ºç¨‹åºæ—¶ï¼ŒåŒ…æ‹¬å·²ä¸­æ–­çš„å­ç¨‹åºèµ„æ–™ã€‚
-t&lt;ç»ˆç«¯æœºç¼–å·&gt;ï¼š  æŒ‡å®šç»ˆç«¯æœºç¼–å·ï¼Œå¹¶åˆ—å‡ºå±äºè¯¥ç»ˆç«¯æœºçš„ç¨‹åºçš„çŠ¶å†µã€‚
t&lt;ç»ˆç«¯æœºç¼–å·&gt;ï¼š   æ­¤é€‰é¡¹çš„æ•ˆæœå’ŒæŒ‡å®š"-t"é€‰é¡¹ç›¸åŒï¼Œåªåœ¨åˆ—è¡¨æ ¼å¼æ–¹é¢ç¨æœ‰å·®å¼‚ã€‚
-Tï¼š   æ˜¾ç¤ºç°è¡Œç»ˆç«¯æœºä¸‹çš„æ‰€æœ‰ç¨‹åºã€‚
-u&lt;ç”¨æˆ·è¯†åˆ«ç &gt;ï¼š  æ­¤é€‰é¡¹çš„æ•ˆæœå’ŒæŒ‡å®š"-U"é€‰é¡¹ç›¸åŒã€‚
uï¼š  ä»¥ç”¨æˆ·ä¸ºä¸»çš„æ ¼å¼æ¥æ˜¾ç¤ºç¨‹åºçŠ¶å†µã€‚
-U&lt;ç”¨æˆ·è¯†åˆ«ç &gt;ï¼š  åˆ—å‡ºå±äºè¯¥ç”¨æˆ·çš„ç¨‹åºçš„çŠ¶å†µï¼Œä¹Ÿå¯ä½¿ç”¨ç”¨æˆ·åç§°æ¥æŒ‡å®šã€‚
U&lt;ç”¨æˆ·åç§°&gt;ï¼š  åˆ—å‡ºå±äºè¯¥ç”¨æˆ·çš„ç¨‹åºçš„çŠ¶å†µã€‚
vï¼š  é‡‡ç”¨è™šæ‹Ÿå†…å­˜çš„æ ¼å¼æ˜¾ç¤ºç¨‹åºçŠ¶å†µã€‚
-Væˆ–Vï¼š  æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ã€‚
-wæˆ–wï¼š  é‡‡ç”¨å®½é˜”çš„æ ¼å¼æ¥æ˜¾ç¤ºç¨‹åºçŠ¶å†µã€‚ã€€
xï¼š  æ˜¾ç¤ºæ‰€æœ‰ç¨‹åºï¼Œä¸ä»¥ç»ˆç«¯æœºæ¥åŒºåˆ†ã€‚
Xï¼š  é‡‡ç”¨æ—§å¼çš„Linux i386ç™»é™†æ ¼å¼æ˜¾ç¤ºç¨‹åºçŠ¶å†µã€‚
-yï¼š  é…åˆé€‰é¡¹"-l"ä½¿ç”¨æ—¶ï¼Œä¸æ˜¾ç¤ºF(flag)æ ä½ï¼Œå¹¶ä»¥RSSæ ä½å–ä»£ADDRæ ä½ã€€ã€‚
-&lt;ç¨‹åºè¯†åˆ«ç &gt;ï¼š  æ­¤é€‰é¡¹çš„æ•ˆæœå’ŒæŒ‡å®š"p"é€‰é¡¹ç›¸åŒã€‚
--cols&lt;æ¯åˆ—å­—ç¬¦æ•°&gt;ï¼š  è®¾ç½®æ¯åˆ—çš„æœ€å¤§å­—ç¬¦æ•°ã€‚
--columns&lt;æ¯åˆ—å­—ç¬¦æ•°&gt;ï¼š  æ­¤é€‰é¡¹çš„æ•ˆæœå’ŒæŒ‡å®š"--cols"é€‰é¡¹ç›¸åŒã€‚
--cumulativeï¼š  æ­¤é€‰é¡¹çš„æ•ˆæœå’ŒæŒ‡å®š"S"é€‰é¡¹ç›¸åŒã€‚
--deselectï¼š  æ­¤é€‰é¡¹çš„æ•ˆæœå’ŒæŒ‡å®š"-N"é€‰é¡¹ç›¸åŒã€‚
--forestï¼š  æ­¤é€‰é¡¹çš„æ•ˆæœå’ŒæŒ‡å®š"f"é€‰é¡¹ç›¸åŒã€‚
--headersï¼š  é‡å¤æ˜¾ç¤ºæ ‡é¢˜åˆ—ã€‚
--helpï¼š  åœ¨çº¿å¸®åŠ©ã€‚
--infoï¼š  æ˜¾ç¤ºæ’é”™ä¿¡æ¯ã€‚
--lines&lt;æ˜¾ç¤ºåˆ—æ•°&gt;ï¼š  è®¾ç½®æ˜¾ç¤ºç”»é¢çš„åˆ—æ•°ã€‚
--no-headersï¼š  æ­¤é€‰é¡¹çš„æ•ˆæœå’ŒæŒ‡å®š"h"é€‰é¡¹ç›¸åŒï¼Œåªåœ¨åˆ—è¡¨æ ¼å¼æ–¹é¢ç¨æœ‰å·®å¼‚ã€‚
--group&lt;ç¾¤ç»„åç§°&gt;ï¼š  æ­¤é€‰é¡¹çš„æ•ˆæœå’ŒæŒ‡å®š"-G"é€‰é¡¹ç›¸åŒã€‚
--Group&lt;ç¾¤ç»„è¯†åˆ«ç &gt;ï¼š  æ­¤é€‰é¡¹çš„æ•ˆæœå’ŒæŒ‡å®š"-G"é€‰é¡¹ç›¸åŒã€‚
--pid&lt;ç¨‹åºè¯†åˆ«ç &gt;ï¼š  æ­¤é€‰é¡¹çš„æ•ˆæœå’ŒæŒ‡å®š"-p"é€‰é¡¹ç›¸åŒã€‚
--rows&lt;æ˜¾ç¤ºåˆ—æ•°&gt;ï¼š  æ­¤é€‰é¡¹çš„æ•ˆæœå’ŒæŒ‡å®š"--lines"é€‰é¡¹ç›¸åŒã€‚
--sid&lt;é˜¶æ®µä½œä¸š&gt;ï¼š  æ­¤é€‰é¡¹çš„æ•ˆæœå’ŒæŒ‡å®š"-s"é€‰é¡¹ç›¸åŒã€‚
--tty&lt;ç»ˆç«¯æœºç¼–å·&gt;ï¼š  æ­¤é€‰é¡¹çš„æ•ˆæœå’ŒæŒ‡å®š"-t"é€‰é¡¹ç›¸åŒã€‚
--user&lt;ç”¨æˆ·åç§°&gt;ï¼š  æ­¤é€‰é¡¹çš„æ•ˆæœå’ŒæŒ‡å®š"-U"é€‰é¡¹ç›¸åŒã€‚
--User&lt;ç”¨æˆ·è¯†åˆ«ç &gt;ï¼š  æ­¤é€‰é¡¹çš„æ•ˆæœå’ŒæŒ‡å®š"-U"é€‰é¡¹ç›¸åŒã€‚
--versionï¼š  æ­¤é€‰é¡¹çš„æ•ˆæœå’ŒæŒ‡å®š"-V"é€‰é¡¹ç›¸åŒã€‚
--widty&lt;æ¯åˆ—å­—ç¬¦æ•°&gt;ï¼š  æ­¤é€‰é¡¹çš„æ•ˆæœå’ŒæŒ‡å®š"-cols"é€‰é¡¹ç›¸åŒã€‚
&lt;/pre&gt;</summary><category term="linux"></category><category term="command"></category><category term="ps"></category></entry><entry><title>export Android cantacts with vCard format viaÂ adb</title><link href="http://blog.wiseturtles.com/posts/android-vcard-from-command-line.html" rel="alternate"></link><published>2015-01-11T15:20:00+08:00</published><author><name>Zhang Wanming</name></author><id>tag:blog.wiseturtles.com,2015-01-11:posts/android-vcard-from-command-line.html</id><summary type="html">&lt;p&gt;å‚è€ƒ:
&lt;a href="http://www.commandlinefu.com/commands/view/11688/dump-android-contacts-sms"&gt;http://www.commandlinefu.com/commands/view/11688/dump-android-contacts-sms&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ˜¨å¤©æ‰‹æœº(&lt;span class="caps"&gt;TCL&lt;/span&gt;&amp;nbsp;S960)æ‰åœ°ä¸‹æŠŠå±å¹•æ‘”åäº†ï¼ŒGoogleè¢«xxåï¼Œå°±æ²¡åœ¨ç”¨è¿‡å…¶å®ƒé€šè®¯å½•åŒæ­¥ï¼Œåªå¥½æƒ³åŠæ³•ä»åæ‰‹æœºé‡Œå¯¼å‡ºï¼Œå±å¹•å®Œå…¨åäº†ï¼Œåªèƒ½é€šè¿‡adbå®Œæˆã€‚&lt;/p&gt;
&lt;h1&gt;è·å–é€šè®¯å½•&lt;/h1&gt;
&lt;p&gt;é€šè¿‡adbä»æ‰‹æœºä¸­å¯¼å‡ºé€šè®¯å½•ï¼Œå¯ä»¥ç”¨å¦‚ä¸‹æ–¹æ³•ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;am&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ adb shell am start -t &lt;span class="s2"&gt;&amp;quot;text/x-vcard&amp;quot;&lt;/span&gt; -d &lt;span class="s2"&gt;&amp;quot;file:///sdcard/contacts.vcf&amp;quot;&lt;/span&gt; -a android.intent.action.VIEW com.android.contacts
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;get&amp;nbsp;contacts.db&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ adb pull /data/data/com.android.providers.contacts/databases/contacts2.db .
sqlite3 -batch &lt;span class="s"&gt;&amp;lt;&amp;lt;EOF contacts2.db &amp;lt;CR&amp;gt; .header on &amp;lt;CR&amp;gt; .mode tabs &amp;lt;CR&amp;gt; select * from data; &amp;lt;CR&amp;gt; EOF&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ–¹æ³•ä¸€æ— æ³•è¿è¡ŒæŠ¥é”™ï¼Œæ–¹æ³•äºŒéœ€è¦rootæƒé™ã€‚&lt;/p&gt;
&lt;p&gt;Androidæ‹¿rootæƒé™è²Œä¼¼å°±ä¸¤ç§æ–¹æ³•: xx rootå·¥å…·(é€šè¿‡ç³»ç»Ÿæ¼æ´è·å–rootæƒé™); åˆ·recoryåˆ†åŒºã€‚&amp;nbsp;æˆ‘æ²¡æ‰¾åˆ°è¯¥æœºå‹çš„recoryï¼Œè€Œæ˜¯ç”¨360ä¸€é”®rootï¼Œæ‹¿åˆ°rootæƒé™ã€‚&lt;/p&gt;
&lt;p&gt;æœ‰äº†rootæƒé™ï¼Œé€šè¿‡æ–¹æ³•äºŒå°±å¯ä»¥æ‹¿åˆ°é€šè®¯å½•æ•°æ®äº†ï¼Œå‰©ä¸‹çš„å°±æ˜¯ç”ŸæˆvCardæ ¼å¼ã€‚&amp;nbsp;githubä¸Šå·²ç»æœ‰äººå†™äº†é€šè¿‡contacts2.dbç”ŸæˆvCardæ–‡ä»¶çš„å°å·¥å…·ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ git clone git@github.com:stachre/dump-contacts2db.git
$ &lt;span class="nb"&gt;cd&lt;/span&gt; dump-contacts2db
$ bash dump-contacts2db.sh path/to/contacts2.db &amp;gt; path/to/contacts.vcf
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¦‚æœè¿˜å¸Œæœ›è·å–æ‰‹æœºé‡Œçš„çŸ­ä¿¡ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ adb pull /data/data/com.android.providers.telephony/databases/mmssms.db
$ sqlite3 -batch &lt;span class="s"&gt;&amp;lt;&amp;lt;EOF mmssms.db &amp;lt;CR&amp;gt; .header on &amp;lt;CR&amp;gt; .mode tabs &amp;lt;CR&amp;gt; select * from sms; &amp;lt;CR&amp;gt; EOF&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;Androidè§£é”&lt;/h1&gt;
&lt;p&gt;Androidè§£é”æˆ‘æ²¡è¯•è¿‡ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;adb shell
&lt;span class="nb"&gt;cd&lt;/span&gt; /data/data/com.android.providers.settings/databases
sqlite3 settings.db
update system &lt;span class="nb"&gt;set&lt;/span&gt; &lt;span class="nv"&gt;value&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; where &lt;span class="nv"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;â€™lock_pattern_autolock&lt;span class="s1"&gt;&amp;#39;;&lt;/span&gt;
&lt;span class="s1"&gt;update secure set value=0 where name=â€™lock_pattern_autolock&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
update system &lt;span class="nb"&gt;set&lt;/span&gt; &lt;span class="nv"&gt;value&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; where &lt;span class="nv"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;â€™lockscreen.lockedoutpermanently&lt;span class="s1"&gt;&amp;#39;;&lt;/span&gt;
&lt;span class="s1"&gt;update secure set value=0 where name=â€™lockscreen.lockedoutpermanently&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
.quit
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¦‚æœæ˜¯å¿˜äº†Androidé”å±å›¾æ¡ˆï¼Œæƒ³æ‰¾å›ï¼Œå¯ä»¥è¯•è¯•:&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/sch3m4/androidpatternlock"&gt;https://github.com/sch3m4/androidpatternlock&lt;/a&gt;&lt;/p&gt;</summary><category term="Android"></category><category term="vCard"></category><category term="adb"></category></entry><entry><title>free</title><link href="http://blog.wiseturtles.com/posts/linux-free.html" rel="alternate"></link><published>2015-01-09T15:27:00+08:00</published><author><name>crazygit</name></author><id>tag:blog.wiseturtles.com,2015-01-09:posts/linux-free.html</id><summary type="html">&lt;p&gt;æœ¬æ¥è½¬è½½è‡ª:&lt;/p&gt;
&lt;p&gt;&lt;a href="http://www.cnblogs.com/coldplayerest/archive/2010/02/20/1669949.html"&gt;http://www.cnblogs.com/coldplayerest/archive/2010/02/20/1669949.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ›´å¤šfreeå‘½ä»¤å¯å‚çœ‹:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/5/html/Tuning_and_Optimizing_Red_Hat_Enterprise_Linux_for_Oracle_9i_and_10g_Databases/chap-Oracle_9i_and_10g_Tuning_Guide-Memory_Usage_and_Page_Cache.html"&gt;è¿™é‡Œ&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="http://www.linuxatemyram.com/"&gt;http://www.linuxatemyram.com/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;topå‘½ä»¤è¾“å‡ºè§£é‡Š&lt;/h2&gt;
&lt;p&gt;ä¸‹é¢æ˜¯freeçš„è¿è¡Œç»“æœï¼Œä¸€å…±æœ‰4è¡Œã€‚ä¸ºäº†æ–¹ä¾¿è¯´æ˜ï¼Œæˆ‘åŠ ä¸Šäº†åˆ—å·.
&lt;pre&gt;
                   1          2          3          4          5          6
1              total       used       free     shared    buffers     cached
2 Mem:      24677460   23276064    1401396          0     870540   12084008
3 -/+ buffers/cache:   10321516   14355944
4 Swap:     25151484     224188   24927296
&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ ·å¯ä»¥æŠŠfreeçš„è¾“å‡ºçœ‹æˆä¸€ä¸ªäºŒç»´æ•°ç»„&lt;span class="caps"&gt;FO&lt;/span&gt;(Free&amp;nbsp;Output)ã€‚ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;FO[2][1] = 24677460
FO[3][2] = 10321516
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;freeçš„è¾“å‡ºä¸€å…±æœ‰å››è¡Œï¼Œç¬¬å››è¡Œä¸ºäº¤æ¢åŒºçš„ä¿¡æ¯ï¼Œåˆ†åˆ«æ˜¯äº¤æ¢çš„æ€»é‡ï¼ˆtotalï¼‰ï¼Œä½¿ç”¨é‡ï¼ˆusedï¼‰å’Œæœ‰å¤šå°‘ç©ºé—²çš„äº¤æ¢åŒºï¼ˆfreeï¼‰ï¼Œè¿™ä¸ªæ¯”è¾ƒæ¸…æ¥šï¼Œä¸è¯´å¤ªå¤šã€‚
freeè¾“å‡ºçš„ç¬¬äºŒè¡Œå’Œç¬¬ä¸‰è¡Œæ˜¯æ¯”è¾ƒè®©äººè¿·æƒ‘çš„ã€‚è¿™ä¸¤è¡Œéƒ½æ˜¯è¯´æ˜å†…å­˜ä½¿ç”¨æƒ…å†µçš„ã€‚ç¬¬ä¸€åˆ—æ˜¯æ€»é‡ï¼ˆtotalï¼‰ï¼Œç¬¬äºŒåˆ—æ˜¯ä½¿ç”¨é‡ï¼ˆusedï¼‰ï¼Œç¬¬ä¸‰åˆ—æ˜¯å¯ç”¨é‡ï¼ˆfreeï¼‰ã€‚
ç¬¬ä¸€è¡Œçš„è¾“å‡ºæ—¶ä»æ“ä½œç³»ç»Ÿï¼ˆ&lt;span class="caps"&gt;OS&lt;/span&gt;ï¼‰æ¥çœ‹çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä»&lt;span class="caps"&gt;OS&lt;/span&gt;çš„è§’åº¦æ¥çœ‹ï¼Œè®¡ç®—æœºä¸Šä¸€å…±æœ‰:
&lt;span class="caps"&gt;24677460KB&lt;/span&gt;ï¼ˆç¼ºçœæ—¶freeçš„å•ä½ä¸º&lt;span class="caps"&gt;KB&lt;/span&gt;ï¼‰ç‰©ç†å†…å­˜ï¼Œå³&lt;span class="caps"&gt;FO&lt;/span&gt;[2][1]ï¼›åœ¨è¿™äº›ç‰©ç†å†…å­˜ä¸­æœ‰&lt;span class="caps"&gt;23276064KB&lt;/span&gt;ï¼ˆå³&lt;span class="caps"&gt;FO&lt;/span&gt;[2][2]ï¼‰è¢«ä½¿ç”¨äº†ï¼›è¿˜ç”¨&lt;span class="caps"&gt;1401396KB&lt;/span&gt;ï¼ˆå³&lt;span class="caps"&gt;FO&lt;/span&gt;[2][3]ï¼‰æ˜¯å¯ç”¨çš„ï¼›&amp;nbsp;è¿™é‡Œå¾—åˆ°ç¬¬ä¸€ä¸ªç­‰å¼ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;FO[2][1] = FO[2][2] + FO[2][3]
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;span class="caps"&gt;FO&lt;/span&gt;[2][4]è¡¨ç¤ºè¢«å‡ ä¸ªè¿›ç¨‹å…±äº«çš„å†…å­˜çš„ï¼Œç°åœ¨å·²ç»deprecatedï¼Œå…¶å€¼æ€»æ˜¯0ï¼ˆå½“ç„¶åœ¨ä¸€äº›ç³»ç»Ÿä¸Šä¹Ÿå¯èƒ½ä¸æ˜¯0ï¼Œä¸»è¦å–å†³äºfreeå‘½ä»¤æ˜¯æ€ä¹ˆå®ç°çš„ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;span class="caps"&gt;FO&lt;/span&gt;[2][5]è¡¨ç¤ºè¢«&lt;span class="caps"&gt;OS&lt;/span&gt; bufferä½çš„å†…å­˜ã€‚&lt;span class="caps"&gt;FO&lt;/span&gt;[2][6]è¡¨ç¤ºè¢«&lt;span class="caps"&gt;OS&lt;/span&gt;&amp;nbsp;cacheçš„å†…å­˜ã€‚åœ¨æœ‰äº›æ—¶å€™bufferå’Œcacheè¿™ä¸¤ä¸ªè¯ç»å¸¸æ··ç”¨ã€‚ä¸è¿‡åœ¨ä¸€äº›æ¯”è¾ƒä½å±‚çš„è½¯ä»¶é‡Œæ˜¯è¦åŒºåˆ†è¿™ä¸¤ä¸ªè¯çš„ï¼Œçœ‹è€å¤–çš„æ´‹æ–‡:&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;A buffer is something that has yet to be &amp;#8220;written&amp;#8221; to&amp;nbsp;disk.&lt;/li&gt;
&lt;li&gt;A cache is something that has been &amp;#8220;read&amp;#8221; from the disk and stored for later&amp;nbsp;use.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¹Ÿå°±æ˜¯è¯´bufferæ˜¯ç”¨äºå­˜æ”¾è¦è¾“å‡ºåˆ°diskï¼ˆå—è®¾å¤‡ï¼‰çš„æ•°æ®çš„ï¼Œè€Œcacheæ˜¯å­˜æ”¾ä»diskä¸Šè¯»å‡ºçš„æ•°æ®ã€‚è¿™äºŒè€…æ˜¯ä¸ºäº†æé«˜&lt;span class="caps"&gt;IO&lt;/span&gt;æ€§èƒ½çš„ï¼Œå¹¶ç”±&lt;span class="caps"&gt;OS&lt;/span&gt;ç®¡ç†ã€‚&lt;/p&gt;
&lt;p&gt;Linuxå’Œå…¶ä»–æˆç†Ÿçš„æ“ä½œç³»ç»Ÿï¼ˆä¾‹å¦‚windowsï¼‰ï¼Œä¸ºäº†æé«˜&lt;span class="caps"&gt;IO&lt;/span&gt; readçš„æ€§èƒ½ï¼Œæ€»æ˜¯è¦å¤šcacheä¸€äº›æ•°æ®ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆ&lt;span class="caps"&gt;FO&lt;/span&gt;[2][6]ï¼ˆcached memoryï¼‰æ¯”è¾ƒå¤§ï¼Œè€Œ&lt;span class="caps"&gt;FO&lt;/span&gt;[2][3]æ¯”è¾ƒå°çš„åŸå› ã€‚æˆ‘ä»¬å¯ä»¥åšä¸€ä¸ªç®€å•çš„æµ‹è¯•:&lt;/p&gt;
&lt;p&gt;é‡Šæ”¾æ‰è¢«ç³»ç»Ÿcacheå ç”¨çš„æ•°æ®ï¼›&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;echo 3&amp;gt;/proc/sys/vm/drop_caches
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¯»ä¸€ä¸ªå¤§æ–‡ä»¶ï¼Œå¹¶è®°å½•æ—¶é—´ï¼›
å…³é—­è¯¥æ–‡ä»¶ï¼›
é‡è¯»è¿™ä¸ªå¤§æ–‡ä»¶ï¼Œå¹¶è®°å½•æ—¶é—´ï¼›&amp;nbsp;ç¬¬äºŒæ¬¡è¯»åº”è¯¥æ¯”ç¬¬ä¸€æ¬¡å¿«å¾ˆå¤šã€‚åŸæ¥æˆ‘åšè¿‡ä¸€ä¸ªBerkeleyDBçš„è¯»æ“ä½œï¼Œå¤§æ¦‚è¦è¯»5Gçš„æ–‡ä»¶ï¼Œå‡ åƒä¸‡æ¡è®°å½•ã€‚åœ¨æˆ‘çš„ç¯å¢ƒä¸Šï¼Œç¬¬äºŒæ¬¡è¯»æ¯”ç¬¬ä¸€æ¬¡å¤§æ¦‚å¯ä»¥å¿«9å€å·¦å³ã€‚&lt;/p&gt;
&lt;p&gt;freeè¾“å‡ºçš„ç¬¬äºŒè¡Œæ˜¯ä»ä¸€ä¸ªåº”ç”¨ç¨‹åºçš„è§’åº¦çœ‹ç³»ç»Ÿå†…å­˜çš„ä½¿ç”¨æƒ…å†µã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¯¹äº&lt;span class="caps"&gt;FO&lt;/span&gt;[3][2]ï¼Œå³-buffers/cacheï¼Œè¡¨ç¤ºä¸€ä¸ªåº”ç”¨ç¨‹åºè®¤ä¸ºç³»ç»Ÿè¢«ç”¨æ‰å¤šå°‘å†…å­˜ï¼›&lt;/li&gt;
&lt;li&gt;å¯¹äº&lt;span class="caps"&gt;FO&lt;/span&gt;[3][3]ï¼Œå³+buffers/cacheï¼Œè¡¨ç¤ºä¸€ä¸ªåº”ç”¨ç¨‹åºè®¤ä¸ºç³»ç»Ÿè¿˜æœ‰å¤šå°‘å†…å­˜ï¼›&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å› ä¸ºè¢«ç³»ç»Ÿcacheå’Œbufferå ç”¨çš„å†…å­˜å¯ä»¥è¢«å¿«é€Ÿå›æ”¶ï¼Œæ‰€ä»¥é€šå¸¸&lt;span class="caps"&gt;FO&lt;/span&gt;[3][3]æ¯”&lt;span class="caps"&gt;FO&lt;/span&gt;[2][3]ä¼šå¤§å¾ˆå¤šã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œè¿˜ç”¨ä¸¤ä¸ªç­‰å¼ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;FO[3][2] = FO[2][2] - FO[2][5] - FO[2][6]
FO[3][3] = FO[2][3] + FO[2][5] + FO[2][6]
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿™äºŒè€…éƒ½ä¸éš¾ç†è§£ã€‚&lt;/p&gt;
&lt;p&gt;freeå‘½ä»¤ç”±procps.*.rpmæä¾›ï¼ˆåœ¨Redhatç³»åˆ—çš„&lt;span class="caps"&gt;OS&lt;/span&gt;ä¸Šï¼‰ã€‚freeå‘½ä»¤çš„æ‰€æœ‰è¾“å‡ºå€¼éƒ½æ˜¯ä»/proc/meminfoä¸­è¯»å‡ºçš„ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ç³»ç»Ÿä¸Šå¯èƒ½æœ‰meminfo(2)è¿™ä¸ªå‡½æ•°ï¼Œå®ƒå°±æ˜¯ä¸ºäº†è§£æ/proc/meminfoçš„ã€‚procpsè¿™ä¸ªåŒ…è‡ªå·±å®ç°äº†meminfo()è¿™ä¸ªå‡½æ•°ã€‚å¯ä»¥ä¸‹è½½ä¸€ä¸ªprocpsçš„taråŒ…çœ‹çœ‹å…·ä½“å®ç°ï¼Œç°åœ¨æœ€æ–°ç‰ˆå¼3.2.8ã€‚&lt;/p&gt;</summary><category term="linux"></category><category term="command"></category><category term="free"></category></entry><entry><title>htop</title><link href="http://blog.wiseturtles.com/posts/linux-htop.html" rel="alternate"></link><published>2015-01-09T14:04:00+08:00</published><author><name>crazygit</name></author><id>tag:blog.wiseturtles.com,2015-01-09:posts/linux-htop.html</id><summary type="html">&lt;p&gt;æœ¬æ–‡è½¬æ‘˜è‡ª &lt;a href="https://blog.linuxeye.com/350.html"&gt;Linuxè¿ç»´ç¬”è®°&lt;/a&gt;.&amp;nbsp;å¹¶åšé€‚å½“ä¿®æ”¹ã€€&lt;/p&gt;
&lt;h2&gt;ç®€ä»‹&lt;/h2&gt;
&lt;p&gt;Htopæ˜¯ä¸€æ¬¾è¿è¡ŒäºLinuxç³»ç»Ÿç›‘æ§ä¸è¿›ç¨‹ç®¡ç†è½¯ä»¶ï¼Œç”¨äºå–ä»£Unixä¸‹ä¼ ç»Ÿçš„topã€‚ä¸topåªæä¾›æœ€æ¶ˆè€—èµ„æºçš„è¿›ç¨‹åˆ—è¡¨ä¸åŒï¼Œhtopæä¾›æ‰€æœ‰è¿›ç¨‹çš„åˆ—è¡¨ï¼Œå¹¶ä¸”ä½¿ç”¨å½©è‰²æ ‡è¯†å‡ºå¤„ç†å™¨ã€swapå’Œå†…å­˜çŠ¶æ€ã€‚&lt;/p&gt;
&lt;p&gt;ç”¨æˆ·ä¸€èˆ¬å¯ä»¥åœ¨topæ— æ³•æä¾›è¯¦å°½ç³»ç»Ÿä¿¡æ¯çš„æƒ…å†µä¸‹é€‰æ‹©å®‰è£…å¹¶ä½¿ç”¨htopã€‚æ¯”å¦‚ï¼Œåœ¨æŸ¥æ‰¾åº”ç”¨ç¨‹åºçš„å†…å­˜æ³„æ¼é—®é¢˜æ—¶ã€‚ä¸topç›¸æ¯”ï¼Œhtopæä¾›æ›´æ–¹ä¾¿ã€å…‰æ ‡æ§åˆ¶çš„ç•Œé¢æ¥æ€æ­»è¿›ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;htopç”¨Cè¯­è¨€ç¼–å†™ï¼Œé‡‡ç”¨äº†ncursesåº“ã€‚htopçš„åç§°æºäºå…¶ä½œè€…çš„åå­—ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;htopå®‰è£…&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt-get install htop
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;htopç”¨æ³•&lt;/p&gt;
&lt;p&gt;&lt;img alt="htop screenshot" src="http://pic.yupoo.com/crazygit_v/ElYP0hQ6/medium.jpg" /&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šé¢å·¦ä¸Šè§’æ˜¾ç¤º&lt;span class="caps"&gt;CPU&lt;/span&gt;ã€å†…å­˜ã€Swapä½¿ç”¨æƒ…å†µï¼Œå³è¾¹æ˜¾ç¤ºä»»åŠ¡ã€è´Ÿè½½ã€å¼€æœºæ—¶é—´ï¼Œä¸‹é¢å°±æ˜¯è¿›ç¨‹å®æ—¶çŠ¶å†µã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¸¸ç”¨å¿«æ·é”®&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯ F1~F10 çš„åŠŸèƒ½å’Œå¯¹åº”çš„å­—æ¯å¿«æ·é”®ã€‚
&lt;table class="table table-striped table-bordered table-hover table-condensed"&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;
    Shortcut Key
&lt;/td&gt;
&lt;td&gt;
    Function Key
&lt;/td&gt;
&lt;td&gt;
    Description
&lt;/td&gt;
&lt;td&gt;
    ä¸­æ–‡è¯´æ˜
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
    h, ?
&lt;/td&gt;
&lt;td&gt;
    F1
&lt;/td&gt;
&lt;td&gt;
    Invoke htop Help
&lt;/td&gt;
&lt;td&gt;
    æŸ¥çœ‹htopä½¿ç”¨è¯´æ˜
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
    S
&lt;/td&gt;
&lt;td&gt;
    F2
&lt;/td&gt;
&lt;td&gt;
    Htop Setup Menu
&lt;/td&gt;
&lt;td&gt;
    htop è®¾å®š
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
    /
&lt;/td&gt;
&lt;td&gt;
    F3
&lt;/td&gt;
&lt;td&gt;
    Search for a Process
&lt;/td&gt;
&lt;td&gt;
    æœç´¢è¿›ç¨‹
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
    \
&lt;/td&gt;
&lt;td&gt;
    F4
&lt;/td&gt;
&lt;td&gt;
    Incremental process filtering
&lt;/td&gt;
&lt;td&gt;
    å¢é‡è¿›ç¨‹è¿‡æ»¤å™¨
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
    t
&lt;/td&gt;
&lt;td&gt;
    F5
&lt;/td&gt;
&lt;td&gt;
    Tree View
&lt;/td&gt;
&lt;td&gt;
    æ˜¾ç¤ºæ ‘å½¢ç»“æ„
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
    ,
&lt;/td&gt;
&lt;td&gt;
    F6
&lt;/td&gt;
&lt;td&gt;
    Sort by a column
&lt;/td&gt;
&lt;td&gt;
    é€‰æ‹©æ’åºæ–¹å¼
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
    [
&lt;/td&gt;
&lt;td&gt;
    F7
&lt;/td&gt;
&lt;td&gt;
    Nice â€“ (change priority)
&lt;/td&gt;
&lt;td&gt;
    å¯å‡å°‘niceå€¼ï¼Œè¿™æ ·å°±å¯ä»¥æé«˜å¯¹åº”è¿›ç¨‹çš„ä¼˜å…ˆçº§
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
    ]
&lt;/td&gt;
&lt;td&gt;
    F8
&lt;/td&gt;
&lt;td&gt;
    Nice + (change priority)
&lt;/td&gt;
&lt;td&gt;
    å¯å¢åŠ niceå€¼ï¼Œè¿™æ ·å°±å¯ä»¥é™ä½å¯¹åº”è¿›ç¨‹çš„ä¼˜å…ˆçº§
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
    k
&lt;/td&gt;
&lt;td&gt;
    F9
&lt;/td&gt;
&lt;td&gt;
    Kill a Process
&lt;/td&gt;
&lt;td&gt;
    å¯å¯¹è¿›ç¨‹ä¼ é€’ä¿¡å·
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
    q
&lt;/td&gt;
&lt;td&gt;
    F10
&lt;/td&gt;
&lt;td&gt;
    Quit htop
&lt;/td&gt;
&lt;td&gt;
    ç»“æŸhtop
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å‘½ä»¤è¡Œé€‰é¡¹ï¼ˆ&lt;span class="caps"&gt;COMMAND&lt;/span&gt;-&lt;span class="caps"&gt;LINE&lt;/span&gt; &lt;span class="caps"&gt;OPTIONS&lt;/span&gt;ï¼‰&lt;/p&gt;
&lt;p&gt;&lt;table class="table table-striped table-bordered table-hover table-condensed"&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;
    -C â€“no-color
&lt;/td&gt;
&lt;td&gt;
    ä½¿ç”¨ä¸€ä¸ªå•è‰²çš„é…è‰²æ–¹æ¡ˆ
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
    -d â€“delay=&lt;span class="caps"&gt;DELAY&lt;/span&gt;
&lt;/td&gt;
&lt;td&gt;
    è®¾ç½®å»¶è¿Ÿæ›´æ–°æ—¶é—´ï¼Œå•ä½ç§’
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
    -h â€“help
&lt;/td&gt;
&lt;td&gt;
    æ˜¾ç¤ºhtop å‘½ä»¤å¸®åŠ©ä¿¡æ¯
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
    -u â€“user=&lt;span class="caps"&gt;USERNAME&lt;/span&gt;
&lt;/td&gt;
&lt;td&gt;
    åªæ˜¾ç¤ºä¸€ä¸ªç»™å®šçš„ç”¨æˆ·çš„è¿‡ç¨‹
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
    -p â€“pid=&lt;span class="caps"&gt;PID&lt;/span&gt;,&lt;span class="caps"&gt;PID&lt;/span&gt;â€¦
&lt;/td&gt;
&lt;td&gt;
    åªæ˜¾ç¤ºç»™å®šçš„PIDs
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
    -s â€“sort-key &lt;span class="caps"&gt;COLUMN&lt;/span&gt;
&lt;/td&gt;
&lt;td&gt;
    ä¾æ­¤åˆ—æ¥æ’åº
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
    -v â€“version
&lt;/td&gt;
&lt;td&gt;
    æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;äº¤äº’å¼å‘½ä»¤ï¼ˆ&lt;span class="caps"&gt;INTERACTIVE&lt;/span&gt; &lt;span class="caps"&gt;COMMANDS&lt;/span&gt;ï¼‰&lt;/p&gt;
&lt;p&gt;&lt;table class="table table-striped table-bordered table-hover table-condensed"&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;
    ä¸Šä¸‹é”®æˆ–PgUP, PgDn
&lt;/td&gt;
&lt;td&gt;
    é€‰å®šæƒ³è¦çš„è¿›ç¨‹ï¼Œå·¦å³é”®æˆ–Home, End ç§»åŠ¨å­—æ®µï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥ç”¨é¼ æ ‡é€‰å®šè¿›ç¨‹
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
    Space
&lt;/td&gt;
&lt;td&gt;
    æ ‡è®°/å–æ¶ˆæ ‡è®°ä¸€ä¸ªè¿›ç¨‹ã€‚å‘½ä»¤å¯ä»¥ä½œç”¨äºå¤šä¸ªè¿›ç¨‹ï¼Œä¾‹å¦‚ â€œkillâ€ï¼Œå°†åº”ç”¨äºæ‰€æœ‰å·²æ ‡è®°çš„è¿›ç¨‹
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
    U
&lt;/td&gt;
&lt;td&gt;
    å–æ¶ˆæ ‡è®°æ‰€æœ‰è¿›ç¨‹
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
    s
&lt;/td&gt;
&lt;td&gt;
    é€‰æ‹©æŸä¸€è¿›ç¨‹ï¼ŒæŒ‰s:ç”¨straceè¿½è¸ªè¿›ç¨‹çš„ç³»ç»Ÿè°ƒç”¨
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
    l
&lt;/td&gt;
&lt;td&gt;
    æ˜¾ç¤ºè¿›ç¨‹æ‰“å¼€çš„æ–‡ä»¶: å¦‚æœå®‰è£…äº†lsofï¼ŒæŒ‰æ­¤é”®å¯ä»¥æ˜¾ç¤ºè¿›ç¨‹æ‰€æ‰“å¼€çš„æ–‡ä»¶
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
    I
&lt;/td&gt;
&lt;td&gt;
    å€’è½¬æ’åºé¡ºåºï¼Œå¦‚æœæ’åºæ˜¯æ­£åºçš„ï¼Œåˆ™åè½¬æˆå€’åºçš„ï¼Œåä¹‹äº¦ç„¶
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
    +, -
&lt;/td&gt;
&lt;td&gt;
    åœ¨æ ‘å½¢æ¨¡å¼ä¸‹ï¼Œå±•å¼€æˆ–æŠ˜å å­æ ‘
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
    a (åœ¨æœ‰å¤šå¤„ç†å™¨çš„æœºå™¨ä¸Š)
&lt;/td&gt;
&lt;td&gt;
    è®¾ç½® &lt;span class="caps"&gt;CPU&lt;/span&gt; affinity: æ ‡è®°ä¸€ä¸ªè¿›ç¨‹å…è®¸ä½¿ç”¨å“ªäº›&lt;span class="caps"&gt;CPU&lt;/span&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
    u
&lt;/td&gt;
&lt;td&gt;
    æ˜¾ç¤ºç‰¹å®šç”¨æˆ·è¿›ç¨‹
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
    M
&lt;/td&gt;
&lt;td&gt;
    æŒ‰Memoryä½¿ç”¨æ’åº
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
    P
&lt;/td&gt;
&lt;td&gt;
    æŒ‰&lt;span class="caps"&gt;CPU&lt;/span&gt;ä½¿ç”¨æ’åº
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
    T
&lt;/td&gt;
&lt;td&gt;
    æŒ‰Time+ä½¿ç”¨æ’åº
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
    F
&lt;/td&gt;
&lt;td&gt;
    è·Ÿè¸ªè¿›ç¨‹: å¦‚æœæ’åºé¡ºåºå¼•èµ·é€‰å®šçš„è¿›ç¨‹åœ¨åˆ—è¡¨ä¸Šåˆ°å¤„ç§»åŠ¨ï¼Œè®©é€‰å®šæ¡è·Ÿéšè¯¥è¿›ç¨‹ã€‚è¿™å¯¹ç›‘è§†ä¸€ä¸ªè¿›ç¨‹éå¸¸æœ‰ç”¨ï¼šé€šè¿‡è¿™ç§æ–¹å¼ï¼Œä½ å¯ä»¥è®©ä¸€ä¸ªè¿›ç¨‹åœ¨å±å¹•ä¸Šä¸€ç›´å¯è§ã€‚ä½¿ç”¨æ–¹å‘é”®ä¼šåœæ­¢è¯¥åŠŸèƒ½
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
    K
&lt;/td&gt;
&lt;td&gt;
    æ˜¾ç¤º/éšè—å†…æ ¸çº¿ç¨‹
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
    H
&lt;/td&gt;
&lt;td&gt;
    æ˜¾ç¤º/éšè—ç”¨æˆ·çº¿ç¨‹
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
    Ctrl-L
&lt;/td&gt;
&lt;td&gt;
    åˆ·æ–°
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
    Numbers
&lt;/td&gt;
&lt;td&gt;
    &lt;span class="caps"&gt;PID&lt;/span&gt; æŸ¥æ‰¾: è¾“å…¥&lt;span class="caps"&gt;PID&lt;/span&gt;ï¼Œå…‰æ ‡å°†ç§»åŠ¨åˆ°ç›¸åº”çš„è¿›ç¨‹ä¸Š
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ›¿ä»£top&lt;/p&gt;
&lt;p&gt;ç”¨htopæ›¿æ¢topï¼Œå¯æ·»åŠ åˆ«åï¼Œç¼–è¾‘&lt;code&gt;~/.bashrc&lt;/code&gt;æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹ä»£ç &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;alias top=htop
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ol&gt;</summary><category term="linux"></category><category term="command"></category><category term="htop"></category></entry><entry><title>WIFI Hotspot Setup On UbuntuÂ 12.04</title><link href="http://blog.wiseturtles.com/posts/wifi-hotspot-setup-on-ubuntu.html" rel="alternate"></link><published>2014-12-30T00:00:00+08:00</published><author><name>Zhang Wanming</name></author><id>tag:blog.wiseturtles.com,2014-12-30:posts/wifi-hotspot-setup-on-ubuntu.html</id><summary type="html">&lt;p&gt;hotspoté…ç½®å‚è€ƒï¼šhttp://thenewbieblog.wordpress.com/2012/05/01/wifi-hotspot-setup-on-ubuntu/
Androidåˆ©ç”¨FiddleræŠ“åŒ…ï¼šhttp://www.trinea.cn/android/android-network-sniffer/&amp;nbsp;Androidåˆ©ç”¨tcpdumpæŠ“åŒ…ï¼šhttp://www.trinea.cn/android/tcpdump_wireshark/&lt;/p&gt;
&lt;p&gt;ä¸ºäº†Ubuntuç¬”è®°æœ¬æ–¹ä¾¿å¯¹Androidæ‰‹æœºä¸Šçš„AppsåšæŠ“åŒ…, æœ¬æ–‡ä»‹ç»ä¸¤ç§æ–¹æ³•ï¼Œæ–¹æ³•äºŒæ›´å®¹æ˜“é…ç½®ã€‚
æœ‰çº¿ã€æ— çº¿åŒæ—¶å¯ä»¥å·¥ä½œæ—¶ï¼Œç”¨ä¸‹é¢æ–¹æ³•å°†æ— çº¿ç½‘å¡ä½œä¸ºhotspotï¼Œé€šè¿‡æœ‰çº¿è¿æ¥å¤–ç½‘ã€‚
å¦‚æœæƒ³ç›´æ¥é€šè¿‡æ— çº¿ç½‘å¡ä¸Šå¤–ç½‘ï¼Œéœ€è¦å…ˆåœæ‰hostapd æˆ–&amp;nbsp;ap-hotspotï¼Œå¹¶é‡å¯ç½‘ç»œã€‚&lt;/p&gt;
&lt;p&gt;é‡å¯ç½‘ç»œ:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo service network-manager restart
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;æ–¹æ³•ä¸€&lt;/h1&gt;
&lt;h2&gt;æŸ¥çœ‹æ— çº¿ç½‘å¡ç¡¬ä»¶ä¿¡æ¯&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo lspci &lt;span class="p"&gt;|&lt;/span&gt; grep -i network
03:00.0 Network controller: Intel Corporation Wireless &lt;span class="m"&gt;7260&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;rev 6b&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;æŸ¥çœ‹æ— çº¿ç½‘å¡é©±åŠ¨ä¿¡æ¯&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ lsmod
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;æŸ¥çœ‹æ— çº¿ç½‘å¡è®¾å¤‡åç§°&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ iwconfig
wlan0     IEEE 802.11bgn  Mode:Master  Tx-Power&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;16&lt;/span&gt; dBm   
          Retry  long limit:7   RTS thr:off   Fragment thr:off
          Power Management:on
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;å®‰è£…éœ€è¦çš„è½¯ä»¶&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt-get install dhcp3-server hostapd
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;ä¿®æ”¹/etc/hostapd/hostapd.conf&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat /etc/hostapd/hostapd.conf
&lt;span class="nv"&gt;interface&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;wlan0
&lt;span class="nv"&gt;driver&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;nl80211
&lt;span class="nv"&gt;ssid&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;your_hotspot_name
&lt;span class="nv"&gt;channel&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;1
&lt;span class="nv"&gt;hw_mode&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;g
&lt;span class="nv"&gt;auth_algs&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;1
&lt;span class="nv"&gt;wpa&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;3
&lt;span class="nv"&gt;wpa_passphrase&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;your-password
&lt;span class="nv"&gt;wpa_key_mgmt&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;WPA-PSK
&lt;span class="nv"&gt;wpa_pairwise&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;TKIP CCMP
&lt;span class="nv"&gt;rsn_pairwise&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;CCMP
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;ä¿®æ”¹/etc/default/isc-dhcp-server&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ grep INTERFACES /etc/default/isc-dhcp-server
&lt;span class="nv"&gt;INTERFACES&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;wlan0&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;ä¿®æ”¹/etc/dhcp/dhcpd.conf&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;é…ç½®æ–‡ä»¶: /etc/dhcp/dhcpd.conf
Make sure the follow lines are Commented out &lt;span class="o"&gt;(&lt;/span&gt; put a &lt;span class="nb"&gt;hash&lt;/span&gt; â€œ#â€  sign at the beginning of the line &lt;span class="o"&gt;)&lt;/span&gt; the following lines:
&lt;span class="c1"&gt;# option definitions common to all supported networksâ€¦&lt;/span&gt;
&lt;span class="c1"&gt;#option domain-name â€œexample.orgâ€;&lt;/span&gt;
&lt;span class="c1"&gt;#option domain-name-servers ns1.example.org, ns2.example.org;&lt;/span&gt;
&lt;span class="c1"&gt;#default-lease-time 600;&lt;/span&gt;
&lt;span class="c1"&gt;#max-lease-time 7200;&lt;/span&gt;

Add the following lines to the file &lt;span class="o"&gt;(&lt;/span&gt;copy and paste&lt;span class="o"&gt;)&lt;/span&gt;
subnet 10.10.0.0 netmask 255.255.255.0 &lt;span class="o"&gt;{&lt;/span&gt;
        range 10.10.0.2 10.10.0.16&lt;span class="p"&gt;;&lt;/span&gt;
        option domain-name-servers 8.8.4.4, 208.67.222.222&lt;span class="p"&gt;;&lt;/span&gt;
        option routers 10.10.0.1&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="o"&gt;(&lt;/span&gt;Note: the only other line in this whole config file that is uncommented is :

ddns-update-style none&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;ä¿®æ”¹/etc/default/hostapd&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ grep -E &lt;span class="s1"&gt;&amp;#39;RUN_DAEMON|DAEMON_CONF|DAEMON_OPTS&amp;#39;&lt;/span&gt; /etc/default/hostapd &lt;span class="p"&gt;|&lt;/span&gt; grep -Ev &lt;span class="s1"&gt;&amp;#39;^#&amp;#39;&lt;/span&gt;
&lt;span class="nv"&gt;RUN_DAEMON&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;yes&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;DAEMON_CONF&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/etc/hostapd/hostapd.conf&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;DAEMON_OPTS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;-dd&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;ä¿®æ”¹/etc/network/interfaces&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat /etc/network/interfaces
auto lo
iface lo inet loopback
auto wlan0
iface wlan0 inet static
    address 10.10.0.1
    netmask 255.255.255.0
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;ä¿®æ”¹/etc/sysctl.conf&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ grep net.ipv4.ip_forward /etc/sysctl.conf 
net.ipv4.ip_forward&lt;span class="o"&gt;=&lt;/span&gt;1
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;ä¿®æ”¹/etc/rc.local&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ç¼–è¾‘ /etc/rc.local, åœ¨ &lt;span class="s2"&gt;&amp;quot;exit 0&amp;quot;&lt;/span&gt; å‰æ·»åŠ ä¸‹ä¸€è¡Œ
iptables -t nat -A POSTROUTING -s 10.10.0.0/16 -o ppp0 -j MASQUERADE
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;é‡å¯ç”µè„‘&lt;/h2&gt;
&lt;p&gt;é‡å¯ç”µè„‘ï¼Œæ‰‹æœºæµ‹è¯•æ˜¯å¦å¯ä»¥è¿æ¥.&lt;/p&gt;
&lt;h1&gt;æ–¹æ³•äºŒ&lt;/h1&gt;
&lt;p&gt;ç”¨ap-hotspotæ›´å®¹æ˜“æ­å»ºã€‚&lt;/p&gt;
&lt;h2&gt;ap-hotspotå®‰è£…ã€é…ç½®&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo add-apt-repository ppa:nilarimogard/webupd8
$ sudo apt-get install ap-hotspot
$ sudo ap-hotspot configure &lt;span class="c1"&gt;# configure&lt;/span&gt;
$ sudo ap-hotspot start &lt;span class="c1"&gt;# start&lt;/span&gt;
$ sudo ap-hotspot stop &lt;span class="c1"&gt;# stop&lt;/span&gt;
$ sudo ap-hotspot restart &lt;span class="c1"&gt;# restart&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</summary><category term="Ubuntu"></category></entry><entry><title>MySQLæŸ¥çœ‹ç”¨æˆ·æƒé™</title><link href="http://blog.wiseturtles.com/posts/show-grants.html" rel="alternate"></link><published>2014-12-17T11:25:00+08:00</published><author><name>crazygit</name></author><id>tag:blog.wiseturtles.com,2014-12-17:posts/show-grants.html</id><summary type="html">&lt;h2&gt;å‘½ä»¤&lt;/h2&gt;
&lt;p&gt;&lt;span class="caps"&gt;SHOW&lt;/span&gt; &lt;span class="caps"&gt;GRANTS&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;å®˜æ–¹æ–‡æ¡£: &lt;a href="http://dev.mysql.com/doc/refman/5.6/en/show-grants.html"&gt;http://dev.mysql.com/doc/refman/5.6/en/show-grants.html&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;å¸¸çœ‹å¸®åŠ©&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;mysql&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;HELP&lt;/span&gt; &lt;span class="k"&gt;SHOW&lt;/span&gt; &lt;span class="n"&gt;GRANTS&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;æŸ¥çœ‹å½“å‰ç™»é™†ç”¨æˆ·åœ¨å½“å‰æœºå™¨ä¸Šçš„æƒé™&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;mysql&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;SHOW&lt;/span&gt; &lt;span class="n"&gt;GRANTS&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="n"&gt;mysql&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;SHOW&lt;/span&gt; &lt;span class="n"&gt;GRANTS&lt;/span&gt; &lt;span class="k"&gt;FOR&lt;/span&gt; &lt;span class="k"&gt;CURRENT_USER&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="n"&gt;mysql&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;SHOW&lt;/span&gt; &lt;span class="n"&gt;GRANTS&lt;/span&gt; &lt;span class="k"&gt;FOR&lt;/span&gt; &lt;span class="k"&gt;CURRENT_USER&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;æŸ¥çœ‹ç‰¹å®šç”¨æˆ·åœ¨ç‰¹å®šä¸»æœºä¸Šçš„æƒé™&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# æŸ¥çœ‹testç”¨æˆ·åœ¨ä¸»æœº&amp;#39;%&amp;#39;ä¸Šçš„æƒé™(æ²¡æœ‰æŒ‡å®šä¸»æœºæ—¶ï¼Œé»˜è®¤æ˜¯&amp;#39;%&amp;#39;)&lt;/span&gt;
&lt;span class="n"&gt;mysql&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;SHOW&lt;/span&gt; &lt;span class="n"&gt;GRANTS&lt;/span&gt; &lt;span class="k"&gt;FOR&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;test&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="c1"&gt;# æŸ¥çœ‹testç”¨æˆ·åœ¨ä¸»æœº&amp;#39;localhost&amp;#39;ä¸Šçš„æƒé™(æ²¡æœ‰æŒ‡å®šä¸»æœºæ—¶ï¼Œé»˜è®¤æ˜¯&amp;#39;%&amp;#39;)&lt;/span&gt;
&lt;span class="n"&gt;mysql&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;SHOW&lt;/span&gt; &lt;span class="n"&gt;GRANTS&lt;/span&gt; &lt;span class="k"&gt;FOR&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;test&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;@&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;localhost&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;æŸ¥çœ‹ç”¨æˆ·åœ¨å“ªäº›ä¸»æœºä¸Šåˆ†é…äº†æƒé™&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;mysql&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;host&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;mysql&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;å„ç§æƒé™ç”¨æ³•è¡¨&lt;/h2&gt;
&lt;p&gt;å‚è€ƒè‡ª
&lt;a href="http://dev.mysql.com/doc/refman/5.6/en/grant.html"&gt;http://dev.mysql.com/doc/refman/5.6/en/grant.html&lt;/a&gt;&lt;/p&gt;
&lt;div class="table"&gt;
&lt;a name="idm140062991811312"&gt;&lt;/a&gt;&lt;p class="title"&gt;&lt;b&gt;Table&amp;nbsp;13.1&amp;nbsp;Permissible Privileges for &lt;span class="caps"&gt;GRANT&lt;/span&gt; and &lt;span class="caps"&gt;REVOKE&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;
&lt;div class="table-contents"&gt;
&lt;table summary="Permissible Privileges for GRANT and REVOKE" border="1"&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th scope="col"&gt;Privilege&lt;/th&gt;&lt;th scope="col"&gt;Meaning and Grantable Levels&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td scope="row"&gt;&lt;a class="link" href="privileges-provided.html#priv_all"&gt;&lt;code class="literal"&gt;ALL [PRIVILEGES]&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Grant all privileges at specified access level except
                &lt;a class="link" href="privileges-provided.html#priv_grant-option"&gt;&lt;code class="literal"&gt;GRANT OPTION&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope="row"&gt;&lt;a class="link" href="privileges-provided.html#priv_alter"&gt;&lt;code class="literal"&gt;ALTER&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Enable use of &lt;a class="link" href="alter-table.html" title="13.1.7&amp;nbsp;ALTER TABLE Syntax"&gt;&lt;code class="literal"&gt;ALTER TABLE&lt;/code&gt;&lt;/a&gt;. Levels:
                Global, database, table.&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope="row"&gt;&lt;a class="link" href="privileges-provided.html#priv_alter-routine"&gt;&lt;code class="literal"&gt;ALTER ROUTINE&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Enable stored routines to be altered or dropped. Levels: Global,
                database, procedure.&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope="row"&gt;&lt;a class="link" href="privileges-provided.html#priv_create"&gt;&lt;code class="literal"&gt;CREATE&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Enable database and table creation. Levels: Global, database, table.&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope="row"&gt;&lt;a class="link" href="privileges-provided.html#priv_create-routine"&gt;&lt;code class="literal"&gt;CREATE ROUTINE&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Enable stored routine creation. Levels: Global, database.&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope="row"&gt;&lt;a class="link" href="privileges-provided.html#priv_create-tablespace"&gt;&lt;code class="literal"&gt;CREATE TABLESPACE&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Enable tablespaces and log file groups to be created, altered, or
                dropped. Level: Global.&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope="row"&gt;&lt;a class="link" href="privileges-provided.html#priv_create-temporary-tables"&gt;&lt;code class="literal"&gt;CREATE TEMPORARY TABLES&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Enable use of &lt;a class="link" href="create-table.html" title="13.1.17&amp;nbsp;CREATE TABLE Syntax"&gt;&lt;code class="literal"&gt;CREATE
                TEMPORARY TABLE&lt;/code&gt;&lt;/a&gt;. Levels: Global, database.&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope="row"&gt;&lt;a class="link" href="privileges-provided.html#priv_create-user"&gt;&lt;code class="literal"&gt;CREATE USER&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Enable use of &lt;a class="link" href="create-user.html" title="13.7.1.2&amp;nbsp;CREATE USER Syntax"&gt;&lt;code class="literal"&gt;CREATE USER&lt;/code&gt;&lt;/a&gt;,
                &lt;a class="link" href="drop-user.html" title="13.7.1.3&amp;nbsp;DROP USER Syntax"&gt;&lt;code class="literal"&gt;DROP USER&lt;/code&gt;&lt;/a&gt;,
                &lt;a class="link" href="rename-user.html" title="13.7.1.5&amp;nbsp;RENAME USER Syntax"&gt;&lt;code class="literal"&gt;RENAME USER&lt;/code&gt;&lt;/a&gt;, and
                &lt;a class="link" href="revoke.html" title="13.7.1.6&amp;nbsp;REVOKE Syntax"&gt;&lt;code class="literal"&gt;REVOKE ALL
                PRIVILEGES&lt;/code&gt;&lt;/a&gt;. Level: Global.&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope="row"&gt;&lt;a class="link" href="privileges-provided.html#priv_create-view"&gt;&lt;code class="literal"&gt;CREATE VIEW&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Enable views to be created or altered. Levels: Global, database, table.&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope="row"&gt;&lt;a class="link" href="privileges-provided.html#priv_delete"&gt;&lt;code class="literal"&gt;DELETE&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Enable use of &lt;a class="link" href="delete.html" title="13.2.2&amp;nbsp;DELETE Syntax"&gt;&lt;code class="literal"&gt;DELETE&lt;/code&gt;&lt;/a&gt;. Level: Global,
                database, table.&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope="row"&gt;&lt;a class="link" href="privileges-provided.html#priv_drop"&gt;&lt;code class="literal"&gt;DROP&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Enable databases, tables, and views to be dropped. Levels: Global,
                database, table.&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope="row"&gt;&lt;a class="link" href="privileges-provided.html#priv_event"&gt;&lt;code class="literal"&gt;EVENT&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Enable use of events for the Event Scheduler. Levels: Global, database.&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope="row"&gt;&lt;a class="link" href="privileges-provided.html#priv_execute"&gt;&lt;code class="literal"&gt;EXECUTE&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Enable the user to execute stored routines. Levels: Global, database,
                table.&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope="row"&gt;&lt;a class="link" href="privileges-provided.html#priv_file"&gt;&lt;code class="literal"&gt;FILE&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Enable the user to cause the server to read or write files. Level:
                Global.&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope="row"&gt;&lt;a class="link" href="privileges-provided.html#priv_grant-option"&gt;&lt;code class="literal"&gt;GRANT OPTION&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Enable privileges to be granted to or removed from other accounts.
                Levels: Global, database, table, procedure, proxy.&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope="row"&gt;&lt;a class="link" href="privileges-provided.html#priv_index"&gt;&lt;code class="literal"&gt;INDEX&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Enable indexes to be created or dropped. Levels: Global, database,
                table.&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope="row"&gt;&lt;a class="link" href="privileges-provided.html#priv_insert"&gt;&lt;code class="literal"&gt;INSERT&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Enable use of &lt;a class="link" href="insert.html" title="13.2.5&amp;nbsp;INSERT Syntax"&gt;&lt;code class="literal"&gt;INSERT&lt;/code&gt;&lt;/a&gt;. Levels: Global,
                database, table, column.&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope="row"&gt;&lt;a class="link" href="privileges-provided.html#priv_lock-tables"&gt;&lt;code class="literal"&gt;LOCK TABLES&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Enable use of &lt;a class="link" href="lock-tables.html" title="13.3.5&amp;nbsp;LOCK TABLES and UNLOCK TABLES Syntax"&gt;&lt;code class="literal"&gt;LOCK TABLES&lt;/code&gt;&lt;/a&gt; on tables for
                which you have the &lt;a class="link" href="select.html" title="13.2.9&amp;nbsp;SELECT Syntax"&gt;&lt;code class="literal"&gt;SELECT&lt;/code&gt;&lt;/a&gt;
                privilege. Levels: Global, database.&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope="row"&gt;&lt;a class="link" href="privileges-provided.html#priv_process"&gt;&lt;code class="literal"&gt;PROCESS&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Enable the user to see all processes with &lt;a class="link" href="show-processlist.html" title="13.7.5.30&amp;nbsp;SHOW PROCESSLIST Syntax"&gt;&lt;code class="literal"&gt;SHOW
                PROCESSLIST&lt;/code&gt;&lt;/a&gt;. Level: Global.&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope="row"&gt;&lt;a class="link" href="privileges-provided.html#priv_proxy"&gt;&lt;code class="literal"&gt;PROXY&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Enable user proxying. Level: From user to user.&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope="row"&gt;&lt;a class="link" href="privileges-provided.html#priv_references"&gt;&lt;code class="literal"&gt;REFERENCES&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Not implemented&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope="row"&gt;&lt;a class="link" href="privileges-provided.html#priv_reload"&gt;&lt;code class="literal"&gt;RELOAD&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Enable use of &lt;a class="link" href="flush.html" title="13.7.6.3&amp;nbsp;FLUSH Syntax"&gt;&lt;code class="literal"&gt;FLUSH&lt;/code&gt;&lt;/a&gt; operations. Level:
                Global.&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope="row"&gt;&lt;a class="link" href="privileges-provided.html#priv_replication-client"&gt;&lt;code class="literal"&gt;REPLICATION CLIENT&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Enable the user to ask where master or slave servers are. Level: Global.&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope="row"&gt;&lt;a class="link" href="privileges-provided.html#priv_replication-slave"&gt;&lt;code class="literal"&gt;REPLICATION SLAVE&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Enable replication slaves to read binary log events from the master.
                Level: Global.&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope="row"&gt;&lt;a class="link" href="privileges-provided.html#priv_select"&gt;&lt;code class="literal"&gt;SELECT&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Enable use of &lt;a class="link" href="select.html" title="13.2.9&amp;nbsp;SELECT Syntax"&gt;&lt;code class="literal"&gt;SELECT&lt;/code&gt;&lt;/a&gt;. Levels: Global,
                database, table, column.&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope="row"&gt;&lt;a class="link" href="privileges-provided.html#priv_show-databases"&gt;&lt;code class="literal"&gt;SHOW DATABASES&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Enable &lt;a class="link" href="show-databases.html" title="13.7.5.15&amp;nbsp;SHOW DATABASES Syntax"&gt;&lt;code class="literal"&gt;SHOW DATABASES&lt;/code&gt;&lt;/a&gt; to show all
                databases. Level: Global.&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope="row"&gt;&lt;a class="link" href="privileges-provided.html#priv_show-view"&gt;&lt;code class="literal"&gt;SHOW VIEW&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Enable use of &lt;a class="link" href="show-create-view.html" title="13.7.5.14&amp;nbsp;SHOW CREATE VIEW Syntax"&gt;&lt;code class="literal"&gt;SHOW CREATE VIEW&lt;/code&gt;&lt;/a&gt;. Levels:
                Global, database, table.&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope="row"&gt;&lt;a class="link" href="privileges-provided.html#priv_shutdown"&gt;&lt;code class="literal"&gt;SHUTDOWN&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Enable use of &lt;a class="link" href="mysqladmin.html" title="4.5.2&amp;nbsp;mysqladmin â€” Client for Administering a MySQL Server"&gt;&lt;span class="command"&gt;&lt;strong&gt;mysqladmin shutdown&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;. Level: Global.&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope="row"&gt;&lt;a class="link" href="privileges-provided.html#priv_super"&gt;&lt;code class="literal"&gt;SUPER&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Enable use of other administrative operations such as
                &lt;a class="link" href="change-master-to.html" title="13.4.2.1&amp;nbsp;CHANGE MASTER TO Syntax"&gt;&lt;code class="literal"&gt;CHANGE MASTER TO&lt;/code&gt;&lt;/a&gt;,
                &lt;a class="link" href="kill.html" title="13.7.6.4&amp;nbsp;KILL Syntax"&gt;&lt;code class="literal"&gt;KILL&lt;/code&gt;&lt;/a&gt;,
                &lt;a class="link" href="purge-binary-logs.html" title="13.4.1.1&amp;nbsp;PURGE BINARY LOGS Syntax"&gt;&lt;code class="literal"&gt;PURGE BINARY LOGS&lt;/code&gt;&lt;/a&gt;,
                &lt;a class="link" href="set-statement.html" title="13.7.4&amp;nbsp;SET Syntax"&gt;&lt;code class="literal"&gt;SET
                GLOBAL&lt;/code&gt;&lt;/a&gt;, and &lt;a class="link" href="mysqladmin.html" title="4.5.2&amp;nbsp;mysqladmin â€” Client for Administering a MySQL Server"&gt;&lt;span class="command"&gt;&lt;strong&gt;mysqladmin
                debug&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt; command. Level: Global.&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope="row"&gt;&lt;a class="link" href="privileges-provided.html#priv_trigger"&gt;&lt;code class="literal"&gt;TRIGGER&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Enable trigger operations. Levels: Global, database, table.&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope="row"&gt;&lt;a class="link" href="privileges-provided.html#priv_update"&gt;&lt;code class="literal"&gt;UPDATE&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Enable use of &lt;a class="link" href="update.html" title="13.2.11&amp;nbsp;UPDATE Syntax"&gt;&lt;code class="literal"&gt;UPDATE&lt;/code&gt;&lt;/a&gt;. Levels: Global,
database, table, column.&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td scope="row"&gt;&lt;a class="link" href="privileges-provided.html#priv_usage"&gt;&lt;code class="literal"&gt;USAGE&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Synonym for &lt;span class="quote"&gt;â€œ&lt;span class="quote"&gt;no privileges&lt;/span&gt;â€&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;/div&gt;</summary><category term="mysql"></category><category term="user"></category><category term="grants"></category></entry><entry><title>uptime</title><link href="http://blog.wiseturtles.com/posts/linux-uptime.html" rel="alternate"></link><published>2014-12-15T10:08:00+08:00</published><author><name>crazygit</name></author><id>tag:blog.wiseturtles.com,2014-12-15:posts/linux-uptime.html</id><summary type="html">&lt;h2&gt;ç”¨é€”&lt;/h2&gt;
&lt;p&gt;man&amp;nbsp;page&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;uptime gives a one line display of the following information.  The curâ€
rent time, how long the system has been running,  how  many  users  are
currently  logged  on,  and the system load averages for the past 1, 5,
and 15&amp;nbsp;minutes.&lt;/p&gt;
&lt;p&gt;System load averages is the average number of processes that are either
in a runnable or uninterruptable state.  A process in a runnable  state
is  either  using the &lt;span class="caps"&gt;CPU&lt;/span&gt; or waiting to use the &lt;span class="caps"&gt;CPU&lt;/span&gt;. A process in uninâ€
terruptable state is waiting for some I/O access, eg waiting for  disk.
The  averages  are  taken over the three time intervals. Load averages
are not normalized for the number of CPUs in a system, so a load  averâ€
age  of 1 means a single &lt;span class="caps"&gt;CPU&lt;/span&gt; system is loaded all the time while on a 4
&lt;span class="caps"&gt;CPU&lt;/span&gt; system it means it was idle 75% of the&amp;nbsp;time.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;em&gt;Load averages are not normalized for the number of CPUs in a system, so a load  averâ€ age  of 1 means a single &lt;span class="caps"&gt;CPU&lt;/span&gt; system is loaded all the time while on a 4 &lt;span class="caps"&gt;CPU&lt;/span&gt; system it means it was idle 75% of the&amp;nbsp;time.&lt;/em&gt;&lt;/p&gt;
&lt;h2&gt;è¯­æ³•&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ uptime
10:14:31 up &lt;span class="m"&gt;10&lt;/span&gt; days, 20:55,  &lt;span class="m"&gt;6&lt;/span&gt; users,  load average: 0.28, 0.42, 0.54
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä¸Šé¢çš„ç»“æœæ˜¾ç¤ºçš„åˆ†åˆ«æ˜¯ç³»ç»Ÿçš„å½“å‰æ—¶é—´ï¼Œè¿è¡Œæ—¶é—´ï¼Œå½“å‰ç”¨æˆ·æ•°ï¼Œè¿‡å»1, 5, 15åˆ†é’Ÿçš„ç³»ç»Ÿå¹³å‡è´Ÿè½½
æ€»ä½“æ¥è¯´ï¼Œå€¼ä¸º1æ—¶ï¼Œå½“åªæœ‰å•ä¸ª&lt;span class="caps"&gt;CPU&lt;/span&gt;è¡¨ç¤ºå·²ç»å®Œå…¨åˆ©ç”¨ï¼Œå½“æœ‰ï¼”ä¸ª&lt;span class="caps"&gt;CPU&lt;/span&gt;æ—¶ï¼Œè¡¨ç¤ºè¿˜æœ‰75%çš„ç©ºé—².&lt;/p&gt;
&lt;p&gt;å…³äºå¹³å‡è´Ÿè½½çš„å€¼å¯ä»¥é˜…è¯»&lt;/p&gt;
&lt;p&gt;&lt;a href="http://blog.scoutapp.com/articles/2009/07/31/understanding-load-averages"&gt;http://blog.scoutapp.com/articles/2009/07/31/understanding-load-averages&lt;/a&gt;&lt;/p&gt;</summary><category term="linux"></category><category term="command"></category><category term="uptime"></category></entry><entry><title>Upgrade Ubuntu from 10.04 toÂ 12.04</title><link href="http://blog.wiseturtles.com/posts/upgrade-ubuntu-from-10.04-to-12.04.html" rel="alternate"></link><published>2014-12-04T00:00:00+08:00</published><author><name>Zhang Wanming</name></author><id>tag:blog.wiseturtles.com,2014-12-04:posts/upgrade-ubuntu-from-10.04-to-12.04.html</id><summary type="html">&lt;p&gt;å…¬å¸å¼€å‘äººå‘˜ç”µè„‘éƒ½å®‰è£…çš„æ˜¯Ubuntu 10.04ï¼Œç°åœ¨è¶Šæ¥è¶Šä¸å¥½ç”¨ï¼Œè€Œä¸”ï¼Œå¾ˆå¤šåŒäº‹å‘ç°ç¼–è¯‘æœ€æ–°çš„Firefox &lt;span class="caps"&gt;OS&lt;/span&gt;éƒ½æœ‰é—®é¢˜ï¼Œæ‰€ä»¥ï¼Œæˆ‘å°è¯•å‡çº§å¹¶æŠŠç¢°åˆ°çš„é—®é¢˜è®°å½•ä¸‹æ¥ã€‚&lt;/p&gt;
&lt;h1&gt;å‡çº§&lt;/h1&gt;
&lt;h2&gt;ä¿®æ”¹æº&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat /etc/apt/sources.list
deb http://172.26.32.18/ubuntu/ lucid main restricted universe multiverse
deb http://172.26.32.18/ubuntu/ lucid-security main restricted universe multiverse
deb http://172.26.32.18/ubuntu/ lucid-updates main restricted universe multiverse
deb http://172.26.32.18/ubuntu/ lucid-proposed main restricted universe multiverse
deb http://172.26.32.18/ubuntu/ lucid-backports main restricted universe multiverse

&lt;span class="c1"&gt;# aliyun&lt;/span&gt;
deb http://mirrors.aliyun.com/ubuntu/ lucid main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ lucid-security main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ lucid-updates main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ lucid-proposed main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ lucid-backports main restricted universe multiverse
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;å¼€å§‹å‡çº§&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo &lt;span class="k"&gt;do&lt;/span&gt;-release-upgrade
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;nisæ— æ³•å¯åŠ¨ï¼Œå¯¼è‡´å‡çº§è¿‡ç¨‹ä¸­é…ç½®nisåŒ…å¤±è´¥&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ grep redhat /etc/hosts
172.26.32.12    cd-redhat-001.TCTCD

$ tail -1 /etc/yp.conf 
ypserver cd-redhat-001.TCTCD

$ cat /etc/defaultdomain 
TCTCD

$ grep NIS /etc/default/nis &lt;span class="p"&gt;|&lt;/span&gt; grep -Ev &lt;span class="s1"&gt;&amp;#39;#&amp;#39;&lt;/span&gt;
&lt;span class="nv"&gt;NISSERVER&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;false&lt;/span&gt;
&lt;span class="nv"&gt;NISCLIENT&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;
&lt;span class="nv"&gt;NISMASTER&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;

$ cat /etc/auto.master
/home /etc/auto.home

$ cat /etc/auto.home 
xcsu cd-redhat-001.TCTCD:/home/xcsu

$ /usr/lib/yp/ypinit -s cd-redhat-001.TCTCD

$ sudo service portmap restart
$ sudo service nis restart
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;å¯åŠ¨åç™»å½•æ—¶å‘ç°åªèƒ½ç”¨administratorå’Œguestç™»å½•&lt;/h1&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat /etc/lightdm/lightdm.conf 
&lt;span class="o"&gt;[&lt;/span&gt;SeatDefaults&lt;span class="o"&gt;]&lt;/span&gt;
user-session&lt;span class="o"&gt;=&lt;/span&gt;ubuntu
greeter-session&lt;span class="o"&gt;=&lt;/span&gt;unity-greeter
allow-guest&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;false&lt;/span&gt;
greeter-show-manual-login&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;é‡å¯ç”µè„‘ï¼Œå°±å¯ä»¥ç”¨å…¶å®ƒç”¨æˆ·ç™»å½•äº†&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo reboot
&lt;/pre&gt;&lt;/div&gt;</summary><category term="Ubuntu"></category><category term="Nis"></category></entry><entry><title>å¦‚ä½•å‘è¡¨æ–‡ç« </title><link href="http://blog.wiseturtles.com/posts/about-wiseturtles.html" rel="alternate"></link><published>2014-12-03T00:04:00+08:00</published><author><name>crazygit</name></author><id>tag:blog.wiseturtles.com,2014-12-03:posts/about-wiseturtles.html</id><summary type="html">&lt;h2&gt;ä¸ºä»€ä¹ˆè¦æœ‰è¿™ä¸ªåšå®¢&lt;/h2&gt;
&lt;p&gt;æ–¹ä¾¿çŸ¥è¯†çš„æ•´ç†ï¼Œåˆ†äº«å’Œäº¤æµã€‚æ›´ä¸»è¦çš„æ˜¯æ…¢æ…¢æ„Ÿè§‰å¹´çºªè¶Šæ¥è¶Šå¤§(é»‘çº¿ï¼ï¼ï¼)ï¼Œè®°æ€§è¶Šæ¥è¶Šå·®ï¼Œéœ€è¦ä¸€ä¸ªå¯ä»¥è®°å½•ä¸œè¥¿çš„åœ°æ–¹.&lt;/p&gt;
&lt;p&gt;å¤è¯è¯´å¾—å¥½&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´å˜›!&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;åå­—çš„ç”±æ¥&lt;/h2&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆå–åå«Wise Turtlesï¼Ÿåœ¨è¿™é‡Œæˆ‘ä¸å¾—ä¸åæ§½ä¸€ä¸‹å’¯ã€‚å–åå­—ï¼Œæœ¬æ¥å°±æ˜¯ä¸€ä»¶å¾ˆéš¾çš„äº‹æƒ…ï¼Œå–ä¸€ä¸ªæœ‰æ„ä¹‰çš„åå­—å°±æ›´éš¾äº†ï¼Œè®©ä¸€ä¸ªç†å·¥å®…ç”·æ¥å–å°±éš¾åˆ°åè¡€å•¦ã€‚
ä¸ºäº†å–ä¸€ä¸ªæœ‰æ„ä¹‰çš„åå­—ï¼ŒåŒæ—¶åˆèƒ½æ³¨å†Œåˆ°åŸŸåå’Œgithubç»„ç»‡åï¼Œæˆ‘ç®€ç›´æ˜¯ä½¿å‡ºäº†åƒå¥¶çš„åŠ›æ°”, ä»dota3ä¸€ç›´è¯•åˆ°äº†dota100ï¼Œ åŸŸåéƒ½è¢«æ³¨å†Œäº†ï¼Œæƒ³æ­»çš„å¿ƒéƒ½æœ‰ã€‚
ä¼¤å¿ƒæ¬²ç»æ—¶ï¼Œçªç„¶çµå…‰ä¸€é—ªï¼Œæƒ³åˆ°äº†ä¸ä¹…å‰çƒ­æ˜ çš„ç”µå½±ã€Šå¿è€…ç¥é¾Ÿã€‹ï¼Œ å››å…„å¼Ÿå›¢ç»“, å¹½é»˜, å……æ»¡æ´»åŠ›, è¿™ä¸æ˜¯æˆ‘ä»¬æ‰€è¿½æ±‚çš„å›¢é˜Ÿç²¾ç¥å—? æ‰€ä»¥å†³å®šä»¥å¿è€…ç¥é¾Ÿä½œä¸ºåå­—å•¦ï¼
æ‚²å‰§çš„æ˜¯turtlesç«Ÿç„¶ä¹Ÿè¢«æ³¨å†Œäº†ï¼ŒåšæŒç€ä¸æ”¾å¼ƒçš„åŸåˆ™ï¼Œæˆ‘è§‰å¾—æˆ‘ä»¬å›¢é˜Ÿçš„å…„å¼Ÿå§å¦¹ä»¬æ¯”èµ·å¿ç€ç¥é¾Ÿæ›´åŠ ç¿æ™ºï¼Œäºæ˜¯å°±ç”¨Wise Turtleså•¦ï¼ï¼ˆå®åœ¨ä¸æƒ³å†ä¸ºåå­—çº ç»“å’¯ï¼‰ï¼Œ&amp;nbsp;èµ¶ç´§å»æ³¨å†Œäº†åŸŸåå’Œgithubç»„ç»‡åï¼Œå¤§åŠŸå‘Šæˆï¼&lt;/p&gt;
&lt;h2&gt;å¦‚ä½•åŠ å…¥ç»„ç»‡&lt;/h2&gt;
&lt;p&gt;è¯·å¤§å®¶æŠŠgithubçš„&lt;strong&gt;ç”¨æˆ·å&lt;/strong&gt;ï¼ˆæ³¨æ„æ˜¯ç”¨æˆ·åï¼šè€Œä¸æ˜¯ç™»é™†é‚®ç®±ï¼‰å‘ç»™æˆ‘ï¼Œ&amp;nbsp;æˆ‘ä¼šé€ä¸€ç»™å¤§å®¶å‘é€é‚€è¯·ã€‚ç„¶åå¤§å®¶ç”¨è‡ªå·±çš„è´¦å·ç™»é™†githubï¼Œè®¿é—®&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/wiseturtles"&gt;https://github.com/wiseturtles&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å³å¯æ¥å—é‚€è¯·ã€‚&lt;/p&gt;
&lt;h2&gt;åšå®¢çš„åŠŸèƒ½ä»‹ç»&lt;/h2&gt;
&lt;p&gt;åšå®¢é‡‡ç”¨å¼€æºçš„&lt;a href="http://blog.getpelican.com"&gt;pelican&lt;/a&gt;é™æ€åšå®¢å¼•æ“ï¼Œé›†æˆäº†Disqusè¯„è®ºï¼Œç™¾åº¦åˆ†äº«ï¼Œç™¾åº¦ç»Ÿè®¡(ä¸è¦é—®æˆ‘ä¸ºä»€ä¹ˆç”¨ç™¾åº¦ï¼Œä½ æ‡‚çš„)ï¼Œæ”¯æŒAtom/&lt;span class="caps"&gt;RSS&lt;/span&gt; feeds
è®¢é˜…ï¼Œå“åº”å¼å¸ƒå±€ï¼ˆç§»åŠ¨ç«¯è®¿é—®æ’ç‰ˆä¾ç„¶è‰¯å¥½ï¼‰ï¼ŒTravis-ciè‡ªåŠ¨æ„å»ºæ–‡ç« ã€‚æ–‡ç« æ ¼å¼æ”¯æŒMarkdownï¼ŒÂ reStructuredText,&amp;nbsp;htmlè¯­æ³•ã€‚é€šè¿‡jinjiaå®šä¹‰ä¸»é¢˜æ¨¡æ¿ï¼Œgitç‰ˆæœ¬æ§åˆ¶ï¼Œä»¥åŠç¨‹åºå‘˜å–œæ¬¢çš„è¯­æ³•é«˜äº®ã€‚&lt;/p&gt;
&lt;p&gt;é™„ä¸Šä¸€äº›å¸¸ç”¨è¯­æ³•çš„é“¾æ¥:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://wowubuntu.com/markdown/index.html"&gt;Markdown è¯­æ³•è¯´æ˜&amp;nbsp;(ç®€ä½“ä¸­æ–‡ç‰ˆ)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://docutils.sourceforge.net/rst.html"&gt;Rstè¯­æ³•&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;ä¸åšå®¢æœ‰å…³çš„repoä»‹ç»&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬çš„blogä¸»è¦ç”¨åˆ°äº†ä¸‰ä¸ªrepo&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;wiseturtles.github.io Â (åšå®¢é™æ€htmlæ–‡ä»¶åº“ï¼Œä¹Ÿå°±æ˜¯åšå®¢å±•ç¤ºçš„æœ€ç»ˆåº“ï¼Œç”±travis-ciè‡ªåŠ¨ä¿®æ”¹,&amp;nbsp;ä¸éœ€è¦æ‰‹åŠ¨ä¿®æ”¹ï¼‰&lt;/li&gt;
&lt;li&gt;blog Â &amp;nbsp;ï¼ˆåšå®¢æºç åº“ï¼Œå¤§å®¶å¹³æ—¶å†™æ–‡ç« æ—¶éœ€è¦æäº¤çš„åº“ï¼‰&lt;/li&gt;
&lt;li&gt;theme    ï¼ˆä¸»é¢˜åº“ï¼Œå¯ä»¥å®šåˆ¶åšå®¢çš„æ’ç‰ˆï¼Œæ ·å¼å’Œå¸ƒå±€,&amp;nbsp;æ„Ÿè§‰ç°åœ¨åšå®¢éš¾çœ‹çš„åŒå­¦å¯ä»¥ä¿®æ”¹ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¤§å®¶å¹³æ—¶ä¸»è¦ä½¿ç”¨åˆ°çš„ä¹Ÿå°±æ˜¯blogè¿™ä¸ªåº“ï¼Œä¸‹é¢å°±blogçš„ç›®å½•ç»“æ„ç®€å•ä»‹ç»ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# ä¸‹è½½blogåº“&lt;/span&gt;
$ git cloneÂ --recursive git@github.com:wiseturtles/blog.git
$ &lt;span class="nb"&gt;cd&lt;/span&gt; blog
$ tree -aL 1
.
â”œâ”€â”€ cache       &lt;span class="c1"&gt;# ç¼–è¯‘ç”Ÿæˆé™æ€æ–‡ä»¶çš„cacheåº“ï¼ŒåŠ å¿«ç¼–è¯‘é€Ÿåº¦&lt;/span&gt;
â”œâ”€â”€ content     &lt;span class="c1"&gt;# åšå®¢å†…å®¹åº“ï¼Œæ‰€æœ‰å†™çš„æ–‡ç« éƒ½æŒ‰ç…§ç›®å½•æ¥åˆ†ç±»å¹¶æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹é¢&lt;/span&gt;
â”œâ”€â”€ deploy.sh   &lt;span class="c1"&gt;# éƒ¨ç½²ç¼–è¯‘å‡ºæ¥çš„é™æ€æ–‡ä»¶åˆ°wiseturtles.github.ioåº“çš„è„šæœ¬ï¼Œç”±travis-ciè°ƒç”¨&lt;/span&gt;
â”œâ”€â”€ develop_server.sh
â”œâ”€â”€ fabfile.py  &lt;span class="c1"&gt;# å°è£…äº†å¸¸ç”¨å‘½ä»¤çš„fabæ–‡ä»¶&lt;/span&gt;
â”œâ”€â”€ Makefile    &lt;span class="c1"&gt;# å°è£…äº†å¸¸ç”¨å‘½ä»¤çš„makefileæ–‡ä»¶&lt;/span&gt;
â”œâ”€â”€ output      &lt;span class="c1"&gt;# ç¼–è¯‘ç”Ÿæˆé™æ€htmlæ–‡ä»¶çš„ç›®å½•ï¼Œwiseturtles.github.ioåº“é‡Œçš„å†…å®¹å°±æ˜¯è¿™ä¸ªç›®å½•ä¸‹çš„&lt;/span&gt;
â”œâ”€â”€ pelicanconf.py  &lt;span class="c1"&gt;# åšå®¢çš„é…ç½®æ–‡ä»¶&lt;/span&gt;
â”œâ”€â”€ publishconf.py  &lt;span class="c1"&gt;# åšå®¢å‘å¸ƒæ—¶è°ƒç”¨çš„é…ç½®æ–‡ä»¶, ä¸»è¦è¦†ç›–äº†pelicanconf.pyé‡Œçš„ä¸€äº›é…ç½®&lt;/span&gt;
â”œâ”€â”€ README.md
â”œâ”€â”€ requirements.txt  &lt;span class="c1"&gt;# è®°å½•å®‰è£…æœ¬åº“éœ€è¦ä½¿ç”¨çš„pythonåŒ…æ–‡ä»¶&lt;/span&gt;
â”œâ”€â”€ theme       &lt;span class="c1"&gt;# ä¸»é¢˜ç›®å½•ï¼Œå…¶å®å°±æ˜¯themeåº“ï¼Œä½œä¸ºä¸€ä¸ªå­åº“æ”¾åœ¨blogé‡Œé¢&lt;/span&gt;
â””â”€â”€ .travis.yml &lt;span class="c1"&gt;# travis-ciçš„é…ç½®æ–‡ä»¶&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ‰€æœ‰çš„æ–‡ç« å†™å¥½ä¹‹åï¼Œéƒ½è¦æ”¾åˆ°coetentç›®å½•ä¸‹ï¼Œ æ‰€æœ‰çš„æ–‡ç« æŒ‰ç…§ç›®å½•åˆ†ç±»ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦åœ¨contentä¸‹åˆ›å»ºéœ€è¦çš„ç›®å½•(ç›®å½•åä¼šå‡ºç°åœ¨&lt;span class="caps"&gt;URL&lt;/span&gt;ä¸­ï¼Œå»ºè®®æ˜¯è‹±æ–‡çš„ï¼‰ã€‚&lt;/p&gt;
&lt;h2&gt;å¦‚ä½•æ­å»ºæœ¬åœ°ç¯å¢ƒ&lt;/h2&gt;
&lt;p&gt;ä¸ºäº†ä½¿æ•´ä¸ªè¿‡ç¨‹ç®€æ´ï¼Œä¸‹é¢ä»¥&lt;strong&gt;æœ¬åœ°pythonç‰ˆæœ¬ä¸º2.7.X, ä¸åˆ›å»ºpythonè™šæ‹Ÿä¸ºå‰æ&lt;/strong&gt;ã€‚
å¦‚æœä¸æ»¡è¶³è¿™ä¸¤ä¸ªæ¡ä»¶ï¼Œå¯ä»¥å‚è€ƒæˆ‘çš„å¦ä¸€ç‰‡æ–‡ç«  &lt;a href="http://blog.wiseturtles.com/posts/setup-pelican.html"&gt;pelican + github&amp;nbsp;æ­å»ºä¸ªäººBlog&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ git cloneÂ --recursive git@github.com:wiseturtles/blog.git  &lt;span class="c1"&gt;# ä¸‹è½½ä»£ç &lt;/span&gt;
$ &lt;span class="nb"&gt;cd&lt;/span&gt; blog
$ sudo pip install -r requirements.txt  &lt;span class="c1"&gt;# å®‰è£…å¿…è¦çš„pythonåº“, å¦‚æœä¸éœ€è¦æœ¬åœ°é¢„è§ˆçš„è¯ï¼Œå¯ä»¥è·³è¿‡è¿™ä¸€æ­¥&lt;/span&gt;
$ touch content/test/hello.md   &lt;span class="c1"&gt;# æ­¤å¤„ç•¥å»ç¼–è¾‘content/test/hello.mdæ–‡ä»¶è¿‡ç¨‹çš„ä¸‰åƒå­—&lt;/span&gt;
$ make devserver    &lt;span class="c1"&gt;# å¯åŠ¨æœ¬åœ°é¢„è§ˆçš„serverï¼Œ è®¿é—®http://127.0.0.1:8000/æŸ¥çœ‹æ–‡ç« é‚£ä¸ªæ•ˆæœ&lt;/span&gt;
&lt;span class="c1"&gt;# é‡å¤ä¸Šé¢ä¸¤ä¸ªæ­¥éª¤,ç›´åˆ°å†³å®šå‘å¸ƒæ–‡ç« &lt;/span&gt;
$ git add content/test/hello.md
$ git commit -m &lt;span class="s2"&gt;&amp;quot;add hello.md&amp;quot;&lt;/span&gt;
$ git push origin master
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;span class="caps"&gt;OK&lt;/span&gt;ï¼Œ æ‰“å®Œæ”¶å·¥ï¼ è¿‡ä¸€ä¼šè®¿é—®æˆ‘ä»¬çš„åšå®¢&lt;a href="http://blog.wiseturtles.com/"&gt;http://blog.wiseturtles.com/&lt;/a&gt;å°±å¯ä»¥çœ‹åˆ°è‡ªå·±åˆšåˆšå‘è¡¨çš„æ–‡ç« å•¦!&lt;/p&gt;
&lt;p&gt;æ•´ä¸ªè¿‡ç¨‹æ¦‚è¿°èµ·æ¥å°±è·ŸæŠŠå¤§è±¡æ”¾è¿›å†°ç®±ä¸€æ ·ç®€å•ï¼Œåªéœ€è¦ä¸‰æ­¥ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä¸‹è½½blogä»£ç &lt;/li&gt;
&lt;li&gt;å†™å¥½æ–‡ç« &lt;/li&gt;
&lt;li&gt;æäº¤æ–‡ç« &lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;åœ¨çº¿ç¯å¢ƒ&lt;/h2&gt;
&lt;p&gt;å¦‚æœæ„Ÿè§‰æ­å»ºæœ¬åœ°ç¯å¢ƒéº»çƒ¦çš„è¯ï¼Œé‚£å°±ç›´æ¥ç”¨githubçš„åœ¨çº¿ç¼–è¾‘åŠŸèƒ½å§ã€‚&amp;nbsp;è®¿é—®&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/wiseturtles/blog"&gt;https://github.com/wiseturtles/blog&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å³å¯åœ¨çº¿ç¼–è¾‘.&lt;/p&gt;
&lt;h2&gt;æ–‡ä»¶æ¨¡æ¿&lt;/h2&gt;
&lt;p&gt;æ— è®ºé€‰æ‹©Markdownï¼ŒÂ reStructuredText,&amp;nbsp;htmlå“ªç§è¯­æ³•ï¼Œæ–‡ç« æ¨¡æ¿éƒ½åº”è¯¥åƒä¸‹é¢è¿™æ ·ï¼š&lt;/p&gt;
&lt;h3&gt;reStructuredTextï¼ˆRstï¼‰æ ¼å¼ï¼ˆæ–‡ä»¶åä»¥.rstç»“å°¾ï¼‰&lt;/h3&gt;
&lt;pre&gt;
My super title
##############

:date: 2010-10-03 10:20
:modified: 2010-10-04 18:40
:tags: thats, awesome
:category: yeah
:slug: my-super-post
:authors: Alexis Metaireau, Conan Doyle
:summary: Short version for index and feeds

This is the content of my super blog post.
&lt;/pre&gt;

&lt;h3&gt;mdæ ¼å¼(æ–‡ä»¶åä»¥Â .md, .markdown, .mkd,&amp;nbsp;.mdownç»“å°¾ï¼‰&lt;/h3&gt;
&lt;pre&gt;
Title: My super title
Date: 2010-12-03 10:20
Modified: 2010-12-05 19:30
Category: Python
Tags: pelican, publishing
Slug: my-super-post
Authors: Alexis Metaireau, Conan Doyle
Summary: Short version for index and feeds

This is the content of my super blog post.

&lt;/pre&gt;

&lt;h3&gt;htmlæ ¼å¼(æ–‡ä»¶åä»¥.html and&amp;nbsp;.htmç»“å°¾ï¼‰&lt;/h3&gt;
&lt;pre&gt;
&amp;lt;html&amp;gt;
&amp;lt;head&amp;gt;
&amp;lt;title&amp;gt;My super title&amp;lt;/title&amp;gt;
&amp;lt;meta name="tags" content="thats, awesome" /&amp;gt;
&amp;lt;meta name="date" content="2012-07-09 22:28" /&amp;gt;
&amp;lt;meta name="modified" content="2012-07-10 20:14" /&amp;gt;
&amp;lt;meta name="category" content="yeah" /&amp;gt;
&amp;lt;meta name="authors" content="Alexis MÃ©taireau, Conan Doyle" /&amp;gt;
&amp;lt;meta name="summary" content="Short version for index and feeds" /&amp;gt;
&amp;lt;/head&amp;gt;

&amp;lt;body&amp;gt;
This is the content of my super blog post.
&amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;
&lt;/pre&gt;

&lt;p&gt;ä»ä¸Šé¢çš„æ¨¡æ¿å¯ä»¥çœ‹å‡ºï¼Œæ— è®ºé€‰æ‹©å“ªç§è¯­è¨€ï¼Œéƒ½åŒ…å«äº†å…±åŒçš„ä¿¡æ¯.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯slugæ ‡ç­¾çš„ä¿¡æ¯å°±æ˜¯æ–‡ç« çš„&lt;span class="caps"&gt;URL&lt;/span&gt;é“¾æ¥ï¼Œæœ€å¥½ä¸è¦æ˜¯ä¸­æ–‡çš„&lt;/strong&gt;&lt;/p&gt;
&lt;h2&gt;ä»£ç é«˜äº®&lt;/h2&gt;
&lt;p&gt;å¯¹äºRstæ ¼å¼,&amp;nbsp;ç”¨å¦‚ä¸‹æ ¼å¼&lt;/p&gt;
&lt;pre&gt;

.. code-block:: identifier

   &amp;lt;indented code block goes here&amp;gt;

&lt;/pre&gt;

&lt;p&gt;mdæ ¼å¼&lt;/p&gt;
&lt;pre&gt;

A block of text.

    :::identifier
    &amp;lt;code goes here&amp;gt;

&lt;/pre&gt;

&lt;h2&gt;å›¾ç‰‡å’Œé™„ä»¶ç®¡ç†&lt;/h2&gt;
&lt;p&gt;ä¸€èˆ¬ä¸å»ºè®®å°†æ–‡ç« ä¸­è¦ä½¿ç”¨åˆ°çš„å›¾ç‰‡æˆ–é™„ä»¶æäº¤åˆ°blogåº“ä¸­ï¼Œé¿å…å¼•èµ·blogåº“è¿…é€Ÿå¢å¤§ï¼Œ blogåº“å»ºè®®åªä¿å­˜çº¯æ–‡æœ¬çš„ä¸œè¥¿ã€‚å¯ä»¥å°†è¦ä½¿ç”¨çš„å›¾ç‰‡æˆ–é™„ä»¶ä¸Šä¼ åˆ°æ”¯æŒå¤–é“¾çš„ç¬¬ä¸‰æ–¹å­˜å‚¨ï¼Œç„¶ååœ¨æ–‡æ­£é‡Œç›´æ¥å¼•ç”¨å›¾ç‰‡æˆ–é™„ä»¶çš„&lt;span class="caps"&gt;URL&lt;/span&gt;ã€‚æˆ–è€…å•ç‹¬å»ºç«‹ä¸€ä¸ªgitåº“æ¥ä¿å­˜å›¾ç‰‡å’Œé™„ä»¶ã€‚&lt;/p&gt;
&lt;h2&gt;æœ€å&lt;/h2&gt;
&lt;p&gt;è¿™é‡Œåªæ˜¯ä»‹ç»äº†å¤§ä½“ä¸Šçš„ä¸€äº›ç”¨æ³•ï¼Œæ›´å¤šè¯·å‚é˜…: &lt;a href="http://docs.getpelican.com/en/3.5.0/content.html"&gt;http://docs.getpelican.com/en/3.5.0/content.html&lt;/a&gt;&lt;/p&gt;</summary><category term="pelican"></category><category term="blog"></category><category term="github"></category></entry><entry><title>pelican + githubÂ æ­å»ºä¸ªäººBlog</title><link href="http://blog.wiseturtles.com/posts/setup-pelican.html" rel="alternate"></link><published>2014-11-30T22:42:00+08:00</published><author><name>crazygit</name></author><id>tag:blog.wiseturtles.com,2014-11-30:posts/setup-pelican.html</id><summary type="html">&lt;h2&gt;ä¸ºä»€ä¹ˆé€‰æ‹©Pelican&lt;/h2&gt;
&lt;p&gt;æƒ³æ­å»ºä¸€ä¸ªåšå®¢ï¼Œä¸æƒ³å—é—¨æˆ·ç½‘ç«™åšå®¢çš„é™åˆ¶ï¼Œæƒ³ç”¨æ›´çº¯å‡€çš„æ–¹å¼å†™ä½œï¼Œæ–¹ä¾¿æ•°æ®è½¬ç§»ï¼Œ
ä¸“æ³¨å†…å®¹è€Œä¸æ˜¯æ ¼å¼ï¼Œåœ¨è¿™ä¸ªé¡µé¢&lt;a href="https://www.staticgen.com"&gt;https://www.staticgen.com&lt;/a&gt;ç½—åˆ—äº†å„ç§è¯­è¨€çš„é™æ€åšå®¢å¼•æ“,&amp;nbsp;æœ€ç»ˆé€‰æ‹©äº†Pelican.&lt;/p&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å› ä¸ºäººç”Ÿè‹¦çŸ­ï¼Œæˆ‘ç”¨python&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç‰¹è‰²ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å®ƒæ˜¯ä¸€ä¸ªåŸºäºpythonè¯­è¨€çš„é™æ€åšå®¢å¼•æ“&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨Jinjiaä½œä¸ºä¸»é¢˜çš„æ¨¡æ¿è¯­è¨€&lt;/li&gt;
&lt;li&gt;æ”¯æŒMarkdown,&amp;nbsp;reStructuredTextæ ¼å¼&lt;/li&gt;
&lt;li&gt;å…¶ä»–ç‰›é€¼çš„ç‰¹è‰²ç­‰&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;å®‰è£…Pelican&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;å®˜æ–¹å…¥é—¨æŒ‡å—ï¼š&lt;a href="http://docs.getpelican.com/en/latest/getting_started.html"&gt;http://docs.getpelican.com/en/latest/getting_started.html&lt;/a&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æœ¬æ–‡ä»¥Pelican3.5ä¸ºä¾‹ï¼Œä½¿ç”¨Pelicanéœ€è¦pythonç¯å¢ƒï¼Œå®˜æ–¹æ¨èçš„pythonç‰ˆæœ¬æ˜¯2.7.Xï¼Œå› æ­¤å¼€å§‹ä¹‹å‰ï¼Œæœ€å¥½æ˜¯æ£€æŸ¥ä¸€ä¸‹å½“å‰ç³»ç»Ÿçš„pythonç‰ˆæœ¬æ˜¯å¦æ»¡è¶³æƒ…å†µã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ python --version
Python 2.7.6
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ&lt;/h3&gt;
&lt;p&gt;å¦‚æœå½“å‰ç³»ç»Ÿé»˜è®¤æ˜¯2.7.X, æˆ‘ä»¬åˆ™å¯ä»¥ç›´æ¥åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒæ¥ä¸ºå®‰è£…pelicanåšå‡†å¤‡ã€‚
å…³äºpythonè™šæ‹Ÿç¯å¢ƒçš„åˆ›å»ºï¼Œè¯¦ç»†å¯ä»¥å‚è€ƒ: &lt;a href="http://liuzhijun.iteye.com/blog/1872241"&gt;http://liuzhijun.iteye.com/blog/1872241&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¯´è¯´ä¸»è¦æ­¥éª¤&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo pip install virtualenv virtualenvwrapper
$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;[[ -s /usr/local/bin/virtualenvwrapper.sh ]] &amp;amp;&amp;amp; source /usr/local/bin/virtualenvwrapper.sh&amp;#39;&lt;/span&gt; &amp;gt;&amp;gt; ~/.bashrc
$ &lt;span class="nb"&gt;source&lt;/span&gt; ~/.bashrc
$ mkvirtualenv pelican &lt;span class="c1"&gt;# åˆ›å»ºåå­—ä¸ºpelicançš„è™šæ‹Ÿç¯å¢ƒï¼Œè¿™é‡Œå¯ä»¥å°†pelicanæ›¿æ¢æˆä»»æ„ä½ å–œæ¬¢çš„åå­—&lt;/span&gt;
$ workon pelican &lt;span class="c1"&gt;# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¦ä¸€ç§æƒ…å†µæ˜¯å½“å‰ç³»ç»Ÿé»˜è®¤pythonç‰ˆæœ¬ä¸æ˜¯2.7.Xçš„ï¼Œ
ä¸ºäº†æ–¹ä¾¿åŠä¸å½±å“å½“å‰ç³»ç»Ÿçš„pythonç‰ˆæœ¬ï¼Œå¯ä»¥ä½¿ç”¨&lt;a href="https://github.com/utahta/pythonbrew"&gt;pythonbrew&lt;/a&gt;æ¥æ­å»ºPython2.7.xç¯å¢ƒã€‚
å®‰è£…æ­¥éª¤: &lt;a href="https://github.com/utahta/pythonbrew/blob/master/README.rst"&gt;https://github.com/utahta/pythonbrew/blob/master/&lt;span class="caps"&gt;README&lt;/span&gt;.rst&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# å®‰è£…pythonbrew&lt;/span&gt;
$ curl -kL http://xrl.us/pythonbrewinstall &lt;span class="p"&gt;|&lt;/span&gt; bash    &lt;span class="c1"&gt;# è¿™æ­¥æ‰§è¡ŒæˆåŠŸåä¼šç”Ÿæˆç›®å½•: ~/.pythonbrew&lt;/span&gt;
$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;[[ -s &lt;/span&gt;&lt;span class="nv"&gt;$HOME&lt;/span&gt;&lt;span class="s2"&gt;/.pythonbrew/etc/bashrc ]] &amp;amp;&amp;amp; source &lt;/span&gt;&lt;span class="nv"&gt;$HOME&lt;/span&gt;&lt;span class="s2"&gt;/.pythonbrew/etc/bashrc&amp;quot;&lt;/span&gt; &amp;gt;&amp;gt; ~/.bashrc
$ &lt;span class="nb"&gt;source&lt;/span&gt; ~/.bashrc
$ pythonbrew --version      &lt;span class="c1"&gt;# æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ&lt;/span&gt;
$ pythonbrew install --verbose 2.7.5       &lt;span class="c1"&gt;# å®‰è£…python 2.7.5&lt;/span&gt;
$ pythonbrew use 2.7.5      &lt;span class="c1"&gt;# ä¸´æ—¶åœ¨å½“å‰ä¼šè¯ä½¿ç”¨python 2.7.5&lt;/span&gt;
$ which python              &lt;span class="c1"&gt;# æ£€æŸ¥pythonç‰ˆæœ¬ä¿¡æ¯æ˜¯å¦æ­£ç¡®&lt;/span&gt;

&lt;span class="c1"&gt;# ä¸€äº›å…³äºpythonbrewçš„å¸¸ç”¨å‘½ä»¤&lt;/span&gt;
$ pythonbrew list           &lt;span class="c1"&gt;# æŸ¥çœ‹å·²ç»å®‰è£…äº†çš„pythonç‰ˆæœ¬&lt;/span&gt;
$ pythonbrew off            &lt;span class="c1"&gt;# ç¦ç”¨pythonbrewï¼Œä½¿ç”¨ç³»ç»Ÿé»˜è®¤çš„pythonç¯å¢ƒ&lt;/span&gt;
$ pythonbrew list -k        &lt;span class="c1"&gt;# æŸ¥çœ‹pythonbrewæä¾›äº†å“ªäº›pythonç‰ˆæœ¬å¯ä»¥å®‰è£…&lt;/span&gt;
$ pythonbrew switch 2.7.5   &lt;span class="c1"&gt;# æ°¸ä¹…åˆ‡æ¢åˆ°python 2.7.5,ä¸useæœ‰ç‚¹ä¸åŒ&lt;/span&gt;
&lt;span class="c1"&gt;# æ›´å¤šå‘½ä»¤å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä½¿ç”¨pythonbrewè‡ªå¸¦çš„virtualenv&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ pythonbrew use 2.7.5
$ pythonbrew venv init       &lt;span class="c1"&gt;# åˆå§‹åŒ–è™šæ‹Ÿç¯å¢ƒ&lt;/span&gt;
$ pythonbrew venv create pelican  &lt;span class="c1"&gt;# åˆ›å»ºåå­—ä¸ºpelicançš„è™šæ‹Ÿç¯å¢ƒï¼Œè¿™é‡Œå¯ä»¥å°†pelicanæ›¿æ¢æˆä»»æ„ä½ å–œæ¬¢çš„åå­—&lt;/span&gt;
$ pythonbrew venv use pelican     &lt;span class="c1"&gt;# å¼€å¯è™šæ‹Ÿç¯å¢ƒ&lt;/span&gt;

&lt;span class="c1"&gt;# ä¸ºäº†ä»¥åä½¿ç”¨æ–¹ä¾¿,è®¾ç½®penvä¸ºå¼€å¯è™šæ‹Ÿç¯å¢ƒçš„åˆ«å&lt;/span&gt;
$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;alias  penv=&amp;#39;pythonbrew use 2.7.5 &amp;amp;&amp;amp; pythonbrew venv use pelican&amp;#39;&amp;quot;&lt;/span&gt; &amp;gt;&amp;gt; ~/.bashrc
$ &lt;span class="nb"&gt;source&lt;/span&gt; ~/.bashrc

&lt;span class="c1"&gt;# ä¸€äº›å¸¸ç”¨çš„å‘½ä»¤&lt;/span&gt;
$ pythonbrew venv list
$ pythonbrew venv use proj
$ pythonbrew venv delete proj
$ pythonbrew venv rename proj proj2
$ pythonbrew venv clone proj proj2
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;å®‰è£…pelican&lt;/h3&gt;
&lt;p&gt;åœ¨é…ç½®å¥½äº†è™šæ‹Ÿç¯å¢ƒä¹‹åï¼Œå°±è®©æˆ‘ä»¬è¿›å…¥è™šæ‹Ÿç¯å¢ƒå®‰è£…pelicanå§&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# éœ€è¦å…ˆæ¿€æ´»è™šæ‹Ÿç¯å¢ƒ&lt;/span&gt;
$ workon pelican  &lt;span class="c1"&gt;# å¦‚æœæ˜¯ä½¿ç”¨çš„pythonbrew ,åˆ™æ˜¯â€œpenvâ€&lt;/span&gt;
$ pip install pelican markdown typogrif  &lt;span class="c1"&gt;# å®‰è£…å¿…é¡»çš„pythonåŒ…&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;åšå®¢é…ç½®&lt;/h2&gt;
&lt;p&gt;ç°åœ¨ä¸€åˆ‡ç¯å¢ƒéƒ½å¥½äº†ï¼Œå°±è®©æˆ‘ä»¬å¼€å§‹åŠ¨æ‰‹å†™åšå®¢å§&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ mkdir myblog           &lt;span class="c1"&gt;# åˆ›å»ºä¸€ä¸ªç›®å½•ï¼Œç”¨äºå­˜æ”¾åšå®¢&lt;/span&gt;
$ &lt;span class="nb"&gt;cd&lt;/span&gt; myblog
$ pelican-quickstart     &lt;span class="c1"&gt;# å¼€å§‹åˆ›å»ºåšå®¢çš„å‘å¯¼&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿è¡Œ&lt;code&gt;pelican-quickstart&lt;/code&gt;å‘½ä»¤ï¼Œä¼šæœ‰ä¸€äº›é—®é¢˜ï¼Œæ ¹æ®å®é™…æƒ…å†µé€‰æ‹©å³å¯, æš‚æ—¶ä¸ç†è§£çš„ä¹Ÿæ— æ‰€è°“ï¼Œç›´æ¥å›è½¦å°±è¡Œäº†ï¼Œåé¢éƒ½å¯ä»¥åœ¨é…ç½®æ–‡ä»¶é‡Œé¢ä¿®æ”¹ã€‚&amp;nbsp;é€šè¿‡ä¸Šé¢çš„å‘å¯¼ï¼Œåšå®¢çš„åŸºæœ¬æ¡†æ¶å°±å»ºç«‹èµ·æ¥äº†ã€‚&lt;/p&gt;
&lt;p&gt;é»˜è®¤Pelicanæä¾›äº†Fabricæ–‡ä»¶å’ŒMakefileå°è£…äº†å¸¸ç”¨æ“ä½œ, å¯ä»¥æ ¹æ®è‡ªèº«çš„å–œå¥½é€‰æ‹©ã€‚&amp;nbsp;ä¸‹é¢ä»‹ç»ä¸€äº›å¸¸ç”¨çš„makeå‘½ä»¤ï¼Œä»¥åä¼šç”¨å¾—æ¯”è¾ƒé¢‘ç¹ã€‚&lt;/p&gt;
&lt;pre&gt;
    $ make     # ç›´æ¥è¿è¡Œmakeï¼Œ æŸ¥çœ‹å‘½ä»¤å¸®åŠ©

    make html                        (re)generate the web site(ç”Ÿæˆç½‘ç«™)
    make clean                       remove the generated files
    make regenerate                  regenerate files upon modification(æ¯å½“æœ¬åœ°æ–‡ä»¶è¢«ä¿®æ”¹æ—¶ï¼Œéƒ½è‡ªåŠ¨ç”Ÿå­˜ç½‘ç«™ï¼‰
    make publish                     generate using production settings
    make serve                       serve site at http://localhost:8000 ï¼ˆå¼€å§‹æœ¬åœ°æœåŠ¡ï¼Œå¯ä»¥é€šè¿‡http://localhost:8000æŸ¥çœ‹ï¼‰
    make devserver                   start/restart develop_server.sh (make regenerate å’Œmake serveä¸¤ä¸ªå‘½ä»¤çš„é›†åˆï¼‰
    make stopserver                  stop local server (å…³é—­æœ¬åœ°æœåŠ¡)
    ssh_upload                       upload the web site via SSH
    rsync_upload                     upload the web site via rsync+ssh
    dropbox_upload                   upload the web site via Dropbox
    ftp_upload                       upload the web site via FTP
    s3_upload                        upload the web site via S3
    github                           upload the web site via gh-pages
&lt;/pre&gt;

&lt;h3&gt;åˆ›å»ºç¬¬ä¸€ç¯‡æ–‡ç« &lt;/h3&gt;
&lt;p&gt;è¯´äº†è¿™ä¹ˆå¤šäº†ï¼Œéƒ½è¿˜æ²¡æœ‰å¼€å§‹å†™å‘¢ï¼Œè®©æˆ‘ä»¬å¼€å§‹å†™ç¬¬ä¸€ç¯‡æ–‡ç« å§ã€‚
pelican æ”¯æŒä¸‰ç§æ ¼å¼çš„æ–‡ä»¶ï¼š reStructuredTextï¼Œ markdownå’Œhtmlã€‚
ä¸ªäººåå¥½äºmarkdwonã€‚ä¸‹é¢å°±ä¸»è¦ä»‹ç»markdownçš„å§ï¼Œå…¶ä»–çš„å¯ä»¥åˆ°&lt;a href="http://docs.getpelican.com/en/3.2/getting_started.html#kickstart-your-site"&gt;å®˜ç½‘æŸ¥çœ‹&lt;/a&gt;.&amp;nbsp;ä¸Šé¢å†™å¾—å¾ˆæ¸…æ¥šã€‚&lt;/p&gt;
&lt;p&gt;åˆ›å»ºç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œç›´æ¥ä½¿ç”¨å®˜ç½‘çš„ä¾‹å­ã€‚æ–‡ç« çœ‹èµ·æ¥åº”è¯¥å¤§è‡´åƒå¦‚ä¸‹æ¨¡æ¿ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Title: æ–‡ç« æ ‡é¢˜
Date: 2014-11-30 23:15(æ—¥æœŸ)
Category: Python
Tags: pelican, publishing
Slug: my-super-post
Author: crazygit
Summary: hello

è¿™é‡Œæ˜¯æ–‡ç« å†…å®¹ã€‚
##ä½ å¥½ï¼Œpelican
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å°†ä¸Šé¢çš„å†…å®¹ä¿å­˜åˆ°&lt;code&gt;content&lt;/code&gt;ç›®å½•ä¸‹ï¼Œå–åä¸º&lt;code&gt;test.md&lt;/code&gt;
ã€‚ç°åœ¨å°±è¦ç”¨åˆ°å‰é¢çš„å‘½ä»¤äº†ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ make html
$ make devserver
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ç°åœ¨æ‰“å¼€&lt;a href="http://localhost:8000/"&gt;http://localhost:8000/&lt;/a&gt;ï¼Œæ€ä¹ˆæ ·?&amp;nbsp;çœ‹åˆ°äº†æˆ‘ä»¬çš„ç¬¬ä¸€ç¯‡æ–‡ç« äº†å§ã€‚&lt;/p&gt;
&lt;h3&gt;é…ç½®æ–‡ä»¶ä¿®æ”¹&lt;/h3&gt;
&lt;p&gt;åšå®¢çš„é…ç½®é€šè¿‡ä¿®æ”¹&lt;code&gt;publishconf.py&lt;/code&gt;
æ–‡ä»¶æ¥å®ç°ï¼Œç”±äºå¯ä»¥pelicanæ¯”è¾ƒçµæ´»ï¼Œå¯ä»¥é…ç½®çš„åœ°æ–¹æ¯”è¾ƒçš„å¤šï¼Œå°±ä¸ä»‹ç»äº†ï¼Œå¯ä»¥
æŸ¥çœ‹&lt;a href="http://docs.getpelican.com/en/3.2/settings.html"&gt;å®˜æ–¹æ–‡æ¡£&lt;/a&gt;æŸ¥æ‰¾è‡ªå·±éœ€è¦çš„
ã€‚å…¶å®ï¼Œé»˜è®¤çš„é…ç½®åŸºæœ¬ä¸Šå·²ç»å¾ˆå¥½äº†ï¼Œæˆ‘è‡ªå·±é™¤äº†åœ¨é…ç½®æ–‡ä»¶é‡Œé¢åŠ ä¸Šäº†æ—¶åŒºä¹‹å¤–ï¼Œå…¶ä»–çš„åŸºæœ¬ä¸Šæ²¡æœ‰ä¿®æ”¹ä»€ä¹ˆäº†ã€‚&amp;nbsp;ç»™ä¸€ä¸ªå®˜æ–¹çš„é…ç½®æ–‡ä»¶ç¤ºä¾‹:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# -*- coding: utf-8 -*-&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;__future__&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;unicode_literals&lt;/span&gt;

&lt;span class="n"&gt;AUTHOR&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Alexis MÃ©taireau&amp;#39;&lt;/span&gt;
&lt;span class="n"&gt;SITENAME&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Alexis&amp;#39; log&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;SITEURL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;http://blog.notmyidea.org&amp;#39;&lt;/span&gt;
&lt;span class="n"&gt;TIMEZONE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Europe/Paris&amp;quot;&lt;/span&gt;

&lt;span class="c1"&gt;# can be useful in development, but set to False when you&amp;#39;re ready to publish&lt;/span&gt;
&lt;span class="n"&gt;RELATIVE_URLS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;

&lt;span class="n"&gt;GITHUB_URL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;http://github.com/ametaireau/&amp;#39;&lt;/span&gt;
&lt;span class="n"&gt;DISQUS_SITENAME&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;blog-notmyidea&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;PDF_GENERATOR&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;False&lt;/span&gt;
&lt;span class="n"&gt;REVERSE_CATEGORY_ORDER&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;
&lt;span class="n"&gt;LOCALE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;C&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;DEFAULT_PAGINATION&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;
&lt;span class="n"&gt;DEFAULT_DATE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2012&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;FEED_ALL_RSS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;feeds/all.rss.xml&amp;#39;&lt;/span&gt;
&lt;span class="n"&gt;CATEGORY_FEED_RSS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;feeds/&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s1"&gt;.rss.xml&amp;#39;&lt;/span&gt;

&lt;span class="n"&gt;LINKS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Biologeek&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;http://biologeek.org&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
        &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Filyb&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;http://filyb.info/&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
        &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Libert-fr&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;http://www.libert-fr.com&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
        &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;N1k0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;http://prendreuncafe.com/blog/&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
        &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Tarek ZiadÃ©&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;http://ziade.org/blog&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
        &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Zubin Mithra&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;http://zubin71.wordpress.com/&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),)&lt;/span&gt;

&lt;span class="n"&gt;SOCIAL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;twitter&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;http://twitter.com/ametaireau&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
        &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;lastfm&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;http://lastfm.com/user/akounet&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
        &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;github&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;http://github.com/ametaireau&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),)&lt;/span&gt;

&lt;span class="c1"&gt;# global metadata to all the contents&lt;/span&gt;
&lt;span class="n"&gt;DEFAULT_METADATA&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;yeah&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;it is&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),)&lt;/span&gt;

&lt;span class="c1"&gt;# static paths will be copied under the same name&lt;/span&gt;
&lt;span class="n"&gt;STATIC_PATHS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;pictures&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="c1"&gt;# A list of files to copy from the source to the destination&lt;/span&gt;
&lt;span class="n"&gt;FILES_TO_COPY&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;extra/robots.txt&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;robots.txt&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),)&lt;/span&gt;

&lt;span class="c1"&gt;# custom page generated with a jinja2 template&lt;/span&gt;
&lt;span class="n"&gt;TEMPLATE_PAGES&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;pages/jinja2_template.html&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;jinja2_template.html&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="c1"&gt;# foobar will not be used, because it&amp;#39;s not in caps. All configuration keys&lt;/span&gt;
&lt;span class="c1"&gt;# have to be in caps&lt;/span&gt;
&lt;span class="n"&gt;foobar&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;barbaz&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;ä¸»é¢˜å®‰è£…&lt;/h3&gt;
&lt;p&gt;é»˜è®¤çš„åšå®¢ä¸»é¢˜æ˜¯ä¸æ˜¯ä¸ç¬¦åˆä½ è‡ªå·±çš„èƒƒå£å‘¢ï¼Ÿæ²¡å…³ç³»ï¼Œpelicanå·²ç»æœ‰å¾ˆå¤šæ¼‚äº®çš„ä¸»é¢˜&amp;nbsp;ä¾›ä½ é€‰æ‹©äº†ï¼Œåœ¨&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/getpelican/pelican-themes"&gt;https://github.com/getpelican/pelican-themes&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å·²ç»æœ‰å¾ˆå¤šç°æˆçš„ä¸»é¢˜äº†ï¼Œæ‰“å¼€æ¯ä¸ªä¸»é¢˜çš„æ–‡ä»¶å¤¹éƒ½æœ‰ä¸€å¼ ä¸»é¢˜æ•ˆæœçš„æˆªå›¾ï¼Œå¯ä»¥æ–¹ä¾¿é€‰æ‹©è‡ªå·±å–œæ¬¢çš„ä¸»é¢˜ã€‚ä»€ä¹ˆï¼Ÿè¿™äº›ä¸»é¢˜éƒ½ä¸æ»¡æ„ã€‚å¥½å§ï¼Œä½ è¿˜å¯ä»¥é€‰æ‹©&lt;a href="http://docs.getpelican.com/en/3.2/themes.html#theming-pelican"&gt;åˆ›å»ºå±äºè‡ªå·±ç‹¬æœ‰çš„ä¸»é¢˜&lt;/a&gt;ã€‚ç”±äºä¸ªäººæ¯”è¾ƒæ‡’ï¼Œä¿¡å¥‰æ‹¿æ¥ä¸»ä¹‰ï¼Œæ‰€ä»¥å°±é€‰æ‹©äº†&lt;code&gt;tuxlite_tbs&lt;/code&gt;è¿™ä¸ªä¸»é¢˜ï¼Œè‡ªå·±åªåšäº†ä¸€äº›ç»†èŠ‚çš„ä¿®æ”¹ã€‚&lt;/p&gt;
&lt;p&gt;åºŸè¯ä¸å¤šè¯´ï¼Œè®©æˆ‘ä»¬å¼€å§‹å®‰è£…ä¸»é¢˜å§ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ git clone git://github.com/getpelican/pelican-themes.git ~/pelican-themes &lt;span class="c1"&gt;# ä¸‹è½½ä¸»é¢˜åˆ°`~/pelican-themes/`ç›®å½•ä¸‹&lt;/span&gt;
$ &lt;span class="nb"&gt;cd&lt;/span&gt; ~/pelican-themes/
$ git submodule init  &lt;span class="c1"&gt;# ç”±äºè¿™ä¸ªgitåº“é‡Œé¢çš„ä¸€äº›ä¸»é¢˜æ˜¯å•ç‹¬çš„ä¸€ä¸ªå­æ¨¡å—ï¼Œæ‰€ä»¥å°†å®ƒä»¬ä¸€èµ·ä¸‹è½½ä¸‹æ¥&lt;/span&gt;
$ git submodule update
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¥½äº†ï¼Œç°åœ¨å·²ç»æœ‰äº†æ‰€æœ‰çš„ä¸»é¢˜äº†ï¼Œæ‰“å¼€æ¯ä¸ªä¸»é¢˜çš„æ–‡ä»¶å¤¹éƒ½æœ‰ä¸€å¼ ä¸»é¢˜æ•ˆæœçš„æˆªå›¾ï¼Œé€‰æ‹©è‡ªå·±å–œæ¬¢çš„ä¸»é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;ä¿®æ”¹&lt;code&gt;publishconf.py&lt;/code&gt; æ–‡ä»¶ï¼Œæ·»åŠ &lt;code&gt;THEME&lt;/code&gt;å…³é”®å­—ï¼Œå¦‚æœå·²ç»æœ‰äº†ï¼Œåˆ™ç›´æ¥ä¿®æ”¹å€¼å³å¯ï¼Œæˆ‘é€‰æ‹©çš„æ˜¯&lt;code&gt;tuxlite-tbs&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;THEME = &amp;quot;~/pelican-themes/tuxlite-tbs&amp;quot;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ç„¶åé‡æ–°æ‰§è¡Œ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ make html
$ make devserver
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è®¿é—®&lt;a href="http://localhost:8000/"&gt;http://localhost:8000/&lt;/a&gt;çœ‹çœ‹æ–°çš„ä¸»é¢˜æ•ˆæœå§ã€‚&lt;/p&gt;
&lt;h3&gt;ä¸»é¢˜å®šåˆ¶&lt;/h3&gt;
&lt;p&gt;æ–°çš„ä¸»é¢˜æ€ä¹ˆæ ·å‘¢ï¼Ÿæ˜¯ä¸æ˜¯è¿˜æ˜¯æœ‰ç‚¹é—æ†¾å‘¢ï¼Ÿè€å¤–åˆ¶ä½œçš„ä¸»é¢˜æ€»æ˜¯å¼„Twitterï¼ŒGoogle Plusç­‰ã€‚è¿™äº›ä¸œè¥¿è™½ç„¶å¥½ï¼Œä½†æ˜¯æˆ‘ä»¬èº«åœ¨å¤©æœï¼Œåˆç”¨ä¸ä¸Šï¼Œè¦æ˜¯æˆ‘ä»¬èƒ½å¤ŸæŠŠè‡ªå·±çš„æ–°æµªå¾®åšï¼Œ&lt;span class="caps"&gt;QQ&lt;/span&gt;ï¼Œç­‰æ·»åŠ åˆ°è‡ªå·±çš„åšå®¢é‡Œé¢ï¼Œçœ‹èµ·æ¥æ˜¯ä¸æ˜¯æ›´çˆ½ä¸€ç‚¹å‘¢ï¼Ÿ&amp;nbsp;ä¸‹é¢å°±æ¥æ·»åŠ å§!&lt;/p&gt;
&lt;h3&gt;æ·»åŠ æ–°æµªå¾®åšå…³æ³¨æŒ‰é’®&lt;/h3&gt;
&lt;p&gt;é¦–å…ˆåˆ°&lt;a href="http://open.weibo.com/widget/followbutton.php"&gt;æ–°æµªå¼€æ”¾å¹³å°&lt;/a&gt;è·å–å…³æ³¨æŒ‰é’®çš„ä»£ç å§ã€‚åœ¨æˆ‘ä½¿ç”¨çš„æ—¶å€™ï¼Œå®ƒä¸»è¦æä¾›äº†ä¸¤ä¸­æ ·å¼ï¼Œä¸€ç§æ˜¯&lt;span class="caps"&gt;WBML&lt;/span&gt;æ ‡å‡†ç‰ˆï¼Œä¸€ç§æ˜¯JavaScriptç®€åŒ–ç‰ˆæœ¬ã€‚åœ¨å®é™…ä½¿ç”¨çš„æ—¶å€™å‘ç°JavaScriptç‰ˆæœ¬æ—¶å€™ä¼šæœ‰ä¸€äº›é—®é¢˜ã€‚
&lt;a href="http://open.weibo.com/qa/index.php?qa=11802&amp;amp;qa_1=%E4%BD%BF%E7%94%A8%E5%85%B3%E6%B3%A8%E6%8C%89%E9%92%AEjavascript%E7%AE%80%E5%8C%96%E7%89%88%EF%BC%8C%E6%8F%90%E7%A4%BAclient-js%E6%B2%A1%E6%9C%89sendmessage%E6%96%B9%E6%B3%95&amp;amp;code=4b3704c5bce7d8cc46de2fe229687bdb"&gt;æç¤ºclient.jsæ²¡æœ‰sendMessageæ–¹æ³•&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;å› æ­¤ä¸‹é¢ä¸»è¦ä»‹ç»å¦‚ä½•æ·»åŠ &lt;span class="caps"&gt;WBML&lt;/span&gt;æ ‡å‡†ç‰ˆæœ¬çš„ã€‚å–å¾—ç±»ä¼¼ä¸‹é¢çš„ä»£ç &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;wb:follow-button&lt;/span&gt; &lt;span class="na"&gt;uid=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;2991975565&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;type=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;red_1&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;width=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;67&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;height=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;24&amp;quot;&lt;/span&gt; &lt;span class="nt"&gt;&amp;gt;&amp;lt;/wb:follow-button&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ³¨æ„ä¸Šé¢çš„uidå°±æ˜¯è‡ªå·±å¾®åšå¸å·çš„idï¼Œtypeå°±æ˜¯é€‰æ‹©çš„æ ·å¼ã€‚&amp;nbsp;ä¸ºäº†è®©è¿™ä¸ªä»£ç æœ‰é€šç”¨æ€§ã€‚æˆ‘å°†å®ƒä¿®æ”¹ä¸ºå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;wb:follow-button&lt;/span&gt; &lt;span class="na"&gt;uid=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;{{&lt;/span&gt;&lt;span class="nv"&gt;WEIBO_UID&lt;/span&gt;&lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;type=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;{{&lt;/span&gt;&lt;span class="nv"&gt;WEIBO_TYPE&lt;/span&gt;&lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;width=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;100%&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;height=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;64&amp;quot;&lt;/span&gt; &lt;span class="nt"&gt;&amp;gt;&amp;lt;/wb:follow-button&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡åœ¨&lt;code&gt;pelicanconf.py&lt;/code&gt;é€šè¿‡é…ç½®&lt;code&gt;WEIBO_UID&lt;/code&gt;å’Œ&lt;code&gt;WEIBO_TYPE&lt;/code&gt;çµæ´»åœ°è®¾ç½®å¸å·å’Œæ ·å¼ã€‚
å°†ä¸Šé¢çš„ä»£ç ä¿å­˜åœ¨weibo.htmlæ–‡ä»¶ä¸­ï¼Œå¹¶å°†æ–‡ä»¶ä¿å­˜åˆ°ä¸»é¢˜ä»£ç åº“çš„&lt;code&gt;~/pelican-themes/tuxlite-tbs/templates&lt;/code&gt;ç›®å½•ä¸‹ã€‚&amp;nbsp;å†ä¿®æ”¹è¿™ä¸ªç›®å½•ä¸‹çš„base.htmlæ–‡ä»¶ï¼Œå¼•ç”¨æˆ‘ä»¬çš„weibo.htmlã€‚å…·ä½“æ”¹åŠ¨å¦‚ä¸‹:&lt;/p&gt;
&lt;p&gt;åœ¨&lt;span class="caps"&gt;HTML&lt;/span&gt;æ ‡ç­¾ä¸­å¢åŠ &lt;span class="caps"&gt;XML&lt;/span&gt;å‘½åç©ºé—´&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;lt;html xmlns:wb=â€œhttp://open.weibo.com/wbâ€&amp;gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;åœ¨&lt;span class="caps"&gt;HEAD&lt;/span&gt;å¤´ä¸­å¼•å…¥&lt;span class="caps"&gt;WB&lt;/span&gt;.&lt;span class="caps"&gt;JS&lt;/span&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;script&lt;/span&gt; &lt;span class="na"&gt;src=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://tjs.sjs.sinajs.cn/open/api/js/wb.js&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;type=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;text/javascript&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;charset=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;utf-8&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;åœ¨éœ€è¦æ˜¾ç¤ºå¾®åšå…³æ³¨æŒ‰é’®çš„åœ°æ–¹includåˆšåˆšçš„weibo.htmlï¼Œæˆ‘æŠŠå®ƒæ·»åŠ åœ¨äº†ç¤¾äº¤ä¸‹é¢.åŒæ—¶è®¾ç½®äº†&lt;span class="caps"&gt;WEIBO&lt;/span&gt;å˜é‡æ¥è®¾ç½®æ˜¯å¦æ˜¾ç¤ºå¾®åšå…³æ³¨æŒ‰é’®&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nv"&gt;WEIBO&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;div&lt;/span&gt; &lt;span class="na"&gt;class=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;social&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;div&lt;/span&gt; &lt;span class="na"&gt;class=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;well&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;padding: 8px 0; background-color: #FBFBFB;&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;ul&lt;/span&gt; &lt;span class="na"&gt;class=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;nav nav-list&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;li&lt;/span&gt; &lt;span class="na"&gt;class=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;nav-header&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
    æ–°æµªå¾®åš
    &lt;span class="nt"&gt;&amp;lt;/li&amp;gt;&lt;/span&gt;
    &lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;include&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;weibo.html&amp;quot;&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/ul&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;endif&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä¿®æ”¹&lt;code&gt;pelicanconf.py&lt;/code&gt;,&amp;nbsp;æ·»åŠ å¦‚ä¸‹å­—æ®µï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# æ–°æµªå¾®åšæ–°å…³æ³¨æŒ‰é’®&lt;/span&gt;
&lt;span class="n"&gt;WEIBO&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;
&lt;span class="n"&gt;WEIBO_UID&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1768615155&lt;/span&gt;        &lt;span class="c1"&gt;# å¡«å…¥uid&lt;/span&gt;
&lt;span class="n"&gt;WEIBO_TYPE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;red_3&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ç¼–è¯‘å‘å¸ƒå¹¶é¢„è§ˆã€‚åœ¨æœ¬åœ°é¢„è§ˆçš„æ—¶å€™å¯èƒ½ä¸ä¼šçœ‹åˆ°æ•ˆæœã€‚éœ€è¦å‘å¸ƒåˆ°github&amp;nbsp;pagesä¸Šé¢æ‰èƒ½çœ‹åˆ°.ä¸‹é¢é©¬ä¸Šä¼šè®²å¦‚ä½•éƒ¨ç½²åˆ°githubä¸Šé¢.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ make html
$ make devserver
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;éƒ¨ç½²åˆ°Githubä¸Šé¢&lt;/h3&gt;
&lt;p&gt;å¦‚ä½•åˆ©ç”¨github&amp;nbsp;pagesåŠŸèƒ½æ¥åˆ›å»ºä¸ªäººçš„åšå®¢ï¼Œç½‘ä¸Šå’Œå®˜ç½‘å·²ç»æœ‰å¾ˆå¤šæ•™ç¨‹äº†ï¼Œå°±ä¸å†ç»†è®²å…·ä½“æ­¥éª¤çš„ï¼Œå”¯ä¸€éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå®ƒä¸»è¦åˆ†ä¸¤ç±»&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç”¨æˆ·çº§åˆ«çš„pages&lt;/li&gt;
&lt;li&gt;é¡¹ç›®çº§åˆ«çš„pages&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸Šé¢ä¸¤ä¸ªä¸åŒä¹‹å¤„æ˜¯æäº¤ä»£ç çš„æ—¶å€™ä¸€ä¸ªæ˜¯masteråˆ†æ”¯ï¼Œå¦ä¸€ä¸ªæ˜¯gh-pagesåˆ†æ”¯.
å› æ­¤ï¼Œæˆ‘ä»¬åªéœ€è¦å°†output ç›®å½•ä¸‹çš„å†…å®¹æäº¤åˆ°ä¸Šé¢çš„åˆ†æ”¯ä¸­ã€‚
ä¸ºäº†åšè¿™ä»¶äº‹æƒ…ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‰é¢ä»‹ç»çš„ghp-importå·¥å…·. åŒæ—¶åœ¨æˆ‘ä»¬çš„Makefileæ–‡ä»¶ä¸­ä¹Ÿæœ‰å°è£…è¿™ä¸ªå‘½ä»¤
å…·ä½“ä½¿ç”¨&lt;a href="http://docs.getpelican.com/en/3.2/tips.html#publishing-to-github"&gt;å‚è€ƒè¿™é‡Œ&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯éœ€è¦æ ¹æ®å®é™…ä¿®æ”¹Makefileæ–‡ä»¶ä¸­çš„&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nf"&gt;github&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;publish&lt;/span&gt;
    ghp-import &lt;span class="k"&gt;$(&lt;/span&gt;OUTPUTDIR&lt;span class="k"&gt;)&lt;/span&gt;
    git push origin gh-pages   &lt;span class="c1"&gt;# æ ¹æ®å®é™…ä½¿ç”¨çš„pagesæƒ…å†µä¿®æ”¹è¿™é‡Œ&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä¿®æ”¹å¥½äº†ä¹‹åï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨&lt;code&gt;make github&lt;/code&gt; å‘å¸ƒåšå®¢äº†.&lt;/p&gt;
&lt;p&gt;æˆ‘ä½¿ç”¨çš„ç”¨æˆ·çº§åˆ«çš„pagesæ—¶ï¼Œå…·ä½“ä¿®æ”¹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;cd&lt;/span&gt; myblog &lt;span class="c1"&gt;# è¿›å…¥åšå®¢ä»£ç ç›®å½•&lt;/span&gt;
$ git init
$ git remote add origin git@github.com:username/username.github.io.git &lt;span class="c1"&gt;# éœ€è¦æ›¿æ¢username&lt;/span&gt;
$ git add .
$ git commit -m &lt;span class="s1"&gt;&amp;#39;init pelican source code&amp;#39;&lt;/span&gt;
$ penv  &lt;span class="c1"&gt;#æ‰“å¼€è™šæ‹Ÿç¯å¢ƒ&lt;/span&gt;
$ make html ç¼–è¯‘ä»£ç 
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä¿®æ”¹Makefileæ–‡ä»¶å¦‚ä¸‹å†…å®¹ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nf"&gt;github&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;publish&lt;/span&gt;
    ghp-import &lt;span class="k"&gt;$(&lt;/span&gt;OUTPUTDIR&lt;span class="k"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;# è¿™ä¸€æ­¥ä¼šåœ¨æœ¬åœ°åˆ›å»ºä¸€ä¸ªgh-pagesåˆ†æ”¯ã€‚å¹¶å°†OUTPUTDIRé‡Œé¢çš„å†…å®¹æ‹·è´åˆ°è¿™ä¸ªåˆ†æ”¯&lt;/span&gt;
    git push -f origin gh-pages:master
&lt;span class="c"&gt;# æ³¨æ„æˆ‘è¿™é‡Œæ·»åŠ äº†å‚æ•°fï¼Œåœ¨åé¢æ¯æ¬¡å¾€master åˆ†æ”¯æäº¤ä»£ç çš„æ—¶å€™ï¼Œå¦‚æœæœ‰å†²çªï¼Œä¼šå¼ºåˆ¶è¦†ç›–masterçš„ä»£ç &lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æœ€åä¸€æ­¥ï¼Œæäº¤ä»£ç &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ make github
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¥½äº†ï¼Œæ‰“å¼€ä½ è‡ªå·±çš„github pages, å¦‚&lt;a href="http://username.github.io/"&gt;http://username.github.io/&lt;/a&gt;æŸ¥çœ‹æ•ˆæœã€‚&lt;strong&gt;æ³¨æ„&lt;/strong&gt;ï¼š é¦–æ¬¡éƒ¨ç½²åˆ°github pages&amp;nbsp;éœ€è¦ç­‰15åˆ†é’Ÿæ‰æœ‰æ•ˆ&lt;/p&gt;
&lt;h3&gt;ä½¿ç”¨googleåœ¨çº¿å­—ä½“&lt;/h3&gt;
&lt;p&gt;æœ‰äº›æ—¶å€™ï¼Œæˆ‘ä»¬æƒ³åœ¨æ–‡ç« ä¸­ä½¿ç”¨ä¸€äº›å¥½çœ‹çš„å­—ä½“ï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿä¼Ÿå¤§çš„Googleæ›¿æˆ‘ä»¬è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œæä¾›äº†&lt;a href="http://www.google.com/fonts/"&gt;Google Web Fonts&lt;/a&gt;ã€‚
åœ¨è¿™é‡Œå¯ä»¥é€‰æ‹©ä¸€äº›å¥½çœ‹çš„å­—ä½“æ¥ç”¨ã€‚æ€ä¹ˆç”¨ä¹Ÿå†™å¾—å¾ˆæ¸…æ¥šï¼Œå°±ä¸å†è¿™é‡Œå™è¿°äº†ã€‚
ä¸€äº›æ•ˆæœå¦‚ä¸‹ï¼š
&lt;p class="googlefont"&gt;Hello Google Web&amp;nbsp;Fonts&lt;/p&gt;
&lt;p class="font-effect-fire-animation"&gt;Hello Google&amp;nbsp;Fonts&lt;/p&gt;&lt;/p&gt;
&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ä¸Šé¢çš„å­—ä½“æœ‰äº›è€çš„æµè§ˆå™¨ä¸æ”¯æŒï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨çš„æ—¶å€™æ³¨æ„ä¸‹å½“å‰çš„æµè§ˆå™¨æ˜¯å¦æ”¯æŒè¿™äº›å­—ä½“ã€‚&lt;/p&gt;
&lt;h3&gt;å›¾ç‰‡æ·»åŠ &lt;/h3&gt;
&lt;p&gt;æœ‰æ—¶å€™ï¼Œå†å¤šçš„è¯­è¨€ï¼Œä¹Ÿæ¯”ä¸ä¸Šä¸€å¼ å›¾ç‰‡æ¥å¾—ç›´ç™½ï¼Œè™½ç„¶æˆ‘ä»¬å¯ä»¥å°†å›¾ç‰‡ç›´æ¥æ”¾åœ¨å†™åšå®¢çš„ä»£ç åº“é‡Œé¢å†ç›´æ¥å¼•ç”¨ã€‚ä½†æ˜¯ä¸ªäººæ„Ÿè§‰è¿™æ ·åšå¹¶ä¸å¥½ã€‚å›¾ç‰‡ä¸€å¤šï¼Œä»£ç åº“å°±æ˜æ˜¾å˜å¤§ã€‚ä¸€ç‚¹ä¹Ÿä¸æ–¹ä¾¿ã€‚æœ€å¥½çš„æ–¹æ³•æ˜¯é€‰ç”¨ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„å›¾ç‰‡æ‰˜ç®¡ï¼Œæ”¯æŒå¤–é“¾çš„ã€‚è¿™æ ·æˆ‘ä»¬åªéœ€è¦åœ¨å›¾ç‰‡æ‰˜ç®¡å¤„ä¸Šä¼ å›¾ç‰‡ï¼Œç„¶ååœ¨åšå®¢é‡Œé¢å¼•ç”¨å³å¯ã€‚åœ¨ç½‘ä¸Šæœå¯»ä¸€ç•ªä¹‹åï¼Œåœ¨&lt;a href="http://c7sky.com/image-storage-server.html"&gt;è¿™é‡Œ&lt;/a&gt;æ‰¾åˆ°äº†ä¸€äº›å…³äºå„ç§å›¾ç‰‡æ‰˜ç®¡çš„ä»‹ç»ã€‚åœ¨è¿™é‡Œæˆ‘é€‰æ‹©äº†yupooã€‚å¤§å®¶ä¹Ÿå¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚ä»»æ„é€‰æ‹©ä¸€æ¬¾ã€‚ä¸è¯´äº†ï¼Œç›´æ¥ä¸Šå›¾å§.&lt;/p&gt;
&lt;p&gt;&lt;img alt="ç¬¬ä¸€å¼ å›¾ç‰‡" src="http://pic.yupoo.com/crazygit/CQBeKErP/medish.jpg" /&gt;&lt;/p&gt;
&lt;p&gt;ç”±äºmarkdownè¯­æ³•æœ¬èº«æ²¡æœ‰ä»£åŠè®¾ç½®å›¾ç‰‡å¸ƒå±€ï¼Œæ‰€ä»¥å¯ä»¥ç”¨htmlæ ‡ç­¾æ¥è®¾ç½®&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;p&lt;/span&gt; &lt;span class="na"&gt;align=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;center&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&amp;lt;img&lt;/span&gt; &lt;span class="na"&gt;src=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://pic.yupoo.com/crazygit/CQBeKErP/medish.jpg&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;title=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Test Image&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&amp;lt;/p&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p align="center"&gt;&lt;img src="http://pic.yupoo.com/crazygit/CQBeKErP/medish.jpg" title="Test Image"/&gt;&lt;/p&gt;

&lt;h3&gt;æ·»åŠ æ–‡ç« è¯„è®ºç³»ç»Ÿï¼Œåˆ†äº«æŒ‰é’®ï¼Œè®¿é—®ç»Ÿè®¡&lt;/h3&gt;
&lt;p&gt;è¿™äº›æ­¥éª¤ä¸æ·»åŠ æ–°æµªå…³æ³¨æŒ‰é’®ä¸€æ ·ï¼Œå°±ä¸å†èµ˜è¿°äº†ã€‚
è¿™äº›è®¾ç½®å†æˆ‘å½“å‰ä½¿ç”¨çš„ä¸»é¢˜ä¸­éƒ½æ·»åŠ äº†ï¼Œå¦‚æœæœ‰éœ€è¦çš„è¯å¤§å®¶å¯ä»¥&lt;a href="https://github.com/crazygit/pelican-themes-tuxlite-tbs-mine"&gt;å‚è€ƒä¸€ä¸‹&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;å…¶ä»–åŠŸèƒ½&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å¯¼å…¥å·²ç»å­˜åœ¨çš„åšå®¢&lt;/li&gt;
&lt;li&gt;æ–‡å­—çš„å¤šè¯­è¨€è®¾ç½®&lt;/li&gt;
&lt;li&gt;ä¸ªäººç§æœ‰æ–‡ç« å’Œè‰ç¨¿ç®±&lt;/li&gt;
&lt;li&gt;æ’ä»¶ä½¿ç”¨&lt;/li&gt;
&lt;li&gt;æ ‡ç­¾äº‘&lt;/li&gt;
&lt;li&gt;&lt;span class="caps"&gt;RSS&lt;/span&gt;è®¢é˜…&lt;/li&gt;
&lt;li&gt;æ–‡ç« åˆ†ç±»&lt;/li&gt;
&lt;li&gt;&amp;#8230;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™äº›åŠŸèƒ½&lt;a href="http://docs.getpelican.com"&gt;å®˜æ–¹æ–‡æ¡£&lt;/a&gt;éƒ½æœ‰ä»‹ç»ï¼Œå¯ä»¥è‡ªå·±æŸ¥æ‰¾ã€‚&lt;/p&gt;
&lt;h3&gt;ç»“æŸè¯­&lt;/h3&gt;
&lt;p&gt;æš‚æ—¶ä½¿ç”¨åˆ°çš„åŠŸèƒ½å°±è¿™ä¹ˆå¤šäº†ï¼Œä»¥åæœ‰ä»€ä¹ˆæ–°çš„æ·»åŠ æˆ‘ä¼šæ›´æ–°çš„ï¼Œç”±äºå°å¼Ÿä¹Ÿæ˜¯åˆšåˆšæ¥è§¦è¿™ä¸ªï¼ŒåŠ ä¸Šæ–‡ç¬”ä¸æ€ä¹ˆå¥½ï¼Œå¦‚æœæœ‰ä»€ä¹ˆä¸æ˜ç™½çš„åœ°æ–¹æˆ–é”™è¯¯çš„åœ°æ–¹ï¼Œæ¬¢è¿ç•™è¨€ï¼Œå¤§å®¶ä¸€èµ·äº¤æµä¸‹ã€‚&lt;/p&gt;</summary><category term="pelican"></category><category term="blog"></category><category term="github"></category></entry><entry><title>Sublime TextÂ 2ä½¿ç”¨å…¥é—¨</title><link href="http://blog.wiseturtles.com/posts/sublime-text-2.html" rel="alternate"></link><published>2013-11-27T09:52:00+08:00</published><author><name>crazygit</name></author><id>tag:blog.wiseturtles.com,2013-11-27:posts/sublime-text-2.html</id><summary type="html">&lt;div class="contents topic" id="contents"&gt;
&lt;p class="topic-title first"&gt;Contents&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference internal" href="#id1" id="id4"&gt;å®‰è£…&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="#id2" id="id5"&gt;å°è¯•ç‰›åˆ€&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="#id3" id="id6"&gt;æ–‡æ¡£&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;p&gt;å…³äºSublime&amp;nbsp;Textçš„èµç¾ä¹‹è¯ï¼Œç½‘ä¸Šå¤ªå¤šäº†ï¼Œä¸è¿‡åˆ«äººå†æ€ä¹ˆè¯´ä¹Ÿæ˜¯åˆ«äººçš„æ„Ÿå—ï¼Œè¦è‡ªå·±äº²èº«ä½“ä¼šæ‰æ˜¯ç¡¬é“ç†ã€‚ä¸‹é¢ï¼Œå°±è®©æˆ‘ä»¬è¿›å…¥Sublimeçš„ä¸–ç•Œå§ã€‚&lt;/p&gt;
&lt;div class="section" id="id1"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="#id4"&gt;å®‰è£…&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;ç›´æ¥ä»å®˜ç½‘ä¸‹è½½http://www.sublimetext.com/2å³å¯ï¼Œ åœ¨è¿™é‡Œå¯ä»¥é€‰æ‹©ä¸åŒçš„å¹³å°å’Œç‰ˆæœ¬çš„è½¯ä»¶ã€‚ åŒæ—¶ï¼Œå¦‚æœæƒ³å°é²œçš„è¯ï¼Œä¹Ÿå¯ä»¥ä»http://www.sublimetext.com/3ä¸‹è½½Beatç‰ˆæœ¬çš„Sublime Text&amp;nbsp;3ã€‚&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="id2"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="#id5"&gt;å°è¯•ç‰›åˆ€&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;å®‰è£…å¥½ä¸‹è½½çš„Sublime Text 2ä¹‹åï¼Œ&amp;nbsp;è®©æˆ‘ä»¬å¼€å§‹å°è¯•ä½¿ç”¨è¿™ä¼ è¯´ä¸­çš„ç¥å™¨å§ã€‚&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;dl class="first docutils"&gt;
&lt;dt&gt;å¿«é€Ÿå®šä½&lt;/dt&gt;
&lt;dd&gt;&lt;p class="first last"&gt;Ctrl + P
&amp;#64; å®šä½åˆ°
# æœç´¢
:&amp;nbsp;è¡Œå·&lt;/p&gt;
&lt;/dd&gt;
&lt;/dl&gt;
&lt;/li&gt;
&lt;li&gt;&lt;dl class="first docutils"&gt;
&lt;dt&gt;å‘½ä»¤é¢æ¿&lt;/dt&gt;
&lt;dd&gt;&lt;p class="first last"&gt;Ctrl + Shift +&amp;nbsp;P&lt;/p&gt;
&lt;/dd&gt;
&lt;/dl&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;ä¸€äº›å¿«æ·é”®&lt;/p&gt;
&lt;blockquote&gt;
&lt;ol class="loweralpha simple"&gt;
&lt;li&gt;Ctrl+D&amp;nbsp;é€‰ä¸­ä¸€ä¸ªå˜é‡ä¹‹åï¼Œç”¨Ctrl+Då¿«é€Ÿè·³åˆ°è¯¥å˜é‡ä¸‹ä¸€æ¬¡å‡ºç°çš„åœ°æ–¹ã€‚&lt;/li&gt;
&lt;li&gt;Ctrl+Shift+L&amp;nbsp;å°†é€‰ä¸­çš„å†…å®¹æ‹†åˆ†ä¸ºå¤šè¡Œï¼Œä¹‹åå¯¹æ¯ä¸€è¡Œçš„æ“ä½œéƒ½æ˜¯åŒæ­¥çš„ã€‚&lt;/li&gt;
&lt;li&gt;Ctrl+Shift+P æ‰“å¼€å‘½ä»¤é¢æ¿ï¼Œå¦‚ä½¿ç”¨Ctrl+Shift+Pæ‰“å¼€å‘½ä»¤é¢æ¿ä¹‹åï¼Œè¾“å…¥â€œsspyâ€ (short for Set Syntax:&amp;nbsp;Python),ä½¿ç”¨pythonè¯­æ³•é«˜æ˜¾äº®å½“å‰æ–‡ç« ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;dl class="first docutils"&gt;
&lt;dt&gt;å¸¸ç”¨æ’ä»¶&lt;/dt&gt;
&lt;dd&gt;&lt;ul class="first last simple"&gt;
&lt;li&gt;Package&amp;nbsp;Control&lt;/li&gt;
&lt;li&gt;emmet&lt;/li&gt;
&lt;li&gt;Soda&amp;nbsp;Theme&lt;/li&gt;
&lt;li&gt;SideBarEnhancements&lt;/li&gt;
&lt;li&gt;Git&lt;/li&gt;
&lt;li&gt;Bracketâ€‹Highlighter&lt;/li&gt;
&lt;li&gt;Pretty &lt;span class="caps"&gt;JSON&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;Markdown&amp;nbsp;Preview&lt;/li&gt;
&lt;li&gt;JsFormat&lt;/li&gt;
&lt;li&gt;jâ€‹Query&lt;/li&gt;
&lt;/ul&gt;
&lt;/dd&gt;
&lt;/dl&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="id3"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="#id6"&gt;æ–‡æ¡£&lt;/a&gt;&lt;/h2&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://www.sublimetext.com/docs/2/"&gt;http://www.sublimetext.com/docs/2/&lt;/a&gt;&amp;nbsp;(å®˜æ–¹æ–‡æ¡£ï¼Œä»‹ç»äº†äº†ä¸€äº›sublimeçš„å¸¸ç”¨æ“ä½œ)&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://github.com/yangweijie/SublimeText2_doc_cn"&gt;https://github.com/yangweijie/SublimeText2_doc_cn&lt;/a&gt;&amp;nbsp;ï¼ˆè¿™ä¸ªæ˜¯å®˜æ–¹æ–‡æ¡£çš„ä¸­æ–‡ç‰ˆï¼‰&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://sublime.wbond.net/"&gt;https://sublime.wbond.net/&lt;/a&gt; ï¼ˆsublime package control,&amp;nbsp;æ’ä»¶ç®¡ç†çš„æ–‡æ¡£ï¼Œåœ¨è¿™é‡Œå¯ä»¥æŸ¥çœ‹æ‰€æœ‰æ’ä»¶ï¼Œè·å–çƒ­é—¨æ’ä»¶å’Œæ’ä»¶æ›´æ–°ä¿¡æ¯)&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</summary><category term="sublime"></category></entry><entry><title>Windowsä¸‹å®‰è£…Nginx</title><link href="http://blog.wiseturtles.com/posts/install-nginx-on-windows.html" rel="alternate"></link><published>2013-11-26T09:30:00+08:00</published><author><name>crazygit</name></author><id>tag:blog.wiseturtles.com,2013-11-26:posts/install-nginx-on-windows.html</id><summary type="html">&lt;p&gt;æœ¬æ–‡å‚è€ƒè‡ª &lt;a class="reference external" href="http://nginx.org/cn/docs/windows.html"&gt;windowsä¸‹å®‰è£…nginx&lt;/a&gt;&amp;nbsp;.&lt;/p&gt;
&lt;p&gt;nginxçš„Windowsç‰ˆæœ¬ä½¿ç”¨åŸç”ŸWin32 &lt;span class="caps"&gt;API&lt;/span&gt;ï¼ˆéCygwinæ¨¡æ‹Ÿå±‚ï¼‰ã€‚å½“å‰nginx/Windowsåªä½¿ç”¨selectä½œä¸ºé€šçŸ¥æ–¹æ³•ï¼Œæ‰€ä»¥ä¸è¦æœŸå¾…å®ƒæœ‰å¾ˆé«˜çš„æ€§èƒ½å’Œæ‰©å±•æ€§ã€‚é‰´äºè¿™ç‚¹å’Œä¸€äº›å·²çŸ¥é—®é¢˜ï¼Œnginx/Windowsç›®å‰è¿˜å¤„äºbetaé˜¶æ®µã€‚nginx/Windowså’ŒUnixç‰ˆæœ¬ç›¸æ¯”ï¼ŒåŠŸèƒ½å‡ ä¹å·²ç»é½å…¨ï¼Œé™¤äº†&lt;span class="caps"&gt;XSLT&lt;/span&gt;è¿‡æ»¤å™¨ã€å›¾åƒè¿‡æ»¤å™¨ã€GeoIPæ¨¡å—å’ŒåµŒå…¥Perlè¯­è¨€æ”¯æŒä»¥å¤–ã€‚&lt;/p&gt;
&lt;p&gt;å®‰è£…nginx/Windowsï¼Œéœ€è¦ä¸‹è½½æœ€æ–°çš„1.5.7å¼€å‘ç‰ˆæœ¬ï¼Œå› ä¸ºå¼€å‘åˆ†æ”¯ä¸ŠåŒ…å«äº†æ‰€æœ‰å·²çŸ¥çš„é—®é¢˜ä¿®å¤ï¼Œå°¤å…¶æ˜¯é’ˆå¯¹Windowsç‰ˆæœ¬çš„é—®é¢˜ä¿®å¤ã€‚è§£å‹ç¼©ä¸‹è½½å¾—åˆ°çš„zipæ–‡ä»¶ï¼Œè¿›å…¥nginx-1.5.7ç›®å½•ï¼Œè¿è¡Œnginxã€‚ä¸‹é¢ç»™å‡ºä¸€ä¸ªåœ¨Cç›˜æ ¹ç›®å½•ä¸‹å®‰è£…çš„ä¾‹å­ï¼š&lt;/p&gt;
&lt;pre class="literal-block"&gt;
cd c:\
unzip nginx-1.5.7.zip
cd nginx-1.5.7
start nginx
&lt;/pre&gt;
&lt;p&gt;å¯ä»¥åœ¨å‘½ä»¤è¡Œè¿è¡Œtasklistå‘½ä»¤æ¥æŸ¥çœ‹nginxè¿›ç¨‹ï¼š&lt;/p&gt;
&lt;pre class="literal-block"&gt;
C:\nginx-1.5.7&amp;gt;tasklist /fi &amp;quot;imagename eq nginx.exe&amp;quot;

Image Name           PID Session Name     Session#    Mem Usage
=============== ======== ============== ========== ============
nginx.exe            652 Console                 0      2 780 K
nginx.exe           1332 Console                 0      3 112 K
&lt;/pre&gt;
&lt;p&gt;å…¶ä¸­ä¸€ä¸ªæ˜¯ä¸»è¿›ç¨‹ï¼Œå¦ä¸€ä¸ªæ˜¯å·¥ä½œè¿›ç¨‹ã€‚å¦‚æœnginxæ²¡æœ‰å¯åŠ¨ï¼Œè¯·æŸ¥çœ‹logserror.logæ–‡ä»¶ä»¥å¯»æ‰¾å¤±è´¥åŸå› ã€‚å¦‚æœæ—¥å¿—æ–‡ä»¶ä¸å­˜åœ¨ï¼Œé‚£å¤±è´¥åŸå› ä¼šè®°å½•åœ¨Windowsäº‹ä»¶æ—¥å¿—ä¸­ã€‚å¦‚æœæŸæ¬¡è¯·æ±‚æ²¡æœ‰å±•ç¤ºé¢„æƒ³çš„é¡µé¢ï¼Œè€Œæ˜¯å±•ç¤ºäº†é”™è¯¯é¡µé¢ï¼Œä¹Ÿè¯·æŸ¥çœ‹logserror.logæ–‡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;nginx/Windowsä½¿ç”¨å·¥ä½œç›®å½•ä½œä¸ºå‰ç¼€å°†é…ç½®æ–‡ä»¶ä¸­è®¾ç½®çš„ç›¸å¯¹ç›®å½•è¡¥é½ã€‚å°±ä¸Šé¢å®‰è£…çš„ä¾‹å­è€Œè¨€ï¼Œå·¥ä½œç›®å½•åº”è¯¥æ˜¯C:nginx-1.5.7ï¼ˆå·¥ä½œç›®å½•åŸºæœ¬ä¸Šä¸è¿è¡Œæ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ç›¸åŒï¼‰ã€‚é…ç½®æ–‡ä»¶ä¸­çš„ç›®å½•è¯·ä½¿ç”¨â€œ/â€ï¼Œè€Œä¸æ˜¯â€œâ€åšç›®å½•åˆ†éš”ï¼š&lt;/p&gt;
&lt;pre class="literal-block"&gt;
access_log   logs/site.log;
    root         C:/web/html;
    nginx/Windowsä½œä¸ºæ ‡å‡†æ§åˆ¶å°åº”ç”¨è¿è¡Œï¼Œè€Œä¸æ˜¯ç³»ç»ŸæœåŠ¡ã€‚å¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤æ§åˆ¶ï¼š

    nginx -s stop   å¿«é€Ÿé€€å‡º
    nginx -s quit   ä¼˜é›…é€€å‡º
    nginx -s reload  æ›´æ¢é…ç½®ï¼Œå¯åŠ¨æ–°çš„å·¥ä½œè¿›ç¨‹ï¼Œä¼˜é›…çš„å…³é—­ä»¥å¾€çš„å·¥ä½œè¿›ç¨‹
    nginx -s reopen é‡æ–°æ‰“å¼€æ—¥å¿—æ–‡ä»¶
&lt;/pre&gt;
&lt;div class="section" id="id2"&gt;
&lt;h2&gt;å·²çŸ¥é—®é¢˜&lt;/h2&gt;
&lt;p&gt;è™½ç„¶å¯ä»¥å¯åŠ¨è‹¥å¹²å·¥ä½œè¿›ç¨‹è¿è¡Œï¼Œå®é™…ä¸Šåªæœ‰ä¸€ä¸ªè¿›ç¨‹åœ¨å¤„ç†è¯·æ±‚æ‰€æœ‰è¯·æ±‚ã€‚
ä¸€ä¸ªå·¥ä½œè¿›ç¨‹åªèƒ½å¤„ç†ä¸è¶…è¿‡1024ä¸ªå¹¶å‘è¿æ¥ã€‚
ç¼“å­˜å’Œå…¶ä»–éœ€è¦å…±äº«å†…å­˜æ”¯æŒçš„æ¨¡å—åœ¨Windows&amp;nbsp;VistaåŠåç»­ç‰ˆæœ¬çš„æ“ä½œç³»ç»Ÿä¸­æ— æ³•å·¥ä½œï¼Œå› ä¸ºåœ¨è¿™äº›æ“ä½œç³»ç»Ÿä¸­ï¼Œåœ°å€ç©ºé—´çš„å¸ƒå±€æ˜¯éšæœºçš„ã€‚&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="id3"&gt;
&lt;h2&gt;æ—¥åå¯èƒ½åŠ å¼ºçš„åŠŸèƒ½&lt;/h2&gt;
&lt;p&gt;ä½œä¸ºç³»ç»ŸæœåŠ¡è¿è¡Œã€‚
ä½¿ç”¨â€œI/Oå®Œæˆç«¯å£â€ä½œä¸ºäº‹ä»¶æ¨¡å‹ã€‚&amp;nbsp;ä½¿ç”¨å•å·¥ä½œè¿›ç¨‹å¤šçº¿ç¨‹çš„æ¨¡å‹ã€‚&lt;/p&gt;
&lt;/div&gt;
</summary><category term="windows"></category><category term="nginx"></category></entry><entry><title>Windowsç¯å¢ƒä¸‹æ­å»ºpythonå¼€å‘ç¯å¢ƒ</title><link href="http://blog.wiseturtles.com/posts/install-python-on-windows.html" rel="alternate"></link><published>2013-11-25T23:14:34+08:00</published><author><name>crazygit</name></author><id>tag:blog.wiseturtles.com,2013-11-25:posts/install-python-on-windows.html</id><summary type="html">&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;ä» &lt;a class="reference external" href="http://www.python.org/download/"&gt;Pythonå®˜ç½‘ä¸‹è½½&lt;/a&gt;&amp;nbsp;ä¸‹è½½è‡ªå·±æ‰€éœ€ç‰ˆæœ¬çš„windowså®‰è£…åŒ…å¹¶è¿›è¡Œå®‰è£…ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;å°†å®‰è£…åŒ…çš„è·¯å¾„æ·»åŠ åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡,  &lt;code&gt;C:\Python27&lt;/code&gt; ï¼Œ åŒæ—¶ä¸ºäº†åé¢ä½¿ &lt;code&gt;easy_install&lt;/code&gt; ï¼Œä¹Ÿ &lt;code&gt;C:\Python27\Scripts&lt;/code&gt; æ·»åŠ åˆ°ç¯å¢ƒå˜é‡é‡Œï¼ˆç°åœ¨è¿™ä¸ªç›®å½•è¿˜ä¸å­˜åœ¨).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;å®‰è£…pythonåŒ…ç®¡ç†å·¥å…· &lt;em&gt;setuptools&lt;/em&gt; ,&amp;nbsp;å®‰è£…æ–¹æ³•å¦‚ä¸‹:&lt;/p&gt;
&lt;blockquote&gt;
&lt;ol class="loweralpha simple"&gt;
&lt;li&gt;ä¸‹è½½ &lt;a class="reference external" href="https://bitbucket.org/pypa/setuptools/raw/bootstrap/ez_setup.py"&gt;ez_setup.py&lt;/a&gt;  è„šæœ¬ï¼Œå¹¶è¿è¡Œ &lt;code&gt;python easy_install.py&lt;/code&gt; .&lt;/li&gt;
&lt;li&gt;å¦‚æœcmdå‘½ä»¤æ”¯æŒcurlå‘½ä»¤(å¦‚æœºå™¨ä¸Šå®‰è£…è¿‡gitæˆ–ä¸€äº›å¸¦linuxå‘½ä»¤çš„åŒ…æ—¶ï¼‰ï¼Œåˆ™å¯ä»¥ç›´æ¥æ‰§ &lt;code&gt;curl https://bitbucket.org/pypa/setuptools/raw/bootstrap/ez_setup.py | python&lt;/code&gt; è¿›è¡Œå®‰è£….&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;å®‰è£…å¦ä¸€ä¸ªpythonåŒ…çš„ç®¡ç†å·¥å…· &lt;em&gt;pip&lt;/em&gt; , &lt;code&gt;easy_install pip&lt;/code&gt; .&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;è®©pipä½¿ç”¨å›½å†…çš„pypiæºã€‚æˆ‘ä»¬åœ¨ä½¿ç”¨pipè¿›è¡ŒåŒ…å®‰è£…çš„æ—¶å€™ï¼Œé»˜è®¤æ˜¯ä»å®˜æ–¹ä¸‹è½½åŒ…çš„ï¼Œä¸‹è½½é€Ÿåº¦ç›¸å½“åœ°æ…¢ï¼Œè€Œä¸”ç»å¸¸è¿˜ä¼šå‡ºç°ä¸€äº›åŒ…æ— æ³•ä¸‹è½½çš„æƒ…å†µã€‚è¿™ä¸ªæ—¶å€™ï¼Œè®©pipä½¿ç”¨å›½å†…åŸåˆ™èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ã€‚åœ¨è¿™é‡Œæˆ‘é€‰æ‹©ä½¿ç”¨ &lt;a class="reference external" href="http://e.pypi.python.org/"&gt;æ¸…åå¤§å­¦çš„æº&lt;/a&gt;  ã€‚ä½¿ç”¨pipå‘½ä»¤çš„æ—¶å€™ï¼Œåªéœ€è¦åŠ  &lt;code&gt;-i æºåœ°å€å³å¯&lt;/code&gt; ã€‚å¦‚ &lt;code&gt;pip install flask -i http://e.pypi.python.org/simple&lt;/code&gt; .ä¹Ÿå¯ä»¥è¿›è¡Œå¦‚ä¸‹é…ç½®ï¼Œ&amp;nbsp;è®©ä»¥åæ¯æ¬¡å®‰è£…çš„æ—¶å€™éƒ½è‡ªåŠ¨ä½¿ç”¨æŒ‡å®šçš„æº&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre class="literal-block"&gt;
ä½¿ç”¨pipçš„ç”¨æˆ·å¯ä»¥å¦‚ä¸‹é…ç½®ï¼š

åœ¨unixå’Œmacosï¼Œé…ç½®æ–‡ä»¶ä¸ºï¼š$HOME/.pip/pip.conf
åœ¨windowsä¸Šï¼Œé…ç½®æ–‡ä»¶ä¸ºï¼š%HOME%\pip\pip.ini

éœ€è¦åœ¨é…ç½®æ–‡ä»¶å†…åŠ ä¸Šï¼š

[global]
index-url=http://e.pypi.python.org/simple
&lt;/pre&gt;
&lt;p&gt;ä½¿ç”¨æ¸…åå¤§å­¦çš„æºä¹‹åï¼Œä¸‹è½½å®‰è£…pythonåŒ…æ—¶çœŸæ˜¯å¯ä»¥ä½“ä¼šåˆ°é£ä¸€èˆ¬çš„æ„Ÿè§‰ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;å¦‚æœæœ‰éœ€è¦ï¼Œä¹Ÿå¯ä»¥åœ¨æœ¬åœ°è‡ªå·±åšpypiçš„é•œåƒã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;ol class="loweralpha"&gt;
&lt;li&gt;&lt;p class="first"&gt;ä½¿ç”¨bandersnatchï¼Œ å…·ä½“æ–¹æ³•å¯ä»¥å‚è€ƒ &lt;a class="reference external" href="https://pypi.python.org/mirrors"&gt;PyPI Mirrors&lt;/a&gt;&amp;nbsp;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;ä½¿ç”¨pep381client, å…·ä½“æ–¹æ³•å¯ä»¥å‚è€ƒ &lt;a class="reference external" href="http://www.python.org/dev/peps/pep-0381/"&gt;pep381client&lt;/a&gt;&amp;nbsp;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;åœ¨ä½¿ç”¨pep381cientæ­å»ºæœ¬åœ°é•œåƒæ—¶å‘ç°å®ƒæœ¬èº«æ²¡æœ‰ä¸‹è½½åŒ…ï¼Œåªæ˜¯åŒæ­¥äº†åŒ…åï¼Œ
Googleäº†ä¸€ä¸‹ï¼Œåœ¨ &lt;a class="reference external" href="http://stackoverflow.com/questions/17667835/pep381clientpep381run-wont-download-packages-from-the-official-pypi-server"&gt;è¿™é‡Œ&lt;/a&gt; å‘ç°äº†ç­”æ¡ˆï¼ŒåŸå› æ˜¯pep381cientç”¨çš„æ˜¯httpä¸‹è½½ï¼Œè€Œpypiåªæ”¯æŒhppts.
å› æ­¤éœ€è¦ä¿®æ”¹ä¸€ä¸‹pep381cientç¨‹åºä»£ç ã€‚
ä¿®æ”¹æ–‡ä»¶: &lt;code&gt;(YOUR INSALLED DIRECTORY)/pep381client/__init__.py&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å¦‚ &lt;code&gt;/usr/local/lib/python2.6/dist-packages/pep381client/__init__.py&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;9:  -BASE = &amp;#39;http://&amp;#39;+pypi
    +BASE = &amp;#39;https://&amp;#39;+pypi

28: -        _conn = httplib.HTTPConnection(pypi)
    +        _conn = httplib.HTTPSConnection(pypi)

37: -        _conn = httplib.HTTPConnection(pypi)
    +        _conn = httplib.HTTPSConnection(pypi)
&lt;/pre&gt;&lt;/div&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;æ›´å¤šå¯ä»¥å‚è€ƒ &lt;a class="reference external" href="http://www.worldhello.net/2011/03/14/2357.html"&gt;http://www.worldhello.net/2011/03/14/2357.html&lt;/a&gt;&amp;nbsp;.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;å¥½äº†ï¼Œç°åœ¨å¯ä»¥å¼€å§‹pythonä¹‹æ—…äº†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
</summary><category term="windows"></category><category term="python"></category><category term="pypi mirrors"></category></entry><entry><title>Ubuntuä¸Šæ‰‹åŠ¨å®‰è£…JDK</title><link href="http://blog.wiseturtles.com/posts/install-jdk.html" rel="alternate"></link><published>2013-11-03T19:09:00+08:00</published><author><name>crazygit</name></author><id>tag:blog.wiseturtles.com,2013-11-03:posts/install-jdk.html</id><summary type="html">&lt;p&gt;Ubuntuä¸Šé¢è‡ªå·±æ‰‹åŠ¨å®‰è£…&lt;span class="caps"&gt;JDK&lt;/span&gt;çš„æ–¹æ³•å¦‚ä¸‹:
é¦–å…ˆä¸‹è½½jdk-7u45-linux-i586.tar.gzå‹ç¼©åŒ…ï¼Œå¹¶è§£å‹åˆ° &lt;code&gt;/usr/local/lib/jdk1.7.0_45&lt;/code&gt; ,&amp;nbsp;å†æ‰§è¡Œä¸‹é¢çš„è„šæœ¬&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="ch"&gt;#!/bin/bash&lt;/span&gt;
&lt;span class="nv"&gt;JDK_BIN_PATH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/usr/local/lib/jdk1.7.0_45/bin
&lt;span class="k"&gt;for&lt;/span&gt; x in &lt;span class="k"&gt;$(&lt;/span&gt;find &lt;span class="nv"&gt;$JDK_BIN_PATH&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;do&lt;/span&gt;
    &lt;span class="nv"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;basename &lt;span class="nv"&gt;$x&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;
    sudo update-alternatives --install /usr/bin/&lt;span class="nv"&gt;$name&lt;/span&gt; &lt;span class="nv"&gt;$name&lt;/span&gt; &lt;span class="nv"&gt;$x&lt;/span&gt; 300
&lt;span class="k"&gt;done&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
</summary><category term="ubuntu"></category><category term="jdk"></category></entry><entry><title>WAMP(Windows + Apache + Mysql + PHP)Â ç¯å¢ƒæ­å»º</title><link href="http://blog.wiseturtles.com/posts/setup-wamp.html" rel="alternate"></link><published>2013-09-30T13:44:00+08:00</published><author><name>crazygit</name></author><id>tag:blog.wiseturtles.com,2013-09-30:posts/setup-wamp.html</id><summary type="html">&lt;p&gt;æœ€è¿‘å¼€å§‹å­¦ä¹ &lt;span class="caps"&gt;PHP&lt;/span&gt;ï¼Œå·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ã€‚ç¬¬ä¸€æ­¥å½“ç„¶æ˜¯ç¯å¢ƒæ­å»ºå•¦ï¼&lt;/p&gt;
&lt;p&gt;&lt;span class="caps"&gt;PHP&lt;/span&gt;å¼€å‘åŸºæœ¬ä¹Ÿå°±æ˜¯åœ¨ä¸åŒå¹³å°ä¸‹ï¼Œè¦ä¹ˆæ˜¯&lt;span class="caps"&gt;LAMP&lt;/span&gt;(Linux + Apache + Mysql + &lt;span class="caps"&gt;PHP&lt;/span&gt;)ï¼Œè¦ä¹ˆå°±æ˜¯&lt;span class="caps"&gt;WAMP&lt;/span&gt;(Windows + Apache + Mysql +&lt;span class="caps"&gt;PHP&lt;/span&gt;),&amp;nbsp;ä¸ªäººæ„Ÿè§‰åœ¨ubuntuç¯å¢ƒä¸‹æ­å»ºç¯å¢ƒæ¯”è¾ƒç®€å•ï¼Œåªéœ€è¦ä¸€ä¸ªå‘½ä»¤&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt-get install -y apache2 mysql-server-5.5 php5 php5-gd php5-mysql php5-xdebug libapache2-mod-php5 phpmyadmin
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ç„¶åé€šè¿‡å°‘è®¸é…ç½®ï¼Œ &lt;span class="caps"&gt;LAMP&lt;/span&gt;ç¯å¢ƒå°±åŸºæœ¬ä¸Šæ­å»ºå¥½äº†ã€‚ç³»ç»Ÿé»˜è®¤å¸®æˆ‘ä»¬åšäº†å¾ˆå¤šäº‹æƒ…ï¼Œä½†æ˜¯ä¸ºäº†å­¦ä¹ ï¼Œæˆ‘ä»¬è¿˜æ˜¯å°è¯•ä¸‹åœ¨windowsä¸‹æ­å»ºå§ï¼è™½ç„¶åœ¨windowsä¸‹é¢ä¹Ÿæœ‰å¾ˆå¤š&lt;span class="caps"&gt;WAMP&lt;/span&gt;çš„é›†æˆç¯å¢ƒï¼Œå¦‚ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;span class="caps"&gt;XAMPP&lt;/span&gt; - &lt;span class="caps"&gt;XAMPP&lt;/span&gt;æ˜¯ä¸€æ¬¾å…·æœ‰ä¸­æ–‡è¯´æ˜çš„åŠŸèƒ½å…¨é¢çš„é›†æˆç¯å¢ƒï¼Œ&lt;span class="caps"&gt;XAMPP&lt;/span&gt;å¹¶ä¸ä»…ä»…é’ˆå¯¹Windowsï¼Œè€Œæ˜¯ä¸€ä¸ªé€‚ç”¨äºLinuxã€Windowsã€Mac &lt;span class="caps"&gt;OS&lt;/span&gt; X å’ŒSolaris çš„æ˜“äºå®‰è£…çš„Apache å‘è¡Œç‰ˆã€‚è½¯ä»¶åŒ…ä¸­åŒ…å«Apache æœåŠ¡å™¨ã€MySQLã€SQLiteã€&lt;span class="caps"&gt;PHP&lt;/span&gt;ã€Perlã€FileZilla &lt;span class="caps"&gt;FTP&lt;/span&gt;&amp;nbsp;Serverã€Tomcatç­‰ç­‰ã€‚é»˜è®¤å®‰è£…å¼€æ”¾äº†æ‰€æœ‰åŠŸèƒ½ï¼Œå®‰å…¨æ€§æœ‰é—®é¢˜ï¼Œéœ€è¦è¿›è¡Œé¢å¤–çš„å®‰å…¨è®¾å®šã€‚&lt;/p&gt;
&lt;p&gt;WampServer - WampServeé›†æˆäº†Apacheã€MySQLã€&lt;span class="caps"&gt;PHP&lt;/span&gt;ã€phpmyadminï¼Œæ”¯æŒApacheçš„mod_rewriteï¼Œ&lt;span class="caps"&gt;PHP&lt;/span&gt;æ‰©å±•ã€Apacheæ¨¡å—åªéœ€è¦åœ¨èœå•â€œå¼€å¯/å…³é—­â€ä¸Šç‚¹ç‚¹å°±æå®šï¼Œçœå»äº†ä¿®æ”¹é…ç½®æ–‡ä»¶çš„éº»çƒ¦ã€‚&lt;/p&gt;
&lt;p&gt;AppServ - é›†æˆäº†Apacheã€&lt;span class="caps"&gt;PHP&lt;/span&gt;ã€MySQLã€phpMyAdminï¼Œè¾ƒä¸ºè½»é‡ã€‚&lt;/p&gt;
&lt;p&gt;æ€»çš„æ¥è¯´ï¼Œæ— è®ºä»å®‰å…¨æ€§å’Œæ€§èƒ½ä¸Šæ¥è®²ï¼Œ&lt;span class="caps"&gt;LAMP&lt;/span&gt;ï¼ˆLinux + Apache + MySQL + &lt;span class="caps"&gt;PHP&lt;/span&gt;ï¼‰éƒ½ä¼˜äº&lt;span class="caps"&gt;WAMP&lt;/span&gt;ï¼ˆWindows + Apache + MySQL + &lt;span class="caps"&gt;PHP&lt;/span&gt;ï¼‰ï¼Œä¸è¿‡ç”±äºWindowså…·æœ‰æ˜“ç”¨çš„ç‰¹ç‚¹ï¼Œ&lt;span class="caps"&gt;WAMP&lt;/span&gt;ä¹Ÿæœªå°ä¸æ˜¯åˆå­¦è€…çš„ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚ 
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¸Šé¢&lt;span class="caps"&gt;WAMP&lt;/span&gt;é›†æˆç¯å¢ƒçš„å†…å®¹ä»‹ç»å¼•ç”¨è‡ª&lt;br /&gt;
&lt;a href="http://www.williamlong.info/archives/1281.html"&gt;http://www.williamlong.info/archives/1281.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å…³äºé›†æˆçš„å¼€å‘ç¯å¢ƒï¼Œè¿˜ä¸å¾—ä¸æåˆ°ZendServerï¼Œ è¿™ä¸ªä¹Ÿæ˜¯ä¸€ä¸ªç›¸å½“ä¸é”™çš„ç¯å¢ƒï¼Œç›¸æ¯”&lt;span class="caps"&gt;XAMPP&lt;/span&gt;æ›´åŠ ç²¾ç®€ä¸€äº›ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœæˆ‘ä»¬å¯ä»¥è‡ªå·±æ­å»ºä¸€æ¬¡æ•´ä¸ªå¼€å‘ç¯å¢ƒçš„è¯ï¼Œå¯¹è¿™ä¸ªè¿‡ç¨‹å°†ä¼šæ›´åŠ ç†Ÿæ‚‰ã€‚åºŸè¯ä¸å¤šè¯´ï¼Œä¸‹é¢å°±è®©æˆ‘ä»¬å¼€å§‹æ­å»ºå§ï¼&lt;/p&gt;
&lt;h2&gt;Apacheå®‰è£…&lt;/h2&gt;
&lt;h3&gt;1.ä¸‹è½½å®‰è£…ApacheåŒ…&lt;/h3&gt;
&lt;p&gt;æ ¹æ®http://httpd.apache.org/docs/2.4/platform/windows.htmlä¸­å¦‚ä¸‹ä¸€æ®µè¯ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The Apache &lt;span class="caps"&gt;HTTP&lt;/span&gt; Server Project itself does not provide binary releases of software, only source code. If you cannot compile the Apache &lt;span class="caps"&gt;HTTP&lt;/span&gt; Server yourself, you can obtain a binary package from numerous binary &amp;gt;distributions available on the Internet.
Popular options for deploying Apache httpd, and, optionally, &lt;span class="caps"&gt;PHP&lt;/span&gt; and MySQL, on Microsoft Windows,&amp;nbsp;include:&lt;/p&gt;
&lt;p&gt;â€¢&amp;nbsp;ApacheHaus&lt;/p&gt;
&lt;p&gt;â€¢  Apache&amp;nbsp;Lounge&lt;/p&gt;
&lt;p&gt;â€¢&amp;nbsp;WampServer&lt;/p&gt;
&lt;p&gt;â€¢  &lt;span class="caps"&gt;XAMPP&lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä»ä¸Šé¢å¯ä»¥çŸ¥é“ï¼ŒApacheå®˜æ–¹å¹¶æ²¡æœ‰æä¾›windowsä¸‹çš„äºŒè¿›åˆ¶å®‰è£…åŒ…ï¼Œ
å¯ä»¥ä»å®ƒæ¨èçš„ç«™ç‚¹ä¸‹è½½apacheäºŒè¿›åˆ¶å®‰è£…åŒ…ã€‚
åœ¨æ­¤é€‰æ‹©&lt;br /&gt;
&lt;a href="https://www.apachelounge.com/download/"&gt;https://www.apachelounge.com/download/&lt;/a&gt; 
ç½‘ç«™ä¸Šçš„&lt;br /&gt;
&lt;a href="https://www.apachelounge.com/download/win32/binaries/httpd-2.4.4-win32.zip"&gt;https://www.apachelounge.com/download/win32/binaries/httpd-2.4.4-win32.zip&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ç”±äºä¸Šé¢è¿™ä¸ªå®‰è£…åŒ…æ˜¯æ ¹æ®Visual Studio C++ 2010 &lt;span class="caps"&gt;SP1&lt;/span&gt; &lt;span class="caps"&gt;VC10&lt;/span&gt;&amp;nbsp;ç¯å¢ƒä¸‹ç¼–è¯‘çš„ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Be sure that you have installed the Visual C++ 2010 &lt;span class="caps"&gt;SP1&lt;/span&gt; Redistributable Package x86 : &lt;span class="caps"&gt;VC10&lt;/span&gt; &lt;span class="caps"&gt;SP1&lt;/span&gt;&amp;nbsp;vcredist_x86.exe&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å› æ­¤éœ€è¦é¢å¤–ä»&amp;nbsp;http://www.microsoft.com/en-us/download/confirmation.aspx?id=8328  &lt;/p&gt;
&lt;p&gt;ä¸‹è½½vcredist_x86.exeï¼ˆè¿™é‡Œæ ¹æ®è‡ªå·±çš„ç³»ç»Ÿç±»å‹é€‰æ‹©å®‰è£…ï¼Œæˆ‘çš„æ˜¯32ä½çš„ç³»ç»Ÿï¼Œå› æ­¤é€‰æ‹©è¿™ä¸ªï¼‰&lt;/p&gt;
&lt;h3&gt;2.&amp;nbsp;å®‰è£…å’Œä¿®æ”¹Apacheé…ç½®æ–‡ä»¶&lt;/h3&gt;
&lt;p&gt;é¦–å…ˆå®‰è£…vcredist_x86.exeã€‚å†å°†ä¸‹è½½çš„httpd-2.4.4-win32.zipè§£å‹åˆ°ä»»æ„ç›®å½•ä¸‹ï¼Œå¦‚ï¼š&lt;code&gt;D:\wamp\Apache24&lt;/code&gt;.
ä¿®æ”¹é…ç½®æ–‡ä»¶&lt;code&gt;D:\wamp\Apache24\conf\httpd.conf&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;ç”±äºåœ¨&lt;code&gt;httpd.conf&lt;/code&gt;ä¸­é»˜è®¤ä¸ºhttpd-2.4.4-win32.zipè§£å‹æ˜¯è§£å‹åˆ°&lt;code&gt;c:\Apache24&lt;/code&gt;ç›®å½•ä¸‹é¢çš„ã€‚
å› æ­¤éœ€è¦å°†&lt;code&gt;httpd.conf&lt;/code&gt;æ–‡ä»¶ä¸­æ‰€æœ‰çš„&lt;code&gt;c:/Apache24&lt;/code&gt;æ›¿æ¢æˆ&lt;code&gt;D:/wamp/Apache24&lt;/code&gt;ï¼ˆ&lt;strong&gt;æ³¨æ„&lt;/strong&gt;:åœ¨&lt;code&gt;httpd.conf&lt;/code&gt;æ–‡ä»¶ä¸­è¡¨ç¤ºæ–‡ä»¶è·¯å¾„éƒ½æ˜¯ç”¨çš„æ­£æ–œæ ï¼Œè€Œä¸æ˜¯åæ–œæ ï¼‰ã€‚è·Ÿå¤§éƒ¨åˆ†ç½‘ä¸Šè®²çš„é…ç½®æ–¹æ³•ä¸€æ ·ï¼Œåœ¨&lt;code&gt;httpd.conf&lt;/code&gt; ä¸­æœ‰å¦‚ä¸‹å‡ å¤„æ˜¯éœ€è¦æ³¨æ„ä¿®æ”¹çš„&lt;/p&gt;
&lt;pre&gt;
    ServerRoot "D:/wamp/Apache24"  # apacheæœåŠ¡å™¨å®‰è£…è·¯å¾„
    Listen 80                      # æœåŠ¡å™¨ç›‘å¬çš„ç«¯å£
    ServerName localhost:80        # æœåŠ¡å™¨çš„åŸŸåï¼Œæµ‹è¯•ç¯å¢ƒä¸‹ä¸€èˆ¬æ˜¯localhost
    ServerAdmin lianglin999@gmail.com   # æœåŠ¡å™¨ç»´æŠ¤äººå‘˜çš„é‚®ç®±
    DocumentRoot "D:/wamp/Apache24/htdocs"  # æœåŠ¡å™¨çš„æ ¹ç›®å½•
    &amp;lt;Directory "D:/wamp/Apache24/htdocs"&amp;gt;    # è¿™é‡Œå’ŒæœåŠ¡å™¨çš„æ ¹ç›®å½•è·¯å¾„ä¸€è‡´
&lt;/pre&gt;

&lt;h3&gt;3.&amp;nbsp;å®‰è£…å’Œå¯åŠ¨ApacheæœåŠ¡&lt;/h3&gt;
&lt;p&gt;å…ˆå°†&lt;code&gt;D:\wamp\Apache24\bin\&lt;/code&gt;æ·»åŠ åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­ã€‚æ–¹ä¾¿åé¢å®‰è£…å’Œå¯åŠ¨æœåŠ¡ã€‚&amp;nbsp;è¿è¡Œcmdçª—å£ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;httpd -k install -n service_name            # å®‰è£…apacheæœåŠ¡ -n æ˜¯å¯é€‰çš„ï¼Œè¡¨ç¤ºæŒ‡å®šæœåŠ¡åå­—ï¼Œä¸åŠ -nä½¿ç”¨é»˜è®¤çš„æœåŠ¡åå­—
httpd -k start/stop/restart -n service_name # è¿è¡Œ/åœæ­¢/é‡å¯ apacheæœåŠ¡, åŒæ ·ï¼Œå¦‚æœä¸Šé¢æ²¡æœ‰ä½¿ç”¨-nå‚æ•°ï¼Œè¿™é‡Œä¹Ÿå¯ä»¥çœå»
httpd -k uninstall -n service_name          # å¸è½½apacheæœåŠ¡
net start/stop service_name                 # ä¹Ÿå¯ä»¥è¿è¡Œ/åœæ­¢ apacheæœåŠ¡
httpd -help                                 # æŸ¥çœ‹æ›´å¤šå¸®åŠ©ä¿¡æ¯
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å®‰è£…å¹¶è¿è¡ŒApacheæœåŠ¡&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;httpd -k install
httpd -k start
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¦‚æœæ²¡æœ‰ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„é»˜è®¤80ç«¯å£çš„è¯ï¼Œè®¿é—®&lt;br /&gt;
&lt;a href="http://localhost/"&gt;http://localhost/&lt;/a&gt;
å¦‚æœä¿®æ”¹äº†ç«¯å£å·ä¸º8000ï¼Œåˆ™è®¿é—®  &lt;br /&gt;
&lt;a href="http://localhost:8000"&gt;http://localhost:8000&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æœ€åçœ‹åˆ°It worksé¡µé¢ã€‚è¡¨ç¤ºapacheæœåŠ¡å™¨å®‰è£…æˆåŠŸã€‚&amp;nbsp;å¦‚æœæ²¡æœ‰ï¼Œè¯·æ£€æŸ¥ä¸Šè¿°æ­¥éª¤æ˜¯ä¸æ˜¯æœ‰ä»€ä¹ˆé”™è¯¯ã€‚&lt;/p&gt;
&lt;h2&gt;Mysqlå®‰è£…&lt;/h2&gt;
&lt;h3&gt;1.&amp;nbsp;ä¸‹è½½å®‰è£…åŒ…&lt;/h3&gt;
&lt;p&gt;ä»&lt;a href="http://dev.mysql.com/downloads/"&gt;http://dev.mysql.com/downloads/&lt;/a&gt;ä¸Šé¢ï¼Œå¯ä»¥è·å–Mysqlçš„å®‰è£…åŒ…ï¼Œåœ¨Windowsä¸‹é¢ï¼ŒMysqlçš„å®‰è£…åŒ…ä¸»è¦æœ‰ä¸¤ç§ï¼šä¸€ç§æ˜¯MySQL Community Server Windows msiå®‰è£…åŒ…ï¼Œ å¦ä¸€ç§æ˜¯è‡ªå·±é…ç½®çš„zipåŒ…ã€‚&amp;nbsp;msiç±»å‹çš„çš„å®‰è£…ç®€å•æ–¹é¢ï¼Œæ ¹æ®éœ€æ±‚é€‰æ‹©ï¼Œç›´æ¥ä¸€ç›´â€œä¸‹ä¸€æ­¥â€å°±å¯ä»¥äº†ã€‚zipåŒ…æ‚¨æƒ³çš„éœ€è¦è‡ªå·±ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œåœ¨å®‰è£…åŒ…è§£å‹è·¯å¾„ä¸‹ï¼Œå¤åˆ¶my-default.iniåˆ°my.iniè¿›è¡Œé…ç½®ï¼Œå…·ä½“é…ç½®å†…å®¹å¯ä»¥ç½‘ä¸ŠæŸ¥è¯¢ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è¿™é‡Œå¯ä»¥æŸ¥çœ‹ä¸€ç¯‡åˆ«äººä»‹ç»çš„&lt;a href="http://www.chenyudong.com/archives/installing-mysql-on-microsoft-windows-using-a-noinstall-zip-archive.html"&gt;é…ç½®æ–¹æ³•&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å…¶å®ï¼Œä¹Ÿå¯ä»¥æš‚æ—¶ä¸ç®¡é…ç½®ä»€ä¹ˆçš„ï¼Œå…ˆæŠŠMysqlç”¨èµ·æ¥ï¼Œéœ€è¦çš„é…ç½®ç­‰è¦ç”¨æ—¶å†æ¥ä¿®æ”¹ä¹Ÿä¸è¿Ÿï¼Œé‚£æ ·å°è±¡æ›´æ·±åˆ»ï¼Œç›´æ¥å€Ÿé‰´åˆ«äººçš„é…ç½®ï¼Œæœ‰äº›åœ°æ–¹ä¹Ÿä¸çŸ¥é“ä¸ºä»€ä¹ˆè¦é‚£ä¹ˆåšã€‚&amp;nbsp;æ‰€ä»¥ï¼Œæˆ‘çš„åšæ³•å°±æ˜¯ä¸ç®¡é…ç½®ä»€ä¹ˆçš„ï¼Œç›´æ¥ç”¨å§ã€‚&lt;/p&gt;
&lt;h3&gt;2.&amp;nbsp;å®‰è£…MysqlæœåŠ¡å’Œä½¿ç”¨&lt;/h3&gt;
&lt;p&gt;å‡è®¾æˆ‘ä½¿ç”¨çš„æ˜¯zipåŒ…ç±»å‹çš„Mysqlï¼Œè§£å‹åœ¨&lt;code&gt;D:\wamp\mysql-5.6.13-win32\&lt;/code&gt;ç›®å½•ä¸‹, å…ˆæŠŠ&lt;code&gt;D:\wamp\mysql-5.6.13-win32\bin&lt;/code&gt;æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ï¼Œæ–¹ä¾¿ä½¿ç”¨å‘½ä»¤è¡Œã€‚&lt;/p&gt;
&lt;p&gt;è¿è¡Œ&lt;span class="caps"&gt;CMD&lt;/span&gt;çª—å£ï¼Œè·Ÿå®‰è£…ApacheæœåŠ¡ç±»ä¼¼ï¼Œç›´æ¥è¿è¡Œ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mysqld --install MySQL5.5(service_name)  # Mysql5.5 æ˜¯service_nameï¼Œæ˜¯å¯é€‰çš„ï¼Œä¸æŒ‡å®šçš„è¯å®ƒä¼šé»˜è®¤ä½¿ç”¨ä¸€ä¸ªæœåŠ¡å
net start/stop MySQL5.5                  # å¯åŠ¨/åœæ­¢MysqlæœåŠ¡
mysqld --remove MySQL5.5                 # ç§»é™¤MysqlæœåŠ¡

# æ›´æ”¹Mysqlæ•°æ®åº“å¯†ç ï¼Œç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶ï¼Œå¯†ç é»˜è®¤ä¸ºç©º
mysql -u root -p                        # ä»å‘½ä»¤è¡Œä¸­è¿›å…¥mysqlçš„å®¢æˆ·ç«¯
use mysql;                              # ä½¿ç”¨mysqlè¿™ä¸ªæ•°æ®åº“
update user set password=password(&amp;quot;root_passwd&amp;quot;) where user=&amp;quot;root&amp;quot;;      # å¯¹rootå¯†ç è¿›è¡Œæ›´æ”¹
FLUSH PRIVILEGES;                       
# ç°åœ¨é€€å‡ºï¼Œä¾¿å¯ä»¥ä½¿ç”¨root_passwdå¯†ç ç™»å½•äº†
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ›´å¤šå®‰è£…ç»†èŠ‚å¯ä»¥æŸ¥çœ‹&lt;a href="http://dev.mysql.com/doc/refman/5.6/en/windows-installation.html"&gt;Mysqlæ‰‹å†Œ&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†æ–¹ä¾¿å¯¹æ•°æ®åº“è¿›è¡Œç®¡ç†ï¼Œæˆ‘ä»¬å¯ä»¥å®‰è£…phpmyadminï¼Œä¸€ä¸ªwebç‰ˆæœ¬çš„Mysqlæ•°æ®åº“ç®¡ç†å·¥å…·ï¼Œå…·ä½“å®‰è£…æ–¹æ³•ç½‘ä¸Šæ¯”è¾ƒå¤šï¼Œä¹Ÿæ¯”è¾ƒç®€å•è¿™é‡Œå°±ä¸åœ¨è®²è§£å’¯ã€‚&lt;/p&gt;
&lt;h2&gt;&lt;span class="caps"&gt;PHP&lt;/span&gt;å®‰è£…&lt;/h2&gt;
&lt;h3&gt;1.&amp;nbsp;ä¸‹è½½å¹¶é…ç½®&lt;/h3&gt;
&lt;p&gt;&lt;span class="caps"&gt;PHP&lt;/span&gt;å®‰è£…åŒ…çš„ç‰ˆæœ¬åˆ†çº¿ç¨‹å®‰å…¨å’Œéçº¿ç¨‹å®‰å…¨ä¸¤ç§ï¼Œå…·ä½“ä¸¤ç§æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œç½‘ä¸Šæœ‰ä¸€å¤§æ¨è®²è§£ï¼Œæœ¬äººä¹Ÿä¸æ˜¯å¾ˆäº†è§£ï¼Œä½†æ˜¯å¦‚æœè¦ä½¿ç”¨apacheæœåŠ¡å™¨çš„è¯ï¼Œåªæœ‰ä¸‹è½½çº¿ç¨‹å®‰å…¨çš„ç‰ˆæœ¬ï¼Œéçº¿ç¨‹å®‰å…¨çš„ç‰ˆæœ¬æ²¡æœ‰php5apache2_4.dllæ–‡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;æ ¹æ®&lt;span class="caps"&gt;PHP&lt;/span&gt;å®‰è£…æ‰‹å†Œï¼Œåœ¨å®‰è£…&lt;span class="caps"&gt;PHP&lt;/span&gt;çš„æ—¶å€™ï¼Œéœ€è¦å…ˆè¿›è¡Œä¸€äº›é…ç½®ã€‚å‡è®¾æˆ‘ä»¬å°†å®‰è£…åŒ…è§£å‹åœ¨&lt;code&gt;D:\wamp\php-5.5.3-Win32-VC11-x86&lt;/code&gt;ã€‚
é¦–å…ˆå¤åˆ¶&lt;code&gt;php.ini-development&lt;/code&gt;ä¸º&lt;code&gt;php.ini&lt;/code&gt;, ç„¶åä¿®æ”¹&lt;code&gt;php.ini&lt;/code&gt;è¿›è¡Œå¦‚ä¸‹é…ç½®ï¼š&lt;/p&gt;
&lt;pre&gt;
# æŠŠ;error_log = php_errors.log ä¿®æ”¹ä¸º
    error_log = D:\wamp\php-5.5.3-Win32-VC11-x86\logs

# ;date.timezone =ä¿®æ”¹ä¸º
    date.timezone = PRC

# ä¸‹é¢è¿™2ä¸ª,è‡ªå·±å†³å®šäº†
    post_max_size = 100M
# upload_max_filesizeé€šå¸¸æ¯”post_max_sizeå°
    upload_max_filesize = 50M

# ä¿®æ”¹ç›¸å…³è·¯å¾„
# ä¸Šä¼ æš‚å­˜è·¯å¾„,åˆ«å¿˜äº†åˆ›å»ºå¯¹åº”çš„æ–‡ä»¶å¤¹
    upload_tmp_dir = D:\wamp\php-5.5.3-Win32-VC11-x86\tmp\upload
    session.save_path = D:\wamp\php-5.5.3-Win32-VC11-x86\tmp\session
    extension_dir = D:\wamp\php-5.5.3-Win32-VC11-x86\ext

# å–æ¶ˆå¸¸ç”¨çš„æ‰©å±•å‰é¢çš„åˆ†å·æ³¨é‡Š
    extension=php_curl.dll
    extension=php_gd2.dll
    extension=php_mbstring.dll
    extension=php_mysql.dll
    extension=php_mysqli.dll
    extension=php_pdo_mysql.dll
&lt;/pre&gt;

&lt;p&gt;æœ€åå†åˆ›å»ºç›¸å¯¹åº”çš„ç›®å½•&lt;code&gt;D:\wamp\php-5.5.3-Win32-VC11-x86\logs&lt;/code&gt;,&lt;code&gt;D:\wamp\php-5.5.3-Win32-VC11-x86\tmp\upload&lt;/code&gt;,&lt;code&gt;D:\wamp\php-5.5.3-Win32-VC11-x86\tmp\session&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;æœ€åï¼Œè®©apacheè®¤è¯†phpï¼Œä¿®æ”¹apacheçš„é…ç½®æ–‡ä»¶&lt;code&gt;D:\wamp\Apache24\conf\httpd.conf&lt;/code&gt;æ·»åŠ ä¸‹é¢çš„å†…å®¹&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# phpé…ç½® 
LoadModule php5_module &amp;quot;E:/wamp_x64/php-5.5.3-Win32-VC11-x64/php5apache2_4.dll&amp;quot;
AddHandler application/x-httpd-php .php

# é…ç½® php.ini çš„è·¯å¾„
PHPIniDir &amp;quot;E:/wamp_x64/php-5.5.3-Win32-VC11-x64

# åŒæ—¶ä¿®æ”¹
DirectoryIndex index.html index.php
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;åœ¨apacheæ ¹ç›®å½•ä¸‹åˆ›å»º&lt;code&gt;D:/wamp/Apache24/htdocs/phpinfo.php&lt;/code&gt;æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹:
&lt;pre&gt;
    &amp;lt;?php phpinfo() ?&amp;gt;
&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;é‡å¯apacheæœåŠ¡ï¼Œè®¿é—® http://localhost/phpinfo.php,&amp;nbsp;å¦‚æœçœ‹åˆ°phpç›¸å…³ä¿¡æ¯ï¼Œè¡¨ç¤ºphpå®‰è£…æˆåŠŸã€‚&lt;/p&gt;
&lt;h2&gt;Xdebugå®‰è£…&lt;/h2&gt;
&lt;p&gt;Xdebug æ˜¯ä¸€ä¸ª&lt;span class="caps"&gt;PHP&lt;/span&gt;å¼€å‘çš„è°ƒè¯•å·¥å…·ï¼Œè·Ÿå®ƒé½åçš„å¦ä¸€ä¸ªå«&lt;code&gt;Zend Debugger&lt;/code&gt;, ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆä¸é”™çš„ä¸œè¥¿ã€‚
å®‰è£…xdebugï¼Œé¦–å…ˆéœ€è¦ä¸‹è½½é€‚åˆç‰ˆæœ¬çš„xdebugï¼Œå¦‚æœä¸çŸ¥é“è‡ªå·±åº”è¯¥ä¸‹è½½å“ªä¸ªç‰ˆæœ¬çš„è¯ï¼Œå¯ä»¥å°†ä½ phpinfo();æ–¹æ³•å¾—åˆ°çš„é¡µé¢å†…å®¹ç²˜è´´åˆ°&lt;a href="http://xdebug.org/wizard.php"&gt;è¿™é‡Œ&lt;/a&gt;ï¼Œå®ƒä¼šè‡ªåŠ¨åˆ†æå‡ºå“ªä¸ªç‰ˆæœ¬çš„xdebugæ’ä»¶é€‚åˆä½ ã€‚
å°†ä¸‹è½½ä¸‹æ¥çš„dllæ–‡ä»¶ä¿å­˜åˆ°phpçš„å®‰è£…è·¯å¾„&lt;code&gt;D:\wamp\php-5.5.3-Win32-VC11-x86\ext&lt;/code&gt;ç›®å½•ä¸‹ï¼Œç„¶åä¿®æ”¹&lt;code&gt;D:\wamp\php-5.5.3-Win32-VC11-x86\php.ini&lt;/code&gt;æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;[XDebug]&lt;/span&gt;
&lt;span class="na"&gt;zend_extension&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;D:\wamp\php-5.5.3-Win32-VC11-x86\extphp_xdebug.dll&amp;quot;&lt;/span&gt;
&lt;span class="na"&gt;xdebug.auto_trace&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;1&lt;/span&gt;
&lt;span class="na"&gt;xdebug.collect_params&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;1&lt;/span&gt;
&lt;span class="na"&gt;xdebug.collect_return&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;1&lt;/span&gt;
&lt;span class="na"&gt;xdebug.profiler_append&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;0&lt;/span&gt;
&lt;span class="na"&gt;xdebug.profiler_enable&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;1&lt;/span&gt;
&lt;span class="na"&gt;xdebug.profiler_enable_trigger&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;0&lt;/span&gt;
&lt;span class="na"&gt;xdebug.profiler_output_dir&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;D:\wamp\php-5.5.3-Win32-VC11-x86\tmp&amp;quot;&lt;/span&gt;
&lt;span class="na"&gt;xdebug.profiler_output_name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;cachegrind.out.%t-%s&amp;quot;&lt;/span&gt;
&lt;span class="na"&gt;xdebug.remote_enable&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;1&lt;/span&gt;
&lt;span class="na"&gt;xdebug.remote_handler&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;dbgp&amp;quot;&lt;/span&gt;
&lt;span class="na"&gt;xdebug.remote_host&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;localhost&amp;quot;&lt;/span&gt;
&lt;span class="na"&gt;xdebug.remote_port&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;9000&lt;/span&gt;
&lt;span class="na"&gt;xdebug.trace_output_dir&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;D:\wamp\php-5.5.3-Win32-VC11-x86\tmp&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æœ€åï¼Œé‡æ–°å¯åŠ¨apacheå³å¯ã€‚è®¿é—®phpinfo();é¡µé¢æ£€æŸ¥æ˜¯å¦æœ‰xdebugï¼Œå¦‚æœæœ‰ï¼Œè¡¨ç¤ºå®‰è£…æˆåŠŸã€‚&lt;/p&gt;
&lt;h2&gt;&lt;span class="caps"&gt;PHP&lt;/span&gt;é›†æˆå¼€å‘ç¯å¢ƒ&lt;/h2&gt;
&lt;p&gt;&lt;span class="caps"&gt;PHP&lt;/span&gt;çš„é›†æˆå¼€å‘ç¯å¢ƒæ¯”è¾ƒå¤š: å¦‚Zend Studioï¼ŒEclipse + &lt;span class="caps"&gt;PDT&lt;/span&gt;ï¼Œ Eclipse + PHPEclipseç­‰ã€‚è¿™äº›ç¯å¢ƒç»è¿‡ç®€å•çš„é…ç½®ä¹‹åéƒ½æ”¯æŒè¿œç¨‹è°ƒè¯•ï¼Œè¿˜æœ‰ä¸€äº›æµè§ˆå™¨çš„å·¥å…·ï¼Œå¦‚FireFoxæµè§ˆå™¨çš„&amp;#8221;FireBug +&amp;nbsp;FirePHP&amp;#8221;æ’ä»¶ï¼Œè¿™äº›èµ„æ–™æ¯”è¾ƒå¤šï¼Œå°±ä¸åœ¨è¿™é‡Œé‡å¤äº†ã€‚&lt;/p&gt;</summary><category term="php"></category><category term="wamp"></category></entry><entry><title>OpenGrokå®‰è£…ä½¿ç”¨æŒ‡å—</title><link href="http://blog.wiseturtles.com/posts/setup-opengrok.html" rel="alternate"></link><published>2012-12-14T18:09:00+08:00</published><author><name>crazygit</name></author><id>tag:blog.wiseturtles.com,2012-12-14:posts/setup-opengrok.html</id><summary type="html">&lt;p&gt;æœ¬æ–‡ä¸»è¦å‚è€ƒäº†ä¸‹é¢çš„æ–‡ç« :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://hub.opensolaris.org/bin/view/Project+opengrok/installdescription"&gt;http://hub.opensolaris.org/bin/view/Project+opengrok/installdescription&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://src.opensolaris.org/source/xref/opengrok/trunk/README.txt"&gt;http://src.opensolaris.org/source/xref/opengrok/trunk/&lt;span class="caps"&gt;README&lt;/span&gt;.txt&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ³¨æ„ï¼šæœ€å¥½æ˜¯å•ç‹¬å»ºç«‹ä¸€ä¸ªç”¨æˆ·ï¼Œå¹¶ä¿è¯è¯¥ç”¨æˆ·å¯¹ä»£ç å’Œåé¢åˆ›å»ºç´¢å¼•çš„ç›®å½•è¯»å†™æƒé™&lt;/p&gt;
&lt;h2&gt;å‡†å¤‡å·¥ä½œ&lt;/h2&gt;
&lt;p&gt;ä»¥opengrokç”¨æˆ·èº«ä»½ç™»å½•å®‰è£…jdkå’ŒExuberant&amp;nbsp;Ctags.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt-get install sun-java6-jdk ctags
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è·å–opengrokå®‰è£…åŒ…ï¼ˆopengrok-0.11.1.tar.gzï¼‰å’Œtomcatå®‰è£…åŒ…(apachetomcat-7.0.6.tar.gz)è§£å‹å®‰è£…åŒ…åˆ°ä»»æ„ç›®å½•ä¸‹é¢&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;cd&lt;/span&gt; /var/local/
$ tar -zxvf /path/to/opengrok-0.11.1.tar.gz
$ tar -zxvf /path/to/apachetomcat-7.0.6.tar.gz
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä¸‹è½½éœ€è¦ä½¿ç”¨çš„ä»£ç åˆ°ä¸€ä¸ªç›®å½•ä¸‹é¢&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ mkdir -p ~/opengrok/projects/project1
$ mkdir -p ~/opnegrok/projects/project2
$ &lt;span class="nb"&gt;cd&lt;/span&gt; ~/opengrok/projects/project1
$ download code of project1 &lt;span class="o"&gt;(&lt;/span&gt;such as: git clone ... or repo init ... &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; repo sync&lt;span class="o"&gt;)&lt;/span&gt;
$ &lt;span class="nb"&gt;cd&lt;/span&gt; ~/opengrok/projects/project2
$ download code of project2 &lt;span class="o"&gt;(&lt;/span&gt;such as: git clone ... or repo init ... &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; repo sync&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ç›®å½•ç»“æ„å¦‚ä¸‹:&lt;/p&gt;
&lt;pre&gt;
opengrok/projects----project1
            |----project2
            |----project3
            |----.......
&lt;/pre&gt;

&lt;p&gt;å¯åŠ¨tomcatï¼Œç¡®è®¤tomcatæ²¡æœ‰é—®é¢˜&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ /var/local/apache-tomcat-7.0.6/bin/startup.sh
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è®¿é—®&lt;a href="http://127.0.0.1:8080"&gt;http://127.0.0.1:8080&lt;/a&gt;æ£€æŸ¥tomcat&amp;nbsp;æ˜¯å¦æ­£å¸¸å·¥ä½œ&lt;/p&gt;
&lt;h2&gt;éƒ¨ç½²OpenGrok&lt;/h2&gt;
&lt;p&gt;æ‰§è¡Œå‘½ä»¤&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo &lt;span class="nv"&gt;OPENGROK_TOMCAT_BASE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/var/local/apache-tomcat-7.0.6 /var/local/opengrok-0.11.1/bin/OpenGrok deploy
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿™ä¸€æ­¥å®é™…æ“ä½œæ˜¯&lt;code&gt;/var/local/opengrok-0.11.1/lib/source.war&lt;/code&gt;éƒ¨ç½²åˆ°&lt;code&gt;/var/local/apache-tomcat-7.0.6/webapps/&lt;/code&gt;
è®¿é—®
&lt;a href="http://127.0.0.1:8080/source"&gt;http://127.0.0.1:8080/source&lt;/a&gt;
å·²ç»å¯ä»¥çœ‹åˆ°opengroké¡µé¢äº†ï¼Œä½†æ˜¯æ²¡æœ‰é¡¹ç›®çš„æ•°æ®ä¿¡æ¯ã€‚
åœ¨&lt;code&gt;/var/local/apache-tomcat-7.0.6/webapps/&lt;/code&gt;ç›®å½•ä¸‹é¢å¯ä»¥çœ‹åˆ°ä¸€ä¸ªsourceç›®å½•å’Œsource.warï¼Œå°±æ˜¯åˆšåˆšéƒ¨å±çš„äº§ç‰©ã€‚&amp;nbsp;source.warå·²ç»æ²¡æœ‰ä»€ä¹ˆç”¨äº†ï¼Œå¯ä»¥åˆ é™¤ã€‚&lt;/p&gt;
&lt;h3&gt;åˆ›å»ºç´¢å¼•&lt;/h3&gt;
&lt;p&gt;åˆ›å»ºç´¢å¼•æ—¶ï¼Œä¼šåˆ›å»ºä¸‰ä¸ªç›®å½•ï¼Œä¸€ä¸ªdataç›®å½•æ¥å­˜æ”¾ç´¢å¼•ä¿¡æ¯ï¼Œä¸€ä¸ªetcç›®å½•åˆ›å»ºé…ç½®ä¿¡æ¯å’Œä¸€ä¸ªlogç›®å½•ã€‚
 å¦‚æƒ³è®©~/opengrok/æ¥å­˜æ”¾ç´¢å¼•,åˆ™æŒ‡å®š&lt;code&gt;OPENGROK_INSTANCE_BASE=~/opengrok&lt;/code&gt;, åˆ™æŒ‡å®š&lt;code&gt;OPENGROK_INSTANCE_BASE=~/opengrok&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nv"&gt;OPENGROK_VERBOSE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt; &lt;span class="nv"&gt;OPENGROK_INSTANCE_BASE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;~/opengrok/ ./OpenGrok index ~/opengrok/projects/
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿™ä¸€æ­¥å‘½ä»¤çš„æ‰§è¡Œæ—¶é—´è§†~/opengrok/projects/çš„ä»£ç æ•°é‡å†³å®šã€‚ æœ€åä¼šåœ¨~/opengrok ç›®å½•ä¸‹é¢çœ‹åˆ°data,etc,log&amp;nbsp;ä¸‰ä¸ªç›®å½•&lt;/p&gt;
&lt;p&gt;è®¿é—®&lt;a href="http://127.0.0.1:8080/source"&gt;http://127.0.0.1:8080/source&lt;/a&gt;,enjoy&amp;nbsp;it!&lt;/p&gt;
&lt;h3&gt;é¡¹ç›®ä»£ç æ›´æ–°æˆ–è€…æ·»åŠ æ–°çš„é¡¹ç›®&lt;/h3&gt;
&lt;p&gt;é¦–å…ˆæ›´æ–°é¡¹ç›®ä»£ç æˆ–è€…ä¸‹è½½æ–°çš„é¡¹ç›®åˆ°~/opengrok/projectsç›®å½•ä¸‹é¢ã€‚&amp;nbsp;ç„¶åé‡æ–°æ‰§è¡Œ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nv"&gt;OPENGROK_VERBOSE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt; &lt;span class="nv"&gt;OPENGROK_INSTANCE_BASE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;~/opengrok/ ./OpenGrok index ~/opengrok/projects/
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å‘½ä»¤å³å¯ã€‚&lt;/p&gt;
&lt;h3&gt;å¯é€‰æ“ä½œ&lt;/h3&gt;
&lt;p&gt;å¯ä»¥é€šè¿‡ä¿®æ”¹&lt;code&gt;/var/local/apache-tomcat-7.0.6/webapps/source/index_body.html&lt;/code&gt;æ¥å®šåˆ¶åŒ–ä½ çš„OpenGroké¦–é¡µã€‚
å¦‚æ·»åŠ å…¬å¸&lt;span class="caps"&gt;LOGO&lt;/span&gt;æˆ–ä¸€äº›æœ‰ç”¨çš„å¸®åŠ©ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;h3&gt;ç›´æ¥è°ƒç”¨å‘½ä»¤è¡Œæ¥å£&lt;/h3&gt;
&lt;p&gt;ä¸Šé¢åˆ›å»ºç´¢å¼•çš„å‘½ä»¤å…¶å®&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nv"&gt;OPENGROK_VERBOSE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt; &lt;span class="nv"&gt;OPENGROK_INSTANCE_BASE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;~/opengrok/ ./OpenGrok index ~/opengrok/projects/
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å…¶å®è°ƒç”¨çš„æ˜¯opengrok&amp;nbsp;libç›®å½•ä¸‹çš„jaråŒ…ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;java -Xmx2048m -Dorg.opensolaris.opengrok.history.cvs=/usr/bin/cvs
-Dorg.opensolaris.opengrok.history.git=/usr/bin/git
-Djava.util.logging.config.file=/data/opengrok/opengrok_data/logging.properties
-jar /data/opengrok/opengrok-0.11.1/bin/../lib/opengrok.jar
-P -S -r on -v -c /usr/bin/ctags-exuberant -a on
-W /data/opengrok/opengrok_data/etc/configuration.xml
-U localhost:2424 -s /data/opengrok/projects/
-d /data/opengrok/opengrok_data/data -H..
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä¸Šé¢å„ä¸ªå‚æ•°çš„æ„æ€å¦‚ä¸‹:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ java -jar opengrok.jar

Usage: opengrok.jar &lt;span class="o"&gt;[&lt;/span&gt;options&lt;span class="o"&gt;]&lt;/span&gt;
-?
    Help

-A ext:analyzer
    Files with the named extension should be analyzed with the specified class

-a on/off
    Allow or disallow leading wildcards in a search

-B url
    Base URL of the user Information provider. Default: &lt;span class="s2"&gt;&amp;quot;http://www.opensolaris.org/viewProfile.jspa?username=&amp;quot;&lt;/span&gt;

-C
    Print per project percentage progress information&lt;span class="o"&gt;(&lt;/span&gt;I/O extensive, since one &lt;span class="nb"&gt;read&lt;/span&gt; through dir structure is made before indexing, needs -v, otherwise it just goes to the log&lt;span class="o"&gt;)&lt;/span&gt;

-c /path/to/ctags
    Path to Exuberant Ctags from http://ctags.sf.net by default takes the Exuberant Ctags in PATH.

-D
    Store &lt;span class="nb"&gt;history&lt;/span&gt; cache in a database &lt;span class="o"&gt;(&lt;/span&gt;needs the JDBC driver in the classpath, typically derbyclient.jar or derby.jar&lt;span class="o"&gt;)&lt;/span&gt;

-d /path/to/data/root
    The directory where OpenGrok stores the generated data

-e
    Economical - consumes less disk space. It does not generate hyper text cross reference files offline, but will &lt;span class="k"&gt;do&lt;/span&gt; so on demand - which could be sightly slow.

-H
    Generate &lt;span class="nb"&gt;history&lt;/span&gt; cache &lt;span class="k"&gt;for&lt;/span&gt; all repositories

-h /path/to/repository
    just generate &lt;span class="nb"&gt;history&lt;/span&gt; cache &lt;span class="k"&gt;for&lt;/span&gt; the specified repos &lt;span class="o"&gt;(&lt;/span&gt;absolute path from &lt;span class="nb"&gt;source&lt;/span&gt; root&lt;span class="o"&gt;)&lt;/span&gt;

-I pattern
    Only files matching this pattern will be examined &lt;span class="o"&gt;(&lt;/span&gt;supports wildcards, example: -I *.java -I *.c&lt;span class="o"&gt;)&lt;/span&gt;

-i pattern
    Ignore the named files or directories &lt;span class="o"&gt;(&lt;/span&gt;supports wildcards, example: -i *.so -i *.dll&lt;span class="o"&gt;)&lt;/span&gt;

-j class
    Name of the JDBC driver class used by the &lt;span class="nb"&gt;history&lt;/span&gt; cache. Can use one of the shorthands &lt;span class="s2"&gt;&amp;quot;client&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;org.apache.derby.jdbc.ClientDriver&lt;span class="o"&gt;)&lt;/span&gt; or &lt;span class="s2"&gt;&amp;quot;embedded&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;org.apache.derby.jdbc.EmbeddedDriver&lt;span class="o"&gt;)&lt;/span&gt;. Default: &lt;span class="s2"&gt;&amp;quot;client&amp;quot;&lt;/span&gt;

-k /path/to/repository
    Kill the &lt;span class="nb"&gt;history&lt;/span&gt; cache &lt;span class="k"&gt;for&lt;/span&gt; the given repository and exit. Use &lt;span class="s1"&gt;&amp;#39;*&amp;#39;&lt;/span&gt; to delete the cache &lt;span class="k"&gt;for&lt;/span&gt; all repositories.

-K
    List all repository pathes and exit.

-L path
    Path to the subdirectory in the web-application containing the requested stylesheet. The following factory-defaults exist: &lt;span class="s2"&gt;&amp;quot;default&amp;quot;&lt;/span&gt;, &lt;span class="s2"&gt;&amp;quot;offwhite&amp;quot;&lt;/span&gt; and &lt;span class="s2"&gt;&amp;quot;polished&amp;quot;&lt;/span&gt;

-l on/off
    Turn on/off locking of the Lucene database during index generation

-m number
    The maximum words to index in a file

-N /path/to/symlink
    Allow this symlink to be followed. Option may be repeated.

-n
    Do not generate indexes, but process all other &lt;span class="nb"&gt;command&lt;/span&gt; line options

-O on/off
    Turn on/off the optimization of the index database as part of the indexing step

-P
    Generate a project &lt;span class="k"&gt;for&lt;/span&gt; each of the top-level directories in &lt;span class="nb"&gt;source&lt;/span&gt; root

-p /path/to/default/project
    This is the path to the project that should be selected by default in the web application&lt;span class="o"&gt;(&lt;/span&gt;when no other project &lt;span class="nb"&gt;set&lt;/span&gt; either in cookie or in parameter&lt;span class="o"&gt;)&lt;/span&gt;. You should strip off the &lt;span class="nb"&gt;source&lt;/span&gt; root.

-Q on/off
    Turn on/off quick context scan. By default only the first 32k of a file is scanned, and a &lt;span class="s1"&gt;&amp;#39;[..all..]&amp;#39;&lt;/span&gt; link is inserted &lt;span class="k"&gt;if&lt;/span&gt; the file is bigger. Activating this may slow the server down &lt;span class="o"&gt;(&lt;/span&gt;Note: this is setting only affects the web application&lt;span class="o"&gt;)&lt;/span&gt;

-q
    Run as quietly as possible

-R /path/to/configuration
    Read configuration from the specified file

-r on/off
    Turn on/off support &lt;span class="k"&gt;for&lt;/span&gt; remote SCM systems

-S
    Search &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;external&amp;quot;&lt;/span&gt; &lt;span class="nb"&gt;source&lt;/span&gt; repositories and add them

-s /path/to/source/root
    The root directory of the &lt;span class="nb"&gt;source&lt;/span&gt; tree

-T number
    The number of threads to use &lt;span class="k"&gt;for&lt;/span&gt; index generation. By default the number of threads will be &lt;span class="nb"&gt;set&lt;/span&gt; to the number of available CPUs

-t number
    Default tabsize to use &lt;span class="o"&gt;(&lt;/span&gt;number of spaces per tab character&lt;span class="o"&gt;)&lt;/span&gt;

-U host:port
    Send the current configuration to the specified address &lt;span class="o"&gt;(&lt;/span&gt;This is most likely the web-app configured with ConfigAddress&lt;span class="o"&gt;)&lt;/span&gt;

-u url
    URL to the database that contains the &lt;span class="nb"&gt;history&lt;/span&gt; cache. Default: If -j specifies &lt;span class="s2"&gt;&amp;quot;embedded&amp;quot;&lt;/span&gt;, &lt;span class="s2"&gt;&amp;quot;jdbc:derby:&lt;/span&gt;&lt;span class="nv"&gt;$DATA_ROOT&lt;/span&gt;&lt;span class="s2"&gt;/cachedb;create=true&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; otherwise, &lt;span class="s2"&gt;&amp;quot;jdbc:derby://localhost/cachedb;create=true&amp;quot;&lt;/span&gt;

-V
    Print version and quit

-v
    Print progress information as we go along

-W /path/to/configuration
    Write the current configuration to the specified file &lt;span class="o"&gt;(&lt;/span&gt;so that the web application can use the same configuration

-w webapp-context
    Context of webapp. Default is /source. If you specify a different name, make sure to rename source.war to that name.

-X url:suffix
    URL Suffix &lt;span class="k"&gt;for&lt;/span&gt; the user Information provider. Default: &lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;

-z number
    depth of scanning &lt;span class="k"&gt;for&lt;/span&gt; repositories in directory structure relative to &lt;span class="nb"&gt;source&lt;/span&gt; root
&lt;/pre&gt;&lt;/div&gt;


&lt;hr /&gt;
&lt;p&gt;&lt;strong&gt;&lt;span class="caps"&gt;PS&lt;/span&gt;:é»˜è®¤æƒ…å†µä¸‹ï¼Œè°ƒç”¨OpenGorkè„šæœ¬æ˜¯ä¼šç”Ÿæˆé¡¹ç›®çš„å†å²è®°å½•çš„ï¼Œå¦‚æœä¸æƒ³ç”Ÿæˆè„šæœ¬çš„å†å²è®°å½•, å¯ä»¥ä¿®æ”¹
OpenGrokè„šæœ¬çš„&lt;code&gt;UpdateGeneratedData&lt;/code&gt; æ–¹æ³•ï¼Œå»æ‰&lt;code&gt;StdInvocation -H&lt;/code&gt;çš„&lt;code&gt;-H&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;</summary><category term="opengrok"></category></entry></feed>