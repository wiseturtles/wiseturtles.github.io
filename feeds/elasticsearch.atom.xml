<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Wise Turtles</title><link href="http://blog.wiseturtles.com/" rel="alternate"></link><link href="http://blog.wiseturtles.com/feeds/elasticsearch.atom.xml" rel="self"></link><id>http://blog.wiseturtles.com/</id><updated>2015-08-12T17:29:00+08:00</updated><entry><title>Elastichsearch反向代理设置</title><link href="http://blog.wiseturtles.com/posts/elasticsearch-reverse-proxy.html" rel="alternate"></link><updated>2015-08-12T17:29:00+08:00</updated><author><name>craygit</name></author><id>tag:blog.wiseturtles.com,2015-08-12:posts/elasticsearch-reverse-proxy.html</id><summary type="html">&lt;p&gt;内网的&lt;span class="caps"&gt;ES&lt;/span&gt;集群，平时操作都是通过命令行，有点不方便，而且安装的site插件也没法使用&amp;nbsp;，比较蛋疼，所以配置nginx作为elasticsearch的反向代理，并且添加认证信息.&lt;/p&gt;
&lt;p&gt;如果是直接用域名的根节点作为反向代理的话，比较简单，直接配置一下就可以，但是问
题是根节点被暂用，需要设置一个前缀来来访问,&amp;nbsp;就稍微麻烦一点.&lt;/p&gt;
&lt;p&gt;nginx配置如下:&lt;/p&gt;
&lt;pre&gt;
    location ~ ^/es/ {
            rewrite ^/es/(.*)$ /$1 break;
            include proxy_params;
            proxy_pass http://es_node_ip:9200;
            proxy_redirect http://$host/ http://$host/es/;
            auth_basic "please login";
            auth_basic_user_file /data/passwd/es.htpasswd;
    }
&lt;/pre&gt;

&lt;p&gt;几点需要注意：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;include proxy_params;&lt;/code&gt; proxy_params为一些反向代理设置参数，没有的话可以去掉&lt;/li&gt;
&lt;li&gt;&lt;code&gt;proxy_pass http://es_node_ip:9200;&lt;/code&gt; 需要替换es_node_ip 为&lt;span class="caps"&gt;ES&lt;/span&gt;集群的&lt;span class="caps"&gt;IP&lt;/span&gt;,&lt;/li&gt;
&lt;li&gt;&lt;code&gt;auth_basic_user_file /data/passwd/es.htpasswd&lt;/code&gt;中&lt;code&gt;/data/passwd/es.htpasswd&lt;/code&gt;为认证文件，可以用apache工具或一些&lt;a href="http://tool.oschina.net/htpasswd"&gt;在线工具&lt;/a&gt;生成&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;假设域名为www.example.com,&amp;nbsp;那么就可以直接访问&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.example.com/es/"&gt;http://www.example.com/es/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.example.com/es/_plugin/head/"&gt;http://www.example.com/es/_plugin/head/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;配置好之后，用起来爽多了。&lt;/p&gt;</summary><category term="elasticsearch"></category><category term="reverse"></category><category term="proxy"></category></entry><entry><title>Elastichsearch数据备份，恢复，及迁移</title><link href="http://blog.wiseturtles.com/posts/elasticsearch-snapshot-restore.html" rel="alternate"></link><updated>2015-08-12T14:13:00+08:00</updated><author><name>craygit</name></author><id>tag:blog.wiseturtles.com,2015-08-12:posts/elasticsearch-snapshot-restore.html</id><summary type="html">&lt;h3&gt;参考资料:&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.elastic.co/guide/en/elasticsearch/guide/current/backing-up-your-cluster.html"&gt;https://www.elastic.co/guide/en/elasticsearch/guide/current/backing-up-your-cluster.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.elastic.co/guide/en/elasticsearch/guide/current/_restoring_from_a_snapshot.html"&gt;https://www.elastic.co/guide/en/elasticsearch/guide/current/_restoring_from_a_snapshot.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-snapshots.html"&gt;https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-snapshots.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.elastic.co/blog/introducing-snapshot-restore"&gt;https://www.elastic.co/blog/introducing-snapshot-restore&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://stackoverflow.com/questions/27903929/elasticsearch-snapshot-across-cluster"&gt;http://stackoverflow.com/questions/27903929/elasticsearch-snapshot-across-cluster&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;最近工作需要，要将一个索引的数据迁移到新的另一个集群，查阅了一些资料过后，便开始操作。由于数据量大，整个过程也花费了不少时间，遇到一些坑，特此整理一下整个过程。&lt;/p&gt;
&lt;h3&gt;迁移注意事项&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;保证&lt;span class="caps"&gt;ES&lt;/span&gt;集群不再接受新的数据(如果是备份的话，这一点可以不考虑，但是做数据迁移的话，建议这样做）.&lt;/li&gt;
&lt;li&gt;不建议直接在生产环境做这些操作，最好是先在本地搭建一个和生产环境一样的集群环境，创建一些测试数据，把整个过程先跑一遍，然后再到生产环境操作。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;本文假设&lt;span class="caps"&gt;ES&lt;/span&gt;集群有3个节点，&lt;span class="caps"&gt;IP&lt;/span&gt;分别是: 192.168.0.1, 193.168.0.2,&amp;nbsp;192.168.0.3&lt;/p&gt;
&lt;h3&gt;注册快照仓库&lt;/h3&gt;
&lt;p&gt;&lt;span class="caps"&gt;ES&lt;/span&gt;是通过快照的方式来实现数据备份，并且是以增量的方式，所以一般第一次做的话会花费较长的时间。为了做快照，那么就需要注册一个快照仓库，告诉&lt;span class="caps"&gt;ES&lt;/span&gt;我们的快照应该如何保存以及将快照保存到哪里.&lt;/p&gt;
&lt;p&gt;&lt;span class="caps"&gt;ES&lt;/span&gt;的快照仓库支持如下几种形式：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;共享的文件系统，如&lt;span class="caps"&gt;NAS&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;Amazon&amp;nbsp;S3&lt;/li&gt;
&lt;li&gt;&lt;span class="caps"&gt;HDFS&lt;/span&gt; (Hadoop Distributed File&amp;nbsp;System)&lt;/li&gt;
&lt;li&gt;Azure&amp;nbsp;Cloud&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;通常选择注册第一种形式。&lt;/p&gt;
&lt;p&gt;任意选择一个节点，执行如下命令&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;curl -XPUT  http://192.168.0.1:9200/_snapshot/my_backup -d &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;
&lt;span class="s1"&gt;{&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;type&amp;quot;: &amp;quot;fs&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;settings&amp;quot;: {&lt;/span&gt;
&lt;span class="s1"&gt;        &amp;quot;location&amp;quot;: &amp;quot;/data/backups/elasticsearch&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;    }&lt;/span&gt;
&lt;span class="s1"&gt;}&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;这样就注册了一个名为&lt;code&gt;my_backup&lt;/code&gt;的仓库，这里的&lt;code&gt;location&lt;/code&gt;需要注意，最好是设置一个每个节点都能访问并且有写权限的共享目录，如smb目录等(如果整个集群就一个节点那么设置为本地目录也无所谓)。
我自己在做的时候由于设置了本地目录&lt;code&gt;/data/backups/elasticsearch&lt;/code&gt;, 最后做出来发现快照被分别保存在集群每个节点的&lt;code&gt;/data/backups/elasticsearch&lt;/code&gt;目录下，并且一个节点保存了一些信息。最后做数据迁移的时候，不得不从每个节点将快照文件拷贝出来，然后合并到一起。&lt;/p&gt;
&lt;p&gt;除了&lt;code&gt;location&lt;/code&gt;外，还有一些其他选项可以设置:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;compress&amp;nbsp;是否压缩&lt;/li&gt;
&lt;li&gt;max_snapshot_bytes_per_sec&amp;nbsp;制作快照的速度，默认20mb/s&lt;/li&gt;
&lt;li&gt;max_restore_bytes_per_sec&amp;nbsp;快照恢复的速度，默认20mb/s&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;更新仓库设置如下:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;curl -XPOST http://192.168.0.1:9200/_snapshot/my_backup/
&lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;type&amp;quot;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;quot;fs&amp;quot;&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;settings&amp;quot;&lt;/span&gt;: &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;location&amp;quot;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;quot;/data/backups/elasticsearch&amp;quot;&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;max_snapshot_bytes_per_sec&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;50mb&amp;quot;&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;max_restore_bytes_per_sec&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;50mb&amp;quot;&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;compress&amp;quot;&lt;/span&gt; : &lt;span class="nb"&gt;true&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;这里需要注意一点是，注册仓库用的是&lt;code&gt;PUT&lt;/code&gt;, 而更新仓库设置用的是&lt;code&gt;POST&lt;/code&gt;.&lt;/p&gt;
&lt;h3&gt;检查注册的仓库信息&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;curl -XGET http://192.168.0.1:9200/_snapshot/my_backup
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;开始备份&lt;/h3&gt;
&lt;p&gt;指定快照名称为&lt;code&gt;snapshot_20150812&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;curl -XPUT  http://192.168.0.1:9200/_snapshot/my_backup/snapshot_20150812
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;执行上面的上面的命令会马上返回，并在后台执行备份操作, 如果想等到备份完成，可以加上参数&lt;code&gt;wait_for_completion=true&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;curl -XPUT  http://192.168.0.1:9200/_snapshot/my_backup/snapshot_20150812?wait_for_completion&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;默认是备份所有的索引indices,&amp;nbsp;如果要指定index,可以&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;curl -XPUT http://192.168.0.1:9200/_snapshot/my_backup/snapshot_20150812
&lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;indices&amp;quot;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;quot;index_1,index_2&amp;quot;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;这个备份过程需要的时间视数据量而定.&lt;/p&gt;
&lt;h3&gt;查看备份状态&lt;/h3&gt;
&lt;p&gt;整个备份过程中，可以通过如下命令查看备份进度&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;curl -XGET http://192.168.0.1:9200/_snapshot/my_backup/snapshot_20150812/_status
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;主要由如下几种状态：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span class="caps"&gt;INITIALIZING&lt;/span&gt;&amp;nbsp;集群状态检查，检查当前集群是否可以做快照，通常这个过程会非常快&lt;/li&gt;
&lt;li&gt;&lt;span class="caps"&gt;STARTED&lt;/span&gt;&amp;nbsp;正在转移数据到仓库&lt;/li&gt;
&lt;li&gt;&lt;span class="caps"&gt;FINALIZING&lt;/span&gt;&amp;nbsp;数据转移完成，正在转移元信息&lt;/li&gt;
&lt;li&gt;&lt;span class="caps"&gt;DONE&lt;/span&gt;　完成&lt;/li&gt;
&lt;li&gt;&lt;span class="caps"&gt;FAILED&lt;/span&gt;&amp;nbsp;备份失败&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;取消备份&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;curl -XDELETE http://192.168.0.1:9200/_snapshot/my_backup/snapshot_20150812
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;恢复备份&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;curl -XPOST http://192.168.0.1:9200/_snapshot/my_backup/snapshot_20150812/_restore
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;同备份一样，也可以设置wait_for_completion=true等待恢复结果&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;curl -XPOST http://192.168.0.1:9200/_snapshot/my_backup/snapshot_20150812/_restore?wait_for_completion&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;默认情况下，是恢复所有的索引，我们也可以设置一些参数来指定恢复的索引，以及重命令恢复的索引，这样可以避免覆盖原有的数据.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;curl -XPOST http://192.168.0.1:9200/_snapshot/my_backup/snapshot_20150812/_restore
&lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;indices&amp;quot;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;quot;index_1&amp;quot;&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;rename_pattern&amp;quot;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;quot;index_(.+)&amp;quot;&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;rename_replacement&amp;quot;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;quot;restored_index_&lt;/span&gt;&lt;span class="nv"&gt;$1&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;上面的indices,&amp;nbsp;表示只恢复索引&amp;#8217;index_1&amp;#8217;&lt;/li&gt;
&lt;li&gt;rename_pattern:&amp;nbsp;表示重命名索引以&amp;#8217;index_&amp;#8217;开头的索引.&lt;/li&gt;
&lt;li&gt;rename_replacement:&amp;nbsp;表示将所有的索引重命名为&amp;#8217;restored_index_xxx&amp;#8217;.如index_1会被重命名为restored_index_1.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;查看恢复进度&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;# 查看所有索引的恢复进度&lt;/span&gt;
curl -XGET http://192.168.0.1:9200/_recovery/

&lt;span class="c"&gt;# 查看索引restored_index_1的恢复进度&lt;/span&gt;
curl -XGET http://192.168.0.1:9200/_recovery/restored_index_1
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;取消恢复&lt;/h3&gt;
&lt;p&gt;只需要删除索引，即可取消恢复&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;curl -XDELETE http://192.168.0.1:9200/restored_index_1
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;备份快照迁移&lt;/h3&gt;
&lt;p&gt;如果需要将快照迁移到另一个集群.只需要将备份文件全部拷贝到要迁移的机器上, 然后再在新的集群上注册一个快照仓库,设置&lt;code&gt;location&lt;/code&gt;的位置为备份文件所在的地方，然后执行恢复备份的命令即可。&lt;/p&gt;</summary><category term="elasticsearch"></category><category term="snapshot"></category><category term="restore"></category><category term="transfer"></category></entry><entry><title>Upgrade Elasticsearch 1.2.1 to 1.4.5</title><link href="http://blog.wiseturtles.com/posts/Upgrade-Elasticsearch-1.2.1-to-1.4.5.html" rel="alternate"></link><updated>2015-06-19T00:00:00+08:00</updated><author><name>Zhang Wanming</name></author><id>tag:blog.wiseturtles.com,2015-06-19:posts/Upgrade-Elasticsearch-1.2.1-to-1.4.5.html</id><summary type="html">&lt;p&gt;一年前刚开始做应用市场数据统计，团队选用了&lt;span class="caps"&gt;ELK&lt;/span&gt;中的&lt;span class="caps"&gt;EL&lt;/span&gt; (Elasticsearch, Logstash)，没有用Kibana；而且根据产品、运营需求调用&lt;span class="caps"&gt;ES&lt;/span&gt; Restful &lt;span class="caps"&gt;API&lt;/span&gt;，自己做Web展示。
用了以下插件:analysis-icu, analysis-ik, analysis-mmseg, analysis-pinyin
当时&lt;span class="caps"&gt;ES&lt;/span&gt;版本为1.2.1，一直没有升级，最近升级到1.4.5。&lt;/p&gt;
&lt;p&gt;我们之前服务器是Debian 7，现在服务器是CentOS 6.5；服务器版本和&lt;span class="caps"&gt;ES&lt;/span&gt;没有关系，至少我没碰到任何系统问题。&lt;/p&gt;
&lt;p&gt;目前有两台&lt;span class="caps"&gt;ES&lt;/span&gt; 1.2.1，准备用三台&lt;span class="caps"&gt;ES&lt;/span&gt;&amp;nbsp;1.4.5替换。刚开始没有root权限，只好下载压缩包安装。&lt;/p&gt;
&lt;p&gt;注: Elasticsearch和Logstash都需要安装&lt;span class="caps"&gt;JDK&lt;/span&gt;, 我们用的&lt;span class="caps"&gt;JDK&lt;/span&gt;&amp;nbsp;1.7&lt;/p&gt;
&lt;h1&gt;安装Logstash&amp;nbsp;1.4.3&lt;/h1&gt;
&lt;h2&gt;安装需要的软件包&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; /data/software
&lt;span class="nv"&gt;$ &lt;/span&gt;wget https://download.elastic.co/logstash/logstash/logstash-1.4.3.tar.gz
&lt;span class="nv"&gt;$ &lt;/span&gt;tar zxf logstash-1.4.3.tar.gz
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;修改配置文件&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;cat /data/softwares/logstash-1.4.3/logstash.conf &lt;span class="p"&gt;|&lt;/span&gt; grep -Ev &lt;span class="s1"&gt;&amp;#39;^#|^$&amp;#39;&lt;/span&gt;
input &lt;span class="o"&gt;{&lt;/span&gt;
  redis &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="nv"&gt;codec&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;json&amp;quot;&lt;/span&gt;
    &lt;span class="nv"&gt;data_type&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;list&amp;quot;&lt;/span&gt;
    &lt;span class="nv"&gt;host&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;x.x.x.x&amp;quot;&lt;/span&gt;
    &lt;span class="nv"&gt;key&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;appstore:logstash&amp;quot;&lt;/span&gt;
    &lt;span class="nv"&gt;password&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;passwd&amp;quot;&lt;/span&gt;
    &lt;span class="nv"&gt;tags&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;appstore_logs&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;
    &lt;span class="nv"&gt;db&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; 0
  &lt;span class="o"&gt;}&lt;/span&gt;
  redis &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="nv"&gt;codec&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;json&amp;quot;&lt;/span&gt;
    &lt;span class="nv"&gt;data_type&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;list&amp;quot;&lt;/span&gt;
    &lt;span class="nv"&gt;host&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;x.x.x.x&amp;quot;&lt;/span&gt;
    &lt;span class="nv"&gt;password&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;passwd&amp;quot;&lt;/span&gt;
    &lt;span class="nv"&gt;key&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;appstore:overview_reports&amp;quot;&lt;/span&gt;
    &lt;span class="nv"&gt;tags&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;overview_reports&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;
    &lt;span class="nv"&gt;db&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; 0
  &lt;span class="o"&gt;}&lt;/span&gt;
  redis &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="nv"&gt;codec&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;json&amp;quot;&lt;/span&gt;
    &lt;span class="nv"&gt;data_type&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;list&amp;quot;&lt;/span&gt;
    &lt;span class="nv"&gt;host&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;x.x.x.x&amp;quot;&lt;/span&gt;
    &lt;span class="nv"&gt;password&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;passwd&amp;quot;&lt;/span&gt;
    &lt;span class="nv"&gt;key&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s1"&gt;&amp;#39;appstore:imei_reports&amp;#39;&lt;/span&gt;
    &lt;span class="nv"&gt;tags&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;imei_reports&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;
    &lt;span class="nv"&gt;db&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; 1
  &lt;span class="o"&gt;}&lt;/span&gt;
  redis &lt;span class="o"&gt;{&lt;/span&gt; 
     &lt;span class="nv"&gt;codec&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;json&amp;quot;&lt;/span&gt; 
     &lt;span class="nv"&gt;data_type&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;list&amp;quot;&lt;/span&gt; 
     &lt;span class="nv"&gt;host&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;x.x.x.x&amp;quot;&lt;/span&gt; 
     &lt;span class="nv"&gt;password&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;tclonline&amp;quot;&lt;/span&gt;
     &lt;span class="nv"&gt;key&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;appstore:overview_date_reports&amp;quot;&lt;/span&gt; 
     &lt;span class="nv"&gt;tags&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;overview_date_reports&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; 
     &lt;span class="nv"&gt;db&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; 3
   &lt;span class="o"&gt;}&lt;/span&gt; 
   redis &lt;span class="o"&gt;{&lt;/span&gt; 
     &lt;span class="nv"&gt;codec&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;json&amp;quot;&lt;/span&gt; 
     &lt;span class="nv"&gt;data_type&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;list&amp;quot;&lt;/span&gt; 
     &lt;span class="nv"&gt;host&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;x.x.x.x&amp;quot;&lt;/span&gt; 
     &lt;span class="nv"&gt;password&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;pwd&amp;quot;&lt;/span&gt;
     &lt;span class="nv"&gt;key&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;appstore:overview_model_reports&amp;quot;&lt;/span&gt; 
     &lt;span class="nv"&gt;tags&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;overview_model_reports&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; 
     &lt;span class="nv"&gt;db&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; 3

   &lt;span class="o"&gt;}&lt;/span&gt; 
&lt;span class="o"&gt;}&lt;/span&gt;
filter &lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;appstore_logs&amp;quot;&lt;/span&gt; in &lt;span class="o"&gt;[&lt;/span&gt;tags&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    date &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="nv"&gt;match&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;timestamp&amp;quot;&lt;/span&gt; , &lt;span class="s2"&gt;&amp;quot;UNIX&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;imei_reports&amp;quot;&lt;/span&gt; in &lt;span class="o"&gt;[&lt;/span&gt;tags&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    date &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="nv"&gt;match&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;timestamp&amp;quot;&lt;/span&gt; , &lt;span class="s2"&gt;&amp;quot;UNIX&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
output &lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;appstore_logs&amp;quot;&lt;/span&gt; in &lt;span class="o"&gt;[&lt;/span&gt;tags&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    elasticsearch &lt;span class="o"&gt;{&lt;/span&gt; 
      &lt;span class="nv"&gt;index&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; logstash
      &lt;span class="nv"&gt;index_type&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;appstore_stats&amp;quot;&lt;/span&gt;
      &lt;span class="nv"&gt;cluster&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;elasticsearch_dashboard&amp;quot;&lt;/span&gt;
      &lt;span class="nv"&gt;node_name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;logstash_appstore_logs&amp;quot;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    redis&lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="nv"&gt;data_type&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;list&amp;quot;&lt;/span&gt;
      &lt;span class="nv"&gt;db&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; 3
      &lt;span class="nv"&gt;host&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;x.x.x.x&amp;quot;&lt;/span&gt; 
      &lt;span class="nv"&gt;password&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;passwd&amp;quot;&lt;/span&gt;
      &lt;span class="nv"&gt;key&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;logstash:appstore_logs&amp;quot;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;overview_reports&amp;quot;&lt;/span&gt; in &lt;span class="o"&gt;[&lt;/span&gt;tags&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    elasticsearch &lt;span class="o"&gt;{&lt;/span&gt; 
      &lt;span class="nv"&gt;index&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; dashboard
      &lt;span class="nv"&gt;index_type&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;overview_records&amp;quot;&lt;/span&gt;
      &lt;span class="nv"&gt;cluster&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;elasticsearch_dashboard&amp;quot;&lt;/span&gt;
      &lt;span class="nv"&gt;node_name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;logstash_overview_reports&amp;quot;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;
   &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;imei_reports&amp;quot;&lt;/span&gt; in &lt;span class="o"&gt;[&lt;/span&gt;tags&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    elasticsearch &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="nv"&gt;index&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; imei
      &lt;span class="nv"&gt;index_type&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;imei_records&amp;quot;&lt;/span&gt;
      &lt;span class="nv"&gt;cluster&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;elasticsearch_dashboard&amp;quot;&lt;/span&gt;
      &lt;span class="nv"&gt;node_name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;logstash_imei_reports&amp;quot;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;
   &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;overview_date_reports&amp;quot;&lt;/span&gt; in &lt;span class="o"&gt;[&lt;/span&gt;tags&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; 
     elasticsearch &lt;span class="o"&gt;{&lt;/span&gt; 
       &lt;span class="nv"&gt;cluster&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;elasticsearch_dashboard&amp;quot;&lt;/span&gt; 
       &lt;span class="nv"&gt;index&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; dashboard 
       &lt;span class="nv"&gt;index_type&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;overview_date_records&amp;quot;&lt;/span&gt; 
       &lt;span class="nv"&gt;node_name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;logstash_overview_date_reports&amp;quot;&lt;/span&gt;
     &lt;span class="o"&gt;}&lt;/span&gt; 
   &lt;span class="o"&gt;}&lt;/span&gt; 
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;overview_model_reports&amp;quot;&lt;/span&gt; in &lt;span class="o"&gt;[&lt;/span&gt;tags&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; 
     elasticsearch &lt;span class="o"&gt;{&lt;/span&gt; 
       &lt;span class="nv"&gt;cluster&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;elasticsearch_dashboard&amp;quot;&lt;/span&gt; 
       &lt;span class="nv"&gt;index&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; dashboard 
       &lt;span class="nv"&gt;index_type&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;overview_model_records&amp;quot;&lt;/span&gt; 
       &lt;span class="nv"&gt;node_name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;logstash_overview_model_reports&amp;quot;&lt;/span&gt;
     &lt;span class="o"&gt;}&lt;/span&gt; 
   &lt;span class="o"&gt;}&lt;/span&gt;   
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;启动测试&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; /data/softwares/logstash-1.4.3
&lt;span class="nv"&gt;$ &lt;/span&gt;bin/logstash -f logstash.conf
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;安装Elasticsearch&amp;nbsp;1.4.5&lt;/h1&gt;
&lt;h2&gt;安装需要的软件包&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; /data/software
&lt;span class="nv"&gt;$ &lt;/span&gt;wget https://download.elastic.co/elasticsearch/elasticsearch/elasticsearch-1.4.5.tar.gz
&lt;span class="nv"&gt;$ &lt;/span&gt;tar zxf elasticsearch-1.4.5.tar.gz
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;安装插件：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; /data/software &lt;span class="c"&gt;# 安装分词插件&lt;/span&gt;
&lt;span class="nv"&gt;$ &lt;/span&gt;git clone -b 1.4.0 https://github.com/medcl/elasticsearch-rtf.git
&lt;span class="nv"&gt;$ &lt;/span&gt;&lt;span class="nb"&gt;cd &lt;/span&gt;elasticsearch-rtf
&lt;span class="nv"&gt;$ &lt;/span&gt;cp -vrf plugins/analysis-ik /data/softwares/elasticsearch-1.4.5/plugins/
&lt;span class="nv"&gt;$ &lt;/span&gt;cp -vrf config/ik config/mmseg /data/softwares/elasticsearch-1.4.5/config/


:::bash

&lt;span class="nv"&gt;$ &lt;/span&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; /data/software &lt;span class="c"&gt;# 监控插件&lt;/span&gt;
&lt;span class="nv"&gt;$ &lt;/span&gt;&lt;span class="nb"&gt;cd &lt;/span&gt;elasticsearch-1.4.5
&lt;span class="nv"&gt;$ &lt;/span&gt;bin/plugin -install mobz/elasticsearch-head &lt;span class="c"&gt;# head插件&lt;/span&gt;
&lt;span class="nv"&gt;$ &lt;/span&gt;bin/plugin -install lukas-vlcek/bigdesk     &lt;span class="c"&gt;# bigdesk插件&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;修改配置文件&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;cat /data/softwares/elasticsearch-1.4.5/config/elasticsearch.yml &lt;span class="p"&gt;|&lt;/span&gt; grep -Ev &lt;span class="s1"&gt;&amp;#39;^#|^$&amp;#39;&lt;/span&gt;
cluster.name: elasticsearch_dashboard
node.name: &lt;span class="s2"&gt;&amp;quot;es1&amp;quot;&lt;/span&gt;
node.master: &lt;span class="nb"&gt;true&lt;/span&gt;
node.data: &lt;span class="nb"&gt;true&lt;/span&gt;
index.number_of_shards: 5
index.number_of_replicas: 2
path.data: /data/softwares/elasticsearch-1.4.5/data
path.work: /data/softwares/elasticsearch-1.4.5/work
path.logs: /data/log/elasticsearch
path.plugins: /data/softwares/elasticsearch-1.4.5/plugins
network.bind_host: 192.168.1.2
network.publish_host: 192.168.1.2
network.host: 192.168.1.2
transport.tcp.port: 9300
http.port: 9200
indices.recovery.max_bytes_per_sec: 200mb
indices.recovery.concurrent_streams: 8
discovery.zen.minimum_master_nodes: 2
discovery.zen.ping.timeout: 10s
discovery.zen.ping.multicast.enabled: &lt;span class="nb"&gt;true&lt;/span&gt;
discovery.zen.ping.unicast.hosts: &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;192.168.1.2&amp;quot;&lt;/span&gt;, &lt;span class="s2"&gt;&amp;quot;192.168.1.6&amp;quot;&lt;/span&gt;, &lt;span class="s2"&gt;&amp;quot;192.168.1.7&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;
index:
  analysis:
    analyzer:
      standardPlusWordDelimiter:
        &lt;span class="nb"&gt;type&lt;/span&gt;: custom
        tokenizer: standard
        filter: &lt;span class="o"&gt;[&lt;/span&gt;standard, wordDelim, lowercase, stop, dict&lt;span class="o"&gt;]&lt;/span&gt;
      ik:
        &lt;span class="nb"&gt;alias&lt;/span&gt;: &lt;span class="o"&gt;[&lt;/span&gt;ik_analyzer&lt;span class="o"&gt;]&lt;/span&gt;
        &lt;span class="nb"&gt;type&lt;/span&gt;: ik
      ik_max_word:
        &lt;span class="nb"&gt;type&lt;/span&gt;: ik
        use_smart: &lt;span class="nb"&gt;false&lt;/span&gt;
&lt;span class="nb"&gt;      &lt;/span&gt;ik_smart:
        &lt;span class="nb"&gt;type&lt;/span&gt;: ik
        use_smart: &lt;span class="nb"&gt;true&lt;/span&gt;
&lt;span class="nb"&gt;      &lt;/span&gt;pinyin_ngram_analyzer:
        &lt;span class="nb"&gt;type&lt;/span&gt;: custom
        tokenizer: my_pinyin
        filter: &lt;span class="o"&gt;[&lt;/span&gt;standard,lowercase,nGram,trim,unique&lt;span class="o"&gt;]&lt;/span&gt;     
    tokenizer:
      my_pinyin:
        &lt;span class="nb"&gt;type&lt;/span&gt;: pinyin
        first_letter: prefix
        padding_char : &lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;
    filter:
      wordDelim:
        &lt;span class="nb"&gt;type&lt;/span&gt;: word_delimiter
        preserve_original: &lt;span class="nb"&gt;true&lt;/span&gt;
&lt;span class="nb"&gt;      &lt;/span&gt;dict:
        &lt;span class="nb"&gt;type&lt;/span&gt;: dictionary_decompounder
        word_list: &lt;span class="o"&gt;[&lt;/span&gt;cool, iris, fire, bug, flag, fox, grease, monkey, flash, block, forecast, screen, grab, cookie, auto, fill, text, all, so, think, mega, upload, download, video, map, spring, fix, input, clip, fly, lang, up, down, persona, css, html, all, http, ball, firefox, bookmark, chat, zilla, edit, menu, menus, status, bar, with, easy, sync, search, google, &lt;span class="nb"&gt;time&lt;/span&gt;, window, js, super, scroll, title, close, undo, user, inspect, inspector, browser, context, dictionary, mail, button, url, password, secure, image, new, tab, delete, click, name, smart, down, manager, open, query, net, link, blog, this, color, &lt;span class="k"&gt;select&lt;/span&gt;, key, keys, foxy, translate, word&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;注：
1. 删除了注释
2. 其它机器配置文件类似，只需要修改和&lt;span class="caps"&gt;IP&lt;/span&gt;相关的字段值&lt;/p&gt;
&lt;h2&gt;启动Elasticsearch&lt;/h2&gt;
&lt;p&gt;测试能否正常启动：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; /data/software/elasticsearch-1.4.5
&lt;span class="nv"&gt;$ &lt;/span&gt;bin/elasticsearch  &lt;span class="c"&gt;# 启动ES，测试是否可以正常启动&lt;/span&gt;
&lt;span class="nv"&gt;$ &lt;/span&gt;tail -f /data/log/elasticsearch/elasticsearch_dashboard.log &lt;span class="c"&gt;# 查看日志&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;监控插件使用&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;head:&amp;nbsp;http://&amp;lt;your-es-ip&amp;gt;:9200/_plugin/head/&lt;/li&gt;
&lt;li&gt;bigdesk:&amp;nbsp;http://&amp;lt;your-es-ip&amp;gt;:9200/_plugin/bigdesk/&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;配置supervisor&lt;/h1&gt;
&lt;p&gt;如果可以正常启动，我们通过supervisor管理Elasticsearch和Logstash。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;sudo pip install supervisor &lt;span class="c"&gt;# 后来拿到root权限，否则还要先弄Python virtual env&lt;/span&gt;
&lt;span class="nv"&gt;$ &lt;/span&gt;修改/etc/init.d/supervisor 以及 chkconfig 添加系统启动就不说了


:::bash

&lt;span class="nv"&gt;$ &lt;/span&gt;cat /etc/supervisor/supervisord.conf &lt;span class="p"&gt;|&lt;/span&gt; grep -Ev &lt;span class="s1"&gt;&amp;#39;^;|^$&amp;#39;&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;unix_http_server&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="nv"&gt;file&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/var/run/supervisor.sock    &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;the path to the socket file&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nv"&gt;chmod&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0700&lt;/span&gt;                       &lt;span class="p"&gt;;&lt;/span&gt; sockef file mode &lt;span class="o"&gt;(&lt;/span&gt;default 0700&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;rpcinterface:supervisor&lt;span class="o"&gt;]&lt;/span&gt;
supervisor.rpcinterface_factory &lt;span class="o"&gt;=&lt;/span&gt; supervisor.rpcinterface:make_main_rpcinterface
&lt;span class="o"&gt;[&lt;/span&gt;supervisord&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="nv"&gt;http_port&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/var/run/supervisor.sock &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;default is to run a UNIX domain socket server&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nv"&gt;logfile&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/data/log/supervisor/supervisord.log &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;main log file&lt;span class="p"&gt;;&lt;/span&gt;default &lt;span class="nv"&gt;$CWD&lt;/span&gt;/supervisord.log&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nv"&gt;logfile_maxbytes&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;50MB       &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;max main logfile bytes b4 rotation&lt;span class="p"&gt;;&lt;/span&gt;default 50MB&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nv"&gt;logfile_backups&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt;          &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;num of main logfile rotation backups&lt;span class="p"&gt;;&lt;/span&gt;default 10&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nv"&gt;loglevel&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;debug              &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;logging level&lt;span class="p"&gt;;&lt;/span&gt;default info&lt;span class="p"&gt;;&lt;/span&gt; others: debug,warn&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nv"&gt;pidfile&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/var/run/supervisord.pid &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;supervisord pidfile&lt;span class="p"&gt;;&lt;/span&gt;default supervisord.pid&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nv"&gt;nodaemon&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;false&lt;/span&gt;              &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;start in foreground &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;true&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;default &lt;span class="nb"&gt;false&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nv"&gt;minfds&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1024&lt;/span&gt;                 &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;min. avail startup file descriptors&lt;span class="p"&gt;;&lt;/span&gt;default 1024&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nv"&gt;minprocs&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;200&lt;/span&gt;                &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;min. avail process descriptors&lt;span class="p"&gt;;&lt;/span&gt;default 200&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nv"&gt;childlogdir&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/data/log/supervisor &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;AUTO&amp;#39;&lt;/span&gt; child log dir, default &lt;span class="nv"&gt;$TEMP&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;supervisorctl&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="nv"&gt;serverurl&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;unix:////var/run/supervisor.sock &lt;span class="p"&gt;;&lt;/span&gt; use a unix:// URL  &lt;span class="k"&gt;for&lt;/span&gt; a unix socket
&lt;span class="o"&gt;[&lt;/span&gt;include&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="nv"&gt;files&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; /etc/supervisor/conf.d/*.conf


:::bash

&lt;span class="nv"&gt;$ &lt;/span&gt;cat /etc/supervisor/conf.d/elasticsearch.conf 
&lt;span class="o"&gt;[&lt;/span&gt;program:elasticsearch&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="nb"&gt;command&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/data/softwares/elasticsearch-1.4.5/bin/elasticsearch -Xmx6g -Xms6g -XX:PermSize&lt;span class="o"&gt;=&lt;/span&gt;512m -Des.max-open-files&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;
&lt;span class="nv"&gt;directory&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/data/softwares/elasticsearch-1.4.5
&lt;span class="nv"&gt;user&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;work
&lt;span class="nv"&gt;autostart&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;
&lt;span class="nv"&gt;autorestart&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;
&lt;span class="nv"&gt;stdout_logfile&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/data/log/supervisor/elasticsearch.stdout
&lt;span class="nv"&gt;stderr_logfile&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/data/log/supervisor/elasticsearch.stderr


:::bash

&lt;span class="nv"&gt;$ &lt;/span&gt;cat /etc/supervisor/conf.d/logstash.conf 
&lt;span class="o"&gt;[&lt;/span&gt;program:logstash&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="nb"&gt;command&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/data/softwares/logstash-1.4.3/bin/logstash -f logstash.conf
&lt;span class="nv"&gt;directory&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/data/softwares/logstash-1.4.3
&lt;span class="nv"&gt;user&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;work
&lt;span class="nv"&gt;autostart&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;
&lt;span class="nv"&gt;autorestart&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;
&lt;span class="nv"&gt;stdout_logfile&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/data/log/supervisor/logstash.stdout
&lt;span class="nv"&gt;stderr_logfile&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/data/log/supervisor/logstash.stderr
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;常用的&lt;span class="caps"&gt;ES&lt;/span&gt;命令别名&lt;/h1&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;tail -n3 ~/.bashrc 
&lt;span class="nb"&gt;alias &lt;/span&gt;&lt;span class="nv"&gt;esh&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;curl &lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;ip -4 -o addr show dev eth0 &lt;span class="p"&gt;|&lt;/span&gt; awk &lt;span class="s1"&gt;&amp;#39;{split($4,a,&amp;quot;/&amp;quot;);print a[1]}&amp;#39;&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;:9200/_cluster/health?pretty&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;alias &lt;/span&gt;&lt;span class="nv"&gt;esi&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;curl &lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;ip -4 -o addr show dev eth0 &lt;span class="p"&gt;|&lt;/span&gt; awk &lt;span class="s1"&gt;&amp;#39;{split($4,a,&amp;quot;/&amp;quot;);print a[1]}&amp;#39;&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;:9200/_cat/indices?pretty&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;alias &lt;/span&gt;&lt;span class="nv"&gt;ess&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;curl &lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;ip -4 -o addr show dev eth0 &lt;span class="p"&gt;|&lt;/span&gt; awk &lt;span class="s1"&gt;&amp;#39;{split($4,a,&amp;quot;/&amp;quot;);print a[1]}&amp;#39;&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;:9200/_cat/shards&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;alias &lt;/span&gt;&lt;span class="nv"&gt;esdownlocal&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;curl &lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;ip -4 -o addr show dev eth0 &lt;span class="p"&gt;|&lt;/span&gt; awk &lt;span class="s1"&gt;&amp;#39;{split($4,a,&amp;quot;/&amp;quot;);print a[1]}&amp;#39;&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;:9200/_cluster/nodes/_local/_shutdown&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;alias &lt;/span&gt;&lt;span class="nv"&gt;esdownall&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;curl &lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;ip -4 -o addr show dev eth0 &lt;span class="p"&gt;|&lt;/span&gt; awk &lt;span class="s1"&gt;&amp;#39;{split($4,a,&amp;quot;/&amp;quot;);print a[1]}&amp;#39;&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;:9200/_shutdown&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;升级&lt;/h1&gt;
&lt;p&gt;通过上面步骤，配置好3台Elasticsearch 1.4.5，然后，将这三台&lt;span class="caps"&gt;ES&lt;/span&gt;机器加入以前的Elasticsearch 1.2.1的集群。
数据逐步同步到&lt;span class="caps"&gt;ES&lt;/span&gt; 1.4.5后，逐步将&lt;span class="caps"&gt;ES&lt;/span&gt;&amp;nbsp;1.2.1的机器停掉。&lt;/p&gt;
&lt;h1&gt;碰到的问题&lt;/h1&gt;
&lt;h2&gt;没有将shard同步到新加入的&lt;span class="caps"&gt;ES&lt;/span&gt;&amp;nbsp;1.4.5机器上&lt;/h2&gt;
&lt;p&gt;修改number_of_replicas，根据机器个数修改。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;curl -XPUT &lt;span class="s1"&gt;&amp;#39;&amp;lt;your-ip&amp;gt;:9200/&amp;lt;your-index&amp;gt;/_settings&amp;#39;&lt;/span&gt; -d &lt;span class="s1"&gt;&amp;#39;{&lt;/span&gt;
&lt;span class="s1"&gt;     &amp;quot;index&amp;quot; : {&lt;/span&gt;
&lt;span class="s1"&gt;         &amp;quot;number_of_replicas&amp;quot; : 2&lt;/span&gt;
&lt;span class="s1"&gt;      }&lt;/span&gt;
&lt;span class="s1"&gt;}&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;明确让某个index的某个shard分配到指定机器上。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;curl -XPOST &lt;span class="s1"&gt;&amp;#39;&amp;lt;your-es-ip&amp;gt;:9200/_cluster/reroute&amp;#39;&lt;/span&gt; -d &lt;span class="s1"&gt;&amp;#39;{&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;commands&amp;quot; : [ {&lt;/span&gt;
&lt;span class="s1"&gt;        &amp;quot;move&amp;quot; :&lt;/span&gt;
&lt;span class="s1"&gt;            {&lt;/span&gt;
&lt;span class="s1"&gt;              &amp;quot;index&amp;quot; : &amp;quot;your-index&amp;quot;, &amp;quot;shard&amp;quot; : shard-no,&lt;/span&gt;
&lt;span class="s1"&gt;              &amp;quot;from_node&amp;quot; : &amp;quot;es-node-name&amp;quot;, &amp;quot;to_node&amp;quot; : &amp;quot;es-node-name&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;            }&lt;/span&gt;
&lt;span class="s1"&gt;        },&lt;/span&gt;
&lt;span class="s1"&gt;        {&lt;/span&gt;
&lt;span class="s1"&gt;          &amp;quot;allocate&amp;quot; : {&lt;/span&gt;
&lt;span class="s1"&gt;              &amp;quot;index&amp;quot; : &amp;quot;your-index&amp;quot;, &amp;quot;shard&amp;quot; : shard-no, &amp;quot;node&amp;quot; : &amp;quot;es-node-name&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;          }&lt;/span&gt;
&lt;span class="s1"&gt;        }&lt;/span&gt;
&lt;span class="s1"&gt;    ]&lt;/span&gt;
&lt;span class="s1"&gt;}&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;比如：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;curl -XPOST &lt;span class="s1"&gt;&amp;#39;localhost:9200/_cluster/reroute&amp;#39;&lt;/span&gt; -d &lt;span class="s1"&gt;&amp;#39;{&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;commands&amp;quot; : [ {&lt;/span&gt;
&lt;span class="s1"&gt;        &amp;quot;move&amp;quot; :&lt;/span&gt;
&lt;span class="s1"&gt;            {&lt;/span&gt;
&lt;span class="s1"&gt;              &amp;quot;index&amp;quot; : &amp;quot;logstash_v1_new&amp;quot;, &amp;quot;shard&amp;quot; : 4,&lt;/span&gt;
&lt;span class="s1"&gt;              &amp;quot;from_node&amp;quot; : &amp;quot;Yojimbo&amp;quot;, &amp;quot;to_node&amp;quot; : &amp;quot;es3&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;            }&lt;/span&gt;
&lt;span class="s1"&gt;        },&lt;/span&gt;
&lt;span class="s1"&gt;        {&lt;/span&gt;
&lt;span class="s1"&gt;          &amp;quot;allocate&amp;quot; : {&lt;/span&gt;
&lt;span class="s1"&gt;              &amp;quot;index&amp;quot; : &amp;quot;logstash_v1_new&amp;quot;, &amp;quot;shard&amp;quot; : 4, &amp;quot;node&amp;quot; : &amp;quot;es2&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;          }&lt;/span&gt;
&lt;span class="s1"&gt;        }&lt;/span&gt;
&lt;span class="s1"&gt;    ]&lt;/span&gt;
&lt;span class="s1"&gt;}&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;参考：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href="http://stackoverflow.com/questions/23656458/elasticsearch-what-to-do-with-unassigned-shards/"&gt;http://stackoverflow.com/questions/23656458/elasticsearch-what-to-do-with-unassigned-shards/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://stackoverflow.com/questions/25135869/how-to-rebalance-shard-elasticsearch"&gt;http://stackoverflow.com/questions/25135869/how-to-rebalance-shard-elasticsearch&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://t37.net/how-to-fix-your-elasticsearch-cluster-stuck-in-initializing-shards-mode.html"&gt;https://t37.net/how-to-fix-your-elasticsearch-cluster-stuck-in-initializing-shards-mode.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://stackoverflow.com/questions/19967472/elasticsearch-unassigned-shards-how-to-fix"&gt;http://stackoverflow.com/questions/19967472/elasticsearch-unassigned-shards-how-to-fix&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;</summary><category term="Dashboard"></category><category term="Elasticsearch"></category><category term="Logstash"></category><category term="ELK"></category></entry></feed>